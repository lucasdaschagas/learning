!function(t,e){"use strict";function i(t){return function(e,i,a){if(t.message.hasOwnProperty(i)){var n=t.message[i];return(a||[]).forEach((function(t,e){n=n.replace(new RegExp("\\{"+e+"\\}","g"),t)})),n}}}var a,n=(a=[],{register:function(t){a.push(t)},message:function(n,o,s){for(var l=a.length-1;l>=0;l--){var r=a[l];if(n.is(r.selector)){var c=(t.isFunction(r.message)?r.message:i(r)).call(n,n,o,s);if(c)return c}}e&&e.warn("Message not found:",o,n[0])}});t.fn.message=function(t,e){return n.message(this.first(),t,e)},t.message={register:function(e){t.each(arguments,(function(){n.register(this)}))}}}(jQuery,window.console),function(t,e){"use strict";if(!t.documentElement.classList.contains("skipCoral2Validation")&&!t.head.querySelector(".skipCoral2Validation")){var i,a,n,o=(i=["input","select","textarea","button","object","keygen","[role=checkbox]","[role=radio]","[role=combobox]","[role=listbox]","[role=radiogroup]","[role=tree]","[role=slider]","[role=spinbutton]","[role=textbox]"].reverse().join(","),a=["input:not([readonly]):not([disabled]):not([type=hidden]):not([type=reset]):not([type=button])","select","textarea:not([readonly])","button[type=submit]","[role=checkbox]:not([aria-disabled=true])","[role=radio]:not([aria-disabled=true])","[role=combobox]:not([aria-disabled=true])","[role=listbox]:not([aria-disabled=true])","[role=radiogroup]:not([aria-disabled=true])","[role=tree]:not([aria-disabled=true])","[role=slider]:not([aria-disabled=true])","[role=spinbutton]:not([aria-disabled=true])","[role=textbox]:not([aria-disabled=true]):not([aria-readonly=true])"].reverse().join(","),n=[],{isSummittable:function(t){return t.is(i)},submittables:function(t){return t.find(i)},isCandidate:function(t){return t.is(a)},api:function(t){if(this.isSummittable(t))return this.apiNoCheck(t)},apiNoCheck:function(t){return t.data("validator")||function(t,e){var i=function(t,e){return new s(t,e)}(t,e);return t.data("validator",i),i}(t,this)},register:function(t){n.push(t)},validators:function(){return n}});s.prototype={willValidate:function(){return this.registry.isCandidate(this.el)},setCustomValidity:function(t){this.customMessage=t},getValidity:function(){return this.state},checkValidity:function(t){return t=t||{},!this.willValidate()||(this.isValidated=!0,this.customMessage?(t.suppressEvent||this.el.trigger(r()),!1):(this.message=null,l(this.registry.validators(),(function(t){if(!t.validate||!this.el.is(t.selector))return!0;var e=t.validate(this.el);return!e||(this.message=e,!1)}),this),this.message?(t.suppressEvent||this.el.trigger(r()),!1):(t.suppressEvent||this.el.trigger("valid"),!0)))},getValidationMessage:function(){return this.willValidate()&&(this.customMessage||this.message)||""},updateUI:function(){var t;t=this.getValidity().isValid()?function(t){return!t.clear||!this.el.is(t.selector)||t.clear(this.el)===e.validator.CONTINUE}:function(t){return!t.show||!this.el.is(t.selector)||t.show(this.el,this.getValidationMessage())===e.validator.CONTINUE},l(this.registry.validators(),t,this)}},e.extend(e.expr[":"],{submittable:function(t){return o.isSummittable(e(t))}}),e.fn.willValidate=function(){var t=o.api(this.first());return!!t&&t.willValidate()},e.fn.validationMessage=function(){var t=o.api(this.first());return t?t.getValidationMessage():""},e.fn.checkValidity=function(){var t=o.api(this.first());return!t||t.checkValidity()},e.fn.setCustomValidity=function(t){return this.each((function(){var i=o.api(e(this));i&&i.setCustomValidity(t)}))},e.fn.updateErrorUI=function(){return this.each((function(){var t=o.api(e(this));t&&t.updateUI()}))},e.validator={CONTINUE:1,STOP:2,register:function(){e.each(arguments,(function(){o.register(this)}))},isValid:function(t,i){var a=!0;return o.submittables(t).each((function(){var t=e(this),n=o.apiNoCheck(t),s=n.getValidity();if(!(s.isValidated()?s.isValid():n.checkValidity({suppressEvent:i})))return a=!1,!1})),a}},t.addEventListener("submit",(function(t){var i=e(t.target);!i.is("form")||!0===i.prop("noValidate")||void 0===i.prop("noValidate")&&void 0!==i.attr("novalidate")||c(i,o)||(t.stopPropagation(),t.preventDefault())}),!0)}function s(t,e){var i;this.el=t,this.registry=e,this.message=null,this.customMessage=null,this.isValidated=!1,this.state=(i=this,{getCustomError:function(){return!!i.customMessage},isValid:function(){return!i.customMessage&&!i.message},isValidated:function(){return i.isValidated}})}function l(t,e,i){for(var a=t.length-1;a>=0;a--)if(!e.call(i,t[a],a,t))return!1;return!0}function r(){return e.Event("invalid",{isJqueryValidator:!0})}function c(t,i){var a=function(t,i){return i.submittables(t).map((function(){var t=e(this);if(!i.apiNoCheck(t).checkValidity({suppressEvent:!0}))return this})).map((function(){var t=r();if(e(this).trigger(t),!t.isDefaultPrevented())return this}))}(t,i);return!(a.length>0)||(a.each((function(){i.apiNoCheck(e(this)).updateUI()})),!1)}}(document,jQuery),function(t){CUI.Accordion=new Class({toString:"Accordion",extend:CUI.Widget,construct:function(t){this._parseAttributes(),this._setAccordion(),this._setListeners(),this._makeAccessible(),this._updateDOMForDisabled()},defaults:{active:!1,disabled:!1,iconClassCollapsed:"coral-Icon--chevronRight",iconClassExpanded:"coral-Icon--chevronDown"},isAccordion:!1,_parseAttributes:function(){var t=this.$element.attr("data-icon-class-collapsed");t&&(this.options.iconClassCollapsed=t);var e=this.$element.attr("data-icon-class-expanded");e&&(this.options.iconClassExpanded=e)},_setAccordion:function(){var t=this.$element;if(this.isAccordion=!t.hasClass("coral-Collapsible")&&"collapsible"!==t.data("init"),this.isAccordion){t.addClass("coral-Accordion");var e=t.children(".is-active").index();!1!==this.options.active?e=this.options.active:this.options.active=e,t.children().each(function(t,i){this._initElement(i,t!=e)}.bind(this))}else this.options.active=t.hasClass("is-active"),this._initElement(t,!this.options.active)},_setListeners:function(){var t=this.isAccordion?"> .coral-Accordion-item > .coral-Accordion-header":"> .coral-Collapsible-header";this.$element.on("click",t,this._toggle.bind(this)),this.$element.on("change:active",this._changeActive.bind(this));var e=this.isAccordion?".coral-Accordion-header":".coral-Collapsible-header";this.$element.on("selectstart",e,(function(t){t.preventDefault()})),this.on("change:disabled",function(t){this._updateDOMForDisabled()}.bind(this))},_updateDOMForDisabled:function(){this.options.disabled?this.$element.addClass("is-disabled").attr("aria-disabled",!0).find("[role=tab], > [role=button]").removeAttr("tabindex").attr("aria-disabled",!0):this.$element.removeClass("is-disabled").attr("aria-disabled",!1).find("[role=tab], > [role=button]").each((function(e,i){var a=t(i);a.removeAttr("aria-disabled").attr("tabindex",a.is("[aria-selected=true][aria-controls], [aria-expanded][aria-controls]")?0:-1)}))},_toggle:function(e){if(!this.options.disabled){var i=t(e.target).closest(this._getCollapsibleSelector()),a=!i.hasClass("is-active")&&(!this.isAccordion||i.index());this.setActive(a)}},_changeActive:function(){if(this.isAccordion){if(this._collapse(this.$element.children(".is-active")),!1!==this.options.active){var t=this.$element.children().eq(this.options.active);this._expand(t)}}else this.options.active?this._expand(this.$element):this._collapse(this.$element)},setActive:function(t){t!==this.options.active&&(this.options.active=t,this._changeActive())},_initElement:function(e,i){e=t(e),0===this._getHeaderElement(e).length&&this._prependHeaderElement(e),0===this._getHeaderIconElement(e).length&&this._prependHeaderIconElement(e),0===this._getContentElement(e).length&&this._prependContentElement(e),e.addClass(this.isAccordion?"coral-Accordion-item":"coral-Collapsible");var a=this._getHeaderElement(e),n=this._getContentElement(e),o=this._getHeaderIconElement(e);a.prependTo(e),i?(e.removeClass("is-active"),o.hasClass("coral-Icon")||o.addClass("coral-Icon coral-Icon--sizeXS"),o.removeClass(this.options.iconClassExpanded).addClass(this.options.iconClassCollapsed),n.hide()):(e.addClass("is-active"),o.hasClass("coral-Icon")||o.addClass("coral-Icon coral-Icon--sizeXS"),o.removeClass(this.options.iconClassCollapsed).addClass(this.options.iconClassExpanded),n.show())},_collapse:function(t){var e=this._getHeaderElement(t),i=this._getContentElement(t);this._getHeaderIconElement(t).removeClass(this.options.iconClassExpanded).addClass(this.options.iconClassCollapsed),i.slideUp({duration:"fast",complete:function(){t.removeClass("is-active"),t.trigger("deactivate")},progress:function(e,i,a){t.trigger("collapse",{animation:e,progress:i,remainingMs:a})}}),this.isAccordion?e.attr({tabindex:e.is(document.activeElement)?0:-1,"aria-selected":!1}):e.attr({"aria-expanded":!1}),i.attr({"aria-hidden":!0,"aria-expanded":!1})},_expand:function(t){var e=this._getHeaderElement(t),i=this._getContentElement(t),a=this._getHeaderIconElement(t);t.addClass("is-active"),a.removeClass(this.options.iconClassCollapsed).addClass(this.options.iconClassExpanded),i.slideDown({duration:"fast",complete:function(){t.trigger("activate")},progress:function(e,i,a){t.trigger("expand",{animation:e,progress:i,remainingMs:a})}}),this.isAccordion?e.attr({tabindex:0,"aria-selected":!0}):e.attr({"aria-expanded":!0}),i.attr({"aria-hidden":!1,"aria-expanded":!0}).show()},_getCollapsibleSelector:function(){return this.isAccordion?".coral-Accordion-item":".coral-Collapsible"},_getHeaderElement:function(t){var e=this.isAccordion?"> .coral-Accordion-header":"> .coral-Collapsible-header";return t.find(e)},_getHeaderFirstElement:function(t){var e=this.isAccordion?"> .coral-Accordion-header:first":"> .coral-Collapsible-header:first";return t.find(e)},_prependHeaderElement:function(t){var e=this.isAccordion?"coral-Accordion-header":"coral-Collapsible-header";t.prepend('<h3 class="'+e+'">&nbsp;</h3>')},_getHeaderIconElement:function(t){var e=this.isAccordion?"> .coral-Accordion-header > i":"> .coral-Collapsible-header > i";return t.find(e)},_prependHeaderIconElement:function(t){this._getHeaderElement(t).prepend("<i></i>")},_getContentElement:function(t){var e=this.isAccordion?"> .coral-Accordion-content":"> .coral-Collapsible-content";return t.find(e)},_prependContentElement:function(t){var e=this.isAccordion?"coral-Accordion-content":"coral-Collapsible-content";t.prepend('<div class="'+e+'"></div>')},_makeAccessible:function(){var e,i,a,n,o,s="accordion-"+(new Date).getTime()+"-";this.isAccordion?(this.$element.attr({role:"tablist"}),this.$element.children(".coral-Accordion-item").each((function(e,i){var a=t(i),n=a.find("> .coral-Accordion-header:first"),o=a.hasClass("is-active"),l=s+"panel-"+e,r=n.next("div");a.attr({role:"presentation"}),n.attr({role:"tab",id:n.attr("id")||s+"tab-"+e,"aria-controls":l,"aria-selected":o,tabindex:o?0:-1}),r.attr({role:"tabpanel",id:l,"aria-labelledby":n.attr("id"),"aria-expanded":o,"aria-hidden":!o})}))):(s="collapsible-"+(new Date).getTime()+"-",e=this.$element,i=this._getHeaderFirstElement(e),n=e.hasClass("is-active"),o=s+"panel",a=i.next("div"),i.attr({role:"button",id:i.attr("id")||s+"heading","aria-controls":o,"aria-expanded":n,tabindex:0}),a.attr({id:o,"aria-labelledby":i.attr("id"),"aria-expanded":n,"aria-hidden":!n})),this.$element.on("keydown",":focusable",this._onKeyDown.bind(this)),this.$element.on("focusin.accordion",":focusable",this._onFocusIn.bind(this)),this.$element.on("focusout.accordion",".coral-Accordion-header:focusable",this._onFocusOut.bind(this)),this.$element.on("touchstart.accordion, mousedown.accordion",".coral-Accordion-header:focusable",this._onMouseDown.bind(this))},_onKeyDown:function(e){var i=t(e.currentTarget).closest(this._getCollapsibleSelector()),a=this._getHeaderFirstElement(i),n=t(e.currentTarget).is(a),o=!0;switch(e.which){case 13:case 32:n?a.trigger("click"):o=!1;break;case 33:case 37:case 38:n&&this.isAccordion||33===e.which&&(e.metaKey||e.ctrlKey)?0===this._getHeaderFirstElement(i.prev()).focus().length&&this.$element.find("> .coral-Accordion-item:last > .coral-Accordion-header:first").focus():n||!e.metaKey&&!e.ctrlKey?o=!1:a.focus();break;case 34:case 39:case 40:n&&this.isAccordion?0===this._getHeaderFirstElement(i.next()).focus().length&&this.$element.find("> .coral-Accordion-item:first > .coral-Accordion-header:first").focus():n||34!==e.which||!e.metaKey&&!e.ctrlKey?o=!1:a.focus();break;case 36:n&&this.isAccordion?this.$element.find("> .coral-Accordion-item:first > .coral-Accordion-header:first").focus():o=!1;break;case 35:n&&this.isAccordion?this.$element.find("> .coral-Accordion-item:last > .coral-Accordion-header:first").focus():o=!1;break;default:o=!1}!0===o&&e.preventDefault()},_onFocusIn:function(e){var i=t(e.currentTarget).closest(this._getCollapsibleSelector()),a=this._getHeaderFirstElement(i),n=t(e.currentTarget).is(a);this.options.disabled||(n&&(this.isAccordion&&this.$element.find("> .coral-Accordion-item > .coral-Accordion-header[role=tab]").attr("tabindex",-1),a.data("collapsible-mousedown")?a.removeData("collapsible-mousedown"):i.focus()),a.attr("tabindex",0))},_onFocusOut:function(e){var i=t(e.currentTarget).closest(this._getCollapsibleSelector()),a=this._getHeaderFirstElement(i);t(e.currentTarget).is(a)&&i.blur().removeData("collapsible-mousedown")},_onMouseDown:function(e){var i=t(e.currentTarget).closest(this._getCollapsibleSelector()),a=this._getHeaderFirstElement(i);t(e.currentTarget).is(a)&&a.data("collapsible-mousedown",!0)}}),CUI.Widget.registry.register("accordion",CUI.Accordion),t(document).on("cui-contentloaded.data-api",(function(e){CUI.Accordion.init(t("[data-init~=accordion],[data-init~=collapsible]",e.target))}))}(window.jQuery),function(t){CUI.Alert=new Class({toString:"Alert",extend:CUI.Widget,construct:function(t){for(var e in this.$element.delegate('[data-dismiss="alert"]',"click.dismiss.alert",this.hide),this.$element.addClass("coral-Alert"),this.$element.on("change:heading",this._setHeading.bind(this)),this.$element.on("change:content",this._setContent.bind(this)),this.$element.on("change:type",this._setType.bind(this)),this.$element.on("change:closeable",this._setCloseable.bind(this)),this.$element.on("change:size",this._setSize.bind(this)),this._types)if(this.$element.hasClass(this._types[e].class))return this.options.type=e,!1;for(var i in this._sizes)if(this.$element.hasClass(this._sizes[i]))return this.options.size=i,!1;this._setCloseable(),this._setType(),this._setSize(),this._setHeading(),this._setContent()},defaults:{type:"error",size:"small",heading:void 0,visible:!0,closeable:!0},_types:{error:{class:"coral-Alert--error",iconClass:"coral-Icon--alert"},notice:{class:"coral-Alert--notice",iconClass:"coral-Icon--alert"},success:{class:"coral-Alert--success",iconClass:"coral-Icon--checkCircle"},help:{class:"coral-Alert--help",iconClass:"coral-Icon--helpCircle"},info:{class:"coral-Alert--info",iconClass:"coral-Icon--infoCircle"}},_sizes:{small:"",large:"coral-Alert--large"},_setContent:function(){"string"==typeof this.options.content&&this.$element.find("div").html(this.options.content)},_setHeading:function(){"string"==typeof this.options.heading&&this.$element.find("strong").html(this.options.heading)},_setType:function(){if(this._isValidType(this.options.type)){var t=this.$element.find("> .coral-Icon");for(var e in this._types)this.$element.removeClass(this._types[e].class),t.removeClass(this._types[e].iconClass);this.$element.addClass(this._types[this.options.type].class);var i=this._types[this.options.type].iconClass;t.addClass(i)}},_setSize:function(){this._isValidSize(this.options.size)&&("small"===this.options.size?this.$element.removeClass(this._sizes.large):this.$element.addClass(this._sizes.large))},_setCloseable:function(){var t=this.$element.find(".coral-Alert-closeButton");!t.length&&this.options.closeable?this.$element.prepend('<button class="coral-MinimalButton coral-Alert-closeButton" title="Close" data-dismiss="alert"><i class="coral-Icon coral-Icon--sizeXS coral-Icon--close coral-MinimalButton-icon"></i></button>'):t[this.options.closeable?"show":"hide"]()},_isValidType:function(t){return"string"==typeof t&&this._types.hasOwnProperty(t)},_isValidSize:function(t){return"string"==typeof t&&this._sizes.hasOwnProperty(t)},_fixType:function(t){return this._isValidType(t)?t:this.defaults.type},_fixHeading:function(t){return void 0===t?this._fixType(this.options.type).toUpperCase():t}}),CUI.Widget.registry.register("alert",CUI.Alert),CUI.options.dataAPI&&t(document).on("click.alert.data-api",'[data-dismiss="alert"]',(function(e){t(e.currentTarget).parent().hide(),e.preventDefault()}))}(window.jQuery),function(t){CUI.CharacterCount=new Class({toString:"CharacterCount",extend:CUI.Widget,construct:function(e){this.$input=t(this.options.related),this.$input.attr("maxlength")&&(this.options.maxlength=this.$input.attr("maxlength")),this.$input.removeAttr("maxlength"),this.$input.on("input",this._render.bind(this)),this.$element.on("change:maxlength",this._render.bind(this)),this.$element.attr("aria-live","polite"),this._render()},defaults:{maxlength:null},_getLength:function(){return this.$input.is("input,textarea")?this.$input.val().length:this.$input.text().length},_render:function(){var t=this._getLength(),e=!!this.options.maxlength&&t>this.options.maxlength;this.$input.toggleClass("is-invalid",e),this.$element.toggleClass("is-invalid",e),this.$element.text(this.options.maxlength?this.options.maxlength-t:t)}}),CUI.Widget.registry.register("character-count",CUI.CharacterCount),t(document).on("cui-contentloaded.data-api",(function(e){CUI.CharacterCount.init(t("[data-init~=character-count]",e.target))}))}(window.jQuery),function(t){"use strict";CUI.CycleButton=new Class({toString:"CycleButton",extend:CUI.Widget,construct:function(){this.$element.on("click",".coral-CycleButton-button",(function(e){if(!e._cycleButton){e.stopImmediatePropagation(),e.preventDefault();var i,a,n,o=t(e.delegateTarget).find(".coral-CycleButton-button"),s=(i=o,-1===(n=(a=this)?i.index(a):-1)||n===i.length-1?i.eq(0):i.eq(n+1));o.removeClass("is-active"),s.addClass("is-active").focus();var l=t.Event("click",{_cycleButton:!0});s.trigger(l)}}))}}),CUI.Widget.registry.register("cyclebutton",CUI.CycleButton),t(document).on("cui-contentloaded.data-api",(function(e){CUI.CycleButton.init(t("[data-init~='cyclebutton']",e.target))}))}(window.jQuery),CUI.util.HTTP={isOkStatus:function(t){try{return 0===String(t).indexOf("2")}catch(t){return!1}},html5UploadSupported:function(){var t=new XMLHttpRequest;return!!(t&&"upload"in t&&"onprogress"in t.upload)}},function(t){CUI.FileUpload=new Class({toString:"FileUpload",extend:CUI.Widget,construct:function(t){this._render(),this.inputElement.on("change",function(t){this.options.disabled||this._onFileSelectionChange(t)}.bind(this)),this._makeAccessible()},defaults:{name:"file",placeholder:null,uploadUrl:null,uploadUrlBuilder:null,disabled:!1,multiple:!1,sizeLimit:null,mimeTypes:[],autoStart:!1,fileNameParameter:null,useHTML5:!0,dropZone:null,events:{}},inputElement:null,$inputContainer:null,fileNameElement:null,uploadQueue:[],_render:function(){if(this.$inputContainer=this.$element.find(".coral-FileUpload-trigger"),this.inputElement=this.$inputContainer.find(".coral-FileUpload-input"),this._readDataFromMarkup(),CUI.util.HTTP.html5UploadSupported()||(this.options.useHTML5=!1),this._createMissingElements(),this.options.events&&"object"==typeof this.options.events)for(var t in this.options.events)this._registerEventHandler(t,this.options.events[t]);this.options.useHTML5?this._registerDropZone():this.options.dropZone=null,this.options.placeholder||(this.options.placeholder=this.inputElement.attr("placeholder")),this.options.autoStart&&this._registerEventHandler("fileselected",(function(t){t.fileUpload.uploadFile(t.item)})),this.options.uploadUrlBuilder&&(this.options.uploadUrl=this.options.uploadUrlBuilder(this)),this.options.uploadUrl&&!/\$\{.+\}/.test(this.options.uploadUrl)||(this.options.disabled=!0),this._update()},_makeAccessible:function(){if(this.$inputContainer.is("button")){var e=t("<span>"),i=this.$inputContainer.prop("attributes");t.each(i,(function(){e.attr(this.name,this.value)})),e.insertBefore(this.$inputContainer),e.append(this.$inputContainer.children()),this.$inputContainer.remove(),this.$inputContainer=e}if((this.inputElement.attr("id")&&0===t('label[for="'+this.inputElement.attr("id")+'"]').length||0===this.inputElement.closest("label").text().trim().length)&&this.inputElement.is("[title]:not([aria-label]):not([aria-labelledby])")){this.inputElement.attr("id")||this.inputElement.attr("id",CUI.util.getNextId());var a=t("<label>"),n=this.$element.find(".coral-FileUpload-trigger .coral-Icon");n.length||(n=this.$element.find(".coral-FileUpload-trigger input")),a.attr("for",this.inputElement.attr("id")).text(this.inputElement.attr("title")),this.inputElement.closest(".coral-Icon").length&&a.addClass("u-coral-screenReaderOnly"),n.after(a)}this.inputElement.on("focusin.cui-fileupload focusout.cui-fileupload",this._toggleIsFocused.bind(this))},_toggleIsFocused:function(t){this.$inputContainer.toggleClass("is-focused","focusin"===t.type)},_registerDropZone:function(){var e=this;e.options.dropZone||(e.$element.addClass("coral-FileUpload--dropSupport"),e.options.dropZone=e.$element);try{e.options.dropZone=t(e.options.dropZone)}catch(t){delete e.options.dropZone}e.options.dropZone&&e.options.dropZone.on("dragenter",(function(t){return e._isActive()&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e.$element.trigger({type:"dropzonedragenter",originalEvent:t,fileUpload:e})),!1})).on("dragover",(function(t){return e._isActive()&&(e.isDragOver=!0,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e.$element.trigger({type:"dropzonedragover",originalEvent:t,fileUpload:e})),!1})).on("dragleave",(function(t){return e._isActive()&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e.isDragOver=!1,window.setTimeout((function(){e.isDragOver||e.$element.trigger({type:"dropzonedragleave",originalEvent:t,fileUpload:e})}),1)),!1})).on("drop",(function(t){if(e._isActive()){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var i=t.originalEvent.dataTransfer.files;e.$element.trigger({type:"dropzonedrop",originalEvent:t,files:i,fileUpload:e}),e._onFileSelectionChange(t,i)}return!1}))},_registerEventHandler:function(t,e){this.$element.on(t,e)},_createMissingElements:function(){var e=this.options.useHTML5&&this.options.multiple;0===this.inputElement.length?(this.inputElement=t("<input/>",{type:"file",class:"coral-FileUpload-input",name:this.options.name,multiple:e}),this.$inputContainer.prepend(this.inputElement)):this.inputElement.attr("multiple",e)},_readDataFromMarkup:function(){var e=this;this.inputElement.attr("name")&&(this.options.name=this.inputElement.attr("name")),this.inputElement.attr("placeholder")&&(this.options.placeholder=this.inputElement.attr("placeholder")),this.inputElement.data("placeholder")&&(this.options.placeholder=this.inputElement.data("placeholder")),(this.inputElement.attr("disabled")||this.inputElement.data("disabled"))&&(this.options.disabled=!0),(this.inputElement.attr("multiple")||this.inputElement.data("multiple"))&&(this.options.multiple=!0),this.inputElement.data("uploadUrl")&&(this.options.uploadUrl=this.inputElement.data("uploadUrl")),this.inputElement.data("uploadUrlBuilder")&&(this.options.uploadUrlBuilder=CUI.util.buildFunction(this.inputElement.data("uploadUrlBuilder"),["fileUpload"])),this.inputElement.data("mimeTypes")&&(this.options.mimeTypes=this.inputElement.data("mimeTypes")),this.inputElement.data("sizeLimit")&&(this.options.sizeLimit=this.inputElement.data("sizeLimit")),this.inputElement.data("autoStart")&&(this.options.autoStart=!0),this.inputElement.data("usehtml5")&&(this.options.useHTML5=!0===this.inputElement.data("usehtml5")),this.inputElement.data("dropzone")&&(this.options.dropZone=this.inputElement.data("dropzone")),this.inputElement.data("fileNameParameter")&&(this.options.fileNameParameter=this.inputElement.data("fileNameParameter"));var i=this.inputElement.length?this.inputElement.get(0):void 0;i&&t.each(i.attributes,(function(t,i){var a=/^data-event-(.*)$/.exec(i.name);if(a&&a.length>1){var n=CUI.util.buildFunction(i.value,["event"]);n&&(e.options.events[a[1]]=n.bind(e))}}))},_update:function(){this.options.placeholder&&this.inputElement.attr("placeholder",this.options.placeholder),this.options.disabled?(this.$element.addClass("is-disabled"),this.$inputContainer.addClass("is-disabled"),this.inputElement.attr("disabled","disabled")):(this.$element.removeClass("is-disabled"),this.$inputContainer.removeClass("is-disabled"),this.inputElement.removeAttr("disabled"))},_onFileSelectionChange:function(t,e){var i=0,a=0;if(this.options.useHTML5){e=e||t.target.files;for(var n=0;n<e.length;n++)this._addFile(e[n])?i++:a++}else this._addFile(t.target)?i++:a++;this.$element.trigger({type:"filelistprocessed",addedCount:i,rejectedCount:a,fileUpload:this})},_addFile:function(e){var i,a;if(this.options.useHTML5?(i=e.name,a=e.type):i=t(e).attr("value")||e.value,a=a||CUI.FileUpload.MimeTypes.getMimeTypeFromFileName(i),-1!==i.lastIndexOf("\\")&&(i=i.substring(i.lastIndexOf("\\")+1)),this.options.fileNameParameter&&!this.options.autoStart&&(this.fileNameElement||(this.fileNameElement=t('input[name="'+this.options.fileNameParameter+'"]'),0===this.fileNameElement.length&&(this.fileNameElement=t("<input/>",{type:"hidden",name:this.options.fileNameParameter}),this.fileNameElement.appendTo(this.$element))),this.fileNameElement.val(i)),!this._getQueueItemByFileName(i)){var n={fileName:i};return this.options.useHTML5&&(n.file=e,n.fileSize=e.size,this.options.sizeLimit&&e.size>this.options.sizeLimit)?(this.$element.trigger({type:"filerejected",item:n,message:"File is too big",fileUpload:this}),!1):this._checkMimeTypes(a)?(this.uploadQueue.push(n),this.$element.trigger({type:"queuechanged",item:n,operation:"ADD",queueLength:this.uploadQueue.length,fileUpload:this}),this.$element.trigger({type:"fileselected",item:n,fileUpload:this}),!0):(this.$element.trigger({type:"filerejected",item:n,message:"File mime type is not allowed",fileUpload:this}),!1)}return!1},_checkMimeTypes:function(t){function e(t,e){var i=/(.+)\/(.+)$/,a=!1;return"*"===e||".*"===e||"*/*"===e?a=!0:t&&t.match(i)?e.match(i)?a=t===e:e.match(/\.(.+)$/)?a=t===CUI.FileUpload.MimeTypes[e]:e.match(/.*/)&&(a=t.split("/")[0]===e):a=!1,a}var i,a=this.options.mimeTypes.length;if(0===a)return!0;for(i=0;i<a;i+=1)if(e(t,this.options.mimeTypes[i]))return!0;return!1},_getQueueIndex:function(e){var i=-1;return t.each(this.uploadQueue,(function(t,a){if(a.fileName===e)return i=t,!1})),i},_getQueueItem:function(t){return t>-1?this.uploadQueue[t]:null},_getQueueItemByFileName:function(t){return this._getQueueItem(this._getQueueIndex(t))},uploadFile:function(e){var i=this;if(i.options.useHTML5){e.xhr=new XMLHttpRequest,e.xhr.addEventListener("loadstart",(function(t){i._onUploadStart(t,e)}),!1),e.xhr.addEventListener("load",(function(t){i._onUploadLoad(t,e)}),!1),e.xhr.addEventListener("error",(function(t){i._onUploadError(t,e)}),!1),e.xhr.addEventListener("abort",(function(t){i._onUploadCanceled(t,e)}),!1),e.xhr.upload.addEventListener("progress",(function(t){i._onUploadProgress(t,e)}),!1);var a=e.file,n=e.fileName;if(window.FormData){var o=new FormData;i.options.fileNameParameter?(o.append(i.inputElement.attr("name"),a),o.append(i.options.fileNameParameter||"fileName",n)):o.append(n,a),o.append("_charset_","utf-8"),null!==e.parameters&&void 0!==e.parameters&&e.parameters.forEach((function(t){o.append(t.name,t.value)})),e.xhr.open("POST",i.options.uploadUrl+"?:ck="+(new Date).getTime(),!0),e.xhr.send(o)}else e.xhr.open("PUT",i.options.uploadUrl+"/"+n,!0),e.xhr.send(a)}else{var s=t(document.body),l="upload-"+(new Date).getTime(),r=t("<iframe/>",{name:l,class:"coral-FileUpload-iframe"}).appendTo(s),c=t("<form/>",{method:"post",enctype:"multipart/form-data",action:i.options.uploadUrl,target:l,class:"coral-FileUpload-form"}).appendTo(s),d=t("<input/>",{type:"hidden",name:"_charset_",value:"utf-8"});c.prepend(d),null!==e.parameters&&void 0!==e.parameters&&e.parameters.forEach((function(e){var i=t("<input/>",{type:"hidden",name:e.name,value:e.value});c.prepend(i)})),this.options.fileNameParameter&&(this.fileNameElement=t("<input/>",{type:"hidden",name:this.options.fileNameParameter,value:e.fileName}),c.prepend(this.fileNameElement)),r.one("load",(function(){var t=this.contentWindow.document.body.innerHTML;i.inputElement.appendTo(i.$inputContainer),c.remove(),r.remove(),i.$element.trigger({type:"fileuploadload",item:e,content:t,fileUpload:i})})),i.inputElement.prependTo(c),c.submit()}},cancelUpload:function(t){t.xhr.abort()},_onUploadStart:function(t,e){this.$element.trigger({type:"fileuploadstart",item:e,originalEvent:t,fileUpload:this})},_onUploadProgress:function(t,e){this.$element.trigger({type:"fileuploadprogress",item:e,originalEvent:t,fileUpload:this})},_onUploadLoad:function(t,e){var i=t.target;4===i.readyState&&this._internalOnUploadLoad(t,e,i.status,i.responseText)},_internalOnUploadLoad:function(t,e,i,a){CUI.util.HTTP.isOkStatus(i)?this.$element.trigger({type:"fileuploadsuccess",item:e,originalEvent:t,fileUpload:this}):this.$element.trigger({type:"fileuploaderror",item:e,originalEvent:t,message:a,fileUpload:this}),this.fileNameElement&&this.fileNameElement.remove(),this.uploadQueue.splice(this._getQueueIndex(e.fileName),1),this.$element.trigger({type:"queuechanged",item:e,operation:"REMOVE",queueLength:this.uploadQueue.length,fileUpload:this})},_onUploadError:function(t,e){this.$element.trigger({type:"fileuploaderror",item:e,originalEvent:t,fileUpload:this})},_onUploadCanceled:function(t,e){this.$element.trigger({type:"fileuploadcanceled",item:e,originalEvent:t,fileUpload:this})},_isActive:function(){return!this.inputElement.is(":disabled")}}),CUI.Widget.registry.register("fileupload",CUI.FileUpload),CUI.options.dataAPI&&t(document).on("cui-contentloaded.data-api",(function(e){CUI.FileUpload.init(t("[data-init~='fileupload']",e.target))}))}(window.jQuery),window.jQuery,CUI.FileUpload.MimeTypes={".123":"application/vnd.lotus-1-2-3",".3dml":"text/vnd.in3d.3dml",".3g2":"video/3gpp2",".3gp":"video/3gpp",".a":"application/octet-stream",".aab":"application/x-authorware-bin",".aac":"audio/x-aac",".aam":"application/x-authorware-map",".aas":"application/x-authorware-seg",".abw":"application/x-abiword",".acc":"application/vnd.americandynamics.acc",".ace":"application/x-ace-compressed",".acu":"application/vnd.acucobol",".acutc":"application/vnd.acucorp",".adp":"audio/adpcm",".aep":"application/vnd.audiograph",".afm":"application/x-font-type1",".afp":"application/vnd.ibm.modcap",".ai":"application/postscript",".aif":"audio/x-aiff",".aifc":"audio/x-aiff",".aiff":"audio/x-aiff",".air":"application/vnd.adobe.air-application-installer-package+zip",".ami":"application/vnd.amiga.ami",".apk":"application/vnd.android.package-archive",".application":"application/x-ms-application",".apr":"application/vnd.lotus-approach",".asc":"application/pgp-signature",".asf":"video/x-ms-asf",".asm":"text/x-asm",".aso":"application/vnd.accpac.simply.aso",".asx":"video/x-ms-asf",".atc":"application/vnd.acucorp",".atom":"application/atom+xml",".atomcat":"application/atomcat+xml",".atomsvc":"application/atomsvc+xml",".atx":"application/vnd.antix.game-component",".au":"audio/basic",".avi":"video/x-msvideo",".aw":"application/applixware",".azf":"application/vnd.airzip.filesecure.azf",".azs":"application/vnd.airzip.filesecure.azs",".azw":"application/vnd.amazon.ebook",".bat":"application/x-msdownload",".bcpio":"application/x-bcpio",".bdf":"application/x-font-bdf",".bdm":"application/vnd.syncml.dm+wbxml",".bh2":"application/vnd.fujitsu.oasysprs",".bin":"application/octet-stream",".bmi":"application/vnd.bmi",".bmp":"image/bmp",".book":"application/vnd.framemaker",".box":"application/vnd.previewsystems.box",".boz":"application/x-bzip2",".bpk":"application/octet-stream",".btif":"image/prs.btif",".bz":"application/x-bzip",".bz2":"application/x-bzip2",".c":"text/x-c",".c4d":"application/vnd.clonk.c4group",".c4f":"application/vnd.clonk.c4group",".c4g":"application/vnd.clonk.c4group",".c4p":"application/vnd.clonk.c4group",".c4u":"application/vnd.clonk.c4group",".cab":"application/vnd.ms-cab-compressed",".car":"application/vnd.curl.car",".cat":"application/vnd.ms-pki.seccat",".cc":"text/x-c",".cct":"application/x-director",".ccxml":"application/ccxml+xml",".cdbcmsg":"application/vnd.contact.cmsg",".cdf":"application/x-netcdf",".cdkey":"application/vnd.mediastation.cdkey",".cdx":"chemical/x-cdx",".cdxml":"application/vnd.chemdraw+xml",".cdy":"application/vnd.cinderella",".cer":"application/pkix-cert",".cgm":"image/cgm",".chat":"application/x-chat",".chm":"application/vnd.ms-htmlhelp",".chrt":"application/vnd.kde.kchart",".cif":"chemical/x-cif",".cii":"application/vnd.anser-web-certificate-issue-initiation",".cil":"application/vnd.ms-artgalry",".cla":"application/vnd.claymore",".class":"application/java-vm",".clkk":"application/vnd.crick.clicker.keyboard",".clkp":"application/vnd.crick.clicker.palette",".clkt":"application/vnd.crick.clicker.template",".clkw":"application/vnd.crick.clicker.wordbank",".clkx":"application/vnd.crick.clicker",".clp":"application/x-msclip",".cmc":"application/vnd.cosmocaller",".cmdf":"chemical/x-cmdf",".cml":"chemical/x-cml",".cmp":"application/vnd.yellowriver-custom-menu",".cmx":"image/x-cmx",".cod":"application/vnd.rim.cod",".com":"application/x-msdownload",".conf":"text/plain",".cpio":"application/x-cpio",".cpp":"text/x-c",".cpt":"application/mac-compactpro",".crd":"application/x-mscardfile",".crl":"application/pkix-crl",".crt":"application/x-x509-ca-cert",".csh":"application/x-csh",".csml":"chemical/x-csml",".csp":"application/vnd.commonspace",".css":"text/css",".cst":"application/x-director",".csv":"text/csv",".cu":"application/cu-seeme",".curl":"text/vnd.curl",".cww":"application/prs.cww",".cxt":"application/x-director",".cxx":"text/x-c",".daf":"application/vnd.mobius.daf",".dataless":"application/vnd.fdsn.seed",".davmount":"application/davmount+xml",".dcr":"application/x-director",".dcurl":"text/vnd.curl.dcurl",".dd2":"application/vnd.oma.dd2+xml",".ddd":"application/vnd.fujixerox.ddd",".deb":"application/x-debian-package",".def":"text/plain",".deploy":"application/octet-stream",".der":"application/x-x509-ca-cert",".dfac":"application/vnd.dreamfactory",".dic":"text/x-c",".diff":"text/plain",".dir":"application/x-director",".dis":"application/vnd.mobius.dis",".dist":"application/octet-stream",".distz":"application/octet-stream",".djv":"image/vnd.djvu",".djvu":"image/vnd.djvu",".dll":"application/x-msdownload",".dmg":"application/octet-stream",".dms":"application/octet-stream",".dna":"application/vnd.dna",".doc":"application/msword",".docm":"application/vnd.ms-word.document.macroenabled.12",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".dot":"application/msword",".dotm":"application/vnd.ms-word.template.macroenabled.12",".dotx":"application/vnd.openxmlformats-officedocument.wordprocessingml.template",".dp":"application/vnd.osgi.dp",".dpg":"application/vnd.dpgraph",".dsc":"text/prs.lines.tag",".dtb":"application/x-dtbook+xml",".dtd":"application/xml-dtd",".dts":"audio/vnd.dts",".dtshd":"audio/vnd.dts.hd",".dump":"application/octet-stream",".dvi":"application/x-dvi",".dwf":"model/vnd.dwf",".dwg":"image/vnd.dwg",".dxf":"image/vnd.dxf",".dxp":"application/vnd.spotfire.dxp",".dxr":"application/x-director",".ecelp4800":"audio/vnd.nuera.ecelp4800",".ecelp7470":"audio/vnd.nuera.ecelp7470",".ecelp9600":"audio/vnd.nuera.ecelp9600",".ecma":"application/ecmascript",".edm":"application/vnd.novadigm.edm",".edx":"application/vnd.novadigm.edx",".efif":"application/vnd.picsel",".ei6":"application/vnd.pg.osasli",".elc":"application/octet-stream",".eml":"message/rfc822",".emma":"application/emma+xml",".eol":"audio/vnd.digital-winds",".eot":"application/vnd.ms-fontobject",".eps":"application/postscript",".epub":"application/epub+zip",".es3":"application/vnd.eszigno3+xml",".esf":"application/vnd.epson.esf",".et3":"application/vnd.eszigno3+xml",".etx":"text/x-setext",".exe":"application/x-msdownload",".ext":"application/vnd.novadigm.ext",".ez":"application/andrew-inset",".ez2":"application/vnd.ezpix-album",".ez3":"application/vnd.ezpix-package",".f":"text/x-fortran",".f4v":"video/x-f4v",".f77":"text/x-fortran",".f90":"text/x-fortran",".fbs":"image/vnd.fastbidsheet",".fdf":"application/vnd.fdf",".fe_launch":"application/vnd.denovo.fcselayout-link",".fg5":"application/vnd.fujitsu.oasysgp",".fgd":"application/x-director",".fh":"image/x-freehand",".fh4":"image/x-freehand",".fh5":"image/x-freehand",".fh7":"image/x-freehand",".fhc":"image/x-freehand",".fig":"application/x-xfig",".fli":"video/x-fli",".flo":"application/vnd.micrografx.flo",".flv":"video/x-flv",".flw":"application/vnd.kde.kivio",".flx":"text/vnd.fmi.flexstor",".fly":"text/vnd.fly",".fm":"application/vnd.framemaker",".fnc":"application/vnd.frogans.fnc",".for":"text/x-fortran",".fpx":"image/vnd.fpx",".frame":"application/vnd.framemaker",".fsc":"application/vnd.fsc.weblaunch",".fst":"image/vnd.fst",".ftc":"application/vnd.fluxtime.clip",".fti":"application/vnd.anser-web-funds-transfer-initiation",".fvt":"video/vnd.fvt",".fzs":"application/vnd.fuzzysheet",".g3":"image/g3fax",".gac":"application/vnd.groove-account",".gdl":"model/vnd.gdl",".geo":"application/vnd.dynageo",".gex":"application/vnd.geometry-explorer",".ggb":"application/vnd.geogebra.file",".ggt":"application/vnd.geogebra.tool",".ghf":"application/vnd.groove-help",".gif":"image/gif",".gim":"application/vnd.groove-identity-message",".gmx":"application/vnd.gmx",".gnumeric":"application/x-gnumeric",".gph":"application/vnd.flographit",".gqf":"application/vnd.grafeq",".gqs":"application/vnd.grafeq",".gram":"application/srgs",".gre":"application/vnd.geometry-explorer",".grv":"application/vnd.groove-injector",".grxml":"application/srgs+xml",".gsf":"application/x-font-ghostscript",".gtar":"application/x-gtar",".gtm":"application/vnd.groove-tool-message",".gtw":"model/vnd.gtw",".gv":"text/vnd.graphviz",".gz":"application/x-gzip",".h":"text/x-c",".h261":"video/h261",".h263":"video/h263",".h264":"video/h264",".hbci":"application/vnd.hbci",".hdf":"application/x-hdf",".hh":"text/x-c",".hlp":"application/winhlp",".hpgl":"application/vnd.hp-hpgl",".hpid":"application/vnd.hp-hpid",".hps":"application/vnd.hp-hps",".hqx":"application/mac-binhex40",".htke":"application/vnd.kenameaapp",".htm":"text/html",".html":"text/html",".hvd":"application/vnd.yamaha.hv-dic",".hvp":"application/vnd.yamaha.hv-voice",".hvs":"application/vnd.yamaha.hv-script",".icc":"application/vnd.iccprofile",".ice":"x-conference/x-cooltalk",".icm":"application/vnd.iccprofile",".ico":"image/x-icon",".ics":"text/calendar",".ief":"image/ief",".ifb":"text/calendar",".ifm":"application/vnd.shana.informed.formdata",".iges":"model/iges",".igl":"application/vnd.igloader",".igs":"model/iges",".igx":"application/vnd.micrografx.igx",".iif":"application/vnd.shana.informed.interchange",".imp":"application/vnd.accpac.simply.imp",".ims":"application/vnd.ms-ims",".in":"text/plain",".ipk":"application/vnd.shana.informed.package",".irm":"application/vnd.ibm.rights-management",".irp":"application/vnd.irepository.package+xml",".iso":"application/octet-stream",".itp":"application/vnd.shana.informed.formtemplate",".ivp":"application/vnd.immervision-ivp",".ivu":"application/vnd.immervision-ivu",".jad":"text/vnd.sun.j2me.app-descriptor",".jam":"application/vnd.jam",".jar":"application/java-archive",".java":"text/x-java-source",".jisp":"application/vnd.jisp",".jlt":"application/vnd.hp-jlyt",".jnlp":"application/x-java-jnlp-file",".joda":"application/vnd.joost.joda-archive",".jpe":"image/jpeg",".jpeg":"image/jpeg",".jpg":"image/jpeg",".jpgm":"video/jpm",".jpgv":"video/jpeg",".jpm":"video/jpm",".js":"application/javascript",".json":"application/json",".kar":"audio/midi",".karbon":"application/vnd.kde.karbon",".kfo":"application/vnd.kde.kformula",".kia":"application/vnd.kidspiration",".kil":"application/x-killustrator",".kml":"application/vnd.google-earth.kml+xml",".kmz":"application/vnd.google-earth.kmz",".kne":"application/vnd.kinar",".knp":"application/vnd.kinar",".kon":"application/vnd.kde.kontour",".kpr":"application/vnd.kde.kpresenter",".kpt":"application/vnd.kde.kpresenter",".ksh":"text/plain",".ksp":"application/vnd.kde.kspread",".ktr":"application/vnd.kahootz",".ktz":"application/vnd.kahootz",".kwd":"application/vnd.kde.kword",".kwt":"application/vnd.kde.kword",".latex":"application/x-latex",".lbd":"application/vnd.llamagraphics.life-balance.desktop",".lbe":"application/vnd.llamagraphics.life-balance.exchange+xml",".les":"application/vnd.hhe.lesson-player",".lha":"application/octet-stream",".link66":"application/vnd.route66.link66+xml",".list":"text/plain",".list3820":"application/vnd.ibm.modcap",".listafp":"application/vnd.ibm.modcap",".log":"text/plain",".lostxml":"application/lost+xml",".lrf":"application/octet-stream",".lrm":"application/vnd.ms-lrm",".ltf":"application/vnd.frogans.ltf",".lvp":"audio/vnd.lucent.voice",".lwp":"application/vnd.lotus-wordpro",".lzh":"application/octet-stream",".m13":"application/x-msmediaview",".m14":"application/x-msmediaview",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".m3u":"audio/x-mpegurl",".m4u":"video/vnd.mpegurl",".m4v":"video/x-m4v",".ma":"application/mathematica",".mag":"application/vnd.ecowin.chart",".maker":"application/vnd.framemaker",".man":"text/troff",".mathml":"application/mathml+xml",".mb":"application/mathematica",".mbk":"application/vnd.mobius.mbk",".mbox":"application/mbox",".mc1":"application/vnd.medcalcdata",".mcd":"application/vnd.mcd",".mcurl":"text/vnd.curl.mcurl",".mdb":"application/x-msaccess",".mdi":"image/vnd.ms-modi",".me":"text/troff",".mesh":"model/mesh",".mfm":"application/vnd.mfmp",".mgz":"application/vnd.proteus.magazine",".mht":"message/rfc822",".mhtml":"message/rfc822",".mid":"audio/midi",".midi":"audio/midi",".mif":"application/vnd.mif",".mime":"message/rfc822",".mj2":"video/mj2",".mjp2":"video/mj2",".mlp":"application/vnd.dolby.mlp",".mmd":"application/vnd.chipnuts.karaoke-mmd",".mmf":"application/vnd.smaf",".mmr":"image/vnd.fujixerox.edmics-mmr",".mny":"application/x-msmoney",".mobi":"application/x-mobipocket-ebook",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4s":"application/mp4",".mp4v":"video/mp4",".mpa":"video/mpeg",".mpc":"application/vnd.mophun.certificate",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".mpkg":"application/vnd.apple.installer+xml",".mpm":"application/vnd.blueice.multipass",".mpn":"application/vnd.mophun.application",".mpp":"application/vnd.ms-project",".mpt":"application/vnd.ms-project",".mpy":"application/vnd.ibm.minipay",".mqy":"application/vnd.mobius.mqy",".mrc":"application/marc",".ms":"text/troff",".mscml":"application/mediaservercontrol+xml",".mseed":"application/vnd.fdsn.mseed",".mseq":"application/vnd.mseq",".msf":"application/vnd.epson.msf",".msh":"model/mesh",".msi":"application/x-msdownload",".msl":"application/vnd.mobius.msl",".msty":"application/vnd.muvee.style",".mts":"model/vnd.mts",".mus":"application/vnd.musician",".musicxml":"application/vnd.recordare.musicxml+xml",".mvb":"application/x-msmediaview",".mwf":"application/vnd.mfer",".mxf":"application/mxf",".mxl":"application/vnd.recordare.musicxml",".mxml":"application/xv+xml",".mxs":"application/vnd.triscape.mxs",".mxu":"video/vnd.mpegurl",".n-gage":"application/vnd.nokia.n-gage.symbian.install",".nb":"application/mathematica",".nc":"application/x-netcdf",".ncx":"application/x-dtbncx+xml",".ngdat":"application/vnd.nokia.n-gage.data",".nlu":"application/vnd.neurolanguage.nlu",".nml":"application/vnd.enliven",".nnd":"application/vnd.noblenet-directory",".nns":"application/vnd.noblenet-sealer",".nnw":"application/vnd.noblenet-web",".npx":"image/vnd.net-fpx",".nsf":"application/vnd.lotus-notes",".nws":"message/rfc822",".o":"application/octet-stream",".oa2":"application/vnd.fujitsu.oasys2",".oa3":"application/vnd.fujitsu.oasys3",".oas":"application/vnd.fujitsu.oasys",".obd":"application/x-msbinder",".obj":"application/octet-stream",".oda":"application/oda",".odb":"application/vnd.oasis.opendocument.database",".odc":"application/vnd.oasis.opendocument.chart",".odf":"application/vnd.oasis.opendocument.formula",".odft":"application/vnd.oasis.opendocument.formula-template",".odg":"application/vnd.oasis.opendocument.graphics",".odi":"application/vnd.oasis.opendocument.image",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"audio/ogg",".ogv":"video/ogg",".ogx":"application/ogg",".onepkg":"application/onenote",".onetmp":"application/onenote",".onetoc":"application/onenote",".onetoc2":"application/onenote",".opf":"application/oebps-package+xml",".oprc":"application/vnd.palm",".org":"application/vnd.lotus-organizer",".osf":"application/vnd.yamaha.openscoreformat",".osfpvg":"application/vnd.yamaha.openscoreformat.osfpvg+xml",".otc":"application/vnd.oasis.opendocument.chart-template",".otf":"application/x-font-otf",".otg":"application/vnd.oasis.opendocument.graphics-template",".oth":"application/vnd.oasis.opendocument.text-web",".oti":"application/vnd.oasis.opendocument.image-template",".otm":"application/vnd.oasis.opendocument.text-master",".otp":"application/vnd.oasis.opendocument.presentation-template",".ots":"application/vnd.oasis.opendocument.spreadsheet-template",".ott":"application/vnd.oasis.opendocument.text-template",".oxt":"application/vnd.openofficeorg.extension",".p":"text/x-pascal",".p10":"application/pkcs10",".p12":"application/x-pkcs12",".p7b":"application/x-pkcs7-certificates",".p7c":"application/pkcs7-mime",".p7m":"application/pkcs7-mime",".p7r":"application/x-pkcs7-certreqresp",".p7s":"application/pkcs7-signature",".pas":"text/x-pascal",".pbd":"application/vnd.powerbuilder6",".pbm":"image/x-portable-bitmap",".pcf":"application/x-font-pcf",".pcl":"application/vnd.hp-pcl",".pclxl":"application/vnd.hp-pclxl",".pct":"image/x-pict",".pcurl":"application/vnd.curl.pcurl",".pcx":"image/x-pcx",".pdb":"application/vnd.palm",".pdf":"application/pdf",".pfa":"application/x-font-type1",".pfb":"application/x-font-type1",".pfm":"application/x-font-type1",".pfr":"application/font-tdpfr",".pfx":"application/x-pkcs12",".pgm":"image/x-portable-graymap",".pgn":"application/x-chess-pgn",".pgp":"application/pgp-encrypted",".pic":"image/x-pict",".pkg":"application/octet-stream",".pki":"application/pkixcmp",".pkipath":"application/pkix-pkipath",".pl":"text/plain",".plb":"application/vnd.3gpp.pic-bw-large",".plc":"application/vnd.mobius.plc",".plf":"application/vnd.pocketlearn",".pls":"application/pls+xml",".pml":"application/vnd.ctc-posml",".png":"image/png",".pnm":"image/x-portable-anymap",".portpkg":"application/vnd.macports.portpkg",".pot":"application/vnd.ms-powerpoint",".potm":"application/vnd.ms-powerpoint.template.macroenabled.12",".potx":"application/vnd.openxmlformats-officedocument.presentationml.template",".ppa":"application/vnd.ms-powerpoint",".ppam":"application/vnd.ms-powerpoint.addin.macroenabled.12",".ppd":"application/vnd.cups-ppd",".ppm":"image/x-portable-pixmap",".pps":"application/vnd.ms-powerpoint",".ppsm":"application/vnd.ms-powerpoint.slideshow.macroenabled.12",".ppsx":"application/vnd.openxmlformats-officedocument.presentationml.slideshow",".ppt":"application/vnd.ms-powerpoint",".pptm":"application/vnd.ms-powerpoint.presentation.macroenabled.12",".pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation",".pqa":"application/vnd.palm",".prc":"application/x-mobipocket-ebook",".pre":"application/vnd.lotus-freelance",".prf":"application/pics-rules",".ps":"application/postscript",".psb":"application/vnd.3gpp.pic-bw-small",".psd":"image/vnd.adobe.photoshop",".psf":"application/x-font-linux-psf",".ptid":"application/vnd.pvi.ptid1",".pub":"application/x-mspublisher",".pvb":"application/vnd.3gpp.pic-bw-var",".pwn":"application/vnd.3m.post-it-notes",".pwz":"application/vnd.ms-powerpoint",".py":"text/x-python",".pya":"audio/vnd.ms-playready.media.pya",".pyc":"application/x-python-code",".pyo":"application/x-python-code",".pyv":"video/vnd.ms-playready.media.pyv",".qam":"application/vnd.epson.quickanime",".qbo":"application/vnd.intu.qbo",".qfx":"application/vnd.intu.qfx",".qps":"application/vnd.publishare-delta-tree",".qt":"video/quicktime",".qwd":"application/vnd.quark.quarkxpress",".qwt":"application/vnd.quark.quarkxpress",".qxb":"application/vnd.quark.quarkxpress",".qxd":"application/vnd.quark.quarkxpress",".qxl":"application/vnd.quark.quarkxpress",".qxt":"application/vnd.quark.quarkxpress",".ra":"audio/x-pn-realaudio",".ram":"audio/x-pn-realaudio",".rar":"application/x-rar-compressed",".ras":"image/x-cmu-raster",".rcprofile":"application/vnd.ipunplugged.rcprofile",".rdf":"application/rdf+xml",".rdz":"application/vnd.data-vision.rdz",".rep":"application/vnd.businessobjects",".res":"application/x-dtbresource+xml",".rgb":"image/x-rgb",".rif":"application/reginfo+xml",".rl":"application/resource-lists+xml",".rlc":"image/vnd.fujixerox.edmics-rlc",".rld":"application/resource-lists-diff+xml",".rm":"application/vnd.rn-realmedia",".rmi":"audio/midi",".rmp":"audio/x-pn-realaudio-plugin",".rms":"application/vnd.jcp.javame.midlet-rms",".rnc":"application/relax-ng-compact-syntax",".roff":"text/troff",".rpm":"application/x-rpm",".rpss":"application/vnd.nokia.radio-presets",".rpst":"application/vnd.nokia.radio-preset",".rq":"application/sparql-query",".rs":"application/rls-services+xml",".rsd":"application/rsd+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".rtx":"text/richtext",".s":"text/x-asm",".saf":"application/vnd.yamaha.smaf-audio",".sbml":"application/sbml+xml",".sc":"application/vnd.ibm.secure-container",".scd":"application/x-msschedule",".scm":"application/vnd.lotus-screencam",".scq":"application/scvp-cv-request",".scs":"application/scvp-cv-response",".scurl":"text/vnd.curl.scurl",".sda":"application/vnd.stardivision.draw",".sdc":"application/vnd.stardivision.calc",".sdd":"application/vnd.stardivision.impress",".sdkd":"application/vnd.solent.sdkm+xml",".sdkm":"application/vnd.solent.sdkm+xml",".sdp":"application/sdp",".sdw":"application/vnd.stardivision.writer",".see":"application/vnd.seemail",".seed":"application/vnd.fdsn.seed",".sema":"application/vnd.sema",".semd":"application/vnd.semd",".semf":"application/vnd.semf",".ser":"application/java-serialized-object",".setpay":"application/set-payment-initiation",".setreg":"application/set-registration-initiation",".sfd-hdstx":"application/vnd.hydrostatix.sof-data",".sfs":"application/vnd.spotfire.sfs",".sgl":"application/vnd.stardivision.writer-global",".sgm":"text/sgml",".sgml":"text/sgml",".sh":"application/x-sh",".shar":"application/x-shar",".shf":"application/shf+xml",".si":"text/vnd.wap.si",".sic":"application/vnd.wap.sic",".sig":"application/pgp-signature",".silo":"model/mesh",".sis":"application/vnd.symbian.install",".sisx":"application/vnd.symbian.install",".sit":"application/x-stuffit",".sitx":"application/x-stuffitx",".skd":"application/vnd.koan",".skm":"application/vnd.koan",".skp":"application/vnd.koan",".skt":"application/vnd.koan",".sl":"text/vnd.wap.sl",".slc":"application/vnd.wap.slc",".sldm":"application/vnd.ms-powerpoint.slide.macroenabled.12",".sldx":"application/vnd.openxmlformats-officedocument.presentationml.slide",".slt":"application/vnd.epson.salt",".smf":"application/vnd.stardivision.math",".smi":"application/smil+xml",".smil":"application/smil+xml",".snd":"audio/basic",".snf":"application/x-font-snf",".so":"application/octet-stream",".spc":"application/x-pkcs7-certificates",".spf":"application/vnd.yamaha.smaf-phrase",".spl":"application/x-futuresplash",".spot":"text/vnd.in3d.spot",".spp":"application/scvp-vp-response",".spq":"application/scvp-vp-request",".spx":"audio/ogg",".src":"application/x-wais-source",".srx":"application/sparql-results+xml",".sse":"application/vnd.kodak-descriptor",".ssf":"application/vnd.epson.ssf",".ssml":"application/ssml+xml",".stc":"application/vnd.sun.xml.calc.template",".std":"application/vnd.sun.xml.draw.template",".stf":"application/vnd.wt.stf",".sti":"application/vnd.sun.xml.impress.template",".stk":"application/hyperstudio",".stl":"application/vnd.ms-pki.stl",".str":"application/vnd.pg.format",".stw":"application/vnd.sun.xml.writer.template",".sus":"application/vnd.sus-calendar",".susp":"application/vnd.sus-calendar",".sv4cpio":"application/x-sv4cpio",".sv4crc":"application/x-sv4crc",".svd":"application/vnd.svd",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swa":"application/x-director",".swf":"application/x-shockwave-flash",".swi":"application/vnd.arastra.swi",".sxc":"application/vnd.sun.xml.calc",".sxd":"application/vnd.sun.xml.draw",".sxg":"application/vnd.sun.xml.writer.global",".sxi":"application/vnd.sun.xml.impress",".sxm":"application/vnd.sun.xml.math",".sxw":"application/vnd.sun.xml.writer",".t":"text/troff",".tao":"application/vnd.tao.intent-module-archive",".tar":"application/x-tar",".tcap":"application/vnd.3gpp2.tcap",".tcl":"application/x-tcl",".teacher":"application/vnd.smart.teacher",".tex":"application/x-tex",".texi":"application/x-texinfo",".texinfo":"application/x-texinfo",".text":"text/plain",".tfm":"application/x-tex-tfm",".tgz":"application/x-gzip",".tif":"image/tiff",".tiff":"image/tiff",".tmo":"application/vnd.tmobile-livetv",".torrent":"application/x-bittorrent",".tpl":"application/vnd.groove-tool-template",".tpt":"application/vnd.trid.tpt",".tr":"text/troff",".tra":"application/vnd.trueapp",".trm":"application/x-msterminal",".tsv":"text/tab-separated-values",".ttc":"application/x-font-ttf",".ttf":"application/x-font-ttf",".twd":"application/vnd.simtech-mindmapper",".twds":"application/vnd.simtech-mindmapper",".txd":"application/vnd.genomatix.tuxedo",".txf":"application/vnd.mobius.txf",".txt":"text/plain",".u32":"application/x-authorware-bin",".udeb":"application/x-debian-package",".ufd":"application/vnd.ufdl",".ufdl":"application/vnd.ufdl",".umj":"application/vnd.umajin",".unityweb":"application/vnd.unity",".uoml":"application/vnd.uoml+xml",".uri":"text/uri-list",".uris":"text/uri-list",".urls":"text/uri-list",".ustar":"application/x-ustar",".utz":"application/vnd.uiq.theme",".uu":"text/x-uuencode",".vcd":"application/x-cdlink",".vcf":"text/x-vcard",".vcg":"application/vnd.groove-vcard",".vcs":"text/x-vcalendar",".vcx":"application/vnd.vcx",".vis":"application/vnd.visionary",".viv":"video/vnd.vivo",".vor":"application/vnd.stardivision.writer",".vox":"application/x-authorware-bin",".vrml":"model/vrml",".vsd":"application/vnd.visio",".vsf":"application/vnd.vsf",".vss":"application/vnd.visio",".vst":"application/vnd.visio",".vsw":"application/vnd.visio",".vtu":"model/vnd.vtu",".vxml":"application/voicexml+xml",".w3d":"application/x-director",".wad":"application/x-doom",".wav":"audio/x-wav",".wax":"audio/x-ms-wax",".wbmp":"image/vnd.wap.wbmp",".wbs":"application/vnd.criticaltools.wbs+xml",".wbxml":"application/vnd.wap.wbxml",".wcm":"application/vnd.ms-works",".wdb":"application/vnd.ms-works",".wiz":"application/msword",".wks":"application/vnd.ms-works",".wm":"video/x-ms-wm",".wma":"audio/x-ms-wma",".wmd":"application/x-ms-wmd",".wmf":"application/x-msmetafile",".wml":"text/vnd.wap.wml",".wmlc":"application/vnd.wap.wmlc",".wmls":"text/vnd.wap.wmlscript",".wmlsc":"application/vnd.wap.wmlscriptc",".wmv":"video/x-ms-wmv",".wmx":"video/x-ms-wmx",".wmz":"application/x-ms-wmz",".wpd":"application/vnd.wordperfect",".wpl":"application/vnd.ms-wpl",".wps":"application/vnd.ms-works",".wqd":"application/vnd.wqd",".wri":"application/x-mswrite",".wrl":"model/vrml",".wsdl":"application/wsdl+xml",".wspolicy":"application/wspolicy+xml",".wtb":"application/vnd.webturbo",".wvx":"video/x-ms-wvx",".x32":"application/x-authorware-bin",".x3d":"application/vnd.hzn-3d-crossword",".xap":"application/x-silverlight-app",".xar":"application/vnd.xara",".xbap":"application/x-ms-xbap",".xbd":"application/vnd.fujixerox.docuworks.binder",".xbm":"image/x-xbitmap",".xdm":"application/vnd.syncml.dm+xml",".xdp":"application/vnd.adobe.xdp+xml",".xdw":"application/vnd.fujixerox.docuworks",".xenc":"application/xenc+xml",".xer":"application/patch-ops-error+xml",".xfdf":"application/vnd.adobe.xfdf",".xfdl":"application/vnd.xfdl",".xht":"application/xhtml+xml",".xhtml":"application/xhtml+xml",".xhvml":"application/xv+xml",".xif":"image/vnd.xiff",".xla":"application/vnd.ms-excel",".xlam":"application/vnd.ms-excel.addin.macroenabled.12",".xlb":"application/vnd.ms-excel",".xlc":"application/vnd.ms-excel",".xlm":"application/vnd.ms-excel",".xls":"application/vnd.ms-excel",".xlsb":"application/vnd.ms-excel.sheet.binary.macroenabled.12",".xlsm":"application/vnd.ms-excel.sheet.macroenabled.12",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".xlt":"application/vnd.ms-excel",".xltm":"application/vnd.ms-excel.template.macroenabled.12",".xltx":"application/vnd.openxmlformats-officedocument.spreadsheetml.template",".xlw":"application/vnd.ms-excel",".xml":"application/xml",".xo":"application/vnd.olpc-sugar",".xop":"application/xop+xml",".xpdl":"application/xml",".xpi":"application/x-xpinstall",".xpm":"image/x-xpixmap",".xpr":"application/vnd.is-xpr",".xps":"application/vnd.ms-xpsdocument",".xpw":"application/vnd.intercon.formnet",".xpx":"application/vnd.intercon.formnet",".xsl":"application/xml",".xslt":"application/xslt+xml",".xsm":"application/vnd.syncml+xml",".xspf":"application/xspf+xml",".xul":"application/vnd.mozilla.xul+xml",".xvm":"application/xv+xml",".xvml":"application/xv+xml",".xwd":"image/x-xwindowdump",".xyz":"chemical/x-xyz",".zaz":"application/vnd.zzazz.deck+xml",".zip":"application/zip",".zir":"application/vnd.zul",".zirz":"application/vnd.zul",".zmm":"application/vnd.handheld-entertainment+xml"},CUI.FileUpload.MimeTypes.getMimeTypeFromFileName=function(t){var e=t.match(/.+(\..+)/);return e?CUI.FileUpload.MimeTypes[e[1]]:void 0},function(t){var e=new RegExp("[^\\d.-]","g");CUI.NumberInput=new Class({toString:"NumberInput",extend:CUI.Widget,construct:function(t){this._initMarkup(),this._setListeners(),this._setAttributes(),this._makeAccessible()},defaults:{defaultValue:0,max:null,min:null,step:1,hasError:!1,disabled:!1},increment:function(){if(this._isNumber()){var t=this.getValue(),e=this._getPrecision();t=(t+=this.getStep())>this.getMax()?this.getMax():t,e>0&&(t=parseFloat(t.toFixed(e))),this.setValue(t)}},decrement:function(){if(this._isNumber()){var t=this.getValue(),e=this._getPrecision();t=(t-=this.getStep())<this.getMin()?this.getMin():t,e>0&&(t=parseFloat(t.toFixed(e))),this.setValue(t)}},setValue:function(t){this.$input.val(t),this.$input.trigger("change")},setMin:function(t){this.set("min",t),this.$input.attr("aria-valuemin")&&this.$input.attr("aria-valuemin",this.options.min),this.$input.attr("min",this.options.min)},setMax:function(t){this.set("max",t),this.$input.attr("aria-valuemax")&&this.$input.attr("aria-valuemax",this.options.max),this.$input.attr("max",this.options.max)},setStep:function(t){this.set("step",t),1!==this.options.step&&this.$input.attr("step")!==this.options.step&&this.$input.attr("step",this.options.step)},getValue:function(){var t=this.$input.val();return t=void 0===t||null==t||t.length<1?"":parseFloat(t),isNaN(t)?"":t},getMin:function(){return parseFloat(this.options.min)},getMax:function(){return parseFloat(this.options.max)},getStep:function(){return parseFloat(this.options.step)},_initMarkup:function(){this.$element.addClass("coral-NumberInput"),this.$input=this.$element.find(".js-coral-NumberInput-input"),this._switchInputType(this.$input),this.$decrementElement=this.$element.find(".js-coral-NumberInput-decrementButton"),this.$incrementElement=this.$element.find(".js-coral-NumberInput-incrementButton"),this.$liveRegion=t("<span/>").addClass("u-coral-screenReaderOnly").attr({"aria-live":"assertive"}).insertAfter(this.$input)},_liveRegionTimeout:null,_clearLiveRegionTimeout:null,_updateLiveRegion:function(t){var e=this,i=t;clearTimeout(this._liveRegionTimeout),clearTimeout(this._clearLiveRegionTimeout),void 0===i||0===i.length?this.$liveRegion.text(""):this._liveRegionTimeout=setTimeout((function(){e.$liveRegion.text(i),e._clearLiveRegionTimeout=setTimeout((function(){e.$liveRegion.text("")}),2e3)}),200)},_setListeners:function(){this.$input.on("change.cui-numberinput",this._changeHandler.bind(this)),this.on("beforeChange:step",this._optionBeforeChangeHandler.bind(this)),this.on("beforeChange:min",this._optionBeforeChangeHandler.bind(this)),this.on("beforeChange:max",this._optionBeforeChangeHandler.bind(this)),this.on("change:disabled",this._toggleDisabled.bind(this)),this.on("change:hasError",this._toggleError.bind(this)),this.on("click.cui-numberinput","button",this._clickIncrementOrDecrement.bind(this)),this.on("keydown.cui-numberinput","input, button",this._keyDown.bind(this)).on("keypress.cui-numberinput, paste.cui-numberinput","input",this._keyPress.bind(this)).on("focusin.cui-numberinput","input, button",this._focusIn.bind(this)).on("focusout.cui-numberinput","input, button",this._focusOut.bind(this))},_setAttributes:function(){this.$input.attr("max")?this.setMax(this.$input.attr("max")):t.isNumeric(this.options.max)&&this.setMax(this.options.max),this.$input.attr("min")?this.setMin(this.$input.attr("min")):t.isNumeric(this.options.min)&&this.setMin(this.options.min),this.$element.attr("error")&&(this.options.hasError=!0),this.setStep(this.$input.attr("step")||this.options.step),this.setValue(""!==this.$input.val()?this.$input.val():this.options.defaultValue),(this.$element.attr("disabled")||this.$element.attr("data-disabled"))&&this._toggleDisabled(),(this.$element.hasClass("is-invalid")||this.$element.attr("data-error"))&&this.set("hasError",!0)},_makeAccessible:function(){var e=this.getValue(),i=this.$input.get(0),a="text"===i.type;if(!a)if("function"==typeof i.stepUp)try{i.stepUp(),i.value=e}catch(t){a=!0}else a=!0;a&&this.$input.attr({role:"spinbutton","aria-valuenow":e,"aria-valuetext":e,"aria-valuemax":this.options.max,"aria-valuemin":this.options.min}),this.$incrementElement.add(this.$decrementElement).attr("tabindex",-1).filter("[title]:not([aria-label])").each((function(e,i){var a=t(i);0===t.trim(a.text()).length&&a.append('<span class="u-coral-screenReaderOnly">'+a.attr("title")+"</span>")}))},_changeHandler:function(t){var e=this.$input.is('[role="spinbutton"]');this._checkMinMaxViolation(),this._adjustValueLimitedToRange(),this._checkValidity();var i=this.getValue();this.$input.attr({"aria-valuenow":e?i:null,"aria-valuetext":i}),e&&this.$input.is(":focus")?this._updateLiveRegion(""):this._updateLiveRegion(i)},_keyDown:function(t){var e,i=!1,a=!1;switch(t.which){case 33:case 38:e=this.increment,i=!0,a=!0;break;case 34:case 40:e=this.decrement,i=!0,a=!0;break;case 35:null!==this.options.max&&this.setValue(this.options.max),i=!0,a=!0;break;case 36:null!==this.options.min&&this.setValue(this.options.min),i=!0,a=!0}a&&(t.preventDefault(),t.stopImmediatePropagation()),e&&e.call(this),i&&!this.$input.is(document.activeElement)&&this.$input.trigger("focus")},_keyPress:function(t){var i=this.$input.val()+String.fromCharCode(t.which||t.keyCode);i!==i.replace(e,"")&&t.preventDefault()},_focusIn:function(t){this.$element.addClass("is-focused")},_focusOut:function(t){this.$element.removeClass("is-focused"),this._updateLiveRegion("")},_clickIncrementOrDecrement:function(e){var i,a=t(e.currentTarget);a.is(this.$incrementElement)?i=this.increment:a.is(this.$decrementElement)&&(i=this.decrement),i&&(a.is(document.activeElement)||a.trigger("focus"),i.call(this))},_adjustValueLimitedToRange:function(){var t=this.getValue(),e=this._getPrecision();isNaN(t)||(t>this.getMax()?t=this.getMax():t<this.getMin()&&(t=this.getMin()),e>0&&(t=parseFloat(t.toFixed(e)))),this.$input.val(t)},_checkMinMaxViolation:function(){var t=!1;this._isNumber()&&(this.$incrementElement.removeAttr("disabled"),this.$decrementElement.removeAttr("disabled"),null!==this.options.max&&this.getValue()>=this.getMax()?(t=this.$incrementElement.is(document.activeElement),this.$incrementElement.attr("disabled","disabled")):null!==this.options.min&&this.getValue()<=this.getMin()&&(t=this.$decrementElement.is(document.activeElement),this.$decrementElement.attr("disabled","disabled")),t&&this.$input.trigger("focus"))},_checkValidity:function(){""===this.$input.val()&&null!==this.options.defaultValue?this.set("hasError",!1):this.set("hasError",this.getValue()!==this._getSnappedValue())},_getSnappedValue:function(t){var e,i=void 0===t?this.getValue():t,a=i,n=this.getMin(),o=this.getMax(),s=this.getStep(),l=this._getPrecision();return e=(i-(isNaN(n)?0:n))%s,a=2*Math.abs(e)>=s?i-e+s:i-e,isNaN(n)||isNaN(o)||(a<n?a=n:a>o&&(a=n+Math.floor((o-n)/s)*s)),l>0&&(a=parseFloat(a.toFixed(l))),a},_getPrecision:function(){var t=this.getValue(),e=this.getStep(),i=/^(?:-?\d+)(?:\.(\d+))?$/g,a=t.toString().replace(i,"$1").length,n=e.toString().replace(i,"$1").length;return a>n?a:n},_switchInputType:function(t){-1===window.navigator.userAgent.indexOf("MSIE 10.0")&&!window.navigator.userAgent.match(/Trident\/7\./)?"number"!==t.get(0).type&&t.detach().attr("type","number").insertBefore(this.$element.children(":last")):t.get(0).type="text"},_isNumber:function(){return!isNaN(this.$input.val())},_optionBeforeChangeHandler:function(t){isNaN(parseFloat(t.value))?t.preventDefault():this.$input.attr(t.option,t.value)},_toggleDisabled:function(){this.options.disabled?(this.$incrementElement.attr("disabled","disabled"),this.$decrementElement.attr("disabled","disabled"),this.$input.attr("disabled","disabled")):(this.$incrementElement.removeAttr("disabled"),this.$decrementElement.removeAttr("disabled"),this.$input.removeAttr("disabled"))},_toggleError:function(){this.options.hasError?(this.$element.addClass("is-invalid"),this.$input.addClass("is-invalid").attr("aria-invalid",!0)):(this.$element.removeClass("is-invalid"),this.$input.removeClass("is-invalid").removeAttr("aria-invalid"))}}),CUI.Widget.registry.register("numberinput",CUI.NumberInput),t(document).on("cui-contentloaded.data-api",(function(e){CUI.NumberInput.init(t("[data-init~=numberinput]",e.target))}))}(window.jQuery),function(t){var e=0;CUI.Datepicker=new Class({toString:"Datepicker",extend:CUI.Widget,defaults:{monthNames:null,dayNames:null,format:null,type:"date",selectedDateTime:null,startDay:0,disabled:!1,displayedFormat:null,storedFormat:null,headFormat:"MMMM YYYY",forceHTMLMode:!1,required:!1,hasError:!1,minDate:null,maxDate:null},displayDateTime:null,pickerShown:!1,construct:function(){this.guid=e+=1,this._readOptionsFromMarkup(),this._parseOptions(),this._setupMomentJS(),this._adjustMarkup(),this._findElements(),this._constructPopover(),this._initialize()},_readOptionsFromMarkup:function(){var e=this.options,i=this.$element,a=t(i.find("input").filter("[type^=date],[type=time]"));0!==a.length&&(e.type=a.attr("type")),[["disabled","disabled",o],["required","required",o],["displayed-format","displayedFormat",n],["stored-format","storedFormat",n],["force-html-mode","forceHTMLMode",n],["day-names","dayNames",s],["month-names","monthNames",s],["head-format","headFormat",s],["start-day","startDay",l],["min-date","minDate",n],["max-date","maxDate",n]].map((function(t){var a=t[0],n=t[1];(0,t[2])(i.data(a),n,e)}))},_parseOptions:function(){var t=this.options;t.monthNames=t.monthNames||CUI.Datepicker.monthNames,t.dayNames=t.dayNames||CUI.Datepicker.dayNames,t.isDateEnabled="date"===t.type||"datetime"===t.type||"datetime-local"===t.type,t.isTimeEnabled="time"===t.type||"datetime"===t.type||"datetime-local"===t.type;var e=document.createElement("input");e.setAttribute("type",t.type),t.supportsInputType="text"!==e.type,null!==t.minDate&&("today"===t.minDate?t.minDate=moment().startOf("day"):moment(t.minDate,h).isValid()?t.minDate=moment(t.minDate,h):t.minDate=null),null!==t.maxDate&&("today"===t.maxDate?t.maxDate=moment().startOf("day"):moment(t.maxDate,h).isValid()?t.maxDate=moment(t.maxDate,h):t.maxDate=null),t.storedFormat=t.storedFormat||("time"===t.type?u:m),t.displayedFormat=t.displayedFormat||("time"===t.type?u:f),t.useNativeControls=t.forceHTMLMode,!t.forceHTMLMode&&p&&t.supportsInputType&&(t.useNativeControls=!0),t.useNativeControls&&("date"===t.type?t.displayedFormat=h:"time"===t.type?t.displayedFormat=u:t.displayedFormat=m)},_setupMomentJS:function(){this.options.language=v+(new Date).getTime(),moment.locale(this.options.language,{months:this.options.monthNames,weekdaysMin:this.options.dayNames})},_adjustMarkup:function(){var e=this.$element;if(this.options.useNativeControls)this.$popover=[];else{var i="popguid"+this.guid,a="#"+i+".coral-Popover";this.$popover=t("body").find(a),0===this.$popover.length&&(t("body").append(x.replace("%ID%",i)),this.$popover=t("body").find(a),this.options.isDateEnabled&&this.$popover.find(".coral-Popover-content").append(g))}var n=e.find("input[type=hidden]");if(0===n.length?e.prepend('<input type="hidden">'):e.prepend(n),!e.find("input[type=hidden]").attr("name")){var o=e.find("input").not("[type=hidden]").attr("name");e.find("input[type=hidden]").attr("name",o),e.find("input").not("[type=hidden]").removeAttr("name")}},_findElements:function(){this.$input=this.$element.find("input").not("[type=hidden]"),this.$hiddenInput=this.$element.find("input[type=hidden]"),this.$openButton=this.$element.find("button")},_constructPopover:function(){this.$popover.length&&(this.popover=new i({$element:this.$popover,$trigger:this.$openButton,options:this.options,setDateTimeCallback:this._popoverSetDateTimeCallback.bind(this),hideCallback:this._popoverHideCallback.bind(this)}))},_initialize:function(){this.on("change:disabled",this._toggleDisabled.bind(this)),this.options.useNativeControls?(this.displayDateTime=this.options.selectedDateTime=moment(this.$input.val(),this.options.displayedFormat),this.$openButton.hide()):this._switchInputTypeToText(this.$input),this.$openButton.on("click",this._clickHandler.bind(this)),this.$input.on("change"+(p?" blur":""),this._inputChangedHandler.bind(this)),this.options.selectedDateTime||this._readInputVal([this.options.storedFormat,this.options.displayedFormat]),this._setDateTime(this.options.selectedDateTime,!0)},_readInputVal:function(t){var e=this.$input.eq(0).val();if(""!==e){var i=moment(e,t||this.options.displayedFormat);i&&i.isValid()||(i=moment(new Date(e))),this.displayDateTime=this.options.selectedDateTime=i,null!==i&&i.isValid()&&(this.displayDateTime=this.options.selectedDateTime=i)}else this.displayDateTime=null},_updateState:function(){this._toggleDisabled(),this.options.hasError||!this.options.selectedDateTime&&this.options.required||this.options.selectedDateTime&&!this.options.selectedDateTime.isValid()?(this.$element.addClass("is-invalid"),this.$element.find("input").addClass("is-invalid")):(this.$element.removeClass("is-invalid"),this.$element.find("input").removeClass("is-invalid"))},_toggleDisabled:function(){this.options.disabled?(this.$element.find("input,button").attr("disabled","disabled"),this._hidePicker()):this.$element.find("input,button").removeAttr("disabled")},_popoverSetDateTimeCallback:function(){this._setDateTime.apply(this,arguments),!1===this.options.isTimeEnabled&&this._hidePicker()},_popoverHideCallback:function(){this.pickerShown=!1,this.$element.find("input").removeClass("is-highlighted")},_switchInputTypeToText:function(t){var e=t.parent();t.detach().attr("type","text").prependTo(e)},_openNativeInput:function(){this.$input.trigger("click")},_clickHandler:function(t){if(!this.options.disabled)if(this.pickerShown)this._hidePicker();else{var e=this;setTimeout((function(){e._openPicker()}),100)}},_inputChangedHandler:function(){var t;this.options.disabled||(""!==this.$input.val()?(t=moment(this.$input.val(),this.options.displayedFormat),this.options.hasError=null!==t&&!c(t,this.options.minDate,this.options.maxDate)):this.options.hasError=!1,this._setDateTime(t,!0))},_keyPress:function(){this.pickerShown},_openPicker:function(){this.options.useNativeControls?this._openNativeInput():(this._readInputVal(),this._showPicker())},_showPicker:function(){this.pickerShown||(this.$element.find("input").addClass("is-highlighted"),this.popover.show(this.displayDateTime),this.pickerShown=!0)},_hidePicker:function(){this.pickerShown&&(this.$element.find("input").removeClass("is-highlighted"),this.popover.hide(),this.pickerShown=!1)},_setDateTime:function(t,e){this.options.selectedDateTime=this.displayDateTime=t,t?t.isValid()&&this.$input.val(t.locale(this.options.language).format(this.options.displayedFormat)):this.$input.val("");var i=t&&t.isValid()?t.locale("en").format(this.options.storedFormat):"";this.$hiddenInput.val(i),this._updateState(),e||this.$input.trigger("change"),this.$hiddenInput.trigger("change")}}),CUI.Datepicker.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],CUI.Datepicker.dayNames=["Su","Mo","Tu","We","Th","Fr","Sa"],CUI.Widget.registry.register("datepicker",CUI.Datepicker),CUI.options.dataAPI&&t(document).on("cui-contentloaded.data-api",(function(e){CUI.Datepicker.init(t("[data-init~=datepicker]",e.target))}));var i=new Class({toString:"Popover",extend:Object,construct:function(t){this.$element=t.$element,this.options=t.options,this.setDateTimeCallback=t.setDateTimeCallback,this.hideCallback=t.hideCallback,this.$element.popover(),this.popover=this.$element.data("popover"),this.popover.set({pointAt:t.$trigger,pointFrom:"bottom"}),this._setupListeners()},show:function(t){this.displayDateTime=t,this._renderCalendar(),this.options.isTimeEnabled&&this._renderTime(),this.popover.show()},hide:function(){this.popover.hide()},_setupListeners:function(){this.popover.on("hide",this._popupHideHandler.bind(this)),this.$element.find(".coral-DatePicker-calendar").on("swipe",this._swipeHandler.bind(this)),this.$element.on("mousedown",".coral-DatePicker-nextMonth",this._mouseDownNextHandler.bind(this)),this.$element.on("mousedown",".coral-DatePicker-prevMonth",this._mouseDownPrevHandler.bind(this)),this.options.isTimeEnabled&&(this.$element.on("selected",".coral-DatePicker-hour, .coral-DatePicker-minute",this._dropdownChangedHandler.bind(this)),this.$element.on("change",".coral-DatePicker-hour, .coral-DatePicker-minute",this._dropdownChangedHandler.bind(this)))},_popupHideHandler:function(t){this.hideCallback()},_swipeHandler:function(t){var e=t.direction,i=this.displayDateTime.year(),a=this.displayDateTime.month(),n=moment([i,a,1]);"left"===e?(n.add(1,"months"),this.displayDateTime=r(n),this._renderCalendar("left")):"right"===e&&(n.subtract(1,"months"),this.displayDateTime=r(n),this._renderCalendar("right"))},_mouseDownNextHandler:function(t){if(t.preventDefault(),this.displayDateTime){var e=moment([this.displayDateTime.year(),this.displayDateTime.month(),1]);e.add(1,"months"),this.displayDateTime=r(e),this._renderCalendar("left")}},_mouseDownPrevHandler:function(t){if(t.preventDefault(),this.displayDateTime){var e=moment([this.displayDateTime.year(),this.displayDateTime.month(),1]);e.subtract(1,"months"),this.displayDateTime=r(e),this._renderCalendar("right")}},_dropdownChangedHandler:function(){var t=this._getHoursFromDropdown(),e=this._getMinutesFromDropdown();this.options.selectedDateTime||(this.options.selectedDateTime=moment());var i=this.options.selectedDateTime.hours(t).minutes(e);this.setDateTimeCallback(i)},_tableMouseDownHandler:function(e){e.preventDefault();var i=moment(t(e.target).data("date"),m);if(this.options.isTimeEnabled){var a=this._getHoursFromDropdown(),n=this._getMinutesFromDropdown();i.hours(a).minutes(n)}this.setDateTimeCallback(i),this._renderCalendar()},_renderCalendar:function(t){var e=this.displayDateTime;e&&e.isValid()||(this.displayDateTime=e=moment());var i=e.year(),a=e.month()+1,n=this._renderOneCalendar(a,i),o=this.$element.find(".coral-DatePicker-calendar");n.on("mousedown","a",this._tableMouseDownHandler.bind(this)),o.find("table").length>0&&t?this._slideCalendar(n,"left"===t):(o.find("table").remove(),o.find(".coral-DatePicker-calendarSlidingContainer").remove(),o.find(".coral-DatePicker-calendarBody").append(n))},_renderOneCalendar:function(e,i){var a=moment([i,e-1,1]).locale(this.options.language).format(this.options.headFormat),n=t('<div class="coral-DatePicker-calendarHeader"><h2 class="coral-Heading coral-Heading--2">'+a+"</h2></div>").append(t('<button class="coral-MinimalButton coral-DatePicker-nextMonth">&#x203A;</button>')).append(t('<button class="coral-MinimalButton coral-DatePicker-prevMonth">&#x2039;</button>')),o=this.$element.find(".coral-DatePicker-calendar"),s=o.find(".coral-DatePicker-calendarHeader");s.length>0?s.replaceWith(n):o.prepend(n);var l=t("<table>");l.data("date",i+"/"+e);for(var r="<tr>",p=null,h=0;h<7;h++){p=(h+this.options.startDay)%7,r+="<th><span>"+this.options.dayNames[p]+"</span></th>"}r+="</tr>",l.append("<thead>"+r+"</thead>");var u=(moment([i,e-1,1]).day()-this.options.startDay)%7;u<0&&(u+=7),r="";for(var f=moment(),v=0;v<6;v++){r+="<tr>";for(var g=0;g<7;g++){p=7*v+g-u;var x=moment([i,e-1]);x.add(p,"days");var b=x.month()+1===parseFloat(e),y="";d(x,f)&&(y+=" today"),d(x,this.options.selectedDateTime)&&(y+=" selected"),b&&c(x,this.options.minDate,this.options.maxDate)?r+='<td class="'+y+'"><a href="#" data-date="'+x.locale(this.options.language).format(m)+'">'+x.date()+"</a></td>":r+='<td class="'+y+'"><span>'+x.date()+"</span></td>"}r+="</tr>"}return l.append("<tbody>"+r+"</tbody>"),l},_slideCalendar:function(e,i){this.$element.find(".coral-DatePicker-calendarSlidingContainer table").stop(!0,!0),this.$element.find(".coral-DatePicker-calendarSlidingContainer").remove();var a=this.$element.find("table"),n=a.width(),o=a.height(),s=t('<div class="coral-DatePicker-calendarSlidingContainer">');s.css({display:"block",position:"relative",width:n+"px",height:o+"px",overflow:"hidden"}),this.$element.find(".coral-DatePicker-calendarBody").append(s),s.append(a).append(e),a.css({position:"absolute",left:0,top:0}),a.after(e),e.css({position:"absolute",left:i?n:-n,top:0}),a.animate({left:i?-n:n},k,(function(){a.remove()})),e.animate({left:0},k,function(){0!==s.parents().length&&(e.css({position:"relative",left:0,top:0}),e.detach(),this.$element.find(".coral-DatePicker-calendarBody").append(e),s.remove())}.bind(this))},_renderTime:function(){for(var e=this.options.selectedDateTime||moment(),i=t(b),n=t('<select class="coral-Select-select"></select>'),o=0;o<24;o++){var s=t("<option>"+a(o)+"</option>");e&&o===e.hours()&&s.attr("selected","selected"),n.append(s)}for(var l=t(y).append(n),r=t('<select class="coral-Select-select"></select>'),c=0;c<60;c++){var d=t("<option>"+a(c)+"</option>");e&&c===e.minutes()&&d.attr("selected","selected"),r.append(d)}var p=t(C).append(r);t(l).css(w),t(l).find("coral-Select").css($),t(p).css(w),t(p).find("coral-Select").css($),i.append(l,t("<span>:</span>"),p),0===this.$element.find(".coral-DatePicker-timeControls").length?this.$element.find(".coral-Popover-content").append(i):this.$element.find(".coral-DatePicker-timeControls").empty().append(i.children()),t(l).select(),t(p).select()},_getHoursFromDropdown:function(){return parseInt(this.$element.find(".coral-DatePicker-timeControls .coral-DatePicker-hour .coral-Select-select").val(),10)},_getMinutesFromDropdown:function(){return parseInt(this.$element.find(".coral-DatePicker-timeControls .coral-DatePicker-minute .coral-Select-select").val(),10)}});function a(t){return t<10?"0"+t:t}function n(t,e,i){void 0!==t&&(i[e]=t)}function o(t,e,i){i[e]=!!t}function s(t,e,i){i[e]=t||i[e]}function l(t,e,i){void 0!==t&&(i[e]=1*t)}function r(t){return t?moment([t.year(),t.month(),t.date()]):null}function c(t,e,i){return null===e&&null===i||(null===e?t<=i:null===i?t>=e:e<=t&&t<=i)}function d(t,e){if(t&&e)return t.year()===e.year()&&t.month()===e.month()&&t.date()===e.date()}var p=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i),h="YYYY-MM-DD",u="HH:mm",m="YYYY-MM-DD[T]HH:mmZ",f="YYYY-MM-DD HH:mm",v="coralui_",g=['<div class="coral-DatePicker-calendar">','<div class="coral-DatePicker-calendarHeader"></div>','<div class="coral-DatePicker-calendarBody"></div>',"</div>"].join(""),x=['<div class="coral-Popover coral-Popover--datepicker" style="display:none" id="%ID%">','<div class="coral-Popover-content"></div>',"</div>"].join(""),b='<div class="coral-DatePicker-timeControls"><i class="coral-Icon coral-Icon--clock coral-Icon--small"></i></div>',y='<div class="coral-Select coral-DatePicker-hour"><button class="coral-Select-button coral-MinimalButton"><span class="coral-Select-button-text"></span></button></div>',C='<div class="coral-Select coral-DatePicker-minute"><button class="coral-Select-button coral-MinimalButton"><span class="coral-Select-button-text"></span></button></div>',w={position:"relative"},$={position:"absolute",left:"1.5rem",top:"1rem"},k=400}(window.jQuery),function(t){CUI.Switch=new Class({toString:"Switch",extend:CUI.Widget,construct:function(t){this._initMarkup(),this._setListeners()},_initMarkup:function(){this._correctElementTagName(),this.$input=this.$element.find(".coral-Switch-input"),this.$onLabel=this.$element.find(".coral-Switch-onLabel"),this.$offLabel=this.$element.find(".coral-Switch-offLabel"),this._makeAccessible()},_correctElementTagName:function(){var e,i;this.$element.is("label")&&(e=t("<span/>"),i=this.$element.prop("attributes"),t.each(i,(function(){e.attr(this.name,this.value)})),e.insertBefore(this.$element).append(this.$element.children()),this.$element.remove(),this.$element=e)},_makeAccessible:function(){var e,i=this,a=i.$input.is(":checked"),n=/(mac|iphone|ipod|ipad)/i.test(window.navigator.platform),o=/firefox/i.test(window.navigator.userAgent);if(this.$input.attr("id")||this.$input.attr("id",CUI.util.getNextId()),this.$offLabel.attr("id")||this.$offLabel.attr("id",CUI.util.getNextId()),this.$onLabel.attr("id")||this.$onLabel.attr("id",CUI.util.getNextId()),n||this.$input.attr({role:"button","aria-pressed":a}),this.$offLabel.attr({role:"presentation","aria-hidden":a}),this.$onLabel.attr({role:"presentation","aria-hidden":!a}),!(this.$input.attr("aria-label")||this.$input.attr("aria-labelledby")&&t("#"+this.$input.attr("aria-labelledby").split(" ")[0]).length)){if(this.$labels=this.$element.closest("label"),1===this.$labels.length){this.$labels.attr("for")!==this.$input.attr("id")&&this.$labels.attr("for",this.$input.attr("id"));var s=0===this.$labels.contents().filter((function(){return 3===this.nodeType&&t.trim(this.nodeValue).length||1===this.nodeType})).index(this.$element)?"Before":"After";this.$element["insert"+s](this.$labels)}else this.$labels=t('label[for="'+this.$input.attr("id")+'"]').not(this.$offLabel).not(this.$onLabel),0===this.$labels.length&&(this.$labels=this.$labels.add(this.$offLabel).add(this.$onLabel)),this.$labels.length>0&&(e=[],this.$labels.each((function(n,o){var s=t(o),l=s.is(i.$onLabel),r=s.is(i.$offLabel);s.attr("id")||s.attr("id",CUI.util.getNextId()),(!l&&!r||l&&a||r&&!a)&&e.push(s.attr("id"))})),e.length>0&&this.$input.attr("aria-labelledby",e.join(" ")));n&&o||this.$input.attr("aria-describedby",a?this.$onLabel.attr("id"):this.$offLabel.attr("id"))}},_setListeners:function(){this.$input.on("change",function(t){var e=this.$input.is(":checked"),i=this.$onLabel.attr("id"),a=this.$offLabel.attr("id"),n=this.$input.attr("aria-labelledby");n&&(n=n.replace(e?a:i,e?i:a),this.$input.attr("aria-labelledby",n)),this.$input.filter("[aria-describedby]").attr("aria-describedby",e?this.$onLabel.attr("id"):this.$offLabel.attr("id")).filter("[aria-pressed]").attr("aria-pressed",e),this.$onLabel.attr("aria-hidden",!e),this.$offLabel.attr("aria-hidden",e)}.bind(this)),this.$input.trigger("change")}}),CUI.Widget.registry.register("Switch",CUI.Switch),t(document).on("cui-contentloaded.data-api",(function(e){CUI.Switch.init(t("[data-init~=switch], .coral-Switch",e.target))}))}(window.jQuery),function(t){function e(t){return t.filter("[data-action=prev], [data-action=cancel]").first().addClass("u-coral-hidden").clone(!0).addClass("coral-Wizard-backButton").each(a)}function i(t){return t.filter("[data-action=next]").first().addClass("u-coral-hidden").clone(!0).addClass("coral-Button--primary coral-Wizard-nextButton").each(a)}function a(e,i){t(i).removeClass("u-coral-hidden").addClass("coral-Button")}function n(n,o){var s=n.children(".js-coral-Wizard-nav");0===s.length&&n.prepend((function(){var e=(s=t('<nav class="js-coral-Wizard-nav coral-Wizard-nav coral--dark coral-Background coral-Text"><ol class="coral-Wizard-steplist"></ol></nav>')).children("ol");return o.map((function(){return t('<li class="js-coral-Wizard-steplist-item coral-Wizard-steplist-item"></li>').text(t(this).data("stepTitle")||this.title).get(0)})).appendTo(e),s})),s.hasClass("coral--light")||s.addClass("coral--dark"),s.find(".js-coral-Wizard-steplist-item:first").addClass("is-active");var l=o.first().find(".js-coral-Wizard-step-control");s.prepend((function(){return e(l)})).append((function(){return i(l).add(function(t){return t.filter("[data-action=cancel]").first().clone(!0).addClass("coral-Button--quiet coral-Wizard-nextButton").each(a)}(l).toggleClass("u-coral-hidden",!0))}))}function o(t,e,i){var a=t.children(".js-coral-Wizard-step").index(i),n=t.children(".js-coral-Wizard-nav").find(".js-coral-Wizard-steplist-item").eq(a),o=n.clone().text(e.data("stepTitle")||e.attr("title")).removeClass("is-active is-stepped");s(e),n.after(o),i.after(e)}function s(t){t&&t.length&&t.addClass("u-coral-hidden")}function l(t,e,i){var a;0!==e.length&&(s(i),(a=e)&&a.length&&a.removeClass("u-coral-hidden"),t.trigger("flexwizard-stepchange",[e,i]))}function r(t,a){var n,o,s=t.children(".js-coral-Wizard-nav"),r=t.children(".js-coral-Wizard-step:not(.u-coral-hidden)"),c=s.find(".js-coral-Wizard-steplist-item.is-active");switch(a){case"prev":n=r.prev(".js-coral-Wizard-step"),o=c.prev(".js-coral-Wizard-steplist-item");break;case"next":n=r.next(".js-coral-Wizard-step"),o=c.next(".js-coral-Wizard-steplist-item");break;case"cancel":return}if(0!==n.length){var d=n.find(".js-coral-Wizard-step-control");e(d).replaceAll(s.children(".coral-Wizard-backButton")),i(d).replaceAll(s.children(".coral-Wizard-nextButton:not([data-action=cancel])")),s.children(".coral-Wizard-nextButton[data-action=cancel]").toggleClass("u-coral-hidden",0===n.prev(".js-coral-Wizard-step").length),function(t){0!==t.length&&(t.addClass("is-active").removeClass("is-stepped"),t.prevAll(".js-coral-Wizard-steplist-item").addClass("is-stepped").removeClass("is-active"),t.nextAll(".js-coral-Wizard-steplist-item").removeClass("is-active is-stepped"))}(o),l(t,n,r)}}CUI.FlexWizard=new Class({toString:"FlexWizard",extend:CUI.Widget,construct:function(e){var i=this.$element,a=i.find(".js-coral-Wizard-step");n(i,a),i.on("click",".js-coral-Wizard-step-control",(function(e){r(i,t(this).data("action"))})),s(a),l(i,a.first())},prevStep:function(){r(this.$element,"prev")},nextStep:function(){r(this.$element,"next")},add:function(e,i){var a=this.$element;void 0!==i?(e.jquery||(e=t(e)),e.addClass("js-coral-Wizard-step"),o(a,e,a.children(".js-coral-Wizard-step").eq(i))):this.addAfter(e,a.children(".js-coral-Wizard-step").last())},addAfter:function(e,i){var a=this.$element;e.jquery||(e=t(e)),i.jquery||(i=t(i)),e.addClass("js-coral-Wizard-step"),o(a,e,i)},remove:function(e){var i=this.$element,a=e.jquery?e:t(e),n=i.children(".js-coral-Wizard-step").index(a);return i.find(".js-coral-Wizard-steplist-item").eq(n).remove(),a.detach(),e}}),CUI.Widget.registry.register("flexwizard",CUI.FlexWizard),CUI.options.dataAPI&&t(document).on("cui-contentloaded.data-api",(function(e){CUI.FlexWizard.init(t("[data-init~=flexwizard]",e.target))}))}(window.jQuery),jQuery,CUI.util.color={hex:function(t){return("0"+parseInt(t,10).toString(16)).slice(-2)},HexToRGB:function(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}},RGBAToHex:function(t){var e=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);return"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])},RGBToHex:function(t){return"#"+this.hex(t.r)+this.hex(t.g)+this.hex(t.b)},CMYKtoRGB:function(t){var e={r:0,g:0,b:0},i=parseInt(t.c,10)/100,a=parseInt(t.m,10)/100,n=parseInt(t.y,10)/100,o=parseInt(t.k,10)/100;return e.r=1-Math.min(1,i*(1-o)+o),e.g=1-Math.min(1,a*(1-o)+o),e.b=1-Math.min(1,n*(1-o)+o),e.r=Math.round(255*e.r),e.g=Math.round(255*e.g),e.b=Math.round(255*e.b),e},RGBtoCMYK:function(t){var e={c:0,m:0,y:0,k:0};if(0===parseInt(t.r,10)&&0===parseInt(t.g,10)&&0===parseInt(t.b,10))return e.k=100,e;var i=parseInt(t.r,10)/255,a=parseInt(t.g,10)/255,n=parseInt(t.b,10)/255;return e.k=Math.min(1-i,1-a,1-n),e.c=(1-i-e.k)/(1-e.k),e.m=(1-a-e.k)/(1-e.k),e.y=(1-n-e.k)/(1-e.k),e.c=Math.round(100*e.c),e.m=Math.round(100*e.m),e.y=Math.round(100*e.y),e.k=Math.round(100*e.k),e},fixHex:function(t){return 3===t.length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),-1===t.indexOf("#")&&(t="#"+t),/(^#[0-9A-F]{6})|(^#[0-9A-F]{3})$/i.test(t)?t:(this.$element.find("[name=':hex']").val(""),"")},isSameColor:function(t,e){return t&&e&&t===e},isValid:function(t,e){return-1!=e.indexOf(t)&&""!==this.fixHex(this.RGBAToHex(e))}},function(t){CUI.Colorpicker=new Class({toString:"Colorpicker",extend:CUI.Widget,defaults:{config:{colors:{},displayModes:{}},disabled:!1,name:null,title:""},palettePageSize:3,colorShadeNo:6,lowerLimit:0,upperLimit:0,colorNames:[],currentPage:0,pages:1,construct:function(e){if(this._readDataFromMarkup(),this._adjustMarkup(),null!==this.options.config&&0!==this.options.config.colors.length||(this.options.disabled=!0),!this.options.disabled&&this.options.config.displayModes.classicPalette&&this.options.config.displayModes.freestylePalette&&(this.options.disabled=!0),this.options.disabled||0!==this.options.config.displayModes.length&&(this.options.config.displayModes.classicPalette||this.options.config.displayModes.freestylePalette)||(this.options.config.displayModes.classicPalette=!0),this.$openButton=this.$element.find(".coral-ColorPicker-button"),this.$hiddenInput=this.$element.find("input[name='"+this.options.name+"']"),this.$element.attr("value")){var i=this.$element.attr("value");CUI.util.color.isValid("rgba",i)||CUI.util.color.isValid("rgb",i)?this._setColor(i):this.$element.removeAttr("value")}this.options.disabled?this.$element.find(">.coral-ColorPicker-button").attr("disabled","disabled"):(this.colorNames=[],t.each(this.options.config.colors,function(t,e){this.colorNames.push(t)}.bind(this)),t(document).off("tap."+this.options.name+" click."+this.options.name).on("tap."+this.options.name+" click."+this.options.name,function(t){this.keepShown||0===this.$popover.has(t.target).length&&this._hidePicker()}.bind(this)),this.$openButton.on("touchstart click",function(t){try{this.pickerShown?this._hidePicker():this._openPicker(),this.keepShown=!0,setTimeout(function(){this.keepShown=!1}.bind(this),200)}catch(t){}}.bind(this)))},_readDataFromMarkup:function(){this.$element.data("disabled")&&(this.options.disabled=!0),this.$element.data("name")&&(this.options.name=this.$element.data("name")),this.$element.attr("title")&&(this.options.title=this.$element.attr("title"));var t=this.$element;void 0!==t.data("config")&&(this.options.config={},this.options.config.colors={},this.options.config.displayModes={},t.data("config").colors?this.options.config.colors=t.data("config").colors:this.options.disabled=!0,t.data("config").pickerModes&&(this.options.config.displayModes=t.data("config").pickerModes))},_adjustMarkup:function(){this.$popover=this.$element.find(".coral-Popover"),0===this.$popover.length&&(this.$popover=t('<div class="coral-Popover"><div class="coral-ColorPicker-popover-inner coral-Popover-content"></div><div class="coral-ColorPicker-popover-arrow coral-Popover-arrow coral-Popover-arrow--up"></div></div>'),this.$element.append(this.$popover),this.$element.find(".coral-ColorPicker-popover-inner").append('<div class="colorpicker-holder"><div class="palette-header"></div><div class="colorpicker-body"></div><div class="colorpicker-footer"></div></div>')),0===this.$element.find("input[type=hidden]").length&&this.$element.append('<input type="hidden" name="'+this.options.name+'">');var e=this.$element.find(".coral-ColorPicker-button");void 0===e.attr("type")&&e.attr("type","button"),e.attr("data-toggle","popover"),e.attr("data-point-from","bottom")},_openPicker:function(){this._renderPicker("classicMode"),this._renderPickerFooter(),this.$popover.show(),this.pickerShown=!0},_hidePicker:function(){this.lowerLimit=0,this.upperLimit=0,this.currentPage=0,this.$element.removeClass("focus"),this.$popover.hide(),this.pickerShown=!1},_renderPicker:function(t,e,i){if("classicMode"!==t||this._calculatePaletteBoundaries(e,i)){var a=null;a="classicMode"===t?this._renderPalette():this._renderEditPalette();var n=this.$element.find(".colorpicker-holder"),o=n.find(".palette-navigator"),s=n.find(".colorpicker-body");if(e&&n.find("table").length>0)this._slidePicker(a,"left"===e);else if(n.find("table").remove(),n.find(".sliding-container").remove(),"editMode"===t){if(s.append(a),o.remove(),void 0!==this.$hiddenInput.val()&&this.$hiddenInput.val().length>0){a.find("div.color").css("background",this.$hiddenInput.val());var l=CUI.util.color.RGBAToHex(this.$hiddenInput.val());a.find("input[name=':hex']").val(l);var r=CUI.util.color.HexToRGB(l);this._fillRGBFields(r);var c=CUI.util.color.RGBtoCMYK(r);this._fillCMYKFields(c)}}else o.length>0?o.before(a):(s.append(a),this._renderPaletteNavigation())}},_renderPickerFooter:function(){if(this.$element.find(".colorpicker-footer").html('<div class="coral-ButtonGroup navigation-bar"></div>'),void 0!==this.options.config.displayModes){if(this.options.config.displayModes.classicPalette||this.options.config.displayModes.freestylePalette){var e=t("<button class='coral-ButtonGroup-item coral-Button coral-Button--secondary' id='classicButton'><i class=\"coral-Icon coral-Icon--viewGrid\"></i></button>");e.addClass("is-selected"),this.$element.find(".navigation-bar").append(e)}if(!this.options.config.displayModes.edit)return void this.$element.find(".colorpicker-footer").remove();this.$element.find(".navigation-bar").append("<button class='coral-ButtonGroup-item coral-Button coral-Button--secondary' id='editButton'><i class=\"coral-Icon coral-Icon--edit\"></i></button>")}this.$element.find(".colorpicker-footer button").off("click.button").on("click.button",function(e){e.stopPropagation(),e.preventDefault();var i=t(e.target),a=null;this.$element.find(".navigation-bar > .is-selected").removeClass("is-selected"),"BUTTON"===e.target.nodeName?(i.addClass("is-selected"),a=t(e.target)):(i.parent().addClass("is-selected"),a=i.parent()),"editButton"===a.attr("id")?this._renderPicker("editMode"):this._renderPicker("classicMode",!1,this.currentPage)}.bind(this))},_calculatePaletteBoundaries:function(t,e){var i=0;if(i=this.options.config.displayModes.freestylePalette?this.palettePageSize*this.colorShadeNo:this.palettePageSize,t)if("left"===t){if((e=this.currentPage+1)+1>this.pages)return!1;this.lowerLimit=i*e,this.upperLimit=this.lowerLimit+i-1,this.currentPage=e}else{if((e=this.currentPage-1)<0)return!1;this.lowerLimit=i*e,this.upperLimit=this.lowerLimit+i-1,this.currentPage=e}else void 0!==e?(this.lowerLimit=i*e,this.upperLimit=this.lowerLimit+i-1,this.currentPage=e):(this.upperLimit+=i-1,this.lowerLimit=0,this.currentPage=0);return!0},_renderPaletteNavigation:function(){this.$element.find(".palette-navigator").remove();var e=t("<div>");if(e.addClass("palette-navigator"),this.options.config.displayModes.classicPalette?this.pages=Math.ceil(this.colorNames.length/this.palettePageSize):this.pages=Math.ceil(this.colorNames.length/(this.palettePageSize*this.colorShadeNo)),this.pages>1)for(var i=0;i<this.pages;i++)e.append("<i class='dot coral-Icon coral-Icon--circle' page='"+i+"'></i>");this.$element.find(".colorpicker-body").append(e),this.$element.find("i[page='"+this.currentPage+"']").addClass("is-active"),this.$element.find(".colorpicker-body").on("swipe",function(t){this._renderPicker("classicMode","left"===t.direction?"left":"right")}.bind(this)),this.$element.find(".dot").off("click.dot").on("click.dot",function(e){e.stopPropagation(),this.currentPage!==parseInt(t(e.target).attr("page"),10)&&this._renderPicker("classicMode",!1,parseInt(t(e.target).attr("page"),10))}.bind(this))},_slidePicker:function(e,i){this.$element.find(".sliding-container table").stop(!0,!0),this.$element.find(".sliding-container").remove();var a=this.$element.find("table"),n=a.width(),o=a.height(),s=t('<div class="sliding-container">');s.css({display:"block",position:"relative",width:n+"px",height:o+"px",overflow:"hidden"}),this.$element.find(".palette-navigator").before(s),s.append(a).append(e),a.css({position:"absolute",left:0,top:0}),a.after(e),e.css({position:"absolute",left:i?n:-n,top:0});a.animate({left:i?-n:n},400,(function(){a.remove()})),e.animate({left:0},400,function(){0!==s.parents().length&&(e.css({position:"relative",left:0,top:0}),e.detach(),this.$element.find(".palette-navigator").before(e),s.remove())}.bind(this))},_renderPaletteHeader:function(){var e=t('<div class="palette-header"><div class="title"></div><div class="selection"></div></div>'),i=this.$element.find(".colorpicker-holder");i.find(".palette-header").length>0?i.find(".palette-header").replaceWith(e):i.prepend(e),i.find(".title").html("<span>"+this.options.title+"</span>")},_renderPalette:function(){this._renderPaletteHeader();for(var e=t("<table>"),i="",a=0;a<this.palettePageSize;a++){i+="<tr>";for(var n=0,o="",s="",l="",r=0;r<this.colorShadeNo;r++)this.options.config.displayModes.classicPalette?this.colorNames.length-1<a+this.lowerLimit?i+="<td><a></a></td>":(l="rgba("+(o=CUI.util.color.HexToRGB(this.options.config.colors[this.colorNames[a+this.lowerLimit]])).r+","+o.g+","+o.b+","+(1-n).toFixed(2)+")",n+=.16,CUI.util.color.isSameColor(l,this.$hiddenInput.val())?(s="is-selected",this._fillSelectedColor(this.colorNames[a+this.lowerLimit],CUI.util.color.RGBAToHex(l))):s="",i+="<td class='filled'><a style='background-color:"+l+"' color='"+l+"' colorName='"+this.colorNames[a+this.lowerLimit]+"' class='"+s+"'></a></td>"):this.colorNames.length-1<a*this.colorShadeNo+r?i+="<td><a></a></td>":(l="rgba("+(o=CUI.util.color.HexToRGB(this.options.config.colors[this.colorNames[a*this.colorShadeNo+r]])).r+","+o.g+","+o.b+",1)",s=CUI.util.color.isSameColor(l,this.$hiddenInput.val())?"is-selected":"",i+="<td class='filled'><a style='background-color:"+l+"' color='"+l+"' colorName='"+this.colorNames[a*this.colorShadeNo+r]+"' class='"+s+"'></a></td>");i+="</tr>"}e.append("<tbody>"+i+"</tbody>"),e.find("a").off("click.a").on("click.a",function(e){if(e.stopPropagation(),e.preventDefault(),!CUI.util.color.isSameColor(this.$hiddenInput.val(),t(e.target).attr("color"))){var i=this.$element.find("table").find(".is-selected");i.removeClass("is-selected"),i.find("i").remove();var a=t(e.target);a.addClass("is-selected"),a.html('<i class="coral-Icon coral-Icon--check"></i>'),t(e.target).addClass("is-selected");var n=void 0!==t(e.target).attr("colorName")?t(e.target).attr("colorName"):"";this._fillSelectedColor(n,CUI.util.color.RGBAToHex(t(e.target).attr("color"))),this._setColor(t(e.target).attr("color"))}}.bind(this));var c=this.$element.find(".palette-navigator");return c.find(".is-active").removeClass("is-active"),c.find("i[page='"+this.currentPage+"']").addClass("is-active"),e},_fillSelectedColor:function(t,e){this.$element.find(".colorpicker-holder").find(".selection").html("<div><span>"+t+"</span><span>"+e+"</span></div>")},_renderEditPalette:function(){var e=t("<table>");return e.append("<tbody><tr><td colspan='2' rowspan='2' class='color-field'><div class='color'></div></td><td class='label'>HEX</td><td colspan='2'><input class='coral-Textfield' type='text' name=':hex'/></td><td colspan='2'>&nbsp;</td></tr><tr><td class='label'>RGB</td><td><input class='coral-Textfield' type='text' name=':rgb_r'/></td><td><input class='coral-Textfield' type='text' name=':rgb_g'/></td><td><input class='coral-Textfield' type='text' name=':rgb_b'/></td><td>&nbsp;</td></tr><tr><td colspan='2'>&nbsp;</td><td class='label'>CMYK</td><td><input class='coral-Textfield' type='text' name=':cmyk_c'/></td><td><input class='coral-Textfield' type='text' name=':cmyk_m'/></td><td><input class='coral-Textfield' type='text' name=':cmyk_y'/</td><td><input class='coral-Textfield' type='text' name=':cmyk_k'/></td></tr><tr><td colspan='3'>&nbsp;</td><td colspan='4'><button class='coral-Button coral-Button--primary'>Save Color</button></td></tr></tbody>"),this.$element.find(".palette-header").remove(),e.find("input[name^=':rgb_']").each(function(e,i){t(i).attr("maxlength","3"),t(i).on("blur",function(e){if(!/^([0]|[1-9]\d?|[1]\d{2}|2([0-4]\d|5[0-5]))$/.test(t(e.target).val().trim())||t("input:text[value=''][name^='rgb_']").length>0)return t(e.target).val(""),this._clearCMYKFields(),this.$element.find("input[name=':hex']").val(""),void this.$element.find("div.color").removeAttr("style");var i={r:this.$element.find("input[name=':rgb_r']").val(),g:this.$element.find("input[name=':rgb_g']").val(),b:this.$element.find("input[name=':rgb_b']").val()},a=CUI.util.color.RGBtoCMYK(i),n=CUI.util.color.RGBToHex(i);this._fillCMYKFields(a),this.$element.find("input[name=':hex']").val(n),this.$element.find("div.color").css("background",n)}.bind(this))}.bind(this)),e.find("input[name^=':cmyk_']").each(function(e,i){t(i).attr("maxlength","3"),t(i).on("blur",function(e){if(!/^[1-9]?[0-9]{1}$|^100$/.test(t(e.target).val().trim())||t("input:text[value=''][name^='cmyk_']").length>0)return t(e.target).val(""),this._clearRGBFields(),this.$element.find("input[name=':hex']").val(""),void this.$element.find("div.color").removeAttr("style");var i={c:this.$element.find("input[name=':cmyk_c']").val(),m:this.$element.find("input[name=':cmyk_m']").val(),y:this.$element.find("input[name=':cmyk_y']").val(),k:this.$element.find("input[name=':cmyk_k']").val()},a=CUI.util.color.CMYKtoRGB(i),n=CUI.util.color.RGBToHex(a);this.$element.find("input[name=':hex']").val(n),this._fillRGBFields(a),this.$element.find("div.color").css("background",n)}.bind(this))}.bind(this)),e.find("input[name=':hex']").each(function(i,a){t(a).attr("maxlength","7"),t(a).on("blur",function(i){var a=CUI.util.color.fixHex(t(i.target).val().trim());if(0===a.length)return this._clearRGBFields(),this._clearCMYKFields(),void this.$element.find("div.color").removeAttr("style");var n=CUI.util.color.HexToRGB(a),o=CUI.util.color.RGBtoCMYK(n);this._fillRGBFields(n),this._fillCMYKFields(o),e.find("div.color").css("background",a)}.bind(this))}.bind(this)),e.on("click","input, div",(function(t){t.stopPropagation(),t.preventDefault()})),e.on("click","button",function(t){t.stopPropagation(),t.preventDefault(),void 0!==this.$element.find("input[name=':hex']").val()&&this.$element.find("input[name=':hex']").val().length>0&&this._setColor(this.$element.find("input[name=':hex']").val())}.bind(this)),e},_setColor:function(t){this.$hiddenInput.val(t),this.$openButton.css("background-color",this.$hiddenInput.val())},_fillRGBFields:function(t){this.$element.find("input[name=':rgb_r']").val(t.r),this.$element.find("input[name=':rgb_g']").val(t.g),this.$element.find("input[name=':rgb_b']").val(t.b)},_clearRGBFields:function(){this.$element.find("input[name^=':rgb']").val("")},_fillCMYKFields:function(t){this.$element.find("input[name=':cmyk_c']").val(t.c),this.$element.find("input[name=':cmyk_m']").val(t.m),this.$element.find("input[name=':cmyk_y']").val(t.y),this.$element.find("input[name=':cmyk_k']").val(t.k)},_clearCMYKFields:function(){this.$element.find("input[name^=':cmyk']").val("")}}),CUI.Widget.registry.register("colorpicker",CUI.Colorpicker),CUI.options.dataAPI&&t(document).on("cui-contentloaded.data-api",(function(e){CUI.Colorpicker.init(t("[data-init~=colorpicker]",e.target))}))}(window.jQuery),function(t){"use strict";var e=".coral-DragAction";function i(t){var e={};if(t.originalEvent){var i=t.originalEvent;i.changedTouches&&i.changedTouches.length>0&&(e=i.changedTouches[0]),i.touches&&i.touches.length>0&&(e=i.touches[0])}return{x:e.pageX||t.pageX,y:e.pageY||t.pageY}}CUI.DragAction=new Class({construct:function(t,e,i,a,n){this.sourceElement=e,this.dragElement=i,this.container=function(t){for(;;){var e=t.parent();if(0===e.length)return e;if(e.is("body"))return e;var i=e.css("overflow");if("hidden"===i||"auto"===i||"scroll"===i)return e;t=e}}(i),this.containerHeight=this.container.get(0).scrollHeight,this.dropZones=a,this.axis=n,this.scrollZone=20,this.dragStart(t)},currentDragOver:null,dragStart:function(a){a.preventDefault();var n=this.dragElement.position(),o=i(a);this.dragElement.css({left:n.left,top:n.top,width:this.dragElement.width()+"px"}).addClass("is-dragging"),this.dragStart={x:o.x-n.left,y:o.y-n.top},t(document).on("touchmove"+e+" mousemove"+e,this.drag.bind(this)),t(document).on("touchend"+e+" mouseup"+e,this.dragEnd.bind(this)),this.sourceElement.trigger(this._createEvent("dragstart",a)),this.drag(a)},drag:function(t){t.preventDefault();var e=i(t);if(this.container.is("body"))e.y-this.container.scrollTop()<this.scrollZone&&this.container.scrollTop(e.y-this.scrollZone),e.y-this.container.scrollTop()>this.container.height()-this.scrollZone&&this.container.scrollTop(e.y-this.container.height()-this.scrollZone);else{var a=this.container.scrollTop(),n=this.container.offset().top+this.scrollZone;e.y<n&&this.container.scrollTop(this.container.scrollTop()-(n-e.y));var o=this.container.offset().top+this.container.height()-this.scrollZone;if(e.y>o){var s=Math.min(this.container.scrollTop()+(e.y-o),Math.max(this.containerHeight-this.container.height(),0));this.container.scrollTop(s)}var l=this.container.scrollTop();this.dragStart.y+=a-l}var r={};"horizontal"!==this.axis&&(r.top=e.y-this.dragStart.y),"vertical"!==this.axis&&(r.left=e.x-this.dragStart.x),this.dragElement.css(r),this.triggerDrag(t)},dragEnd:function(i){i.preventDefault(),this.dragElement.removeClass("is-dragging"),this.dragElement.css({top:"",left:"",width:""}),t(document).off(e),this.triggerDrop(i),this.currentDragOver&&t(this.currentDragOver).trigger(this._createEvent("dragleave",i)),this.sourceElement.trigger(this._createEvent("dragend",i))},triggerDrag:function(e){var i=this._getCurrentDropZone(e);i!==this.currentDragOver?(this.currentDragOver&&t(this.currentDragOver).trigger(this._createEvent("dragleave",e)),this.currentDragOver=i,this.currentDragOver&&t(this.currentDragOver).trigger(this._createEvent("dragenter",e))):this.currentDragOver&&t(this.currentDragOver).trigger(this._createEvent("dragover",e))},triggerDrop:function(t){var e=this._getCurrentDropZone(t);e&&e.trigger(this._createEvent("drop",t))},_getCurrentDropZone:function(e){var a=i(e),n=null;return t.each(this.dropZones,(function(t,e){if(i=a.x,o=a.y,l=(s=e).offset(),i>=l.left&&i<l.left+s.outerWidth()&&o>=l.top&&o<l.top+s.outerHeight())return n=e,!1;var i,o,s,l})),n},_createEvent:function(t,e){var a=i(e),n=jQuery.Event(t);return n.pageX=a.x,n.pageY=a.y,n.sourceElement=this.sourceElement,n.item=this.dragElement,n}})}(jQuery),function(t,e){"use strict";var i='<button type="button" class="js-coral-Multifield-remove coral-Multifield-remove coral-Button coral-Button--square coral-Button--quiet"><i class="coral-Icon coral-Icon--sizeS coral-Icon--delete coral-Button-icon"></i></button>',a='<button type="button" class="js-coral-Multifield-move coral-Multifield-move coral-Button coral-Button--square coral-Button--quiet"><i class="coral-Icon coral-Icon--sizeS coral-Icon--moveUpDown coral-Button-icon"></i></button>';CUI.Multifield=new Class({toString:"Multifield",extend:CUI.Widget,construct:function(e){this.script=this.$element.find(".js-coral-Multifield-input-template"),this.ol=this.$element.children(".js-coral-Multifield-list"),0===this.ol.length&&(this.ol=t('<ol class="js-coral-Multifield-list coral-Multifield-list"></ol>').prependTo(this.$element)),this._adjustMarkup(),this._addListeners()},_adjustMarkup:function(){this.$element.addClass("coral-Multifield"),this.ol.children(".js-coral-Multifield-input").append(i,a),this.ol.after('<button type="button" class="js-coral-Multifield-add coral-Multifield-add coral-Button">Add field</button>')},_addListeners:function(){var e=this;this.$element.on("click",".js-coral-Multifield-add",(function(i){var a=t('<li class="js-coral-Multifield-input coral-Multifield-input"><div class="js-coral-Multifield-placeholder"></div><button type="button" class="js-coral-Multifield-remove coral-Multifield-remove coral-Button coral-Button--square coral-Button--quiet"><i class="coral-Icon coral-Icon--sizeS coral-Icon--delete coral-Button-icon"></i></button><button type="button" class="js-coral-Multifield-move coral-Multifield-move coral-Button coral-Button--square coral-Button--quiet"><i class="coral-Icon coral-Icon--sizeS coral-Icon--moveUpDown coral-Button-icon"></i></button></li>');a.find(".js-coral-Multifield-placeholder").replaceWith(e.script.html().trim()),a.appendTo(e.ol),t(e.ol).trigger("cui-contentloaded")})),this.$element.on("click",".js-coral-Multifield-remove",(function(e){t(this).closest(".js-coral-Multifield-input").remove()})),this.$element.on("taphold mousedown",".js-coral-Multifield-move",(function(i){i.preventDefault();var a=t(this).closest(".js-coral-Multifield-input");a.prevAll().addClass("coral-Multifield-input--dragBefore"),a.nextAll().addClass("coral-Multifield-input--dragAfter"),e.ol.css({height:e.ol.height()+t(i.item).height()+"px"}),new CUI.DragAction(i,e.$element,a,[e.ol],"vertical")})).on("dragenter",(function(t){e.ol.addClass("drag-over"),e._reorderPreview(t)})).on("dragover",(function(t){e._reorderPreview(t)})).on("dragleave",(function(t){e.ol.removeClass("drag-over").children().removeClass("coral-Multifield-input--dragBefore coral-Multifield-input--dragAfter")})).on("drop",(function(i){e._reorder(t(i.item)),e.ol.children().removeClass("coral-Multifield-input--dragBefore coral-Multifield-input--dragAfter")})).on("dragend",(function(t){e.ol.css({height:""})}))},_reorder:function(t){var e=this.ol.children(".coral-Multifield-input--dragAfter").first(),i=this.ol.children(".coral-Multifield-input--dragBefore").last();e.length>0&&t.insertBefore(e),i.length>0&&t.insertAfter(i)},_reorderPreview:function(e){this.ol.children(":not(.is-dragging)").each((function(){var i=t(this),a=e.pageY<i.offset().top+i.outerHeight()/2;i.toggleClass("coral-Multifield-input--dragAfter",a),i.toggleClass("coral-Multifield-input--dragBefore",!a)}))}}),CUI.Widget.registry.register("multifield",CUI.Multifield),CUI.options.dataAPI&&t(document).on("cui-contentloaded.data-api",(function(e){CUI.Multifield.init(t("[data-init~=multifield]",e.target))}))}(jQuery,window.console),function(t,e,i){var a,n=e.event;n.special.smartresize={setup:function(){e(this).bind("resize",n.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",n.special.smartresize.handler)},handler:function(t,e){var i=this,o=arguments;t.type="smartresize",a&&clearTimeout(a),a=setTimeout((function(){n.dispatch.apply(i,o)}),"execAsap"===e?0:10)}},e.fn.smartresize=function(t){return t?this.bind("smartresize",t):this.trigger("smartresize",["execAsap"])},e.CUIGridLayout=function(t,i,a){this.element=e(i),this._create(t),this._init(a)};var o=e(t);e.CUIGridLayout.settings={colWidth:240,gutterX:15,gutterY:15,marginLeft:0,marginRight:0,selector:"article"},e.CUIGridLayout.prototype={option:function(t){this.options=e.extend({},e.CUIGridLayout.settings,t)},_create:function(t){this.options=e.extend({},e.CUIGridLayout.settings,t),this.items=[],this.itemsByPath={},this.numCols=-1,this.pendingImages=0,this.update();var i=this;o.bind("smartresize.cui.gridlayout",(function(){i.updateDimensions(),i.layout()}))},_init:function(t){this.updateDimensions(),this.layout(t),setTimeout(function(){this.numCols=-1,this.updateDimensions(),this.layout(t),this.element.trigger(e.Event("cui-gridlayout-initialized",{widget:this}))}.bind(this),1)},update:function(){var t=[],i={};this.element.find(this.options.selector).each((function(a){var n=e(this),o=e("img",n);0===o.length&&(o=null);var s={path:n.data().path,i:a,$el:n,$img:o};t.push(s),i[s.path]=s})),this.items=t.sort((function(t,e){var i=t.$el.data("gridlayout-sortkey")||0;return(e.$el.data("gridlayout-sortkey")||0)-i||t.i-e.i})),this.itemsByPath=i},_imageLoaded:function(){0==--this.pendingImages&&(this.numCols=-1,this.layout())},updateDimensions:function(){var t=this;this.items.every((function(e){var i=e.$el;return e.w=i.width(),e.h=i.height(),e.$img&&(e.$img.width()>e.w&&(e.h=e.h-e.$img.height()+e.$img.height()/e.$img.width()*e.w),0===e.$img.height()?(e.h+=e.w,t.pendingImages++,e.$img.on("load.cui.gridlayout",(function(){e.$img=null,e.w=i.width(),e.h=i.height(),t._imageLoaded()}))):e.$img=null),!0}))},layout:function(){var t=this,i=this.element,a=this.options.colWidth,n=this.options.marginLeft,o=this.options.marginRight,s=this.options.gutterX;if(0!==i.width()){var l=Math.floor((i.width()-n-o+s)/(a+s));if(l<1&&(l=1),l!=this.numCols){this.numCols=l;for(var r=(i.width()-n-o+s)/l-s,c=[],d=[];c.length<l;)c.push([]),d.push(0);this.items.every((function(e){for(var i=e.h/e.w*r,a=d[0],n=0,o=0;o<d.length;o++){var s=d[o];s<a&&(a=s,n=o)}return c[n].push(e),d[n]+=i+t.options.gutterY,!0})),i.detach(this.options.selector);for(var p=i.contents(),h=0;h<c.length;h++)for(var u=e('<div class="grid-'+l+'"></div>').appendTo(i),m=0;m<c[h].length;m++)u.append(c[h][m].$el);p.remove(),e(document).trigger("cui-gridlayout-layout")}}},destroy:function(){o.unbind("smartresize.cui.gridlayout"),this.element.removeData("cuigridlayout")}};var s=function(e){t.console&&t.console.error(e)};e.fn.cuigridlayout=function(t,i){if("string"==typeof t){var a=Array.prototype.slice.call(arguments,1);this.each((function(){var i=e.data(this,"cuigridlayout");i?e.isFunction(i[t])&&"_"!==t.charAt(0)?i[t].apply(i,a):s("no such method '"+t+"' for cuigridlayout instance"):s("cannot call methods on cuigridlayout prior to initialization; attempted to call method '"+t+"'")}))}else this.each((function(){var a=e.data(this,"cuigridlayout");a?(a.option(t),a._init(i)):e.data(this,"cuigridlayout",new e.CUIGridLayout(t,this,i))}));return this}}(window,jQuery),function(t,e,i){var a={threshold:200,applyClassToElement:void 0},n={rem:function(){return void 0===n._rem&&(n._rem=parseInt(t("body").css("font-size"))),n._rem},em:function(t){return parseFloat(t.css("font-size"))}};t.fn.reflow=function(i,o){return this.each((function(){var s,l=t(this),r=!1,c=!1;if(i){function d(){l.is(":visible")&&(c?r=!1:(p(),c=setTimeout((function(){c=!1,!r&&l.is(":visible")&&p()}),s.threshold)))}function p(){for(var t in r=!0,i)s.applyClassToElement.toggleClass(t,i[t](l,n))}(s=t.extend({},a,o)).applyClassToElement=s.applyClassToElement||l,l.on("reflow",d),t(e).on("resize.reflow",d)}l.trigger("reflow")}))}}(jQuery,this),function(t,e,i){var a={},n=!1,o=t(document);CUI.util.state={config:{serverpersistence:!0},save:function(e,i,n,o){var s=t(e),l=function(t,i){a.global[e]=a.global[e]||{},a.global[e][i]=a.global[e][i]||{},a.global[e][i].val=s.attr(i),a.global[e][i].autorestore=n||!1,a.global[e][i].customEvent=o||null};i&&(t.isArray(i)?t.each(i,l):l(0,i)),localStorage.setItem("cui-state",JSON.stringify(a)),CUI.util.state.config.serverpersistence&&t.cookie("cui-state",JSON.stringify(a),{expires:7,path:"/"})},restore:function(e,i){var s,l,r=i||function(){return!0},c=function(e,i){l=t(s=e),a.global[s]&&t.each(a.global[s],d)},d=function(t,e){r(s,t,e)&&(l.attr(t,e.val),e.customEvent&&o.trigger(e.customEvent,[l,e]),o.trigger("cui-state-restore",[l,e]))};n||(n=CUI.util.state.load()),e?c(e):t.each(a.global,c)},load:function(){var t=localStorage.getItem("cui-state");return a=t?JSON.parse(t):{global:{}},!0},setSessionItem:function(t,e,i){var a=t;i&&(a=t+":"+i),sessionStorage.setItem(a,JSON.stringify(e))},getSessionItem:function(t,e){var i=t;e&&(i=t+":"+e);var a=sessionStorage.getItem(i);return a&&(a=JSON.parse(a)),a},removeSessionItem:function(t,e){var i=t;e&&(i=t+":"+e),sessionStorage.removeItem(i)},clearSessionItems:function(t){if(t){t=":"+t;for(var e=sessionStorage.length,i=[],a=0;a<e;a++){var n=sessionStorage.key(a),o=n.length;o>t.length&&n.substring(o-t.length)===t&&i.push(n)}for(var s=i.length,l=0;l<s;l++)sessionStorage.removeItem(i[l])}}},o.ready((function(){CUI.util.state.restore(null,(function(t,e,i){return!!i.autorestore}))}))}(jQuery),function(t){var e={itemSelector:"article",headerSelector:"header",dataContainer:"grid-0",enableImageMultiply:!0,view:{selectedItem:{list:{cls:"selected",prv:"selected-prev"},grid:{cls:"selected",prv:"selected-prev"}},selectedItems:{list:{selector:"article.selected"},grid:{selector:"article.selected"}}},controller:{selectElement:{list:"article > i.select",grid:"article"},moveHandleElement:{list:"article > i.move"},targetToItem:{list:function(t){return t.closest("article")},grid:function(t){return t.closest("article")},header:function(t){return t.closest("header")}},gridSelect:{cls:"selection-mode"},selectAll:{selector:"header > i.select",cls:"selected"},sort:{columnSelector:".label > *"}}},i=function(t){return t.jquery?t.data("cardView-item"):t},a={equals:function(t,e){return t.length===e.length&&t.length===t.filter(e).length},getWidget:function(e){var i;return e.length>0&&(i=t(e[0]).data("cardView")),i},mixObjects:function(t,e){if(void 0===t)return e;var i={};for(var a in e)if(void 0!==t[a]){var n=t[a];"object"!=typeof t[a]||t[a]instanceof String||(n=this.mixObjects(t[a],e[a])),i[a]=n}else i[a]=e[a];return i},resolve:function(e,i){var a=[];return e.each((function(){a.push.apply(a,i(t(this)).toArray())})),t(a)},multiplyImages:function(e,i){var a=(e=e.filter((function(){var e=t(this);return!e.is(".multiplied")&&!e.prev().is(".multiplied")&&e.is(":visible")}))).length,n=0;!function o(){n<a&&(!function e(a){var n=a.naturalWidth,o=a.naturalHeight;if(0===n&&0===o)return void window.setTimeout((function(){e(a)}),200);try{var s=t("<canvas width='"+n+"' height='"+o+"'></canvas>")[0],l=s.getContext("2d");l.drawImage(a,0,0,n,o);for(var r=l.getImageData(0,0,n,o),c=r.data,d=0,p=c.length;d<p;d+=4)c[d]*=i[0],c[d+1]*=i[1],c[d+2]*=i[2];l.putImageData(r,0,0),t("<img class='"+a.className+" multiplied' width='"+a.width+"' src='"+s.toDataURL("image/png")+"'/>").insertBefore(a)}catch(t){}}(e[n]),n++,setTimeout(o,0))}()}},n=new Class({$el:null,$containerEl:null,stepSize:0,iid:void 0,autoMoveOffset:0,maxScrollTop:0,construct:function(t,e,i){this.$el=t,this.stepSize=e,this.$containerEl=this._getScrollingContainer(t);var a=this.$containerEl[0];this.maxScrollTop=Math.max(a.scrollHeight-a.clientHeight,0),this.autoMoveFn=i},_getScrollingContainer:function(e){for(;e.length>0&&!e.is("body");){var i=e.css("overflowY"),a=e.css("position");if(("auto"===i||"visible"===i)&&"absolute"===a)return e;e=e.parent()}return t(window)},_execute:function(){var e=this.$containerEl[0],i=e.clientHeight,a=e.scrollTop,n=t.isWindow(e)?0:this.$containerEl.offset().top,o=this.$el.offset().top-n,s=o+this.$el.height(),l=!1;return o<=0?a>0&&(a-=this.stepSize,this.autoMoveOffset=-this.stepSize,a<0&&(a=0),e.scrollTop=a,l=!0):s>=i&&a<this.maxScrollTop&&(a+=this.stepSize,this.autoMoveOffset=this.stepSize,a>this.maxScrollTop&&(a=this.maxScrollTop),e.scrollTop=a,l=!0),l},_autoMove:function(){if(this.autoMoveOffset&&this.autoMoveFn){var t=this.$el.offset(),e=t.top+this.autoMoveOffset;this.autoMoveFn(t.left,e)}},check:function(){var t=this;this.stop(),this._execute()&&(this.iid=window.setTimeout((function(){t.iid=void 0,t._autoMove()}),50))},stop:function(){void 0!==this.iid&&(window.clearTimeout(this.iid),this.autoMoveOffset=0,this.iid=void 0)}}),o=new Class({$listEl:null,$itemEl:null,$items:null,$doc:null,$oldBefore:null,dragCls:null,fixHorizontalPosition:!1,autoScroller:null,construct:function(t){var e=this;this.$listEl=t.$listEl,this.$itemEl=t.$itemEl,this.$items=t.$items,this.dragCls=t.dragCls,this.fixHorizontalPosition=!1!==t.fixHorizontalPosition,this.autoScroller=t.autoScrolling?new n(this.$itemEl,8,(function(t,i){e._autoMove(t,i)})):void 0},_getEventCoords:function(t){return t.originalEvent.touches?t.originalEvent.touches.length>0?{x:t.originalEvent.touches[0].pageX,y:t.originalEvent.touches[0].pageY}:t.originalEvent.changedTouches.length>0?{x:t.originalEvent.changedTouches[0].pageX,y:t.originalEvent.changedTouches[0].pageY}:{x:t.pageX,y:t.pageY}:{x:t.pageX,y:t.pageY}},_limit:function(t,e){e<this.listOffset.left&&(e=this.listOffset.left),t<this.listOffset.top&&(t=this.listOffset.top);var i=e+this.size.width,a=t+this.size.height,n=this.listOffset.left+this.listSize.width,o=this.listOffset-t+this.listSize.height;return i>n&&(e=n-this.size.width),a>o&&(t=o-this.size.height),this.fixHorizontalPosition&&(e=this.listOffset.left),{top:t,left:e}},_getEventPos:function(t){var e=this._getEventCoords(t);return{x:e.x-this.delta.left,y:e.y-this.delta.top}},_adjustPosition:function(t,e){this.$itemEl.offset(this._limit(e,t)),this.autoScroller&&this.autoScroller.check()},_changeOrderIfRequired:function(){for(var e=this.$itemEl.offset(),i=e.left+this.size.width/2,n=e.top+this.size.height/2,o=null,s=!1,l=0;l<this.$items.length;l++){var r=t(this.$items[l]);if(!a.equals(r,this.$itemEl)){var c=r.offset(),d=r.width(),p=r.height(),h=c.top+p;if(i>=c.left&&i<c.left+d&&n>=c.top&&n<h){s=n-c.top>h-n,o=r;break}}}if(o){var u=this.$itemEl.offset();s?o.before(this.$itemEl):o.after(this.$itemEl),this.$itemEl.offset(u)}},_autoMove:function(t,e){this._adjustPosition(t,e),this._changeOrderIfRequired()},start:function(e){this.$oldPrev=this.$itemEl.prev(),this.$oldNext=this.$itemEl.next();var i=this._getEventCoords(e);this.dragCls&&this.$itemEl.addClass(this.dragCls);var a=this;this.$doc=t(document),this.$doc.on("touchmove.listview.drag mousemove.listview.drag",(function(t){a.move(t)})),this.$doc.on("touchend.listview.drag mouseup.listview.drag",(function(t){a.end(t)})),this.offset=this.$itemEl.offset(),this.delta={left:i.x-this.offset.left,top:i.y-this.offset.top},this.size={width:this.$itemEl.width(),height:this.$itemEl.height()},this.listOffset=this.$listEl.offset(),this.listSize={width:this.$listEl.width(),height:this.$listEl.height()},e.stopPropagation(),e.preventDefault()},move:function(t){var e=this._getEventPos(t);this._adjustPosition(e.x,e.y),this._changeOrderIfRequired(),t.stopPropagation(),t.preventDefault()},end:function(e){var i=this._getEventPos(e);this._adjustPosition(i.x,i.y),this.dragCls&&this.$itemEl.removeClass(this.dragCls),this.autoScroller&&this.autoScroller.stop(),this.$itemEl.css("position",""),this.$itemEl.css("top",""),this.$itemEl.css("left",""),this.$doc.off("touchmove.listview.drag"),this.$doc.off("mousemove.listview.drag"),this.$doc.off("touchend.listview.drag"),this.$doc.off("mouseup.listview.drag");var n=this.$itemEl.prev(),o=this.$itemEl.next();this.$itemEl.trigger(t.Event("item-moved",{newPrev:n,newNext:o,oldPrev:this.$oldPrev,oldNext:this.$oldNext,hasMoved:!a.equals(n,this.$oldPrev)})),e.stopPropagation(),e.preventDefault()}}),s=new Class({$itemEl:null,construct:function(t){this.$itemEl=t,this.reference()},getItemEl:function(){return this.$itemEl},reference:function(){this.$itemEl.data("cardView-item",this)}}),l=new Class({$headerEl:null,itemRef:null,construct:function(t,e){this.$headerEl=t,this.itemRef=e},getHeaderEl:function(){return this.$headerEl},getItemRef:function(){return this.itemRef},setItemRef:function(t){this.itemRef=t}}),r=new Class({construct:function(t){this.model=t.model,this.comparators=t.comparators,this.selectors=t.selectors,this.columnElement=t.columnElement,this.headerElement=t.columnElement.closest(this.selectors.headerSelector);var e=this.model.getHeaderForEl(this.headerElement);if(this.items=this.model.getItemsForHeader(e),this.isReverse=this.columnElement.hasClass("sort-asc"),this.toNatural=this.columnElement.hasClass("sort-desc"),this.fromNatural=!this.headerElement.hasClass("sort-mode"),this.comparator=null,this.comparators)for(var i in this.comparators)this.columnElement.is(i)&&(this.comparator=this.comparators[i]);this.comparator||(this.comparator=this._readComparatorFromMarkup())},_readComparatorFromMarkup:function(){var t=this.columnElement.data("sort-selector"),e=this.columnElement.data("sort-attribute"),i=this.columnElement.data("sort-type"),a=this.columnElement.data("ignorecase");return t||e?new CUI.CardView.DefaultComparator(t,e,i,a):null},_adjustMarkup:function(){this.fromNatural&&this.headerElement.addClass("sort-mode"),this.toNatural&&this.headerElement.removeClass("sort-mode"),this.headerElement.find(this.selectors.controller.sort.columnSelector).removeClass("sort-asc sort-desc"),this.columnElement.removeClass("sort-desc sort-asc"),this.toNatural||this.columnElement.addClass(this.isReverse?"sort-desc":"sort-asc");var e=this.toNatural;t.each(this.items,(function(){this.getItemEl().find(".move").toggle(e)}))},sort:function(){if(this.comparator||this.toNatural){this._adjustMarkup();var e=this.items.slice();if(this.comparator){this.comparator.setReverse(this.isReverse);var i=this.comparator.getCompareFn();this.toNatural||e.sort(i)}var a=this.headerElement;t.each(this.items,(function(){this.getItemEl().detach()}));for(var n=0;n<e.length;n++){var o=e[n].getItemEl();a.after(o),a=o}}}}),c=new Class({$el:null,items:null,headers:null,selectors:null,construct:function(e,i){this.$el=e,this.items=[],this.selectors=i;for(var a=this.$el.find(i.itemSelector),n=a.length,o=0;o<n;o++)this.items.push(new s(t(a[o])));this.headers=[];for(var r=this.$el.find(i.headerSelector),c=r.length,d=0;d<c;d++){var p=t(r[d]),h=p.nextAll(i.itemSelector),u=h.length>0?this.getItemForEl(t(h[0])):void 0;this.headers.push(new l(p,u))}},initialize:function(){var t=this;this.$el.on("item-moved",this.selectors.itemSelector,(function(e){e.hasMoved&&t._reorder(e)}))},_reorder:function(e){var i,a=this.getItemForEl(t(e.target)),n=this.getItemForEl(e.newPrev),o=!1;if(!n&&(i=this.getHeaderForEl(e.newPrev))){o=!0;var s=this.getItemIndex(i.getItemRef());s>0&&(n=this.getItemAt(s-1))}var l=this.getItemIndex(a);this.items.splice(l,1);var r=this._getHeaderByItemRef(a);r&&r.setItemRef(this.getItemAt(l));var c=n?this.getItemIndex(n)+1:0;this.items.splice(c,0,a),o&&i.setItemRef(a)},getItemCount:function(){return this.items.length},getItemAt:function(t){return this.items[t]},getItemIndex:function(t){for(var e=0;e<this.items.length;e++)if(t===this.items[e])return e;return-1},getItemForEl:function(t){for(var e=this.items.length,i=0;i<e;i++){var n=this.items[i];if(a.equals(n.getItemEl(),t))return n}},insertItemAt:function(e,i,n){t.isArray(e)||(e=e.toArray());for(var o=e.length-1;o>=0;o--){var l,r=e[o];r.jquery||(r=t(r));var c=new s(r);null==i?(this.items.push(c),i=this.items.length-1):(l=this.items[i],this.items.splice(i,0,c));for(var d={item:l,mode:"item"},p=this.headers.length,h=0;h<p;h++){var u=this.headers[h];if(u.getItemRef()===l){if(n){d={item:u,mode:"header"};break}u.setItemRef(c)}}this.$el.trigger(t.Event("change:insertitem",{insertPoint:d,followupItem:l,item:c,pos:i,widget:a.getWidget(this.$el),moreItems:o>0}))}},getHeaderCount:function(){return this.headers.length},getHeaderAt:function(t){return this.headers[t]},getHeaders:function(){var t=[];return t.push.apply(t,this.headers),t},getHeaderForEl:function(t){for(var e=this.headers.length,i=0;i<e;i++){var n=this.headers[i];if(a.equals(n.getHeaderEl(),t))return n}},_getHeaderByItemRef:function(t){for(var e=0;e<this.headers.length;e++)if(this.headers[e].getItemRef()===t)return this.headers[e]},getItemsForHeader:function(t){for(var e=t.getItemRef(),i=this.headers.length,a=this.items.length,n=[],o=!1,s=0;s<a;s++){var l=this.items[s];if(o){for(var r=0;r<i;r++)if(this.headers[r].getItemRef()===l){o=!1;break}if(!o)break;n.push(l)}else l===e&&(o=!0,n.push(e))}return n},fromItemElements:function(e){var i=[];return e.each((function(){var e=t(this).data("cardView-item");e&&i.push(e)})),i},reference:function(){for(var t=this.items.length,e=0;e<t;e++)this.items[e].reference()},removeAllItemsSilently:function(){this.items.length=0;for(var t=0;t<this.headers.length;t++)this.headers[t].setItemRef(void 0)}}),d=new Class({$el:null,selectors:null,construct:function(t,e){this.$el=t,this.selectors=e},initialize:function(){var t=this;this.$el.on("change:displayMode",(function(e){var i=e.oldValue,a=e.value;t.cleanupAfterDisplayMode(i),t.prepareDisplayMode(a)})),this.$el.on("change:insertitem",(function(e){t._onItemInserted(e)})),this.$el.reflow({small:function(t,e){return t.width()>40*e.rem()&&t.width()<50*e.rem()},xsmall:function(t,e){return t.width()>30*e.rem()&&t.width()<40*e.rem()},xxsmall:function(t,e){return t.width()<30*e.rem()}})},_onItemInserted:function(t){var e=this.$el;this.selectors.dataContainer&&(e=e.find("."+this.selectors.dataContainer));var i=t.item.getItemEl(),n=t.followupItem;switch(this.getDisplayMode()){case"list":if(n){var o=t.insertPoint,s=o.item;("item"===o.mode?s.getItemEl():s.getHeaderEl()).before(i)}else e.append(i);break;case"grid":if(!t.moreItems){var l=a.getWidget(this.$el);l._restore(),l.layout()}}},getDisplayMode:function(){return a.getWidget(this.$el).getDisplayMode()},setSelectionState:function(t,e){var i=this.getDisplayMode(),a=this.selectors.view.selectedItem[i],n=t.getItemEl();a.selector&&(n=n.find(a.selector)),"selected"===e?(n.addClass(a.cls).prev().addClass(a.prv),"grid"===i&&this._drawSelectedGrid(t)):"unselected"===e&&n.removeClass(a.cls).prev().removeClass(a.prv)},getSelectionState:function(t){var e=this.selectors.view.selectedItem[this.getDisplayMode()],i=t.getItemEl();e.selector&&(i=i.find(e.selector));for(var a=e.cls.split(" "),n=0;n<a.length;n++)if(!i.hasClass(a[n]))return"unselected";return"selected"},getSelectedItems:function(){var t=this.selectors.view.selectedItems[this.getDisplayMode()],e=this.$el.find(t.selector);return t.resolver&&(e=t.resolver(e)),e},restore:function(e,i){var a=t("<div class='"+this.selectors.dataContainer+"'>");this.$el.empty(),this.$el.append(a);for(var n=e.getItemCount(),o=0;o<n;o++)a.append(e.getItemAt(o).getItemEl());if(i)for(var s=e.getHeaderCount(),l=0;l<s;l++){var r=e.getHeaderAt(l),c=r.getHeaderEl(),d=r.getItemRef();d?d.getItemEl().before(c):a.append(c)}},prepareDisplayMode:function(t){"grid"===t&&this._drawAllSelectedGrid()},cleanupAfterDisplayMode:function(t){},_drawImage:function(e,i){if(0!==e.length){if(void 0===this._colorFloat){var n=e.closest("a, .card",i[0]).css("background-color");if(!n||n.indexOf("rgb(")<0)return;this._colorFloat=t.map(n.match(/(\d+)/g),(function(t){return t/255}))}a.multiplyImages(e,this._colorFloat)}},_drawAllSelectedGrid:function(){if(this.selectors.enableImageMultiply){var e=this;t(this.selectors.view.selectedItems.grid.selector).each((function(){var i=t(this),a=i.find("img");e._drawImage(a,i),a.load((function(){e._drawImage(t(this),i)}))}))}},_drawSelectedGrid:function(e){if(this.selectors.enableImageMultiply){var i=this,a=e.getItemEl(),n=a.find("img");this._drawImage(n,a),n.load((function(){i._drawImage(t(this),a)}))}},removeAllItemsSilently:function(){this.$el.find(this.selectors.itemSelector).remove()}}),p=new Class({$el:null,selectors:null,comparators:null,selectionModeCount:null,construct:function(t,e,i){this.$el=t,this.selectors=e,this.comparators=i,this.selectionModeCount="multiple"},initialize:function(){this.setDisplayMode(this.$el.hasClass("list")?"list":"grid");var e=this;this.$el.on("click.cardview.select",this.selectors.controller.selectElement.list,(function(t){var n=a.getWidget(e.$el);if("list"===n.getDisplayMode()){var o=i(e.getItemElFromEvent(t));n.toggleSelection(o)&&(t.stopPropagation(),t.preventDefault())}})),this.$el.on("click.cardview.select",this.selectors.controller.selectElement.grid,(function(t){var n=a.getWidget(e.$el);if("grid"===n.getDisplayMode()&&n.isGridSelectionMode()){var o=i(e.getItemElFromEvent(t));n.toggleSelection(o)&&(t.stopPropagation(),t.preventDefault())}})),this.$el.on("click.cardview.selectall",this.selectors.controller.selectAll.selector,(function(i){var n=a.getWidget(e.$el);if("list"===n.getDisplayMode()){var o=e.selectors.controller.selectAll.cls,s=e.selectors.controller.targetToItem.header(t(i.target)),l=n.getModel().getHeaderForEl(s);s.hasClass(o)?n.deselectAll(l):n.selectAll(l)}})),this.$el.on("click.cardview.sort",this.selectors.headerSelector+" "+this.selectors.controller.sort.columnSelector,(function(i){var n=a.getWidget(e.$el).getModel(),o=t.Event("sortstart");(t(i.target).trigger(o),o.isDefaultPrevented())||(new r({model:n,columnElement:t(i.target),comparators:e.comparators,selectors:e.selectors}).sort(),o=t.Event("sortend"),t(i.target).trigger(o))})),this.$el.on("selectstart.cardview",this.selectors.headerSelector+" "+this.selectors.controller.sort.columnSelector,(function(t){t.preventDefault()})),this.$el.on("touchstart.cardview.reorder mousedown.cardview.reorder",this.selectors.controller.moveHandleElement.list,(function(i){var a=e.getItemElFromEvent(i);new o({$listEl:e.$el,$itemEl:a,$items:t(e.selectors.itemSelector),dragCls:"dragging",autoScrolling:!0}).start(i)})),this.$el.on("change:selection",(function(t){t.moreSelectionChanges||e._adjustSelectAllState(t.widget)})),this.$el.on("change:insertitem",(function(t){t.moreItems||e._adjustSelectAllState(t.widget)}))},_adjustSelectAllState:function(t){for(var e=this.selectors.controller.selectAll.cls,i=t.getHeaderSelectionState().headers,a=i.length,n=0;n<a;n++){var o=i[n],s=o.header.getHeaderEl();o.hasUnselected?s.removeClass(e):s.addClass(e)}},getItemElFromEvent:function(e){var i=t(e.target),a=this.selectors.controller.targetToItem[this.getDisplayMode()];return t.isFunction(a)?a(i):i.find(a)},isGridSelect:function(){var t=this.selectors.controller.gridSelect,e=this.$el;return t.selector&&(e=e.find(t.selector)),e.hasClass(t.cls)},setGridSelect:function(e){if(this.isGridSelect()!==e){var i=this.selectors.controller.gridSelect,n=this.$el;i.selector&&(n=n.find(i.selector)),e?n.addClass(i.cls):(n.removeClass(i.cls),a.getWidget(n).clearSelection()),this.$el.trigger(t.Event("change:gridSelect",{widget:this.$el.data("cardView"),oldValue:!e,value:e}))}},getDisplayMode:function(){return this.$el.hasClass("list")?"list":this.$el.hasClass("grid")?"grid":null},isColumnSorted:function(){return"list"==this.getDisplayMode()&&this.$el.find(this.selectors.headerSelector).filter(".sort-mode").length>0},setDisplayMode:function(e){var i=this.getDisplayMode();if(i!==e){var n=a.getWidget(this.$el);switch(n._restore("list"===e),e){case"grid":if(this.$el.removeClass("list"),this.$el.addClass("grid"),null!==i){var o=n.getSelection();this.setGridSelect(o.length>0),n.layout()}break;case"list":this.$el.cuigridlayout("destroy"),this.$el.removeClass("grid"),this.$el.addClass("list")}this.$el.trigger(t.Event("change:displayMode",{widget:this.$el.data("cardView"),oldValue:i,value:e}))}},getSelectionModeCount:function(){return this.selectionModeCount},setSelectionModeCount:function(t){this.selectionModeCount=t}}),h=new Class({$el:null,selectors:null,comparators:null,model:null,view:null,controller:null,construct:function(t,e){this.selectors=t,this.comparators=e},initialize:function(t){this.$el=t,this.setModel(new c(t,this.selectors)),this.setView(new d(t,this.selectors)),this.setController(new p(t,this.selectors,this.comparators)),this.model.initialize(),this.view.initialize(),this.controller.initialize()},setModel:function(t){this.model=t},getModel:function(){return this.model},setView:function(t){this.view=t},getView:function(){return this.view},setController:function(t){this.controller=t},getController:function(){return this.controller},isSelected:function(t){return"selected"===this.view.getSelectionState(t)},setSelected:function(t,e){var i=e?"selected":"unselected";this.view.setSelectionState(t,i)},getSelection:function(t){var e=this.view.getSelectedItems();return!0===t&&(e=this.model.fromItemElements(e)),e},getDisplayMode:function(){return this.controller.getDisplayMode()},isColumnSorted:function(){return this.controller.isColumnSorted()},setDisplayMode:function(t){this.controller.setDisplayMode(t)},isGridSelectionMode:function(){return this.controller.isGridSelect()},setGridSelectionMode:function(t){this.controller.setGridSelect(t)},getSelectionModeCount:function(){return this.controller.getSelectionModeCount()},setSelectionModeCount:function(t){this.controller.setSelectionModeCount(t)},_restore:function(t){this.view.restore(this.model,t),this.model.reference()},removeAllItems:function(){a.getWidget(this.$el).clearSelection(),this.model.removeAllItemsSilently(),this.view.removeAllItemsSilently()}});CUI.CardView=new Class({toString:"CardView",extend:CUI.Widget,adapter:null,construct:function(t){var i=a.mixObjects(t.selectorConfig,e),n=t.comparators||null;this.adapter=new h(i,n),this.adapter.initialize(this.$element),this.layout(t.gridSettings)},destroy:function(){this.$element.off(),this.$element.removeData("cardView"),this.$element.data("cuigridlayout")&&this.$element.data("cuigridlayout").destroy(),this.adapter=null,delete this.$element},getModel:function(){return this.adapter.getModel()},setModel:function(t){this.adapter.setModel(t)},isSelected:function(t){return this.adapter.isSelected(t)},getDisplayMode:function(){return this.adapter.getDisplayMode()},isColumnSorted:function(){return this.adapter.isColumnSorted()},setColumnSortable:function(t){},isColumnSortable:function(){},setDisplayMode:function(t){this.adapter.setDisplayMode(t)},isGridSelectionMode:function(){return this.adapter.isGridSelectionMode()},setGridSelectionMode:function(t){this.adapter.setGridSelectionMode(t)},toggleGridSelectionMode:function(){this.setGridSelectionMode(!this.isGridSelectionMode())},getSelectionModeCount:function(){return this.adapter.getSelectionModeCount()},setSelectionModeCount:function(t){this.adapter.setSelectionModeCount(t)},select:function(e,a){e=i(e),this.adapter.isSelected(e)||("single"===this.getSelectionModeCount()&&this.getSelection().length>0&&this.clearSelection(),this.adapter.setSelected(e,!0),this.$element.trigger(t.Event("change:selection",{widget:this,item:e,isSelected:!0,moreSelectionChanges:!0===a})))},deselect:function(e,a){e=i(e),this.adapter.isSelected(e)&&(this.adapter.setSelected(e,!1),this.$element.trigger(t.Event("change:selection",{widget:this,item:e,isSelected:!1,moreSelectionChanges:a})))},toggleSelection:function(e,a){e=i(e);var n=t.Event("beforeselect",{selectionCancelled:!1,stopEvent:!1,item:e,cancelSelection:function(t){this.selectionCancelled=!0,this.stopEvent=!0===t}});if(this.$element.trigger(n),n.selectionCancelled)return n.stopEvent;var o=this.isSelected(e);return!o&&"single"===this.getSelectionModeCount()&&this.getSelection().length>0&&this.clearSelection(),this.adapter.setSelected(e,!o),this.$element.trigger(t.Event("change:selection",{widget:this,item:e,isSelected:!o,moreSelectionChanges:a})),!0},getSelection:function(t){return this.adapter.getSelection(!0===t)},clearSelection:function(){for(var t=this.getSelection(!0),e=t.length,i=e-1,a=0;a<e;a++)this.deselect(t[a],a<i)},_headerSel:function(e,i,a){var n=this.adapter.getModel();null==e&&(e=n.getHeaders()),t.isArray(e)||(e=[e]);for(var o=e.length,s=0;s<o;s++){var l=e[s];l.jquery&&(l=n.getHeaderForEl(l));for(var r=n.getItemsForHeader(l),c=r.length,d=0;d<c;d++)i.call(this,r[d],!a(d,r))}},selectAll:function(t){if("multiple"===this.getSelectionModeCount()){var e=this;this._headerSel(t,this.select,(function(t,i){for(++t;t<i.length;t++)if(!e.isSelected(i[t]))return!1;return!0}))}},deselectAll:function(t){var e=this;this._headerSel(t,this.deselect,(function(t,i){for(++t;t<i.length;t++)if(e.isSelected(i[t]))return!1;return!0}))},getHeaderSelectionState:function(){for(var t=this.getModel(),e=null,i={selected:[],hasUnselected:!1,headers:[]},a=t.getHeaderCount(),n=t.getItemCount(),o=0;o<n;o++){for(var s=t.getItemAt(o),l=0;l<a;l++){var r=t.getHeaderAt(l);if(r.getItemRef()===s){e={header:r,selected:[],hasUnselected:!1},i.headers.push(e);break}}this.isSelected(s)?null!==e?e.selected.push(s):i.selected.push(s):null!==e?e.hasUnselected=!0:i.hasUnselected=!0}return i},layout:function(t){"grid"===this.getDisplayMode()&&(this.$element.data("cuigridlayout")&&this.$element.cuigridlayout("destroy"),this.$element.cuigridlayout(t))},relayout:function(){"grid"===this.getDisplayMode()&&this.$element.cuigridlayout("layout")},_restore:function(t){this.adapter._restore(t)},append:function(t){this.adapter.getModel().insertItemAt(t,null,!1)},prepend:function(t){this.adapter.getModel().insertItemAt(t,0,!1)},removeAllItems:function(){this.adapter.removeAllItems(),"grid"===this.getDisplayMode()&&this.relayout(),this.$element.trigger(t.Event("change:removeAll",{widget:this}))}}),CUI.CardView.DefaultComparator=new Class({construct:function(t,e,i,a){this.selector=t,this.attribute=e,this.ignoreCase=a,this.isNumeric="numeric"==i,this.reverseMultiplier=1},setReverse:function(t){this.reverseMultiplier=t?-1:1},compare:function(t,e){var i=t.getItemEl(),a=e.getItemEl(),n=this.selector?i.find(this.selector):i,o=this.selector?a.find(this.selector):a,s="",l="";return this.attribute?"data-"==this.attribute.substr(0,5)?(s=n.data(this.attribute.substr(5)),l=o.data(this.attribute.substr(5))):(s=n.attr(this.attribute),l=o.attr(this.attribute)):(s=this.ignoreCase?n.text().toLowerCase():n.text(),l=this.ignoreCase?o.text().toLowerCase():o.text()),this.isNumeric&&(s*=1,l*=1,isNaN(s)&&(s=0),isNaN(l)&&(l=0)),s>l?1*this.reverseMultiplier:s<l?-1*this.reverseMultiplier:0},getCompareFn:function(){return this.compare.bind(this)}}),CUI.CardView.DISPLAY_GRID="grid",CUI.CardView.DISPLAY_LIST="list",CUI.CardView.SELECTION_MODE_COUNT_SINGLE="single",CUI.CardView.SELECTION_MODE_COUNT_MULTI="multiple",CUI.CardView.get=function(t){var e=a.getWidget(t);return e||(e=a.getWidget(t.cardView())),e},CUI.Widget.registry.register("cardview",CUI.CardView),CUI.options.dataAPI&&t((function(){for(var e=t("body").find('[data-toggle="cardview"]'),i=0;i<e.length;i++){var a=t(e[i]);a.data("cardview")||CUI.CardView.init(a)}}))}(window.jQuery),function(t,e){"use strict";if(!document.documentElement.classList.contains("skipCoral2Validation")&&!document.head.querySelector(".skipCoral2Validation")){var i=function(t,e,i){var a;return function(){var n=this,o=arguments,s=function(){a=null,i||t.apply(n,o)},l=i&&!a;clearTimeout(a),a=setTimeout(s,e),l&&t.apply(n,o)}};t.message.register({selector:"*",message:function(t,e,i){if("validation.required"===e)return Granite.I18n.get("Please fill out this field.")}}),t(document).on("cui-contentloaded",(function(e){t(":submittable",e.target).on("invalid",(function(e){e.isJqueryValidator||(e.preventDefault(),g(t(this)))}))}));var a="coral-validations.internal.simple.error",n=function(i,n){var o=i.data(a);if(o)return(s=o.data("tooltip")).set("content",n),void(o.parent().length||(i.after(o),s.show()));o=t(document.createElement("span")),i.data(a,o),i.after(o);var s=new e.Tooltip({element:o,target:i,content:n,type:"error",arrow:"bottom"})},o=function(t){var e=t.data(a);e&&(e.data("tooltip").hide(),e.detach())};t.validator.register({selector:"*",show:function(t,e){t.attr("aria-invalid","true").addClass("is-invalid"),n(t,e)},clear:function(t){t.removeAttr("aria-invalid").removeClass("is-invalid"),o(t)}});var s=[".coral-InputGroup-input",".coral-DecoratedTextfield-input",".js-coral-Autocomplete-textfield",".js-coral-pathbrowser-input",".coral-Checkbox-input",".coral-Switch-input",".coral-Select-select",".coral-FileUpload-input"].join(", "),l=[[".js-coral-Autocomplete-textfield",".coral-Autocomplete"],[".js-coral-pathbrowser-input",".coral-PathBrowser"],[".coral-InputGroup-input",".coral-InputGroup"],[".coral-DecoratedTextfield-input",".coral-DecoratedTextfield"],[".coral-Checkbox-input",".coral-Checkbox"],[".coral-Switch-input",".coral-Switch"],[".coral-Select-select",".coral-Select"],[".coral-FileUpload-input",".coral-FileUpload"]],r=function(t){var e;if(l.some((function(i){return!!t.is(i[0])&&(e=i,!0)})),e)return t.closest(e[1])};t.validator.register({selector:s,show:function(t,e){t.attr("aria-invalid","true").addClass("is-invalid"),n(r(t),e)},clear:function(t){t.removeAttr("aria-invalid").removeClass("is-invalid"),o(r(t))}});var c=t(document.createElement("span")).addClass("coral-Form-fielderror coral-Icon coral-Icon--alert coral-Icon--sizeS").attr({"data-init":"quicktip","data-quicktip-type":"error"}),d="coral-validations.internal.field.error",p=[".coral-Form-fieldwrapper .coral-Form-field",".coral-Form-fieldwrapper .coral-Form-field.coral-InputGroup .coral-InputGroup-input",".coral-Form-fieldwrapper .coral-Form-field.coral-DecoratedTextfield .coral-DecoratedTextfield-input",".coral-Form-fieldwrapper .coral-Form-field.coral-Autocomplete .js-coral-Autocomplete-textfield",".coral-Form-fieldwrapper .coral-Form-field.coral-PathBrowser .js-coral-pathbrowser-input",".coral-Form-fieldwrapper .coral-Form-field.coral-Checkbox .coral-Checkbox-input",".coral-Form-fieldwrapper .coral-Form-field.coral-Switch .coral-Switch-input",".coral-Form-fieldwrapper .coral-Form-field.coral-Select .coral-Select-select",".coral-Form-fieldwrapper .coral-Form-field.coral-FileUpload .coral-FileUpload-input"].join(", ");t.validator.register({selector:p,show:function(t,e){t.attr("aria-invalid","true").addClass("is-invalid");var i=t.closest(".coral-Form-field"),a=i.nextAll(".coral-Form-fieldinfo");a.addClass("u-coral-screenReaderOnly");var n=t.data(d);if(n)return n.data("quicktipContent",e),void(n.parent().length||i.after(n));var o=a.data("quicktipArrow");if(!o){var s=i.closest(".coral-Form-fieldwrapper");o=s.hasClass("coral-Form-fieldwrapper--singleline")?"left":s.closest("form").hasClass("coral-Form--vertical")?"right":"top"}n=c.clone().attr("data-quicktip-arrow",o).attr("data-quicktip-content",e).insertAfter(i),t.data(d,n)},clear:function(t){t.removeAttr("aria-invalid").removeClass("is-invalid");var e=t.closest(".coral-Form-field"),i=t.data(d);if(i){var a=i.next(".coral-Tooltip").data("tooltip");a&&a.hide(),i.detach()}e.nextAll(".coral-Form-fieldinfo").removeClass("u-coral-screenReaderOnly")}}),t.validator.register({selector:"input, textarea, select",validate:function(t){if(!0===t.prop("required")||void 0===t.prop("required")&&void 0!==t.attr("required")||"true"===t.attr("aria-required")){return(t.is("[type=checkbox], [type=radio]")?t.prop("checked"):t.val().length>0)?void 0:t.message("validation.required")}}});var h=function(e){g(t(this))};t(document).on("change","input, textarea, select",h),t(document).on("input","input, textarea",i(h,500)),t.validator.register({selector:"[role=listbox]",validate:function(e){if("true"===e.attr("aria-required")){var i=!1;return e.find("[role=option]").each((function(){if("true"===t(this).attr("aria-selected"))return i=!0,!1})),i?void 0:e.message("validation.required")}}}),t.validator.register({selector:".coral-Select-select",show:function(e,i){return e.prev(".coral-Select-button").addClass("is-invalid"),t.validator.CONTINUE},clear:function(e,i){return e.prev(".coral-Select-button").removeClass("is-invalid"),t.validator.CONTINUE}}),t(document).on("selected",".coral-Select",(function(e){g(t(this).find(".coral-Select-select"))}));var u=e.Multifield.prototype._addListeners;e.Multifield.prototype._addListeners=function(){u.apply(this,arguments),this.$element.on("click",".js-coral-Multifield-remove",(function(e){g(t(e.delegateTarget))})),this.$element.on("click",".js-coral-Multifield-add",(function(e){var i=t(e.delegateTarget);i.find(".js-coral-Multifield-input").attr({role:"option","aria-selected":"true"}),g(i)}))},t.validator.register({selector:".js-coral-NumberInput-input",show:function(e,i){return e.closest(".coral-NumberInput").data("numberInput").set("hasError",!0),t.validator.CONTINUE},clear:function(e,i){return e.closest(".coral-NumberInput").data("numberInput").set("hasError",!1),t.validator.CONTINUE}}),t.validator.register({selector:".js-coral-DatePicker-input",show:function(e,i){return e.closest(".coral-DatePicker").data("datepicker").set("hasError",!0),t.validator.CONTINUE},clear:function(e,i){return e.closest(".coral-DatePicker").data("datepicker").set("hasError",!1),t.validator.CONTINUE}}),t(document).on("change",".coral-Selector-input",(function(e){var i=t(this),a=i.closest(".coral-Selector");i.is("[type=radio]")&&a.find(".coral-Selector-input").attr("aria-selected","false"),i.attr("aria-selected",""+this.checked),g(a)})),t(document).on("change",".coral-RadioGroup",(function(e){var i=t(this),a=t(e.target);a.is("[type=radio]")&&i.find("input[type=radio]").attr("aria-selected","false"),a.attr("aria-selected",""+a.prop("checked")),g(i)})),t(document).on("cui-contentloaded",(function(e){t(".coral-RadioGroup input[type=radio]",e.target).each((function(){t(this).attr("aria-selected",""+this.checked)}))})),t.validator.register({selector:".coral-FileUpload-input",validate:function(t){if("true"===t.attr("aria-required"))return 0===t.closest(".coral-FileUpload").data("fileUpload").uploadQueue.length?t.message("validation.required"):void 0}}),t(document).on("queuechanged",".coral-FileUpload",(function(e){g(t(this))})),t.validator.register({selector:".coral-ColorPicker",validate:function(t){if("true"===t.attr("aria-required"))return t.children("input[type=hidden]").val()?void 0:t.message("validation.required")}});var m=e.Colorpicker.prototype.construct;e.Colorpicker.prototype.construct=function(){m.apply(this,arguments),this.$element.attr("role","listbox"),t(document.createElement("meta")).attr({role:"option","aria-selected":"true"}).appendTo(this.$element)};var f=e.Colorpicker.prototype._setColor;e.Colorpicker.prototype._setColor=function(){f.apply(this,arguments),g(this.$element)},t.validator.register({selector:".coral-Autocomplete",validate:function(t){if("true"===t.attr("aria-required"))return 0===t.data("autocomplete").getValue().length?t.message("validation.required"):void 0},show:function(e,i){return e.find(".js-coral-Autocomplete-textfield").first().addClass("is-invalid"),t.validator.CONTINUE},clear:function(e,i){return e.find(".js-coral-Autocomplete-textfield").first().removeClass("is-invalid"),t.validator.CONTINUE}}),t(document).on("change:value",".coral-Autocomplete",(function(e){var i=t(this);i.data("autocomplete").options.multiple||g(i.find(".js-coral-Autocomplete-textfield"));g(i)}));var v=function(e){var i=t(this).closest(".coral-Autocomplete");i.data("autocomplete").options.multiple||g(i)};t(document).on("change",".js-coral-Autocomplete-textfield",v),t(document).on("input",".js-coral-Autocomplete-textfield",i(v,500)),t(document).on("invalid",".coral-TabPanel",(function(e){var i,a,n,o,s=x(t(e.target));s.tab.addClass("is-invalid"),i=s.pane,a=e.target,n="coral-TabPanel.internal.invalids",void 0===(o=i.data(n))&&(o=[],i.data(n,o)),o.indexOf(a)<0&&o.push(a)})),t(document).on("valid",".coral-TabPanel",(function(e){var i=x(t(e.target)),a=i.tab,n=i.pane,o=function(){t.validator.isValid(n,!0)&&a.removeClass("is-invalid")},s=n.data("coral-TabPanel.internal.invalids");if(s){var l=s.indexOf(e.target);if(l>=0&&s.splice(l,1),0!==s.length){for(var r=!1,c=s.length;c--;){if(n.has(s[c]).length){r=!0;break}s.splice(c,1)}r||o()}else o()}else o()}))}function g(t){t.checkValidity(),t.updateErrorUI()}function x(t){var e=t.closest(".coral-TabPanel-pane"),i=e.index();return{tab:e.closest(".coral-TabPanel").find("> .coral-TabPanel-navigation > .coral-TabPanel-tab").eq(i),pane:e}}}(jQuery,CUI),function(t){CUI.FileChunkedUpload=new Class({toString:"FileChunkedUpload",extend:CUI.FileUpload,defaults:t.extend(CUI.FileUpload.prototype.defaults,{chunkSize:null,chunkUploadMinFileSize:null,chunkUploadSupported:!1}),_readDataFromMarkup:function(){this.inputElement.data("chunkUploadSupported")&&(this.options.chunkUploadSupported=!0===this.inputElement.data("chunkUploadSupported")),this.inputElement.data("chunkSize")&&(this.options.chunkSize=this.inputElement.data("chunkSize")),this.inputElement.data("chunkUploadMinFileSize")&&(this.options.chunkUploadMinFileSize=this.inputElement.data("chunkUploadMinFileSize")),this.inherited(arguments)},startChunkedUpload:function(t){this.resumeChunkedUpload(t,0)},resumeChunkedUpload:function(t,e){var i=this;if(!1===this.canChunkedUpload(t))throw"cannot start chunk upload on ["+t.file.name+"]";t.xhr=new XMLHttpRequest;var a=t.xhr.upload,n=t.file,o=t.fileName,s=new FormData;if(i.options.fileNameParameter){var l=n[this._getFileSliceMethod(n)](e,e+this.options.chunkSize);s.append(i.inputElement.attr("name"),l),s.append(i.options.fileNameParameter||"fileName",o),s.append(i.inputElement.attr("name")+"@Offset",e),s.append(i.inputElement.attr("name")+"@Length",n.size),null!==t.parameters&&void 0!==t.parameters&&t.parameters.forEach((function(t){s.append(t.name,t.value)})),t.xhr.addEventListener("load",(function(a){i._onChunkUploadLoad(a,t,e,l)}),!1),a.addEventListener("progress",(function(a){i._onChunkUploadProgress(a,t,e,l)}),!1),t.xhr.addEventListener("loadstart",(function(a){i._onChunkUploadStart(a,t,e,l)}),!1),t.xhr.addEventListener("error",(function(a){i._onChunkUploadError(a,t,e,l)}),!1),t.xhr.addEventListener("timeout",(function(a){i._onChunkUploadError(a,t,e,l)}),!1),t.xhr.addEventListener("abort",(function(a){i._onChunkUploadCanceled(a,t,e,l)}),!1),s.append("_charset_","utf-8"),t.xhr.open("POST",i.options.uploadUrl+"?:ck="+(new Date).getTime(),!0),t.xhr.send(s)}},queryChunkedUpload:function(t,e){var i=this,a=new XMLHttpRequest;a.addEventListener("load",(function(t){i._onQueryChunkUploadLoad(t,e)}),!1),a.addEventListener("error",(function(t){i._onQueryChunkUploadError(t,e)}),!1),a.addEventListener("timeout",(function(t){i._onQueryChunkUploadError(t,e)}),!1),a.addEventListener("abort",(function(t){i._onQueryChunkUploadError(t,e)}),!1),a.open("GET",t+"?:ck="+(new Date).getTime()+"&_charset_=utf-8",!0),a.send()},deleteChunkedUpload:function(t,e){var i=this,a=new XMLHttpRequest,n=new FormData;n.append(":operation","delete"),n.append(":applyToChunks","true"),n.append("_charset_","utf-8"),a.addEventListener("load",(function(t){i._onDeleteChunkUploadLoad(t,e)}),!1),a.addEventListener("error",(function(t){i._onDeleteChunkUploadError(t,e)}),!1),a.addEventListener("timeout",(function(t){i._onDeleteChunkUploadError(t,e)}),!1),a.addEventListener("abort",(function(t){i._onDeleteChunkUploadError(t,e)}),!1),a.open("POST",t+"?:ck="+(new Date).getTime(),!0),a.send(n)},canChunkedUpload:function(t){if(!0===this.options.useHTML5&&!0===this.options.chunkUploadSupported&&t.file.size>this.options.chunkUploadMinFileSize&&window.FormData){try{this._getFileSliceMethod(t.file)}catch(t){return!1}return!0}return!1},cancelChunkedUpload:function(t){t.xhr.abort()},_onChunkUploadStart:function(t,e,i,a){0===i&&this._onUploadStart(t,e),this.$element.trigger({type:"filechunkeduploadstart",item:e,offset:i,chunk:a,originalEvent:t,fileUpload:this})},_onChunkUploadLoad:function(t,e,i,a){var n=t.target;4===n.readyState&&this._internalOnChunkUploadLoad(t,e,i,a,n.status,n.responseText)},_onChunkUploadProgress:function(t,e,i,a){this.$element.trigger({type:"filechunkeduploadprogress",item:e,offset:i,chunk:a,originalEvent:t,fileUpload:this})},_onChunkUploadError:function(t,e,i,a){this.$element.trigger({type:"filechunkeduploaderror",offset:i,chunk:a,item:e,originalEvent:t,fileUpload:this})},_onChunkUploadCanceled:function(t,e,i,a){this.$element.trigger({type:"filechunkeduploadcanceled",offset:i,chunk:a,item:e,originalEvent:t,fileUpload:this})},_onQueryChunkUploadLoad:function(t,e){var i=t.target;4===i.readyState&&(CUI.util.HTTP.isOkStatus(i.status)?this.$element.trigger({type:"filechunkeduploadquerysuccess",item:e,originalEvent:t,fileUpload:this}):this._onQueryChunkUploadError(t,e))},_onQueryChunkUploadError:function(t,e){var i=t.target;this.$element.trigger({type:"filechunkeduploadqueryerror",item:e,originalEvent:t,message:i.responseText,fileUpload:this})},_onDeleteChunkUploadLoad:function(t,e){var i=t.target;4===i.readyState&&(CUI.util.HTTP.isOkStatus(i.status)?this.$element.trigger({type:"filechunkeduploaddeletesuccess",item:e,originalEvent:t,fileUpload:this}):this._onDeleteChunkUploadError(t,e))},_onDeleteChunkUploadError:function(t,e){var i=t.target;this.$element.trigger({type:"filechunkeduploaddeleteerror",item:e,originalEvent:t,message:i.responseText,fileUpload:this})},_internalOnChunkUploadLoad:function(t,e,i,a,n,o){CUI.util.HTTP.isOkStatus(n)?(this.$element.trigger({type:"filechunkeduploadsuccess",offset:i,chunk:a,item:e,originalEvent:t,fileUpload:this}),i+a.size===e.file.size?(this.$element.trigger({type:"fileuploadsuccess",item:e,originalEvent:t,fileUpload:this}),this.fileNameElement&&this.fileNameElement.remove(),this.uploadQueue.splice(this._getQueueIndex(e.fileName),1),this.$element.trigger({type:"queuechanged",item:e,operation:"REMOVE",queueLength:this.uploadQueue.length,fileUpload:this})):this.resumeChunkedUpload(e,i+a.size)):this.$element.trigger({type:"filechunkeduploaderror",offset:i,chunk:a,item:e,originalEvent:t,message:o,fileUpload:this})},_getFileSliceMethod:function(t){if("mozSlice"in t)return"mozSlice";if("webkitSlice"in t)return"webkitSlice";if("slice"in t)return"slice";throw new Error("'Slicing file' operation not supported")}}),CUI.Widget.registry.register("filechunkedupload",CUI.FileChunkedUpload),CUI.options.dataAPI&&t(document).on("cui-contentloaded.data-api",(function(e){CUI.FileChunkedUpload.init(t("[data-init~='filechunkedupload']",e.target))}))}(window.jQuery);