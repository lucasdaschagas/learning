/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(d){d.pkg("s7sdk.share");d.Util.require("s7sdk.common.Button");d.Util.require("s7sdk.event.Event");d.Util.require("s7sdk.common.IS");d.Util.require("s7sdk.common.ScrollBar");function b(g,i){const f=new Event("mouseover");g.dispatchEvent(f);var e=document.getElementsByClassName("s7tooltip");e[0].setAttribute("style","position:absolute; white-space:nowrap; pointer-events:none;"+i);var h=setInterval(function(){c(g);clearInterval(h)},2000)}function c(e){const f=new Event("mouseout");e.dispatchEvent(f)}if(!d.share.getObjPos){d.share.getObjPos=function(h){var e=0;var i=0;var g=0;var f=0;while(h!=null){g=d.Util.getStyle(h,"border-left-width");f=d.Util.getStyle(h,"border-top-width");if(d.Util.isNumber(g)&&(g!="")){e+=parseInt(g)}if(d.Util.isNumber(f)&&(f!="")){i+=parseInt(f)}e+=h.offsetLeft;i+=h.offsetTop;e-=h.scrollLeft;i-=h.scrollTop;h=h.offsetParent}return{x:e,y:i}};d.share.buttonsDefaultCSS=function(i,h,k,m,l){var f=d.Util.css.createCssRuleText;var g=d.Util.css.createCssImgUrlText;var m=(typeof m==="string")?m:"";var j="";if(k){j+=k[0]?f(h+"[state='up']",{"background-image":g(k[0])}):"";j+=k[1]?f(h+"[state='over']",{"background-image":g(k[1])}):"";j+=k[2]?f(h+"[state='down']",{"background-image":g(k[2])}):"";j+=k[3]?f(h+"[state='disabled']",{"background-image":g(k[3])}):""}j+=m;var e=f(h,{"width":"28px","height":"28px","background-size":"contain","background-repeat":"no-repeat","background-position":"center","-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"})+j;if(l){return e}else{d.Util.css.addDefaultCSS(e,i)}};d.share.dialogsDefaultCSS=function(m,l,j,r){var f=d.Util.css.createCssRuleText;var g=d.Util.css.createCssImgUrlText;var q=d.browser&&d.browser.name=="ie"&&d.browser.version.major>=10;var r=(typeof r==="string")?r:"";var n="";if(j&&j.length!=0){for(var k=0;k<j.length;k++){var h=j[k];var o=h.skins;if(!o){return}n+=o[0]?f(l+" ."+h.cssNm+"[state='up']",{"background-image":g(o[0])}):"";n+=o[1]?f(l+" ."+h.cssNm+"[state='over']",{"background-image":g(o[1])}):"";n+=o[2]?f(l+" ."+h.cssNm+"[state='down']",{"background-image":g(o[2])}):"";n+=o[3]?f(l+" ."+h.cssNm+"[state='disabled']",{"background-image":g(o[3])}):""}}n+=r;var p=f(l+" .s7closebutton",{"position":"absolute","top":"2px","right":"2px","padding":"8px","width":"20px","height":"20px"})+f(l+" .s7closebutton[state='up']",{"background-image":g("close_up.png")})+f(l+" .s7closebutton[state='over']",{"background-image":g("close_over.png")})+f(l+" .s7closebutton[state='down']",{"background-image":g("close_down.png")})+f(l+" .s7closebutton[state='disabled']",{"background-image":g("close_disabled.png")});var e=f(l,{"position":"absolute","font-family":"Helvetica","z-index":"6000","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","touch-action":q?"none":""})+f(l+" input::-ms-clear",{"display":"none"})+f(l+" .s7backoverlay",{"position":"absolute !important","width":"100% !important","height":"100% !important","opacity":"0.7","background-color":"#222222"})+f(l+" .s7dialog *",{"box-sizing":"content-box","-moz-box-sizing":"content-box"})+f(l+" .s7dialog",{"color":"#000000","border-radius":"8px","position":"absolute","background-color":"#dddddd"})+f(l+" .s7dialogheader",{"padding":"10px","position":"relative"})+f(l+" .s7dialoglabel",{"color":"#666666","font-weight":"bold","font-size":"9pt"})+f(l+" .s7dialogheadericon",{"position":"relative","vertical-align":"middle","display":"inline-block"})+f(l+" .s7dialogheadertext",{"vertical-align":"middle","padding-left":"16px","font-size":"16pt","position":"relative","font-weight":"bold"})+f(l+" .s7dialogviewarea",{"background-color":"#ffffff","margin":"10px","overflow":"hidden","position":"relative"})+f(l+" .s7dialogbody",{"padding":"10px","position":"relative","display":"inline-block"})+f(l+" .s7dialogfooter",{"border-top":"1px solid #909090","width":"100%","position":"relative"})+f(l+" .s7dialogbuttoncontainer",{"padding-top":"10px","padding-bottom":"6px","float":"right","position":"relative"})+f(l+" .s7dialogfooter .s7button",{"cursor":"default","margin-right":"10px","position":"relative","display":"inline-block","color":"#ffffff","font-size":"9pt","font-weight":"bold","text-align":"center","vertical-align":"middle","box-shadow":"1px 1px 1px #999999","line-height":"34px"})+f(l+" .s7dialogline",{"position":"relative","display":"inline-block"})+f(l+" .s7dialogheader .s7dialogline",{"padding":"10px 10px 2px"})+f(l+" .s7dialogscrollpanel",{"position":"relative","vertical-align":"top","width":"44px","height":"100%","display":"inline-block"})+f(l+" .s7dialoglinefeed",{"display":"block"});e+=p;e+=n;d.Util.css.addDefaultCSS(e,m)};d.share.getDialogSymbols=function(e){var g={};for(var f in e.symbols){if(f!="TOOLTIP"){g[f]=e.getLocalizedText(f)}}return g};d.share.comboBoxDDDefaultCSS=function(e){var h=d.Util.css.createCssRuleText;var g=d.Util.css.createCssImgUrlText;var f=h(e+" .s7comboboxdropdown",{"border-top":"1px solid #cccccc","width":"100%","display":"block"})+h(e+" .s7dropdownitem",{"display":"block","width":"100%","position":"relative"})+h(e+" .s7checkmark",{"width":"25px","height":"25px","vertical-align":"middle","display":"inline-block","background-image":g("cboxchecked.png")})+h(e+" .s7dropdownitemanchor",{"display":"block","width":"100%","background-color":"#ffffff","position":"relative"})+h(e+" .s7dropdownitemanchor[state='selected']",{"background-color":"#eeeeee"})+h(e+" .s7dropdownitemanchor[state='unselected']",{"background-color":"#ffffff"})+h(e+" .s7dropdownitemanchor:hover",{"background-color":"#eeeeee"});return f};d.share.comboBoxDefaultCSS=function(e){var i=d.Util.css.createCssRuleText;var h=d.Util.css.createCssImgUrlText;var g=d.share.buttonsDefaultCSS("",e+" .s7combobox .s7comboboxbutton",["cboxbtndn_up.png","cboxbtndn_over.png","cboxbtndn_over.png","cboxbtndn_up.png"],null,true);var f=i(e+" .s7combobox",{"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","border":"1px solid #cccccc","display":"block","padding-left":"10px","position":"relative","width":"300px","-webkit-tap-highlight-color":"rgba(0,0,0,0)"})+i(e+" .s7combobox[expanded='false']",{"width":"110px"})+i(e+" .s7combobox[expanded='true']",{"width":"300px"})+i(e+" .s7combobox .s7comboboxtext",{"position":"relative","display":"inline-block","height":"40px"})+i(e+" .s7combobox .s7comboboxbutton",{"position":"absolute","display":"block","top":"0px","right":"0px","width":"40px","height":"40px"})+i(e+" .s7combobox .s7comboboxdropdown",{"border-top":"1px solid #cccccc","width":"100%","display":"block"})+i(e+" .s7combobox .s7dropdownitem",{"display":"block","width":"100%","position":"relative"})+i(e+" .s7combobox .s7checkmark",{"width":"25px","height":"25px","vertical-align":"middle","display":"inline-block","background-image":h("cboxchecked.png")})+i(e+" .s7combobox .s7dropdownitemanchor",{"display":"block","width":"100%","background-color":"#ffffff","position":"relative"})+i(e+" .s7combobox .s7dropdownitemanchor[state='selected']",{"background-color":"#eeeeee"})+i(e+" .s7combobox .s7dropdownitemanchor[state='unselected']",{"background-color":"#ffffff"})+i(e+" .s7combobox .s7dropdownitemanchor:hover",{"background-color":"#eeeeee"});f=g+f;return f}}if(!d.share.DlgActionButton){d.share.DlgActionButton=function DlgActionButton(g,k,j,i,f,e,h){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.DlgActionButton constructor - containerId: %0, settings: %1 , compId: %2",g,k,j);if(i){this.symbols=i}arguments.callee.superclass.superclass.call(this,j,g,e?e:"span",null,k);this.w=0;this.h=0;this.hint="";this.css=f;this.currentState=0;this.activated=true;this.init();if(h&&h.length>0){this.setText(h)}this.makeToolTip();this.changeState(this.currentState);this.obj.setAttribute("tabindex",0)};d.Class.inherits("s7sdk.share.DlgActionButton","s7sdk.common.Button");d.share.DlgActionButton.prototype.setText=function(e){this.obj.textContent=e;this.obj.innerText=e};d.share.DlgActionButton.prototype.symbols={TOOLTIP:""}}if(!d.share.EmailShareControl){d.share.EmailShareControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.EmailShareControl.NS,e.constructor,d.share.EmailShare.RESTRICTED_STYLES]);var f=this;this.component.emaildialog.addEventListener(d.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,function(h){var g=h.s7event.data;f.dispatchEvent(new d.event.ControlComponentEvent(d.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:f.component.emaildialog.getObj().id,classname:g.classname,property:g.property,value:g.value},false))},false)};d.share.EmailShareControl.prototype.setCSS=function(i,h,g){if(this.component){function f(j){return j.replace(/\./g,"")}var e=f(i);if(e==this.component.cl||e.indexOf(this.component.cl)==0){this.superclass.prototype.setCSS.apply(this,[i,h,g])}else{e=e.split(" ");if(e[0]==this.component.emaildialog.component.cl){this.component.emaildialog.setCSS(i,h,g)}}}};d.share.EmailShareControl.prototype.rebuild=function(f){if(this.component){var g=this.component.emaildialog;var e=this.component.getParameters();this.superproto.rebuild.apply(this,[f]);this.component.emaildialog=g;this.component.setParameters(e)}};d.share.EmailShareControl.NS="s7sdk.share.EmailShareControl"}d.Class.inherits(d.share.EmailShareControl.NS,"s7sdk.ControlComponent");if(!d.share.EmailShare){d.share.EmailShare=function EmailShare(l,f,n){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.EmailShare constructor - containerId: %0, settings: %1 , compId: %2",l,f,n);var e=document.getElementById(l);if(e&&(e.s7base instanceof d.share.SocialShare)){l=e.s7base.getPanelId()}n=(typeof n=="string"&&n.length)?n:"EmailShare_"+d.Util.createUniqueId();var h=!!arguments[3];arguments.callee.superclass.apply(this,[n,l,null,0,0,"s7emailshare",f,parent,!h]);this.cl="s7emailshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var m=this.obj;m.addEventListener("focusout",function(){c(m)},false);m.addEventListener("focus",function(){b(m,"left:1178px; top:65px;")},false);var i=this;var j=false;this.ontouchHandler=function(o){j=true};d.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(o){if(!(d.browser.supportsTouch())||(o instanceof MouseEvent)||j||i.inKey){if(e&&(e.s7base instanceof d.share.SocialShare)){e.s7base.onSocialClick()}i.btnClick()}j=false};d.Event.addDOMListener(this,"click",this.onclickHandler,false);this.serverUrl=d.Util.normalizeUrl(this.serverUrl);var g=/(^http[s]?:\/\/[^\/]+)?([^\\?#]*)/.exec(this.serverUrl);g=g==null?"":g[1];var k=/(^http[s]?:\/\/[^\/]+)?([^\\?#]*)/.exec(this.emailurl);k=k==null?"":k[1];if(g!=""&&k!=""&&k!=g){this.emailurl=this.serverUrl+"../../"+this.modifiers.emailurl.defaults[0]}else{if(g!=""&&k==""){this.emailurl=this.serverUrl+"../../"+this.modifiers.emailurl.defaults[0]}else{if(g==""&&k!=""){this.emailurl=this.modifiers.emailurl.defaults[0]}}}if(!h){this.emaildialog=new d.share.EmailDialog(this.id,this.settings,this.id+"_dialog",d.share.getDialogSymbols(this),this);return new d.share.EmailShareControl(this)}else{return this}};d.Class.inherits("s7sdk.share.EmailShare","s7sdk.common.Button");d.share.EmailShare.prototype.modifiers={emailurl:{params:["emailurl"],defaults:["/s7/emailFriend"]},serverUrl:{params:["isRootPath"],defaults:["/is/image/"]}};d.share.EmailShare.prototype.symbols={TOOLTIP:"Email",HEADER:"Email Link",TOOLTIP_HEADER_CLOSE:"Close",INVALID_ADDRESSS:"Wrong email address",TO_EMAIL_ERROR:"To email address is required or it may be invalid",FROM_EMAIL_ERROR:"From email address is required or it may be invalid",TO:"To",TOOLTIP_ADD:"Add",ADD:"Add Another Email Address",PRIMARY_EMAIL_ADDRESS:"Primary Email Address",ADDITIONAL_EMAIL_ADDRESS:"Additional Email Address",FROM:"From",MESSAGE:"Message",TOOLTIP_REMOVE:"Remove",REMOVE:"Remove the email address",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",CLOSE:"Close",TOOLTIP_CLOSE:"Close",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",ACTION:"Send Email",TOOLTIP_ACTION:"Send Email",SEND_SUCCESS:"Email sent successfully",SEND_FAILURE:"Send email failed"};d.share.EmailShare.RESTRICTED_STYLES={"s7emailshare":["width","height"]};d.share.EmailShare.prototype.btnClick=function(){this.emaildialog.setEmailService(this.emailurl);this.emaildialog.setServerUrl(this.serverUrl);this.emaildialog.setContentUrl(this.contentUrl?this.contentUrl:"");this.emaildialog.setContentTitle(this.titleStr?this.titleStr:"");this.emaildialog.setOriginUrl(this.originURL?this.originURL:"");this.emaildialog.setThumbnail(this.thumbnail);this.emaildialog.setDescription(this.descrStr?this.descrStr:"");this.emaildialog.show();var f=new d.event.SocialEvent(d.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(f);var e=new d.UserEvent(d.UserEvent.SOCIAL_SHARING,"email",true);this.dispatchEvent(e);this.obj.setAttribute("tabindex",-1)};d.share.EmailShare.prototype.getParameters=function(){var e=this.emaildialog.getDialogData();e.contentUrl=this.contentUrl?this.contentUrl:"";e.titleStr=this.titleStr?this.titleStr:"";e.originURL=this.originURL?this.originURL:"";e.thumbnail=this.thumbnail;e.descrStr=this.descrStr?this.descrStr:"";return e};d.share.EmailShare.prototype.setParameters=function(e){this.contentUrl=e.contentUrl;this.titleStr=e.titleStr;this.originURL=e.originURL;this.thumbnail=e.thumbnail;this.descrStr=e.descrStr;this.emaildialog.setDialogData(e)};d.share.EmailShare.prototype.setContentUrl=function(e){this.contentUrl=e};d.share.EmailShare.prototype.setOriginUrl=function(e){this.originURL=e};d.share.EmailShare.prototype.setContentTitle=function(e){this.titleStr=e};d.share.EmailShare.prototype.setThumbnail=function(e){this.thumbnail=e};d.share.EmailShare.prototype.addEventListener=function(g,f,e){d.Base.prototype.addEventListener.apply(this,[g,f,e])};d.share.EmailShare.prototype.setDescription=function(e){this.descrStr=e};d.share.EmailShare.prototype.setModifier=function(e){throw new Error("Trying to use setModifier on the Core class (EmailShare) is unsupported! Please refer to SDK documentation on using setModifier.")};d.share.EmailShare.prototype.setCSS=function(g,f,e){if(this.isRestrictedCSSProperty(d.share.EmailShare.RESTRICTED_STYLES,f)){throw new Error("You cannot set "+g+" : "+f+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[g,f,e])}};d.share.EmailShare.prototype.cleanUp=function(){d.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.emaildialog){this.emaildialog.dispose()}this.superproto.cleanUp.apply(this)};d.share.EmailShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function a(){d.share.buttonsDefaultCSS("EmailShare",".s7emailshare",["emailbtn_up.png","emailbtn_over.png","emailbtn_over.png","emailbtn_up.png"])})()}if(!d.share.EmbedShareControl){d.share.EmbedShareControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.EmbedShareControl.NS,e.constructor,d.share.EmbedShare.RESTRICTED_STYLES]);var f=this;this.component.embeddialog.addEventListener(d.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,function(h){var g=h.s7event.data;f.dispatchEvent(new d.event.ControlComponentEvent(d.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:f.component.embeddialog.getObj().id,classname:g.classname,property:g.property,value:g.value},false))},false)};d.share.EmbedShareControl.NS="s7sdk.share.EmbedShareControl";d.share.EmbedShareControl.prototype.setCSS=function(i,h,g){if(this.component){function f(j){return j.replace(/\./g,"")}var e=f(i);if(e==this.component.cl||e.indexOf(this.component.cl)==0){this.superclass.prototype.setCSS.apply(this,[i,h,g])}else{e=e.split(" ");if(e[0]==this.component.embeddialog.component.cl){this.component.embeddialog.setCSS(i,h,g)}}}};d.share.EmbedShareControl.prototype.rebuild=function(g){if(this.component){var e=this.component.embeddialog;var f=this.component.getParameters();this.superproto.rebuild.apply(this,[g]);this.component.embeddialog=e;this.component.setParameters(f)}}}d.Class.inherits(d.share.EmbedShareControl.NS,"s7sdk.ControlComponent");if(!d.share.EmbedShare){d.share.EmbedShare=function EmbedShare(f,i,h){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.EmbedShare constructor - containerId: %0, settings: %1 , compId: %2",f,i,h);var e=document.getElementById(f);if(e&&(e.s7base instanceof d.share.SocialShare)){f=e.s7base.getPanelId()}h=(typeof h=="string"&&h.length)?h:"EmbedShare_"+d.Util.createUniqueId();var k=!!arguments[3];arguments.callee.superclass.apply(this,[h,f,null,0,0,"s7embedshare",i,parent,!k]);this.cl="s7embedshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var l=this.obj;l.addEventListener("focusout",function(){c(l)},false);l.addEventListener("focus",function(){b(l,"left:1178px; top:72px;")},false);var j=this;var g=false;this.ontouchHandler=function(m){g=true};d.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(m){if(!(d.browser.supportsTouch())||(m instanceof MouseEvent)||g||j.inKey){if(e&&(e.s7base instanceof d.share.SocialShare)){e.s7base.onSocialClick()}j.btnClick()}g=false};d.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!k){this.embeddialog=new d.share.EmbedDialog(this.id,this.settings,this.id+"_dialog",this.embedsizes,d.share.getDialogSymbols(this),this);return new d.share.EmbedShareControl(this)}else{return this}};d.share.EmbedShare.prototype.cleanUp=function(){d.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.embeddialog){this.embeddialog.dispose()}this.superproto.cleanUp.apply(this)};d.share.EmbedShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};d.Class.inherits("s7sdk.share.EmbedShare","s7sdk.common.Button");d.share.EmbedShare.prototype.symbols={CUSTOM_SIZE_WIDTH:"width",CUSTOM_SIZE_HEIGHT:"height",TOOLTIP:"Embed",HEADER:"Get Embed Code",TOOLTIP_HEADER_CLOSE:"Close",DESCRIPTION:"To get embed code, copy and paste: ",EMBED_SIZE:"Embed Size",CUSTOM_SIZE:"Custom Size",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down"};d.share.EmbedShare.DEFAULT_EMBED_SIZES="320,240;640,480,true;1280,960";d.share.EmbedShare.prototype.modifiers={embedsizes:{params:["embedsizes"],defaults:[d.share.EmbedShare.DEFAULT_EMBED_SIZES],parseParams:false}};d.share.EmbedShare.prototype.setCSS=function(g,f,e){if(this.isRestrictedCSSProperty(d.share.EmbedShare.RESTRICTED_STYLES,f)){throw new Error("You cannot set "+g+" : "+f+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[g,f,e])}};d.share.EmbedShare.RESTRICTED_STYLES={"s7embedshare":["width","height"]};d.share.EmbedShare.prototype.getParameters=function(){var e=this.embeddialog.getDialogData();e.template=this.template;return e};d.share.EmbedShare.prototype.setParameters=function(e){this.template=e.template;e.embedsizes=this.embedsizes;e.template=e.template;this.embeddialog.setDialogData(e)};d.share.EmbedShare.prototype.btnClick=function(){this.embeddialog.setEmbedCode(this.template);this.embeddialog.show();var f=new d.event.SocialEvent(d.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(f);var e=new d.UserEvent(d.UserEvent.SOCIAL_SHARING,"embed",true);this.dispatchEvent(e);this.obj.setAttribute("tabindex",-1)};d.share.EmbedShare.prototype.addEventListener=function(g,f,e){d.Base.prototype.addEventListener.apply(this,[g,f,e])};d.share.EmbedShare.prototype.setEmbedCode=function(e){this.template=e};d.share.EmbedShare.prototype.setModifier=function(e){throw new Error("Trying to use setModifier on the Core class (EmbedShare) is unsupported! Please refer to SDK documentation on using setModifier.")};(function a(){d.share.buttonsDefaultCSS("EmbedShare",".s7embedshare",["embedbtn_up.png","embedbtn_over.png","embedbtn_over.png","embedbtn_up.png"])})()}if(!d.share.LinkShareControl){d.share.LinkShareControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.LinkShareControl.NS,e.constructor,d.share.LinkShare.RESTRICTED_STYLES]);var f=this;this.component.linkdialog.addEventListener(d.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,function(h){var g=h.s7event.data;f.dispatchEvent(new d.event.ControlComponentEvent(d.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:f.component.linkdialog.getObj().id,classname:g.classname,property:g.property,value:g.value},false))},false)};d.share.LinkShareControl.NS="s7sdk.share.LinkShareControl";d.share.LinkShareControl.prototype.setCSS=function(i,h,g){if(this.component){function f(j){return j.replace(/\./g,"")}var e=f(i);if(e==this.component.cl||e.indexOf(this.component.cl)==0){this.superclass.prototype.setCSS.apply(this,[i,h,g])}else{e=e.split(" ");if(e[0]==this.component.linkdialog.component.cl){this.component.linkdialog.setCSS(i,h,g)}}}};d.share.LinkShareControl.prototype.rebuild=function(g){if(this.component){var e=this.component.linkdialog;var f=this.component.getContentUrl();this.superproto.rebuild.apply(this,[g]);this.component.linkdialog=e;this.component.setContentUrl(f)}}}d.Class.inherits(d.share.LinkShareControl.NS,"s7sdk.ControlComponent");if(!d.share.LinkShare){d.share.LinkShare=function LinkShare(f,i,h){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.LinkShare constructor - containerId: %0, settings: %1 , compId: %2",f,i,h);var e=document.getElementById(f);if(e&&(e.s7base instanceof d.share.SocialShare)){f=e.s7base.getPanelId()}h=(typeof h=="string"&&h.length)?h:"LinkShare_"+d.Util.createUniqueId();var l=!!arguments[3];arguments.callee.superclass.apply(this,[h,f,null,0,0,"s7linkshare",i,parent,!l]);this.cl="s7linkshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var j=this.obj;j.addEventListener("focusout",function(){c(j)},false);j.addEventListener("focus",function(){b(j,"left:1194px; top:93px;")},false);var k=this;var g=false;this.ontouchHandler=function(m){g=true};d.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(m){if(!(d.browser.supportsTouch())||(m instanceof MouseEvent)||g||k.inKey){if(e&&(e.s7base instanceof d.share.SocialShare)){e.s7base.onSocialClick()}k.btnClick()}g=false};d.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!l){this.linkdialog=new d.share.LinkDialog(this.id,this.settings,this.id+"_dialog",d.share.getDialogSymbols(this),this);return new d.share.LinkShareControl(this)}else{return this}};d.share.LinkShare.prototype.getContentUrl=function(){return this.sharedurl};d.share.LinkShare.prototype.cleanUp=function(){d.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.linkdialog){this.linkdialog.dispose()}this.superproto.cleanUp.apply(this)};d.share.LinkShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};d.Class.inherits("s7sdk.share.LinkShare","s7sdk.common.Button");d.share.LinkShare.prototype.symbols={LINK_URL:"Link URL",TOOLTIP:"Link",HEADER:"Share Link",TOOLTIP_HEADER_CLOSE:"Close",DESCRIPTION:"To share this link, copy and paste:",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};d.share.LinkShare.prototype.setCSS=function(g,f,e){if(this.isRestrictedCSSProperty(d.share.LinkShare.RESTRICTED_STYLES,f)){throw new Error("You cannot set "+g+" : "+f+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[g,f,e])}};d.share.LinkShare.RESTRICTED_STYLES={"s7linkshare":["width","height"]};d.share.LinkShare.prototype.btnClick=function(){this.linkdialog.setContentUrl(this.sharedurl?this.sharedurl:location.href);this.linkdialog.show();var f=new d.event.SocialEvent(d.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(f);var e=new d.UserEvent(d.UserEvent.SOCIAL_SHARING,"link",true);this.dispatchEvent(e);this.obj.setAttribute("tabindex",-1)};d.share.LinkShare.prototype.addEventListener=function(g,f,e){d.Base.prototype.addEventListener.apply(this,[g,f,e])};d.share.LinkShare.prototype.setContentUrl=function(e){this.sharedurl=e};(function a(){d.share.buttonsDefaultCSS("LinkShare",".s7linkshare",["linkbtn_up.png","linkbtn_over.png","linkbtn_over.png","linkbtn_up.png"])})()}if(!d.share.FacebookShareControl){d.share.FacebookShareControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.FacebookShareControl.NS,e.constructor,d.share.FacebookShare.RESTRICTED_STYLES])};d.share.FacebookShareControl.NS="s7sdk.share.FacebookShareControl"}d.Class.inherits(d.share.FacebookShareControl.NS,"s7sdk.ControlComponent");if(!d.share.FacebookShare){d.share.FacebookShare=function FacebookShare(g,j,i){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.FacebookShare constructor - containerId: %0, settings: %1 , compId: %2",g,j,i);var f=document.getElementById(g);if(f&&(f.s7base instanceof d.share.SocialShare)){g=f.s7base.getPanelId()}var l=!!arguments[3];arguments.callee.superclass.apply(this,[i,g,null,0,0,"s7facebookshare",j,!l]);this.cl="s7facebookshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var e=this.obj;e.addEventListener("focusout",function(){c(e)},false);e.addEventListener("focus",function(){b(e,"left:1166px; top:143px;")},false);this.url="";var k=this;var h=false;this.ontouchHandler=function(m){h=true};d.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(m){if(!(d.browser.supportsTouch())||(m instanceof MouseEvent)||h||k.inKey){if(f&&(f.s7base instanceof d.share.SocialShare)){f.s7base.onSocialClick()}k.btnClick()}h=false};d.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!l){return new d.share.FacebookShareControl(this)}else{return this}};d.Class.inherits("s7sdk.share.FacebookShare","s7sdk.common.Button");d.share.FacebookShare.prototype.symbols={TOOLTIP:"Facebook"};d.share.FacebookShare.prototype.setCSS=function(g,f,e){if(this.isRestrictedCSSProperty(d.share.FacebookShare.RESTRICTED_STYLES,f)){throw new Error("You cannot set "+g+" : "+f+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[g,f,e])}};d.share.FacebookShare.RESTRICTED_STYLES={"s7facebookshare":["width","height"]};d.share.FacebookShare.prototype.setContentUrl=function(e){this.url=e};d.share.FacebookShare.prototype.btnClick=function(){var e;if(d.Util.isNonEmptyString(this.url)){e=encodeURIComponent(this.url)}else{e=encodeURIComponent(document.location.href)}window.open("https://www.facebook.com/sharer/sharer.php?u="+e,"facebooksharedialog",d.share.FacebookShare.createSizeString(400,500));var g=new d.event.SocialEvent(d.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(g);var f=new d.UserEvent(d.UserEvent.SOCIAL_SHARING,"facebook",true);this.dispatchEvent(f);this.obj.setAttribute("tabindex",-1)};d.share.FacebookShare.createSizeString=function(f,e){var h,g;if(screen.height<e){e=screen.height;g=0}else{g=Math.round((screen.height-e)/2)}if(screen.width<f){h=0;f=screen.width}else{h=Math.round((screen.width-f)/2)}return"width="+f+",height="+e+",left="+h+",top="+g};d.share.FacebookShare.prototype.addEventListener=function(g,f,e){d.Base.prototype.addEventListener.apply(this,[g,f,e])};d.share.FacebookShare.prototype.cleanUp=function(){d.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);this.superproto.cleanUp.apply(this)};d.share.FacebookShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function a(){d.share.buttonsDefaultCSS("FacebookShare",".s7facebookshare",["facebookbtn_up.png","facebookbtn_over.png","facebookbtn_over.png","facebookbtn_up.png"])})()}if(!d.share.TwitterShareControl){d.share.TwitterShareControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.TwitterShareControl.NS,e.constructor,d.share.TwitterShare.RESTRICTED_STYLES])};d.share.TwitterShareControl.NS="s7sdk.share.TwitterShareControl"}d.Class.inherits(d.share.TwitterShareControl.NS,"s7sdk.ControlComponent");if(!d.share.TwitterShare){d.share.TwitterShare=function TwitterShare(f,i,h){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.TwitterShare constructor - containerId: %0, settings: %1 , compId: %2",f,i,h);var e=document.getElementById(f);if(e&&(e.s7base instanceof d.share.SocialShare)){f=e.s7base.getPanelId()}this.message=null;this.url=null;var l=!!arguments[3];arguments.callee.superclass.apply(this,[h,f,null,0,0,"s7twittershare",i,!l]);this.cl="s7twittershare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var j=this.obj;j.addEventListener("focusout",function(){c(j)},false);j.addEventListener("focus",function(){b(j,"left:1182px; top:110px;")},false);var k=this;var g=false;this.ontouchHandler=function(m){g=true};d.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(m){if(!(d.browser.supportsTouch())||(m instanceof MouseEvent)||g||k.inKey){if(e&&(e.s7base instanceof d.share.SocialShare)){e.s7base.onSocialClick()}k.btnClick()}g=false};d.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!l){return new d.share.TwitterShareControl(this)}else{return this}};d.Class.inherits("s7sdk.share.TwitterShare","s7sdk.common.Button");d.share.TwitterShare.prototype.symbols={TOOLTIP:"Twitter"};d.share.TwitterShare.RESTRICTED_STYLES={"s7twittershare":["width","height"]};d.share.TwitterShare.prototype.setMessage=function(e){this.message=e};d.share.TwitterShare.prototype.setContentUrl=function(e){this.url=e};d.share.TwitterShare.prototype.btnClick=function(){var e="";if(d.Util.isNonEmptyString(this.url)){e+="?url=";e+=encodeURIComponent(this.url)}else{e+="?url="+encodeURIComponent(document.location.href)}if(d.Util.isNonEmptyString(this.message)){e+=e.length>0?"&":"?";e+="text=";e+=this.message}window.open("https://twitter.com/share"+e,"twittersharedialog",d.share.FacebookShare.createSizeString(626,436));var g=new d.event.SocialEvent(d.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(g);var f=new d.UserEvent(d.UserEvent.SOCIAL_SHARING,"twitter",true);this.dispatchEvent(f);this.obj.setAttribute("tabindex",-1)};d.share.TwitterShare.prototype.addEventListener=function(g,f,e){d.Base.prototype.addEventListener.apply(this,[g,f,e])};d.share.TwitterShare.prototype.cleanUp=function(){d.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);this.superproto.cleanUp.apply(this)};d.share.TwitterShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};d.share.TwitterShare.prototype.setCSS=function(g,f,e){if(this.isRestrictedCSSProperty(d.share.TwitterShare.RESTRICTED_STYLES,f)){throw new Error("You cannot set "+g+" : "+f+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[g,f,e])}};(function a(){d.share.buttonsDefaultCSS("TwitterShare",".s7twittershare",["twitterbtn_up.png","twitterbtn_over.png","twitterbtn_over.png","twitterbtn_up.png"])})()}if(!d.share.SocialShareControl){d.share.SocialShareControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.SocialShareControl.NS,e.constructor,d.share.SocialShare.RESTRICTED_STYLES])};d.share.SocialShareControl.NS="s7sdk.share.SocialShareControl";d.share.SocialShareControl.prototype.rebuild=function(h){if(this.component){var g=this.component.socCntrSp.childNodes;var e=[];if(g&&(g.length!=0)){for(var f=0;f<g.length;f++){e.push(g[f])}}this.superproto.rebuild.apply(this,[h]);if(e.length!=0){for(var f=0;f<e.length;f++){this.component.socCntrSp.appendChild(e[f])}}}};d.share.SocialShareControl.prototype.getSocialBtn=function(){return this.component.socialbtn}}d.Class.inherits(d.share.SocialShareControl.NS,"s7sdk.ControlComponent");if(!d.share.SocialShare){d.share.SocialShare=function SocialShare(e,g,f){var h=!!arguments[3];f=(typeof f=="string"&&f.length)?f:"SocShare_"+d.Util.createUniqueId();d.Logger.log(d.Logger.CONFIG,"s7sdk.share.SocialShare constructor - container: %0, settings: %1 , compId: %2",e,g,f);arguments.callee.superclass.apply(this,[f,e,"div","s7socialshare",g,!h]);this.isTouch=d.browser.device.name!="desktop";this.stepSize=50;this.duration=300;this.delaytohide=2000;this.waitToHide=-1;this.state=0;this.lastMouse={x:-1000000,y:-1000000};this.container=this.getParent();this.trackedComponents=[];this.wid=parseInt(d.Util.css.getCss("s7socialshare","width",f,null,this.container));this.hei=parseInt(d.Util.css.getCss("s7socialshare","height",f,null,this.container));this.createComponent();if(!h){return new d.share.SocialShareControl(this)}else{return this}};d.Class.inherits("s7sdk.share.SocialShare","s7sdk.UIComponent");d.share.SocialShare.prototype.modifiers={bearing:{params:["bearing"],defaults:["left"],ranges:[["up","left","right","down","fit-vertical","fit-lateral"]]}};d.share.SocialShare.prototype.symbols={TOOLTIP:"Social Share"};d.share.SocialShare.RESTRICTED_STYLES={"s7socialshare":["width","height"],"s7socialshare s7socialbutton":["width","height"]};d.share.SocialShare.prototype.createComponent=function(){this.createElement();this.attachToContainer();this.socialbtn=new d.share.DlgActionButton(this.id,this.settings,this.id+"_socBtn",{TOOLTIP:this.getLocalizedText("TOOLTIP")},"s7socialbutton","div");this.socialbtn.obj.style.position="absolute";var h=this.socialbtn.obj;h.addEventListener("focusout",function(){c(h)},false);h.addEventListener("focus",function(){b(h,"left:1152px; top:34px;")},false);var i=parseInt(d.Util.css.getCss("s7socialbutton","width",this.socialbtn.obj.id,null,this.obj));var e=parseInt(d.Util.css.getCss("s7socialbutton","height",this.socialbtn.obj.id,null,this.obj));if((i!=0)&&(i!=28)&&(e!=0)&&(e!=28)){this.wid=i;this.hei=e}this.getTopContainer();var f=this;this.animate=setInterval(function(){f.enterFrame()},this.stepSize);this.socialbtn.addEventListener("click",function(j){f.onSocialClick()},false);this.socCntr=document.createElement("div");this.socCntr.style.overflow="hidden";this.socCntr.style.position="absolute";this.socCntr.style.top="0px";this.socCntr.style.left="0px";d.Util.setOpacity(this.socCntr,0);this.socCntr.style.pointerEvents="none";this.socCntr.style.fontSize="0px";this.socCntr.style.letterSpacing="0px";this.socCntr.style.wordSpacing="0px";this.obj.appendChild(this.socCntr);this.socCntrSp=document.createElement("div");this.socCntrSp.id=this.id+"_socCtnr";this.socCntrSp.className="s7socialsharepanel";this.socCntrSp.style.position="relative";this.socCntrSp.style.display="inline-block";this.socCntrSp.setAttribute("role","menu");this.socCntrSp.setAttribute("aria-orientation","vertical");switch(this.dir){case"L":case"LU":case"LD":case"R":case"RU":case"RD":this.socCntrSp.setAttribute("aria-orientation","horizontal");break;case"U":case"UL":case"UR":case"D":case"DL":case"DR":this.socCntrSp.setAttribute("aria-orientation","vertical");break}this.socCntr.appendChild(this.socCntrSp);this.resize(this.wid,this.hei);this.numFocused=-1;if(this.isTouch){return}this.mouseoverHandler=function(j){f.isOver=true;f.onSocialOver()};d.Event.addDOMListener(this.socialbtn,"mouseover",this.mouseoverHandler);this.mouseoutHandler=function(j){f.isOver=false;f.onSocialOut()};d.Event.addDOMListener(this.socialbtn,"mouseout",this.mouseoutHandler);this.touchstartHandler=function(j){f.isOver=true;f.onSocialOver()};d.Event.addDOMListener(this.socialbtn,"touchstart",this.touchstartHandler,{passive:false});this.touchendHandler=function(j){f.isOver=false;f.onSocialOut()};d.Event.addDOMListener(this.socialbtn,"touchend",this.touchendHandler,{passive:false});this.winMouseMoveHandler=function(j){f.lastMouse={x:d.Util.getEventPos(j).x,y:d.Util.getEventPos(j).y}};this.winMouseOutHandler=function(j){f.lastMouse={x:-1000000,y:-1000000}};var g=window;d.Event.addDOMListener(g,"mouseout",this.winMouseOutHandler,true);d.Event.addDOMListener(g,"mousemove",this.winMouseMoveHandler,true);this.socialbtn.obj.setAttribute("aria-haspopup","true");this.socialbtn.obj.setAttribute("aria-controls",this.socCntrSp.id);this.socialbtn.addEventListener("focus",function(j){f.socialbtnInFocus=true},false);this.socialbtn.addEventListener("blur",function(j){f.socialbtnInFocus=false},false);d.Event.addDOMListener(this,"keydown",function(l){var j=Array.prototype.slice.call(f.socCntrSp.childNodes);for(var k=j.length-1;k>=0;k--){if(j[k].offsetParent===null){j.splice(k,1)}}f.isOver=true;if(j&&j.length>0){if(f.isOver&&f.socialbtnInFocus){if(l.keyCode==d.Enum.KEY_CODE.ENTER||l.keyCode==d.Enum.KEY_CODE.SPACE||l.keyCode==d.Enum.KEY_CODE.LEFT||l.keyCode==d.Enum.KEY_CODE.RIGHT||l.keyCode==d.Enum.KEY_CODE.DOWN||l.keyCode==d.Enum.KEY_CODE.UP){d.Event.preventDefault(l);f.onSocialOver();f.isOver=true;f.numFocused=0;j[f.numFocused].focus()}return}if(l.keyCode==d.Enum.KEY_CODE.TAB&&f.isOver){f.hide();f.waitToHide=-1;f.isOver=false;return}if(l.keyCode==d.Enum.KEY_CODE.ESCAPE){d.Event.preventDefault(l);f.socialbtn.focus();f.hide();f.waitToHide=-1;f.isOver=false;return}switch(f.dir){case"L":case"LU":case"LD":case"R":case"RU":case"RD":if((l.keyCode==d.Enum.KEY_CODE.LEFT)){d.Event.preventDefault(l);if(f.numFocused>0){f.numFocused=f.numFocused-1;j[f.numFocused].focus()}}if((l.keyCode==d.Enum.KEY_CODE.RIGHT)){d.Event.preventDefault(l);if(f.numFocused<j.length-1&&f.numFocused!=-1){f.numFocused=f.numFocused+1;j[f.numFocused].focus()}}break;case"U":case"UL":case"UR":case"D":case"DL":case"DR":if((l.keyCode==d.Enum.KEY_CODE.UP)){d.Event.preventDefault(l);if(f.numFocused>0){f.numFocused=f.numFocused-1;j[f.numFocused].focus()}}if((l.keyCode==d.Enum.KEY_CODE.DOWN)){d.Event.preventDefault(l);if(f.numFocused<j.length-1&&f.numFocused!=-1){f.numFocused=f.numFocused+1;j[f.numFocused].focus()}}break}}},{passive:false})};d.share.SocialShare.prototype.getSize=function(){return{width:this.wid,height:this.hei}};d.share.SocialShare.prototype.getPanelId=function(){return this.socCntrSp.id};d.share.SocialShare.prototype.onSocialOut=function(){this.waitToHide=this.delaytohide};d.share.SocialShare.prototype.onSocialOver=function(){this.show()};d.share.SocialShare.prototype.checkMouse=function(){var g=d.Util.getObjPos(this.socCntr);var f=this.lastMouse.x-g.x;var e=this.lastMouse.y-g.y;return(f>0&&f<this.socCntr.offsetWidth&&e>0&&e<this.socCntr.offsetHeight)};d.share.SocialShare.prototype.onSocialClick=function(){this.focus();if(!(this.state==0||this.state==3)){return}if(!this.isOver){this.show()}else{this.hide()}this.isOver=!this.isOver;this.waitToHide=-1};d.share.SocialShare.prototype.initAnimate=function(){this.step=0;this.shiftSize=this.socCntrSp.offsetHeight;this.stepDuration=Math.ceil(this.shiftSize/(this.duration/this.stepSize));d.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","start")};d.share.SocialShare.prototype.getTopContainer=function(){var g=document.body;var e=this.obj;while(e!=null){e=e.parentNode;if(e!=null){if(typeof(e.s7base)=="object"&&d.common&&d.common.Container&&(e.s7base instanceof d.common.Container)){g=e;break}if(e==document.body){break}var f=d.Util.getStyle(e,"overflow");if(f=="hidden"){g=e;break}}}this.anchorObj=g};d.share.SocialShare.prototype.getTrackedComponents=function(){return this.trackedComponents};d.share.SocialShare.prototype.addTrackedComponent=function(e){this.trackedComponents.push(e)};d.share.SocialShare.prototype.removeTrackedComponent=function(e){for(var f=this.trackedComponents.length;f--;){if(this.trackedComponents[f]===e){this.trackedComponents.splice(f,1)}}};d.share.SocialShare.prototype.getAnchorDimension=function(){var f;var e;this.dim=new d.Rectangle(0,0,0,0);if(this.anchorObj==document.body){if(typeof window.innerWidth!="undefined"){this.dim.width=window.innerWidth;this.dim.height=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){this.dim.width=document.documentElement.clientWidth;this.dim.height=document.documentElement.clientHeight}else{this.dim.width=document.getElementsByTagName("body")[0].clientWidth;this.dim.height=document.getElementsByTagName("body")[0].clientHeight}}}else{this.dim.width=this.anchorObj.clientWidth;this.dim.height=this.anchorObj.clientHeight;var g=d.share.getObjPos(this.anchorObj);this.dim.x=g.x;this.dim.y=g.y}};d.share.SocialShare.prototype.checkRoll=function(e,J){switch(this.bearing){case"up":return"U";case"left":return"L";case"right":return"R";case"down":return"D"}var o=true;var I=true;var p=true;var k=true;var n=true;var B=true;var f=true;var j=true;var K=true;var s=true;var D=true;var A=true;var E=true;var u=e.x,t=e.y,z=e.offsetWidth,G=e.offsetHeight,H=J.x,l=J.y,v=J.offsetWidth,r=J.offsetHeight;if(e.x-J.offsetHeight<this.dim.x){o=false}if(e.x+e.offsetWidth-J.offsetHeight<this.dim.x){I=false;p=false}else{if(e.y-J.offsetWidth<this.dim.y){I=false}if(e.y+e.offsetHeight+J.offsetWidth>this.dim.y+this.dim.height){p=false}}if(e.x+e.offsetWidth+J.offsetHeight>this.dim.x+this.dim.width){k=false}if(e.x+J.offsetHeight>this.dim.x+this.dim.width){n=false;B=false}else{if(e.y-J.offsetWidth<this.dim.y){n=false}if(e.y+e.offsetHeight+J.offsetWidth>this.dim.y+this.dim.height){B=false}}if(e.y-J.offsetHeight<this.dim.y){f=false}if(e.y+e.offsetHeight-J.offsetHeight<this.dim.y){j=false;K=false}else{if(e.x-J.offsetWidth<this.dim.x){j=false}if(e.x+e.offsetWidth+J.offsetWidth>this.dim.x+this.dim.width){K=false}}if(e.y+e.offsetHeight+J.offsetHeight>this.dim.y+this.dim.height){s=false}if(e.y+J.offsetHeight>this.dim.y+this.dim.height){D=false;A=false}else{if(e.x-J.offsetWidth<this.dim.x){D=false}if(e.x+e.offsetWidth+J.offsetWidth>this.dim.x+this.dim.width){A=false}}function g(h,i){return !(h.x>i.x+i.width||h.x+h.width<i.x||h.y>i.y+i.height||h.y+h.height_1<i.y)}if(this.trackedComponents.length>0){for(var F=0;F<this.trackedComponents.length;F++){var m=new d.Rectangle(0,0,0,0);var C=this.trackedComponents[F];if(typeof C.getObj=="function"&&C.getObj()){var q=d.share.getObjPos(C.getObj());m.width=C.getObj().clientWidth;m.height=C.getObj().clientHeight;m.x=q.x;m.y=q.y}else{if(C.clientWidth&&C.clientHeight){var q=d.share.getObjPos(C);m.width=C.clientWidth;m.height=C.clientHeight;m.x=q.x;m.y=q.y}}if(!m.isEmpty()){E=!g(m,new d.Rectangle(u,t,z,G));s=s&&!g(m,new d.Rectangle(u,t,z,G+r));f=f&&!g(m,new d.Rectangle(u,t-r,z,G+r));o=o&&!g(m,new d.Rectangle(u-r,t,z+v,G));k=k&&!g(m,new d.Rectangle(u,t,z+r,G));D=D&&E&&!g(m,new d.Rectangle(u-v,t,v,r));A=A&&E&&!g(m,new d.Rectangle(u+z,t,v,r));j=j&&E&&!g(m,new d.Rectangle(u-v,t+G-r,v,r));K=K&&E&&!g(m,new d.Rectangle(u+z,t+G-r,v,r));n=n&&E&&!g(m,new d.Rectangle(u,t-v,r,v));B=B&&E&&!g(m,new d.Rectangle(u,t+G,r,v));I=I&&E&&!g(m,new d.Rectangle(u+z-r,t-v,r,v));p=p&&E&&!g(m,new d.Rectangle(u+z-r,t+G,r,v))}}}if(this.bearing=="fit-vertical"){if(s){return"D"}else{if(B){return"RD"}else{if(p){return"LD"}else{if(f){return"U"}else{if(n){return"RU"}else{if(I){return"LU"}else{if(k){return"R"}else{if(A){return"DR"}else{if(K){return"UR"}else{if(o){return"L"}else{if(D){return"DL"}else{if(j){return"UL"}}}}}}}}}}}}return"D"}else{if(k){return"R"}else{if(A){return"DR"}else{if(K){return"UR"}else{if(o){return"L"}else{if(D){return"DL"}else{if(j){return"UL"}else{if(s){return"D"}else{if(B){return"RD"}else{if(p){return"LD"}else{if(f){return"U"}else{if(n){return"RU"}else{if(I){return"LU"}}}}}}}}}}}}return"R"}};d.share.SocialShare.prototype.show=function(){if(this.state!=0){return}this.socCntr.style.left="0px";this.socCntr.style.top="0px";this.socCntr.style.width="";this.socCntrSp.style.left="0px";this.socCntrSp.style.display="";this.socCntrSp.style.top="0px";this.updateDisplayStyle("");var f=d.share.getObjPos(this.socCntr);f.offsetWidth=this.socCntr.offsetWidth;f.offsetHeight=this.socCntr.offsetHeight;var h=d.share.getObjPos(this.socialbtn.obj);h.offsetWidth=this.socialbtn.obj.offsetWidth;h.offsetHeight=this.socialbtn.obj.offsetHeight;this.shiftPos={"x":h.x-f.x,"y":h.y-f.y};this.getAnchorDimension();this.dir=this.checkRoll(h,f);switch(this.dir){case"L":case"LU":case"LD":case"R":case"RU":case"RD":this.socCntrSp.setAttribute("aria-orientation","horizontal");break;case"U":case"UL":case"UR":case"D":case"DL":case"DR":this.socCntrSp.setAttribute("aria-orientation","vertical");break}this.initAnimate();this.isShowig=true;var g;this.shiftSize_A=this.shiftSize;switch(this.dir){case"L":this.socCntr.style.left=-this.shiftSize+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntrSp.style.left=this.shiftSize+"px";g=true;break;case"LU":this.socCntr.style.left=-this.shiftSize+h.offsetWidth+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=-h.offsetHeight+"px";this.socCntrSp.style.left=this.shiftSize+"px";g=true;break;case"LD":this.socCntr.style.left=-this.shiftSize+h.offsetWidth+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=h.offsetHeight+"px";this.socCntrSp.style.left=this.shiftSize+"px";g=true;break;case"R":this.socCntr.style.left=h.offsetWidth+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntrSp.style.left=-this.shiftSize+"px";g=true;break;case"RU":this.socCntr.style.left="0px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=-h.offsetHeight+"px";this.socCntrSp.style.left=-this.shiftSize+"px";g=true;break;case"RD":this.socCntr.style.left="0px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=h.offsetHeight+"px";this.socCntrSp.style.left=-this.shiftSize+"px";g=true;break;case"U":this.socCntr.style.left="0px";this.socCntr.style.top=-this.shiftSize+"px";this.socCntrSp.style.top=this.shiftSize+"px";g=false;break;case"UL":this.socCntr.style.left=-h.offsetWidth+"px";this.socCntr.style.top=-this.shiftSize+h.offsetHeight+"px";this.socCntrSp.style.top=this.shiftSize+"px";g=false;break;case"UR":this.socCntr.style.left=h.offsetWidth+"px";this.socCntr.style.top=-this.shiftSize+h.offsetHeight+"px";this.socCntrSp.style.top=this.shiftSize+"px";g=false;break;case"D":this.socCntr.style.left="0px";this.socCntr.style.top=h.offsetHeight+"px";this.socCntrSp.style.top=-this.shiftSize+"px";g=false;break;case"DL":this.socCntr.style.left=-h.offsetWidth+"px";this.socCntr.style.top="0px";this.socCntrSp.style.top=-this.shiftSize+"px";g=false;break;case"DR":this.socCntr.style.left=h.offsetWidth+"px";this.socCntr.style.top="0px";this.socCntrSp.style.top=-this.shiftSize+"px";g=false;break}d.Util.setOpacity(this.socCntr,1);this.socCntr.style.pointerEvents="auto";if(g){this.updateDisplayStyle("inline-block")}else{var e=d.Util.css.getCss("s7socialshare","position",this.obj.id,null,this.container);if(e=="relative"||e=="static"){this.updateDisplayStyle("block")}}this.socCntr.style.left=parseInt(this.socCntr.style.left)+this.shiftPos.x+"px";this.socCntr.style.top=parseInt(this.socCntr.style.top)+this.shiftPos.y+"px";this.socCntrSp.setAttribute("aria-hidden","false");this.state=1;this.socialbtn.obj.setAttribute("aria-expanded","true")};d.share.SocialShare.prototype.hide=function(){this.step=0;this.stepDuration=Math.ceil(this.shiftSize_A/(this.duration/this.stepSize));this.isShowig=false;this.socCntr.style.overflow="hidden";this.socialbtn.obj.setAttribute("aria-expanded","false");this.socCntrSp.setAttribute("aria-hidden","true")};d.share.SocialShare.prototype.hidePanel=function(){if(this.state==0){return}this.isOver=false;this.state=2;this.hide()};d.share.SocialShare.prototype.updateDisplayStyle=function(f){var g=this.socCntrSp.childNodes;for(var e=0;e<g.length;e++){if(d.Util.getStyle(g[e],"display")=="none"){continue}if(g[e].style.display!=f){g[e].style.display=f;g[e].style.zoom=1}}};d.share.SocialShare.prototype.enterFrame=function(){switch(this.state){case 0:break;case 1:this.slideStep();break;case 2:this.slideStep();break;case 3:if(!this.isOver){if(!this.isTouch){if(this.checkMouse()){return}}this.waitToHide-=this.stepSize;if(this.waitToHide<0){this.hide();d.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","start");this.state=2}}break}};d.share.SocialShare.prototype.slideStep=function(){var f=new Date().getTime();if(this.step==0){this.sttime=f}var e=(this.isShowig?this.shiftSize_A-this.stepDuration*this.step:this.stepDuration*this.step);e=e<0?0:e;e=e>this.shiftSize_A?this.shiftSize_A:e;switch(this.dir){case"L":case"LU":case"LD":this.socCntrSp.style.left=e+"px";break;case"R":case"RU":case"RD":this.socCntrSp.style.left=-e+"px";break;case"U":case"UL":case"UR":this.socCntrSp.style.top=e+"px";break;case"D":case"DL":case"DR":this.socCntrSp.style.top=-e+"px";break}if((this.stepDuration*this.step>this.shiftSize_A)&&(e==0||e==this.shiftSize_A)){this.step=0;if(this.state==2){this.socCntr.style.width="0px";d.Util.setOpacity(this.socCntr,0);this.socCntr.style.pointerEvents="none";this.socCntr.style.left="0px";this.socCntrSp.style.left="0px";this.socCntrSp.style.top="0px";this.socCntr.style.width="auto";this.socCntr.style.overflow="hidden";this.state=0;d.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","")}else{this.socCntr.style.overflow="visible";this.waitToHide=this.delaytohide;this.state=3;d.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","")}}this.step++};d.share.SocialShare.prototype.resize=function(h,f){d.Logger.log(d.Logger.FINE,"SocialShare.resize %0: %1x%2",this.id,h,f);this.socCntr.style.width="0px";d.Util.setOpacity(this.socCntr,0);this.socCntr.style.pointerEvents="none";this.socCntr.style.left="0px";this.socCntrSp.style.left="0px";this.socCntrSp.style.top="0px";this.socCntr.style.width="auto";this.socCntr.style.overflow="hidden";this.state=0;this.wid=h;this.hei=f;this.obj.style.width=h+"px";this.obj.style.height=f+"px";this.socialbtn.resize(h,f);var j=this.socCntrSp.childNodes;for(var g=0;g<j.length;g++){var e=j[g];if(e.button){e.button.resize(h,f)}}};d.share.SocialShare.prototype.getWidth=function(){return this.wid};d.share.SocialShare.prototype.getHeight=function(){return this.hei};d.share.SocialShare.prototype.activate=function(){var e=this.socCntrSp.childNodes;if(e&&e.length>0){if(this.numFocused!=-1){}else{this.numFocused=0}}this.enableEvents();this.socialbtn.activate();this.activated=true};d.share.SocialShare.prototype.deactivate=function(){var e=this.socCntrSp.childNodes;if(e){for(var f=0;f<e.length;f++){e[f].setAttribute("tabindex",-1)}}this.disableEvents();this.socialbtn.deactivate();this.activated=false};d.share.SocialShare.prototype.focus=function(){this.socialbtn.focus()};d.share.SocialShare.prototype.blur=function(){this.socialbtn.blur()};d.share.SocialShare.prototype.cleanUp=function(){if(this.animate){clearInterval(this.animate);this.animate=null}var e=window;d.Event.removeDOMListener(e,"mouseout",this.winMouseOutHandler,true);d.Event.removeDOMListener(e,"mousemove",this.winMouseMoveHandler,true);this.winMouseMoveHandler=null;this.winMouseOutHandler=null;d.Util.removeTags(this.obj);this.obj.style.cssText=""};d.share.SocialShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};d.share.SocialShare.prototype.setModifier=function(e){throw new Error("Trying to use setModifier on the Core class (SocialShare) is unsupported! Please refer to SDK documentation on using setModifier.")};d.share.SocialShare.prototype.setCSS=function(g,f,e){if(this.isRestrictedCSSProperty(d.share.SocialShare.RESTRICTED_STYLES,f)){throw new Error("You cannot set "+g+" : "+f+" CSS property for this component ")}else{this.superclass.superclass.prototype.setCSS.apply(this,[g,f,e])}};(function a(){var g=d.Util.css.createCssRuleText;var e=g(".s7socialshare",{"-webkit-transform":"translateZ(0px)","width":"28px","height":"28px"})+g(".s7socialshare .s7socialbutton",{"background-color":"#e7e7e7"})+g(".s7socialshare .s7socialsharepanel[state='start']",{"-webkit-transform":"translateZ(0px)"})+g(".s7socialshare .s7socialsharepanel",{"font-size":"0px","letter-spacing":"0px","word-spacing":"0px","background-color":"#e7e7e7"});var f=d.share.buttonsDefaultCSS("",".s7socialshare .s7socialbutton",["socialbtn_up.png","socialbtn_over.png","socialbtn_over.png","socialbtn_up.png"],null,true);e=f+e;d.Util.css.addDefaultCSS(e,"SocialShare")})()}if(!d.share.CustomComboBox){d.share.CustomComboBox=function CustomComboBox(e,i,g,l,k,j,h){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.CustomComboBox constructor - containerId: %0, settings: %1 , compId: %2",e,i,g);var f=l?l:"div";arguments.callee.superclass.apply(this,[g,e,f,"s7combobox",i]);this.ddContainer=j;this.containertyp=f;this.parenObject=k;this.mainLabelId=" "+h;this.compId=(d.Util.isNull(g)?"":g);if((e!=null)&&(d.Util.byId(e))){this.container=d.Util.byId(e)}else{this.container=document.body}this.createCBox();this.idxSelected=-1;this.isExpanded=false;this.changeState(d.share.CustomComboBox.EXPANDED)};d.Class.inherits("s7sdk.share.CustomComboBox","s7sdk.UIComponent");d.share.CustomComboBox.EXPANDED=0;d.share.CustomComboBox.ShRINKED=1;d.share.CustomComboBox.ITEMSTATE="state";d.share.CustomComboBox.SELECTED="selected";d.share.CustomComboBox.UN_SELECTED="unselected";d.share.CustomComboBox.prototype.symbols={TOOLTIP:"Select"};d.share.CustomComboBox.prototype.createCBox=function(){this.createElement();this.container.appendChild(this.obj);this.obj.setAttribute("tabindex",0);this.obj.setAttribute("role","button");this.obj.setAttribute("aria-expanded","false");this.obj.setAttribute("aria-haspopup","listbox");if(!this.ddContainer){this.ddContainer=this.obj}this.createInput();var e=this;this.obj.addEventListener("focus",function(){e.inFocus=true});this.obj.addEventListener("blur",function(){e.inFocus=false});this.clickHandler=function(f){if(!e.isExpanded){e.onExpand()}else{e.selectByIdx(e.idxSelected);e.hideDropDn()}};this.addEventListener("click",this.clickHandler,false);this.keyDownHandler=function(f){if(e.items&&e.items.length>0){if(e.inFocus){if(f.keyCode==d.Enum.KEY_CODE.TAB){e.hideDropDn();return}d.Event.preventDefault(f);if(f.keyCode==d.Enum.KEY_CODE.ESCAPE&&e.isExpanded){e.hideDropDn();e.obj.focus();d.Event.stopPropagation(f)}if(!e.isExpanded){if(f.keyCode==d.Enum.KEY_CODE.SPACE||f.keyCode==d.Enum.KEY_CODE.ENTER){e.onExpand()}if((f.keyCode==d.Enum.KEY_CODE.UP)){e.onExpand();if(e.idxSelected>0){d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.UN_SELECTED);e.idxSelected=e.idxSelected-1;d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.SELECTED)}}if((f.keyCode==d.Enum.KEY_CODE.DOWN)){e.onExpand();if(e.idxSelected<e.items.length-1&&e.idxSelected!=-1){d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.UN_SELECTED);e.idxSelected=e.idxSelected+1;d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.SELECTED)}}if((f.keyCode==d.Enum.KEY_CODE.HOME)||(f.keyCode==d.Enum.KEY_CODE.PAGE_UP)){if(e.getSelectedIdx()>0){e.selectByIdx(0)}}if((f.keyCode==d.Enum.KEY_CODE.END)||(f.keyCode==d.Enum.KEY_CODE.PAGE_DOWN)){if(e.getSelectedIdx()<e.items.length-1){e.selectByIdx(e.items.length-1)}}}else{if((f.keyCode==d.Enum.KEY_CODE.UP)){if(e.idxSelected>0){d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.UN_SELECTED);e.idxSelected=e.idxSelected-1;d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.SELECTED)}}if((f.keyCode==d.Enum.KEY_CODE.DOWN)){if(e.idxSelected<e.items.length-1&&e.idxSelected!=-1){d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.UN_SELECTED);e.idxSelected=e.idxSelected+1;d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.SELECTED)}}if((f.keyCode==d.Enum.KEY_CODE.HOME)||(f.keyCode==d.Enum.KEY_CODE.PAGE_UP)){if(e.idxSelected>0){d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.UN_SELECTED);e.idxSelected=0;d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.SELECTED)}}if((f.keyCode==d.Enum.KEY_CODE.END)||(f.keyCode==d.Enum.KEY_CODE.PAGE_DOWN)){if(e.idxSelected<e.items.length-1&&e.idxSelected!=-1){d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.UN_SELECTED);e.idxSelected=e.items.length-1;d.Util.css.setCSSAttributeSelector(e.items[e.idxSelected],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.SELECTED)}}if((f.keyCode==d.Enum.KEY_CODE.ENTER)||(f.keyCode==d.Enum.KEY_CODE.SPACE)){e.selectByIdx(e.idxSelected)}e.obj.setAttribute("aria-labelledby",e.items[e.idxSelected].id+e.mainLabelId);e.obj.setAttribute("aria-activedescendant",e.items[e.idxSelected].id)}d.Event.preventDefault(f)}}};d.Event.addDOMListener(this,"keydown",this.keyDownHandler,{passive:false})};d.share.CustomComboBox.prototype.createInput=function(){var e=document.createElement("span");e.className="s7comboboxtext";e.style.width="0px";e.style.verticalAlign="middle";this.obj.appendChild(e);this.obj.txt=document.createTextNode("");this.obj.appendChild(this.obj.txt);this.obj.id=this.id?this.id+"_cbxbutton":"cbxbutton_"+d.Util.createUniqueId();this.cbtn=new d.share.DlgActionButton(this.obj.id,this.settings,null,{TOOLTIP:""},"s7comboboxbutton");this.cbtn.obj.setAttribute("tabindex",-1);var f=this;d.Event.addDOMListener(this.cbtn,"click",function(h){f.lastFocus=document.activeElement;f.cbtn.obj.blur();f.onExpand();d.Event.stopPropagation(h)},false);var g=document.createElement(this.containertyp);g.className="s7comboboxdropdown";g.setAttribute("role","listbox");this.ddContainer.appendChild(g);this.cboxdd=g;this.cboxdd.style.display="none"};d.share.CustomComboBox.prototype.onExpand=function(){this.lastFocus=document.activeElement;if(this.cboxdd.style.display=="none"){if(this.ddContainer.dlgAbsolute){if(this.container.onExpand){this.container.onExpand()}var k=d.share.getObjPos(this.obj);var l=this.ddContainer.dlgAbsolute;l.style.left="0px";l.style.top="0px";var f=d.share.getObjPos(l);l.style.left=(k.x-f.x)+"px";var j=k.y-f.y;var e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);e=(this.parenObject&&this.parenObject.getContainerHeight)?this.parenObject.getContainerHeight():e;this.cboxdd.style.visibility="hidden";this.cboxdd.style.display="block";if((j+this.obj.offsetHeight+l.offsetHeight+2)<e){j+=(this.obj.offsetHeight+2)}else{j-=(l.offsetHeight+2)}l.style.top=j+"px";l.style.width=this.obj.offsetWidth+"px";this.cboxdd.style.visibility="inherit"}this.cboxdd.style.display="block";for(var g=0;g<this.items.length;g++){d.Util.css.setCSSAttributeSelector(this.items[g],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.UN_SELECTED)}d.Util.css.setCSSAttributeSelector(this.items[this.getSelectedIdx()],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.SELECTED);this.idxSelected=this.getSelectedIdx();this.isExpanded=true;this.obj.setAttribute("aria-expanded","true")}else{this.cboxdd.style.display="none";this.isExpanded=false;this.obj.setAttribute("aria-expanded","false")}this.blockScroll=true;var h=this;setTimeout(function(){h.blockScroll=false},500)};d.share.CustomComboBox.prototype.hideDropDn=function(){this.isExpanded=false;this.obj.setAttribute("aria-expanded","false");this.cboxdd.style.display="none"};d.share.CustomComboBox.prototype.addItem=function(j,e){var i=document.createElement("span");i.className="s7dropdownitem";i.setAttribute("aria-label",j);this.cboxdd.appendChild(i);var g=document.createElement("a");g.className="s7dropdownitemanchor";g.setAttribute("role","option");g.setAttribute("aria-selected",e?"true":"false");i.appendChild(g);var f=document.createElement("span");f.className="s7checkmark";f.style.visibility=e?"inherit":"hidden";g.appendChild(f);g.txtnode=document.createTextNode(j);g.appendChild(g.txtnode);g.checked=f;g.val=j;g.idx=this.items.length;g.id=this.id+"_dropdownitem_"+this.items.length;var h=this;d.Event.addDOMListener(g,"click",function(k){h.onSelect(k)},true);this.items.push(g);if(e){this.setSelectedIdx(g.idx)}};d.share.CustomComboBox.prototype.onSelect=function(g){var f=(g.target||g.srcElement);this.selectByObj(f)};d.share.CustomComboBox.prototype.selectByIdx=function(e){var f=this.cboxdd.childNodes;if(e>=0&&e<f.length){this.selectByObj(f[e].childNodes[0]);d.Util.css.setCSSAttributeSelector(f[e].childNodes[0],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.SELECTED);this.obj.setAttribute("aria-labelledby",f[e].childNodes[0].id+this.mainLabelId)}};d.share.CustomComboBox.prototype.selectByObj=function(e){var g=this.cboxdd.childNodes;for(var f=0;f<g.length;f++){if(g[f].childNodes[0].checked.style.visibility!="hidden"){g[f].childNodes[0].checked.style.visibility="hidden";g[f].childNodes[0].setAttribute("aria-selected","false")}d.Util.css.setCSSAttributeSelector(g[f].childNodes[0],d.share.CustomComboBox.ITEMSTATE,d.share.CustomComboBox.UN_SELECTED)}this.obj.txt.nodeValue=e.val;if(this.parenObject&&this.parenObject.updateTemplate){this.parenObject.updateTemplate(e.val)}e.checked.style.visibility="inherit";e.setAttribute("aria-selected","true");this.obj.setAttribute("aria-labelledby",e.id+this.mainLabelId);this.setSelectedIdx(e.idx);if(this.parenObject&&e.val==this.parenObject.customSizeStr){this.onExpand()}this.hideDropDn()};d.share.CustomComboBox.prototype.changeState=function(e){var f=["true","false"];if(f=="true"){this.isExpanded=true}else{this.isExpanded=false}d.Util.css.setCSSAttributeSelector(this.obj,"expanded",f[e]);this.obj.setAttribute("aria-expanded",f[e])};d.share.CustomComboBox.prototype.update=function(f,g){while(this.cboxdd.lastChild){this.cboxdd.removeChild(this.cboxdd.lastChild)}this.items=[];for(var e=0;e<f.length;e++){if(g==e){this.addItem(f[e],true);this.selected=this.obj.txt.nodeValue=f[e];if(this.parenObject&&this.parenObject.updateTemplate){this.parenObject.updateTemplate(f[e])}}else{this.addItem(f[e],false)}}};d.share.CustomComboBox.prototype.removeItem=function(e){};d.share.CustomComboBox.prototype.getSelectedIdx=function(){return this.selectedIdx};d.share.CustomComboBox.prototype.setSelectedIdx=function(e){if(e>=0&&e<this.items.length){this.selectedIdx=e}return this.selectedIdx};(function a(){var e=d.share.comboBoxDefaultCSS("");d.Util.css.addDefaultCSS(e,"CustomComboBox")})()}if(!d.share.SocialDialog){d.share.SocialDialog=function SocialDialog(e,j,h,g,f,i){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.SocialDialog constructor - containerId: %0, settings: %1 , compId: %2",e,j,h);if(f){this.symbols=f}var k=!!arguments[5];arguments.callee.superclass.apply(this,[h,e,"div",g,j,!k]);this.cl=g;this.compId=(d.Util.isNull(h)?"":h);this.defaultContainerId=this.getAnchorId(document.getElementById(e));this.parent=i;this.focusableElements=[];this.firstFocusableElement=null;this.lastFocusableElement=null};d.Class.inherits("s7sdk.share.SocialDialog","s7sdk.UIComponent");d.share.SocialDialog.prototype.symbols={HEADER:"",TOOLTIP_HEADER_CLOSE:"",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",ACTION:"",TOOLTIP_ACTION:""};d.share.SocialDialog.prototype.getAnchorId=function(f){var e=f;while(e!=null){e=e.parentNode;if(e==document.body){break}if(e!=null&&typeof(e.s7base)=="object"&&d.common&&d.common.Container&&(e.s7base instanceof d.common.Container)){break}}return e==document.body||typeof(e.id)=="undefined"?null:e.id};d.share.SocialDialog.prototype.attachDialog=function(){var i=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement;var k;this.isBody=false;if(i){k=i}else{if((this.defaultContainerId!=null)&&(d.Util.byId(this.defaultContainerId))){k=d.Util.byId(this.defaultContainerId);if(k instanceof d.Container){k=k.firstChild}}else{k=document.body;this.isBody=true}}if(this.container!=k){this.container=k;k.appendChild(this.obj)}if(this.isTouch&&this.contentInt&&!this.scrollingContent){this.scrollingContent=this.contentInt;var f=0;var g=this.scrollingContent;var e=0;var h=this;this.scrollingContentTouchstartHandler=function(m){f=m.touches[0].pageY;e=event.touches.length;if(e>1){d.Event.preventDefault(m);d.Event.stopPropagation(m);return}var l=g.scrollTop;if(l+g.offsetHeight>=g.scrollHeight){g.scrollTop=g.scrollHeight-g.offsetHeight-1}};d.Event.addDOMListener(this.scrollingContent,"touchstart",this.scrollingContentTouchstartHandler,{passive:false});this.touchmoveHandler=function(l){d.Event.preventDefault(l);d.Event.stopPropagation(l)};d.Event.addDOMListener(this.obj,"touchmove",this.touchmoveHandler,{passive:false});this.scrollingContentTouchmoveHandler=function(l){d.Event.stopPropagation(l);if(((f-l.touches[0].pageY)<0)&&(g.scrollTop==0)){d.Event.preventDefault(l)}if(h.contentInt.clientHeight>=h.contentSpan.offsetHeight){d.Event.preventDefault(l)}};d.Event.addDOMListener(this.scrollingContent,"touchmove",this.scrollingContentTouchmoveHandler,{passive:false});this.scrollingContentTouchendHandler=function(l){e=0};d.Event.addDOMListener(this.scrollingContent,"touchend",this.scrollingContentTouchendHandler,{passive:false})}if(this.isTouch){if(this.contentInt){this.contentSpan.focus()}var j=this.getMaxNeighbourZIndex(this.obj)+1;this.obj.style.zIndex=j}};d.share.SocialDialog.prototype.getMaxNeighbourZIndex=function(j){var h=-1;for(var f=0;f<j.parentNode.children.length;f++){var e=j.parentNode.children[f];var g=this.getZIndex(e);if(this.isPositioned(e)&&(g>0)){g=this.getZIndex(e)}else{if(e.children.length>0){g=this.getMaxNeighbourZIndex(e.children[0])}else{g=0}}if(g>h){h=g}}return h};d.share.SocialDialog.prototype.getZIndex=function(f){var e;if(window.getComputedStyle){e=document.defaultView.getComputedStyle(f,null).getPropertyValue("z-index")}else{if(f.currentStyle){e=f.currentStyle.zIndex}}if(e=="auto"){e=0}return parseInt(e)};d.share.SocialDialog.prototype.isPositioned=function(f){var e;if(window.getComputedStyle){e=document.defaultView.getComputedStyle(f,null).getPropertyValue("position")}else{if(f.currentStyle){e=f.currentStyle.position}}return(e=="absolute")||(e=="relative")||(e=="fixed")};d.share.SocialDialog.prototype.createDialog=function(f){this.createElement();this.obj.style.position="absolute";this.obj.style.width="100%";this.obj.style.height="100%";this.top=this.left=0;this.attachDialog();this.backOverlay=document.createElement("div");this.backOverlay.className="s7backoverlay";this.obj.appendChild(this.backOverlay);this.dialog=document.createElement("div");this.dialog.className="s7dialog";this.dialog.setAttribute("tabindex",-1);this.dialog.setAttribute("role","dialog");this.dialog.setAttribute("aria-hidden","true");this.obj.appendChild(this.dialog);var h=d.Util.getStyle(this.dialog,"width");this.dialog.style.width="100%";var g=d.Util.getStyle(this.dialog,"width");this.isTouch=h==g;this.dialog.style.width="";var j=document.createElement("div");j.style.top="0px";j.style.left="0px";j.style.position="absolute";j.style.zIndex=9999;this.dialog.appendChild(j);var e=document.createElement("span");e.style.position="relative";j.appendChild(e);this.cntSpAbsolute=e;this.cntSpAbsolute.dlgAbsolute=j;this.createCaption();this.createContentContainer();this.createContent();this.createBottom(f);this.dialogStyle=this.dialog.style.height;this.contentIntStyle=this.contentInt.style.height;this.setupSz();this.centerDialog();this.setupScroll();this.wid_=parseInt(d.Util.getStyle(this.obj,"width"));this.hei_=parseInt(d.Util.getStyle(this.obj,"height"));this.obj.style.display="none";if(this.isTouch){var i=this;this.onOrientationChange=function(l){if(!i.isTouch){return}i.blockresize=true;i.focusableElements=i.getFocusableElements();for(var k=0;k<i.focusableElements.length;k++){if(i.focusableElements[k]==document.activeElement){i.focusableElements[k].blur();break}}i.blockresize=false;i.hide();i.waitToHide=-1;i.show();i.waitToHide=-1}}};d.share.SocialDialog.prototype.getContainerHeight=function(){return this.backOverlay.offsetHeight};d.share.SocialDialog.prototype.createContentContainer=function(){this.contentInt=document.createElement("div");this.contentInt.setAttribute("id",this.compId+"_viewArea");this.contentInt.className="s7dialogviewarea";this.dialog.appendChild(this.contentInt);this.contentSpan=document.createElement("span");this.contentSpan.className="s7dialogbody";this.contentInt.appendChild(this.contentSpan)};d.share.SocialDialog.prototype.centerDialog=function(e){if(this.isBody){if(this.isTouch){this.dialog.style.left=this.left+(this.obj.offsetWidth-this.dialog.offsetWidth)/2+"px";this.dialog.style.top=this.top+(this.obj.offsetHeight-this.dialog.offsetHeight)/2+"px"}else{if(this.obj.offsetWidth!=this.dialog.offsetWidth||e){this.dialog.style.left=this.left+(this.obj.offsetWidth-this.dialog.offsetWidth)/2+"px";this.dialog.style.top=this.top+(this.obj.offsetHeight-this.dialog.offsetHeight)/2+"px"}}}else{if(this.isTouch){this.moveToTopLeft(this.dialog)}else{this.dialog.style.left=(this.backOverlay.offsetWidth-this.dialog.offsetWidth)/2+"px";this.dialog.style.top=(this.backOverlay.offsetHeight-this.dialog.offsetHeight)/2+"px"}}};d.share.SocialDialog.prototype.moveToTopLeft=function(g){d.Util.css.setCSSAttributeSelector(g,"mode","fullscreen");var f=parseInt(d.Util.getStyle(g,"left"));var j=parseInt(d.Util.getStyle(g,"top"));f=d.Util.isNumber(f)?f:-parseInt(d.Util.getStyle(g,"right"));j=d.Util.isNumber(j)?j:-parseInt(d.Util.getStyle(g,"bottom"));f=d.Util.isNumber(f)?f:0;j=d.Util.isNumber(j)?j:0;var h=g.getBoundingClientRect();var e=h.left-f;var i=h.top-j;g.style.left=-e+"px";g.style.top=-i+"px"};d.share.SocialDialog.prototype.getInitialHeight=function(){return parseInt(d.Util.css.getCss("s7dialogviewarea","height",this.contentInt.id,null,this.dialog))};d.share.SocialDialog.prototype.setupSz=function(){if(this.obj.style.display=="none"){return}this.contentSpan.style.top="0px";this.dialog.style.height="";this.contentInt.style.height="";var f=this.getInitialHeight();var h;if(!this.isTouch){h=this.dialog.offsetHeight-this.backOverlay.offsetHeight;if(h>0){this.contentInt.style.height=f+"px";h=this.dialog.offsetHeight-this.backOverlay.offsetHeight;if(f-h>=0){this.contentInt.style.height=(f-h)+"px"}}this.setupScroll()}else{var e=d.Util.getObjPos(this.bottom).y-d.Util.getObjPos(this.contentInt).y;this.contentInt.style.height=e+"px";var g=(this.contentInt.offsetWidth-this.contentSpan.offsetWidth)/2;this.contentSpan.style.left=g+"px"}h=(this.contentInt.offsetHeight-this.contentSpan.offsetHeight)/2;if(h>0){this.contentSpan.style.top=h+"px"}};d.share.SocialDialog.prototype.setupScroll=function(){var f=this.contentSpan.offsetHeight-this.contentInt.clientHeight;if(f>0){var e=this.scrollbarInst.curPos_;this.scrollbarInst.setMaxScroll(f);this.scrollbarInst.curPos_=e;this.scrollbarInst.setThumbPosition(false);this.contentSb.style.display="inline-block"}else{this.contentSb.style.display="none"}if(this.scrollbarInst){this.scrollbarInst.setScrollStep(Math.round(this.contentInt.clientHeight*0.1))}};d.share.SocialDialog.prototype.createCaption=function(i){this.caption=document.createElement("div");this.caption.id=this.compId+"_header";this.caption.className="s7dialogheader";this.dialog.appendChild(this.caption);this.dialog.setAttribute("aria-labelledby",this.caption.id);var h=document.createElement("span");h.className="s7dialogline";this.caption.appendChild(h);var e=document.createElement("span");e.className="s7dialogheadericon";h.appendChild(e);var g=document.createElement("span");g.className="s7dialogheadertext";g.innerText=this.getLocalizedText("HEADER");h.appendChild(g);this.closebutton=new d.share.DlgActionButton(this.caption.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_HEADER_CLOSE")},"s7closebutton");this.closebutton.obj.ariaLabel=this.getLocalizedText("CLOSE");var f=this;d.Event.addDOMListener(this.closebutton,"click",function(j){f.closebutton.obj.blur();f.onClose(j)},true)};d.share.SocialDialog.prototype.createBottom=function(f){this.bottom=document.createElement("div");this.bottom.className="s7dialogfooter";this.dialog.appendChild(this.bottom);var e=document.createElement("div");this.bottom.appendChild(e);var h=document.createElement("span");h.className="s7dialogbuttoncontainer";h.id=this.compId+"_footerPanel";e.appendChild(h);this.lnc_tnr=e;this.cancelbutton=new d.share.DlgActionButton(h.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_CANCEL")},"s7dialogcancelbutton","span",this.getLocalizedText("CANCEL"));this.bottom.buttonsCtnrId=h.id;var g=this;if(!f){this.actionbutton=new d.share.DlgActionButton(h.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_ACTION")},"s7dialogactionbutton","span",this.getLocalizedText("ACTION"));d.Event.addDOMListener(this.actionbutton,"click",function(i){g.onAction(i)},true)}d.Event.addDOMListener(this.cancelbutton,"click",function(i){g.onCancel(i)},true);if(this.isTouch){this.bottom.style.position="absolute";this.bottom.style.width="100%"}};d.share.SocialDialog.prototype.onAction=function(f){};d.share.SocialDialog.prototype.onCancel=function(f){};d.share.SocialDialog.prototype.createScrollbar=function(){this.contentSb=document.createElement("div");this.contentSb.id=this.id+"_scrollBarContainer";this.contentSb.className="s7dialogscrollpanel";this.contentInt.appendChild(this.contentSb);var e=this;this.scrollbarInst=new d.ScrollBar(this.contentSb.id,this.settings,this.contentSb.id+"_scrollBar");this.scrollbarInst.upButton_.toolTip_.setContent(this.getLocalizedText("TOOLTIP_SCROLL_UP"));this.scrollbarInst.downButton_.toolTip_.setContent(this.getLocalizedText("TOOLTIP_SCROLL_DOWN"));this.scrollbarInst.upButton_.obj.setAttribute("tabindex",-1);this.scrollbarInst.downButton_.obj.setAttribute("tabindex",-1);this.scrollbarInst.addEventListener(d.ScrollEvent.SCROLL_POSITION_EVENT,function(f){e.moveContent(f.s7event.position)},false);if(!this.isTouch){this.contentInt.addEventListener("scroll",function(f){document.getElementById(e.contentSb.id).style.top=e.contentInt.scrollTop+"px";e.scrollbarInst.upButton_.obj.setAttribute("tabindex",-1);e.scrollbarInst.downButton_.obj.setAttribute("tabindex",-1)},false)}if(this.isTouch){this.scrollbarInst.obj.style.display="none"}};d.share.SocialDialog.prototype.moveContent=function(e){this.contentInt.scrollTop=e;if(this.onPositionChanged){this.onPositionChanged()}};d.share.SocialDialog.prototype.createLineFeed=function(){var e=document.createElement("span");e.className="s7dialoglinefeed";this.contentSpan.appendChild(e)};d.share.SocialDialog.prototype.onClose=function(){this.hide()};d.share.SocialDialog.prototype.getFocusableElements=function(){var h=[];function j(i,l,m){var k=i[l];i.splice(l,1);i.splice(m,0,k)}var f=this.dialog.querySelectorAll("[aria-invalid=true],a[href], area[href], input:not([disabled]), select:not([disabled]),[tabindex]:not([notfocusable='true'])");var g=Array.prototype.slice.call(f);for(var e=0;e<g.length;e++){if(g[e].getAttribute("tabindex")!="-1"&&(d.Util.getStyle(g[e],"visibility")!="hidden")&&((d.Util.getStyle(g[e],"display")!="none")&&(d.Util.getStyle(g[e].parentNode,"display")!="none"))){h.push(g[e])}}for(var e=0;e<h.length;e++){if(h[e].getAttribute("aria-invalid")=="true"){j(h,e,0);break}}return h};d.share.SocialDialog.prototype.show=function(){if(this.obj.style.display=="block"){return}this.attachDialog();if(!this.isBody){this.container.style.overflow="visible";this.left=undefined;this.top=undefined}this.obj.style.left=0+"px";this.obj.style.top=0+"px";this.contentSpan.style.top="0px";var e=this;this.resizeTimer=setInterval(function(){if(!e.blockresize){e.onCheckResize()}},100);this.obj.style.visibility="hidden";this.obj.style.display="block";this.setupSz();this.setupScroll();this.centerDialog(true);this.obj.style.visibility="";if(("onorientationchange" in window)&&d.browser.device!=""){window.addEventListener("orientationchange",this.onOrientationChange)}this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];var f=document;this.focusHandler=function(g){if(e.dialogShow&&!e.dialog.contains(g.target)){d.Event.stopPropagation(g);e.firstFocusableElement.focus()}};this.keyHandler=function(g){if(e.dialogShow&&g.keyCode==d.Enum.KEY_CODE.TAB){e.focusableElements=e.getFocusableElements();e.firstFocusableElement=e.focusableElements[0];e.lastFocusableElement=e.focusableElements[e.focusableElements.length-1];if(e.focusableElements.length!=1){if(g.shiftKey){if(document.activeElement===e.firstFocusableElement){d.Event.preventDefault(g);e.lastFocusableElement.focus()}}else{if(document.activeElement===e.lastFocusableElement){d.Event.preventDefault(g);e.firstFocusableElement.focus()}}}}if(e.dialogShow&&g.keyCode==d.Enum.KEY_CODE.ESCAPE){e.hide()}if(e.dialogShow&&g.target.tagName!="INPUT"&&g.target.tagName!="TEXTAREA"&&g.target.tagName!="SELECT"&&g.target.className!="s7combobox"){var h=-1;if(g.keyCode==d.Enum.KEY_CODE.UP){h=e.contentInt.scrollTop-parseInt((e.contentInt.scrollHeight-e.contentInt.clientHeight)/10);if(h<0){h=0}}if(g.keyCode==d.Enum.KEY_CODE.DOWN){h=e.contentInt.scrollTop+parseInt((e.contentInt.scrollHeight-e.contentInt.clientHeight)/10)}if(g.keyCode==d.Enum.KEY_CODE.PAGE_UP){h=e.contentInt.scrollTop-parseInt((e.contentInt.scrollHeight-e.contentInt.clientHeight)/2);if(h<0){h=0}}if(g.keyCode==d.Enum.KEY_CODE.PAGE_DOWN){h=e.contentInt.scrollTop+parseInt((e.contentInt.scrollHeight-e.contentInt.clientHeight)/2)}if(g.keyCode==d.Enum.KEY_CODE.HOME){h=0}if(g.keyCode==d.Enum.KEY_CODE.END){h=e.contentInt.scrollTop+parseInt((e.contentInt.scrollHeight-e.contentInt.clientHeight))}if(h!=-1&&e.scrollbarInst){e.scrollbarInst.setPosition(h);e.scrollbarInst.dispatchEvent(new d.ScrollEvent(d.ScrollEvent.SCROLL_POSITION_EVENT,h,true));d.Event.preventDefault(g)}}};d.Event.addDOMListener(f,"focus",this.focusHandler,true);d.Event.addDOMListener(f,"keydown",this.keyHandler,{passive:false});this.lastFocus=document.activeElement;this.dialog.setAttribute("tabindex",0);this.dialog.setAttribute("aria-hidden","false");this.dialogShow=true;this.firstFocusableElement.focus();e.onCheckResize()};d.share.SocialDialog.prototype.onCheckResizeBody=function(){var k=document.documentElement;var j=(window.pageXOffset||k.scrollLeft)-(k.clientLeft||0);var i=(window.pageYOffset||k.scrollTop)-(k.clientTop||0);var f=false;if(this.left!=j||this.top!=i){this.left=j;this.top=i;this.backOverlay.style.left=j+"px";this.backOverlay.style.top=i+"px";f=true}if(this.isTouch){this.screensize=d.browser.detectScreen();this.obj.style.width=this.screensize.w+"px";this.obj.style.height=this.screensize.h+"px"}var e=this.backOverlay.offsetWidth;var g=this.backOverlay.offsetHeight;if(this.wid_!=e||this.hei_!=g){this.attachDialog();this.wid_=e;this.hei_=g;this.setupSz();if(!this.isTouch&&this.scrollbarInst){this.scrollbarInst.resize()}this.centerDialog()}else{if(f){this.centerDialog(true)}}};d.share.SocialDialog.prototype.onCheckResize=function(){if(this.isBody){this.onCheckResizeBody();return}var h=document.documentElement;var g=(window.pageXOffset||h.scrollLeft)-(h.clientLeft||0);var f=(window.pageYOffset||h.scrollTop)-(h.clientTop||0);var e=d.browser.detectScreen();if(this.left!=g||this.top!=f||this.wid_!=e.w||this.hei_!=e.h){this.obj.style.width=(e.w>h.clientWidth?h.clientWidth:e.w)+"px";this.obj.style.height=e.h+"px";this.moveToTopLeft(this.obj);this.attachDialog();this.left=g;this.top=f;this.wid_=e.w;this.hei_=e.h;this.setupSz();if(!this.isTouch&&this.scrollbarInst){this.scrollbarInst.resize()}this.centerDialog()}};d.share.SocialDialog.prototype.hide=function(){if(("onorientationchange" in window)&&d.browser.device!=""){window.removeEventListener("orientationchange",this.onOrientationChange)}var f=document;d.Event.removeDOMListener(f,"focus",this.focusHandler,true);d.Event.removeDOMListener(f,"keydown",this.keyHandler,{passive:false});if(this.resizeTimer){window.clearInterval(this.resizeTimer);var e=new d.event.SocialEvent(d.event.SocialEvent.NOTF_SOCIAL_DEACTIVATED,true);this.parent.dispatchEvent(e)}this.resizeTimer=null;if(!this.isBody){this.container.style.overflow="";this.wid_=-1;this.onCheckResize()}this.obj.style.display="none";this.dialog.setAttribute("tabindex",-1);this.dialog.setAttribute("aria-hidden","true");this.dialogShow=false;this.lastFocus.focus()};d.share.SocialDialog.prototype.dispose=function(){if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function a(){var f=d.Util.css.createCssRuleText;var e=f(".s7dialogcancelbutton",{"width":"64px","height":"34px"})+f(".s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+f(".s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+f(".s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+f(".s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"});d.Util.css.addDefaultCSS(e,"SocialDialog")})()}if(!d.share.LinkDialogControl){d.share.LinkDialogControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.LinkDialogControl.NS,e.constructor,d.share.LinkDialog.RESTRICTED_STYLES])};d.share.LinkDialogControl.prototype.setCSS=function(i,h,g){if(this.component){function f(j){return j.replace(/\./g,"").split(" ")}var e=f(i);if(e[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[i,h,g])}}};d.share.LinkDialogControl.NS="s7sdk.share.LinkDialogControl"}d.Class.inherits(d.share.LinkDialogControl.NS,"s7sdk.ControlComponent");if(!d.share.LinkDialog){d.share.LinkDialog=function LinkDialog(e,i,g,f,h){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.LinkDialog constructor - containerId: %0, settings: %1 , compId: %2",e,i,g);var j=!!arguments[5];arguments.callee.superclass.apply(this,[e,i,g,"s7linkdialog",f,h,!j]);this.createDialog(d.browser.device.name!="desktop");if(!j){return new d.share.LinkDialogControl(this)}else{return this}};d.Class.inherits("s7sdk.share.LinkDialog","s7sdk.share.SocialDialog");d.share.LinkDialog.prototype.symbols={HEADER:"Share Link",DESCRIPTION:"To share this content with others, copy and past this link:",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};d.share.LinkDialog.prototype.createContent=function(){this.createLinkLable(this.getLocalizedText("DESCRIPTION"));this.createLinkLine();this.createScrollbar()};d.share.LinkDialog.prototype.createLinkLable=function(e){var f=document.createElement("span");f.className="s7dialogline s7dialoglabel s7dialoginputwide";this.contentSpan.appendChild(f);f.innerText=e;this.createLineFeed()};d.share.LinkDialog.prototype.createLinkLine=function(){var e=document.createElement("span");e.className="s7dialogline s7dialoginputcontainer";this.contentSpan.appendChild(e);this.inplnk=document.createElement("input");this.inplnk.className="s7dialoglink";this.inplnk.setAttribute("aria-label",this.getLocalizedText("LINK_URL"));e.appendChild(this.inplnk);this.createLineFeed()};d.share.LinkDialog.prototype.setupScroll=function(){};d.share.LinkDialog.prototype.createScrollbar=function(){};d.share.LinkDialog.prototype.onAction=function(){if(this.inplnk.select){this.inplnk.focus();this.inplnk.select();this.firstFocusableElement=this.inplnk;return}var e,f;if(window.getSelection&&document.createRange){f=window.getSelection();e=document.createRange();e.selectNodeContents(this.inplnk);f.removeAllRanges();f.addRange(e)}else{if(document.selection&&document.body.createTextRange){e=document.body.createTextRange();e.moveToElementText(this.inplnk);e.select()}else{}}};d.share.LinkDialog.prototype.onCancel=function(){try{window.getSelection().removeAllRanges()}catch(f){document.selection.empty()}this.hide()};d.share.LinkDialog.prototype.setContentUrl=function(e){if(e){this.inplnk.value=e}};d.share.LinkDialog.prototype.show=function(){d.share.SocialDialog.prototype.show.call(this);this.dialog.setAttribute("tabindex",-1)};(function a(){var h=d.Util.css.createCssRuleText;var f=d.Util.css.createCssImgUrlText;var e=h(".s7linkdialog .s7dialogheadericon",{"background-image":f("dlglink_cap.png"),"width":"22px","height":"12px"})+h(".s7linkdialog .s7dialogviewarea",{"height":"100px"})+h(".s7linkdialog .s7dialoginputwide",{"border":"none","padding-bottom":"10px","width":"430px"})+h(".s7linkdialog .s7dialoginputcontainer",{"border":"1px solid #cccccc","padding":"9px"})+h(".s7linkdialog .s7dialoglink",{"border":"none","width":"450px"})+h(".s7linkdialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+h(".s7linkdialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+h(".s7linkdialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+h(".s7linkdialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+h(".s7linkdialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"})+h(".s7linkdialog .s7dialogactionbutton",{"width":"82px","height":"34px"})+h(".s7linkdialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+h(".s7linkdialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+h(".s7linkdialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+h(".s7linkdialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"});var g=[];d.share.dialogsDefaultCSS("LinkDialog",".s7linkdialog",g,e)})()}if(!d.share.EmailDialogControl){d.share.EmailDialogControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.EmailDialogControl.NS,e.constructor,d.share.EmailDialog.RESTRICTED_STYLES])};d.share.EmailDialogControl.prototype.setCSS=function(i,h,g){if(this.component){function f(j){return j.replace(/\./g,"").split(" ")}var e=f(i);if(e[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[i,h,g])}}};d.share.EmailDialogControl.NS="s7sdk.share.EmailDialogControl"}d.Class.inherits(d.share.EmailDialogControl.NS,"s7sdk.ControlComponent");if(!d.share.EmailDialog){d.share.EmailDialog=function EmailDialog(e,i,g,f,h){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.EmailDialog_src constructor - containerId: %0, settings: %1 , compId: %2",e,i,g);var j=!!arguments[5];arguments.callee.superclass.apply(this,[e,i,g,"s7emaildialog",f,h,!j]);this.createDialog();if(!j){return new d.share.EmailDialogControl(this)}else{return this}};d.Class.inherits("s7sdk.share.EmailDialog","s7sdk.share.SocialDialog");d.share.EmailDialog.prototype.symbols={HEADER:"Email this to a Friend",INVALID_ADDRESSS:"Wrong email address",TO_EMAIL_ERROR:"To email address is required or it may be invalid",FROM_EMAIL_ERROR:"From email address is required or it may be invalid",TO:"To",TOOLTIP_ADD:"Add",ADD:"Add Another Email Address",PRIMARY_EMAIL_ADDRESS:"Primary Email Address",ADDITIONAL_EMAIL_ADDRESS:"Additional Email Address",FROM:"From",MESSAGE:"Message",TOOLTIP_REMOVE:"Remove",REMOVE:"Remove the email address",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",CLOSE:"Close",TOOLTIP_CLOSE:"Close",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",ACTION:"Send Email",TOOLTIP_ACTION:"Send Email",SEND_SUCCESS:"Email sent successfully",SEND_FAILURE:"Send email failed"};d.share.EmailDialog.prototype.createContent=function(){d.Util.css.setCSSAttributeSelector(this.contentInt,"state","");this.addrCounter=0;this.createErrorMsg();this.createMailLine("$TOEMAIL$",this.getLocalizedText("TO")+"*","input",false,null,"s7dialoginputshort");this.createAddMailLine();this.createScrollbar();this.createMailLine("$FROMEMAIL$",this.getLocalizedText("FROM")+"*","input",false,null,"s7dialoginputwide");this.msgCtrl=this.createMailLine("$MESSAGEEMAIL$",this.getLocalizedText("MESSAGE"),"textarea",false,null,"s7dialoginputwide");this.createDescrLine();var e=this.contentSpan.querySelector(".s7dialogline .s7dialoginputcontainer .s7dialoginputshort");e.parentElement.setAttribute("data-children-count","1");e.ariaLabel=this.getLocalizedText("PRIMARY_EMAIL_ADDRESS");e.setAttribute("aria-labelledby",e.getAttribute("aria-labelledby")+" "+e.id)};d.share.EmailDialog.prototype.getInitialHeight=function(){var e=this.contentInt.getAttribute("state");return parseInt(d.Util.css.getCss("s7dialogviewarea","height",this.contentInt.id,null,this.dialog,{"state":e}))};d.share.EmailDialog.prototype.createErrorMsg=function(){var f=document.createElement("span");f.id=this.id+"_dialogerror";f.className="s7dialogline s7dialogerror";d.Util.css.setCSSAttributeSelector(f,"error","false");this.contentSpan.appendChild(f);var e=document.createElement("span");e.className="s7dialogerrormessage";f.appendChild(e);f.errsp=e;f.errList=[];this.errLine=f;this.errLine.setAttribute("role","alert");this.errLine.setAttribute("aria-hidden",true);this.setErrorMsg("INVALID_ADDRESSS","verifyerror");this.createLineFeed()};d.share.EmailDialog.prototype.setErrorMsg=function(h,g){var f=this.errLine.errsp;d.Util.css.setCSSAttributeSelector(f,"state",g);var e=this.getLocalizedText(h);f.textContent=e;f.innerText=e};d.share.EmailDialog.prototype.createAddMailLine=function(){var h=document.createElement("span");h.id=this.id+"_lnctnr_"+d.Util.createUniqueId();h.className="s7dialogline";this.contentSpan.appendChild(h);var g=document.createElement("span");g.className="s7dialoglabel s7dialoginputlabel";h.appendChild(g);this.addBtnCtnr=h;var f=new d.share.DlgActionButton(h.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_ADD")},"s7dialogaddemailbutton","span",this.getLocalizedText("ADD"));f.obj.setAttribute("aria-label",this.getLocalizedText("ADD"));var e=this;f.addEventListener("click",function(){e.onAddEmailAddress()},false);this.createLineFeed()};d.share.EmailDialog.prototype.onAddEmailAddress=function(){var f=document.createElement("span");f.className="s7dialoglinefeed";var i=this.createMailLine("$ADDEMAIL"+this.addrCounter+"$",this.getLocalizedText("TO"),"input",true,this.addBtnCtnr,"s7dialoginputshort");this.addrCounter++;var h=this.contentSpan.querySelectorAll(".s7dialogline .s7dialoginputcontainer .s7dialoginputshort").length;var j=i.querySelector(".s7dialoglabel.s7dialoginputlabel");j.style="visibility: hidden";var e=i.querySelector(".s7dialoginputcontainer .s7dialoginputshort");e.parentElement.setAttribute("data-children-count","1");e.ariaLabel=this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESS")+" "+(h-1);e.setAttribute("aria-labelledby",e.getAttribute("aria-labelledby")+" "+e.id);var g=i.querySelector(".s7button.s7dialogremoveemailbutton");g.setAttribute("aria-label",g.getAttribute("aria-label")+" "+e.getAttribute("aria-label"));this.contentSpan.insertBefore(f,this.addBtnCtnr);i.inp.focus();this.setupScroll(true);this.wid_=0};d.share.EmailDialog.prototype.createDescrLine=function(){var i=document.createElement("span");i.className="s7dialogline s7dialogcontent";this.contentSpan.appendChild(i);var h=document.createElement("span");h.className="s7dialogthumbnail";i.appendChild(h);var g=parseInt(d.Util.getStyle(h,"width"));var l=parseInt(d.Util.getStyle(h,"height"));i.imgsp=h;i.imgsp.w=g==0?h.clientWidth:g;i.imgsp.h=l==0?h.scrollHeight:l;var e=document.createElement("span");e.className="s7dialoginfopanel";i.appendChild(e);var k=document.createElement("span");k.className="s7dialogtitle";e.appendChild(k);i.titlestr=k;var f=document.createElement("span");f.className="s7dialogorigin";e.appendChild(f);i.site=f;var j=document.createElement("span");j.className="s7dialogdescription";e.appendChild(j);i.descrtext=j;this.descr=i};d.share.EmailDialog.prototype.createMailLine=function(g,l,m,h,k,n){var j=document.createElement("span");if(h){j.id=this.id+"_lnctnr_"+d.Util.createUniqueId()}j.className="s7dialogline";if(k){this.contentSpan.insertBefore(j,k)}else{this.contentSpan.appendChild(j)}var i=document.createElement("span");i.id=this.id+"_lbl_"+d.Util.createUniqueId();i.className="s7dialoglabel s7dialoginputlabel";i.innerText=l;j.appendChild(i);var f=document.createElement("span");f.className="s7dialoginputcontainer";j.appendChild(f);j.spinp=f;j.inp=document.createElement(m);j.inp.setAttribute("aria-labelledby",i.id);j.inp.id=this.id+"_"+m+"_"+d.Util.createUniqueId();if(m=="textarea"){j.inp.className="s7dialogmessage "+n;j.inp.setAttribute("aria-multiline","true")}else{j.inp.className=n;j.inp.setAttribute("aria-multiline","false");j.inp.setAttribute("aria-required",true);j.inp.setAttribute("aria-invalid",false);var e=this;j.inp.onchange=function(p){var o=e.verifyEmailAddress(j)}}f.appendChild(j.inp);if(h){j.btn=new d.share.DlgActionButton(j.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_REMOVE")},"s7dialogremoveemailbutton");j.btn.obj.setAttribute("aria-label",this.getLocalizedText("TOOLTIP_REMOVE"));if(k){var e=this;d.Event.addDOMListener(j.btn,"click",function(q){var p=-1;e.focusableElements=e.getFocusableElements();for(var o=0;o<e.focusableElements.length;o++){if(e.focusableElements[o]==document.activeElement){p=o;break}}e.onRemove(j);if(p<(e.focusableElements.length-1)){e.focusableElements[p+1].focus()}else{e.firstFocusableElement.focus()}e.focusableElements=e.getFocusableElements();e.firstFocusableElement=e.focusableElements[0];e.lastFocusableElement=e.focusableElements[e.focusableElements.length-1];e.updateEmailInputFieldsAndButtonLabel()},true)}else{j.btn.obj.style.visibility="hidden"}}this.createLineFeed();j.contentIdx=g;return j};d.share.EmailDialog.prototype.updateEmailInputFieldsAndButtonLabel=function(){var e=this.contentSpan.querySelectorAll(".s7dialogline .s7dialoginputcontainer .s7dialoginputshort");for(var g=1;g<e.length;g++){e[g].ariaLabel=this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESS")+g;e[g].parentElement.parentElement.querySelector(".s7button.s7dialogremoveemailbutton").ariaLabel=this.getLocalizedText("TOOLTIP_REMOVE")+" "+this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESS")+" "+g}var f=this.contentSpan.querySelector(".s7dialoglinefeed + .s7dialoglinefeed");if(f){f.remove()}};d.share.EmailDialog.prototype.setDialogData=function(g){var h=this.contentSpan.childNodes;for(var f=0;f<h.length;f++){var e=null;if(h[f].contentIdx){switch(h[f].contentIdx){case"$TOEMAIL$":h[f].inp.value=g.toEmail[0];break;case"$FROMEMAIL$":h[f].inp.value=g.fromEmail;break;case"$MESSAGEEMAIL$":h[f].inp.value=g.comments;break;default:break}}}this.descr.titlestr.innerHTML=g.titleStr;this.descr.imgsp.style.backgroundImage="url('"+g.thumbbnailUrl+"')";this.descr.descrtext.innerHTML=g.descrStr;this.container=null;this.attachDialog()};d.share.EmailDialog.prototype.getDialogData=function(){var h=this.contentSpan.childNodes;var g={"toEmail":[""],"fromEmail":"","comments":""};for(var f=0;f<h.length;f++){var e=null;if(h[f].contentIdx){e=h[f].inp.value;switch(h[f].contentIdx){case"$TOEMAIL$":g.toEmail[0]=e;break;case"$FROMEMAIL$":g.fromEmail=e;break;case"$MESSAGEEMAIL$":g.comments=e;break;default:if(h[f].contentIdx.indexOf("$ADDEMAIL")!=-1){g.toEmail.push(e)}break}}}return g};d.share.EmailDialog.prototype.verifyEmailAddress=function(g){var e=g.inp.value;var f=this.validateEmailStr(e);if(!f){g.inp.setAttribute("aria-invalid",true);g.inp.setAttribute("aria-describedby",this.errLine.id)}else{g.inp.setAttribute("aria-invalid",false);g.inp.removeAttribute("aria-describedby",this.errLine.id)}this.setupErrorMsg(g,!f);this.setupScroll();return f};d.share.EmailDialog.prototype.setupScroll=function(g){var h=this.contentSpan.offsetHeight-this.contentInt.clientHeight;if(h>0){if(!this.isTouch){var f=this.scrollbarInst.curPos_;this.scrollbarInst.setMaxScroll(h);var e=g?this.contentInt.offsetHeight-(d.Util.getObjPos(this.addBtnCtnr).y-d.Util.getObjPos(this.contentInt).y)-this.addBtnCtnr.offsetHeight:-f;if(e<0){this.scrollbarInst.curPos_=-e;this.scrollbarInst.setThumbPosition(false)}}this.contentSb.style.display="inline-block"}else{this.contentSb.style.display="none"}if(this.scrollbarInst){this.scrollbarInst.setScrollStep(Math.round(this.contentInt.clientHeight*0.1))}};d.share.EmailDialog.prototype.onRemove=function(e){this.setupErrorMsg(e,false);if(e.btn&&e.btn.toolTip_){e.btn.toolTip_.removeToolTip()}this.contentSpan.removeChild(e);this.setupScroll(true);this.wid_=0};d.share.EmailDialog.prototype.validateEmailStr=function(g){var f=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/igm;var e=f.test(g);return e};d.share.EmailDialog.prototype.setupErrorMsg=function(j,k){d.Util.css.setCSSAttributeSelector(j.spinp,"state",k?"verifyerror":"");var g=false;var h;for(h=0;h<this.errLine.errList.length;h++){if(this.errLine.errList[h]==j){g=true;break}}if(k){if(!g){this.errLine.errList.push(j)}}else{if(g){this.errLine.errList.splice(h,1)}}if(this.errLine.errList.length!=0){this.actionbutton.deactivate();this.errLine.setAttribute("aria-hidden",false);var e=false;var f=document.getElementsByClassName("s7dialoginputshort");for(var h=0;h<f.length;h++){if(f[h].getAttribute("aria-invalid")=="true"){e=true}}if(e){this.setErrorMsg("TO_EMAIL_ERROR","verifyerror")}else{this.setErrorMsg("FROM_EMAIL_ERROR","verifyerror")}}else{this.actionbutton.activate();this.errLine.setAttribute("aria-hidden",true)}d.Util.css.setCSSAttributeSelector(this.errLine,"error",this.errLine.errList.length!=0)};d.share.EmailDialog.prototype.onClose=function(f){this.onCancel(f)};d.share.EmailDialog.prototype.onCancel=function(f){if(this.contentInt.getAttribute("state")!=""){d.Util.css.setCSSAttributeSelector(this.errLine,"error","false");this.setErrorMsg("INVALID_ADDRESSS","verifyerror");this.cancelbutton.setText(this.getLocalizedText("CANCEL"));this.cancelbutton.toolTip_.setContent(this.getLocalizedText("TOOLTIP_CANCEL"));d.Util.css.setCSSAttributeSelector(this.contentInt,"state","");this.disableInputs(false);this.showContent(true);this.actionbutton.obj.style.display="";this.actionbutton.activate();this.wid_=this.hei_=0;this.onCheckResize();this.setupScroll()}this.hide()};d.share.EmailDialog.prototype.disableInputs=function(e){var g=this.contentSpan.childNodes;for(var f=0;f<g.length;f++){if(g[f].contentIdx){g[f].inp.disabled=e}}};d.share.EmailDialog.prototype.showContent=function(g){var f=this.contentSpan.childNodes;for(var e=0;e<f.length;e++){if(f[e]!=this.errLine){f[e].style.display=g?"":"none"}}};d.share.EmailDialog.prototype.onAction=function(){var k=this.contentSpan.childNodes;var h={"toEmail":[""],"fromEmail":"","comments":""};for(var f=0;f<k.length;f++){var e=null;if(k[f].contentIdx){e=k[f].inp.value;switch(k[f].contentIdx){case"$TOEMAIL$":h.toEmail[0]=e;break;case"$FROMEMAIL$":h.fromEmail=e;break;case"$MESSAGEEMAIL$":h.comments=e;e=null;break;default:if(k[f].contentIdx.indexOf("$ADDEMAIL")!=-1){h.toEmail.push(e)}else{e=null}break}}if(e!=null){if(!this.validateEmailStr(e)){this.verifyEmailAddress(k[f]);this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];this.firstFocusableElement.focus();return}}}var j="?";j+="toEmail="+h.toEmail.join(",");j+="&fromEmail="+h.fromEmail;j+="&desc="+this.titleStr;j+="&comments="+encodeURIComponent(h.comments);j+="&url="+encodeURIComponent(this.contentUrl);if(this.thumbbnailUrl){j+="&thumb="+encodeURIComponent(this.thumbbnailUrl)}if(this.descrStr){j+="&desc="+this.descrStr}j+="&language="+this.settings.locale;var g=this.emailurl+j;this.isReq_=new d.IS();this.isReq_.getHttpReq(g,this.requestComplete,this.requestError,this);this.disableInputs(true);this.cancelbutton.deactivate();this.actionbutton.deactivate()};d.share.EmailDialog.prototype.requestComplete=function(e,f){f.successSend(e.message)};d.share.EmailDialog.prototype.requestError=function(e,f){f.successSend(e.message)};d.share.EmailDialog.prototype.successSend=function(e){this.showContent(false);this.cancelbutton.setText(this.getLocalizedText("CLOSE"));this.cancelbutton.toolTip_.setContent(this.getLocalizedText("TOOLTIP_CLOSE"));this.cancelbutton.activate();this.actionbutton.obj.style.display="none";d.Util.css.setCSSAttributeSelector(this.contentInt,"state","sendsuccess");if(e==d.IS.STATUS_SUCCESS){this.setErrorMsg("SEND_SUCCESS","sendsuccess")}else{this.setErrorMsg("SEND_FAILURE","senderror")}this.errLine.setAttribute("aria-hidden",false);d.Util.css.setCSSAttributeSelector(this.errLine,"error","true");this.wid_=this.hei_=0;this.onCheckResize();this.setupScroll();this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];this.firstFocusableElement.focus()};d.share.EmailDialog.prototype.setContentUrl=function(e){this.contentUrl=e};d.share.EmailDialog.prototype.setContentTitle=function(e){this.descr.titlestr.innerHTML=e;this.titleStr=e};d.share.EmailDialog.prototype.setOriginUrl=function(e){this.descr.site.innerHTML=e};d.share.EmailDialog.prototype.setThumbnail=function(g){var f=this.descr.imgsp;if(!g){return}var e=d.Util.resolveURL(this.serverUrl,g);e+=(e.indexOf("?")==-1?"?":"&")+"wid="+f.w;e+="&hei="+f.h;f.style.backgroundImage="url('"+e+"')";this.thumbbnailUrl=e};d.share.EmailDialog.prototype.setDescription=function(e){this.descr.descrtext.innerHTML=e;this.descrStr=e};d.share.EmailDialog.prototype.setEmailService=function(e){this.emailurl=e};d.share.EmailDialog.prototype.setServerUrl=function(e){this.serverUrl=d.Util.normalizeUrl(e)};(function a(){var i=d.Util.css.createCssRuleText;var g=d.Util.css.createCssImgUrlText;var e=i(".s7emaildialog .s7dialogheadericon",{"background-image":g("dlgemail_cap.png"),"width":"24px","height":"17px"})+i(".s7emaildialog .s7dialoginputlabel",{"margin-right":"10px","padding":"10px","position":"relative","width":"50px","display":"inline-block","text-align":"right"})+i(".s7emaildialog .s7dialogerrormessage",{"position":"relative","display":"inline-block","background-position":"left center","background-repeat":"no-repeat","font-size":"10pt","font-weight":"bold","vertical-align":"middle","text-align":"center","padding-left":"20px","line-height":"25px"})+i(".s7emaildialog .s7dialogerrormessage[state='verifyerror']",{"background-image":g("dlgerrimg.png"),"color":"#ff0000"})+i(".s7emaildialog .s7dialogerrormessage[state='senderror']",{"background-image":g("dlgerrimg.png"),"color":"#ff0000"})+i(".s7emaildialog .s7dialogerrormessage[state='sendsuccess']",{"background-image":"none","color":"#00b200"})+i(".s7emaildialog .s7dialogbody .s7dialogline ",{"padding":"10px"})+i(".s7emaildialog .s7dialogviewarea",{"height":"300px"})+i(".s7emaildialog .s7dialogviewarea[state='sendsuccess']",{"height":"100px"})+i(".s7emaildialog .s7dialoginputcontainer",{"display":"inline-block","position":"relative","border":"1px solid #cccccc","padding":"9px"})+i(".s7emaildialog .s7dialogerror[error='false']",{"display":"none"})+i(".s7emaildialog .s7dialogerror[error='true']",{"display":"inline-block"})+i(".s7emaildialog .s7dialoginputcontainer[state='verifyerror']",{"border":"1px solid #ff0000"})+i(".s7emaildialog .s7dialoginputshort",{"border":"none","width":"250px"})+i(".s7emaildialog .s7dialoginputwide",{"border":"none","width":"300px"})+i(".s7emaildialog .s7dialogmessage",{"white-space":"pre-wrap","white-space":"-moz-pre-wrap","white-space":"-pre-wrap","white-space":"-o-pre-wrap","word-wrap":"break-word","resize":"none","height":"50px"})+i(".s7emaildialog .s7dialogbody .s7dialogcontent",{"padding":"0","border":"1px dotted #a0a0a0"})+i(".s7emaildialog .s7dialogthumbnail",{"position":"relative","display":"inline-block","background-position":"center center","background-repeat":"no-repeat","width":"90px","height":"60px","padding":"10px","vertical-align":"top"})+i(".s7emaildialog .s7dialoginfopanel",{"position":"relative","width":"300px","display":"inline-block"})+i(".s7emaildialog .s7dialogtitle",{"position":"relative","display":"block","font-weight":"bold","margin":"10px"})+i(".s7emaildialog .s7dialogorigin",{"position":"relative","margin":"10px","display":"block"})+i(".s7emaildialog .s7dialogdescription",{"font-size":"9pt","position":"relative","margin":"10px","display":"block"})+i(".s7emaildialog .s7dialogactionbutton",{"width":"82px","height":"34px"})+i(".s7emaildialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+i(".s7emaildialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+i(".s7emaildialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+i(".s7emaildialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"})+i(".s7emaildialog .s7dialogremoveemailbutton",{"position":"relative","display":"inline-block","width":"25px","height":"25px"})+i(".s7emaildialog .s7dialogaddemailbutton",{"background-repeat":"no-repeat","position":"relative","display":"inline-block","text-align":"right","font-size":"12pt","font-weight":"bold","background-position":"left center","line-height":"25px","padding-left":"30px","height":"25px"})+i(".s7emaildialog .s7dialogaddemailbutton[state='up']",{"color":"#666666"})+i(".s7emaildialog .s7dialogaddemailbutton[state='down']",{"color":"#000000"})+i(".s7emaildialog .s7dialogaddemailbutton[state='over']",{"color":"#000000","text-decoration":"underline"})+i(".s7emaildialog .s7dialogaddemailbutton[state='disabled']",{"color":"#666666"})+i(".s7emaildialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+i(".s7emaildialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+i(".s7emaildialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+i(".s7emaildialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+i(".s7emaildialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"});var f=i(".s7emaildialog .s7scrollbar",{"background-color":"transparent","position":"absolute","top":"8px","bottom":"8px","right":"8px","width":"28px"})+i(".s7emaildialog .s7scrollbar .s7scrolltrack",{"background-color":"rgb(178, 178, 178)"});e=f+e;var h=[];h.push({cssNm:"s7dialogaddemailbutton",skins:["dlgaddplus_up.png","dlgaddplus_over.png","dlgaddplus_over.png","dlgaddplus_up.png"]});h.push({cssNm:"s7dialogremoveemailbutton",skins:["dlgremove_up.png","dlgremove_over.png","dlgremove_over.png","dlgremove_up.png"]});h.push({cssNm:"s7dialogactionbutton",skins:[]});d.share.dialogsDefaultCSS("EmailDialog",".s7emaildialog",h,e)})()}if(!d.share.EmbedDialogControl){d.share.EmbedDialogControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.EmbedDialogControl.NS,e.constructor,d.share.EmbedDialog.RESTRICTED_STYLES])};d.share.EmbedDialogControl.prototype.setCSS=function(i,h,g){if(this.component){function f(j){return j.replace(/\./g,"").split(" ")}var e=f(i);if(e[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[i,h,g])}}};d.share.EmbedDialogControl.NS="s7sdk.share.EmbedDialogControl"}d.Class.inherits(d.share.EmbedDialogControl.NS,"s7sdk.ControlComponent");if(!d.share.EmbedDialog){d.share.EmbedDialog=function EmbedDialog(e,i,g,k,f,h){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.EmbedDialog constructor - containerId: %0, settings: %1 , compId: %2",e,i,g);this.embedsizes=this.validateEmbedSizes(k);var j=!!arguments[6];arguments.callee.superclass.apply(this,[e,i,g,"s7embeddialog",f,h,!j]);this.createDialog(d.browser.device.name!="desktop");if(!j){return new d.share.EmbedDialogControl(this)}else{return this}};d.Class.inherits("s7sdk.share.EmbedDialog","s7sdk.share.SocialDialog");d.share.EmbedDialog.prototype.symbols={HEADER:"Embed Link",DESCRIPTION:"To share this content with others, copy and past this code:",EMBED_SIZE:"Embed Size",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",CUSTOM_SIZE:"Custom Size",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};d.share.EmbedDialog.prototype.createContent=function(){this.createLinkLable(this.getLocalizedText("DESCRIPTION"));this.createLinkLine();this.createSelectLine();this.createScrollbar();this.createLineFeed();this.addBtnCtnr=this.cBox.obj;var e=this;d.Event.addDOMListener(this.contentInt,"scroll",function(f){e.onNativeScroll()},true)};d.share.EmbedDialog.prototype.onNativeScroll=function(){if(!this.cBox.blockScroll){this.cBox.hideDropDn()}};d.share.EmbedDialog.prototype.createLinkLable=function(e){var f=document.createElement("span");f.className="s7dialogline s7dialoglabel s7dialoginputwide";this.contentSpan.appendChild(f);f.innerText=e;this.createLineFeed()};d.share.EmbedDialog.prototype.createLinkLine=function(){var f=document.createElement("span");f.className="s7dialogline s7dialoginputcontainer";this.contentSpan.appendChild(f);var e=document.createElement("span");e.className="s7dialogmessage";e.setAttribute("role","textbox");e.setAttribute("contenteditable","false");e.setAttribute("tabindex",0);f.appendChild(e);this.inplnk=e;this.createLineFeed()};d.share.EmbedDialog.prototype.updetCboxItems=function(g){if(g){var e=g.split(";");this.cbxSizes=[];var h=0;for(var f=0;f<e.length;f++){var j=e[f].split(",");if(j.length==3){h=f}this.cbxSizes.push(j[0]+"x"+j[1])}this.cbxSizes.push(this.customSizeStr);this.cBox.update(this.cbxSizes,h)}else{this.cBox.update(["320x240","640x480","1280x960",this.customSizeStr],1)}this.embedsizes=g};d.share.EmbedDialog.prototype.createSelectLine=function(){var e=document.createElement("span");e.className="s7dialogline s7dialogembedsizepanel";this.contentSpan.appendChild(e);var h=document.createElement("span");h.className="s7dialoglabel s7dialogembedsizelabel";h.id=this.id+"_lbl_"+d.Util.createUniqueId();h.innerText=this.getLocalizedText("EMBED_SIZE");e.appendChild(h);e.id=this.id+"_selectorContainer";this.cBox=new d.share.CustomComboBox(e.id,this.settings,e.id+"_combobox","span",this,this.cntSpAbsolute,h.id);this.cBox.obj.style.display="inline-block";this.customSizeStr=this.getLocalizedText("CUSTOM_SIZE");if(this.embedsizes){this.updetCboxItems(this.embedsizes)}var g=document.createElement("span");g.className="s7dialogcustomsizepanel";e.appendChild(g);this.widinpsp=this.createSizeInp(g,"s7dialogcustomsize");this.widinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_WIDTH"));var f=this;d.Event.addDOMListener(this.widinpsp.szinp,"change",function(i){f.onInpChanged(f.widinpsp.szinp)},true);e.onExpand=function(){f.onExpand()};this.heiinpsp=this.createSizeInp(g,"s7dialogcustomsize");this.heiinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_HEIGHT"));d.Event.addDOMListener(this.heiinpsp.szinp,"change",function(i){f.onInpChanged(f.heiinpsp.szinp)},true);this.createLineFeed()};d.share.EmbedDialog.prototype.onInpChanged=function(e){var f=this.widinpsp.szinp.value+"x"+this.heiinpsp.szinp.value;this.updateTemplateText(f)};d.share.EmbedDialog.prototype.createSizeInp=function(i,g){var j=document.createElement("span");j.className=g;i.appendChild(j);var h=document.createElement("span");h.className="s7comboboxtext";h.style.width="0px";h.style.verticalAlign="middle";j.appendChild(h);var f=document.createElement("span");f.className="s7dialogcustomsizeinput";j.appendChild(f);var e=document.createElement("input");e.className="s7dialogcustomsizeinput";j.appendChild(f);f.appendChild(e);j.style.display="none";j.szinp=e;return j};d.share.EmbedDialog.prototype.updateForShow=function(e){var g=this.cbxSizes.length-1;for(var f=0;f<this.cbxSizes.length;f++){if(e==this.cbxSizes[f]){g=f;break}}this.cBox.selectByIdx(g)};d.share.EmbedDialog.prototype.updateTemplate=function(f){this.newSize=f;if(f==this.customSizeStr){this.cBox.changeState(d.share.CustomComboBox.ShRINKED);if(this.widinpsp&&this.widinpsp.szinp){this.widinpsp.style.display="inline-block";this.heiinpsp.style.display="inline-block";var e=this.curSize.toLowerCase().split("x");this.widinpsp.szinp.value=e[0];this.heiinpsp.szinp.value=e[1];this.widinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_WIDTH"));this.heiinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_HEIGHT"))}}else{if(this.widinpsp&&this.widinpsp.szinp){this.widinpsp.style.display="none";this.heiinpsp.style.display="none"}this.cBox.changeState(d.share.CustomComboBox.EXPANDED);this.updateTemplateText(f)}};d.share.EmbedDialog.prototype.onPositionChanged=function(){if(!this.cBox.blockScroll){this.cBox.hideDropDn()}};d.share.EmbedDialog.prototype.updateTemplateText=function(f){this.curSize=f;var e=f.toLowerCase().split("x");if(this.template){var g=this.template.replace("$EMBED_WIDTH$",e[0]).replace("$EMBED_HEIGHT$",e[1]);this.inplnk.innerHTML=g;this.setupSz()}};d.share.EmbedDialog.prototype.onExpand=function(){this.setupScroll(true)};d.share.EmbedDialog.prototype.setupScroll=function(g){var h=this.contentSpan.offsetHeight-this.contentInt.clientHeight;if(h>0){if(!this.isTouch){var f=this.scrollbarInst.curPos_;this.contentSb.style.display="inline-block";this.scrollbarInst.setMaxScroll(h);var e=g?this.contentInt.offsetHeight-(d.Util.getObjPos(this.addBtnCtnr).y-d.Util.getObjPos(this.contentInt).y)-this.addBtnCtnr.offsetHeight:-f;if(e<0){this.scrollbarInst.curPos_=-e;this.scrollbarInst.setThumbPosition(false)}}}else{this.contentSb.style.display="none"}if(this.scrollbarInst){this.scrollbarInst.setScrollStep(Math.round(this.contentInt.clientHeight*0.1))}};d.share.EmbedDialog.prototype.show=function(){d.share.SocialDialog.prototype.show.apply(this,[]);this.scrollbarInst.curPos_=0;this.scrollbarInst.setThumbPosition(true)};d.share.EmbedDialog.prototype.hide=function(){this.cBox.hideDropDn();d.share.SocialDialog.prototype.hide.apply(this,[])};d.share.EmbedDialog.prototype.onCancel=function(){try{window.getSelection().removeAllRanges()}catch(f){document.selection.empty()}this.hide()};d.share.EmbedDialog.prototype.onAction=function(){this.firstFocusableElement=this.inplnk;this.inplnk.focus();var e,f;if(window.getSelection&&document.createRange){f=window.getSelection();e=document.createRange();e.selectNodeContents(this.inplnk);f.removeAllRanges();f.addRange(e)}else{if(document.selection&&document.body.createTextRange){e=document.body.createTextRange();e.moveToElementText(this.inplnk);e.select()}else{}}};d.share.EmbedDialog.prototype.onClose=function(){d.share.SocialDialog.prototype.onClose.apply(this,[])};d.share.EmbedDialog.prototype.setEmbedCode=function(f){if(!f){return}var e=f;e=e.replace(/&/g,"&amp;");e=e.replace(/</g,"&lt;");e=e.replace(/>/g,"&gt;");e=e.replace(/\n/g,"<br>");this.template=e;if(this.curSize){this.updateForShow(this.curSize)}};d.share.EmbedDialog.prototype.getDialogData=function(e){var e={};e.newSize=this.newSize;e.curSize=this.curSize;return e};d.share.EmbedDialog.prototype.setDialogData=function(e){this.embedsizes=this.validateEmbedSizes(e.embedsizes);this.template=e.template;this.updetCboxItems(this.embedsizes);this.curSize=e.curSize;this.setEmbedCode(this.template);this.updateTemplate(e.newSize);this.updateTemplateText(this.curSize);this.container=null;this.attachDialog()};d.share.EmbedDialog.prototype.validateEmbedSizes=function(e){return/^(true|false|[0-9,;])*$/gi.test(e)?e:d.share.EmbedShare.DEFAULT_EMBED_SIZES};(function a(){var k=d.Util.css.createCssRuleText;var g=d.Util.css.createCssImgUrlText;var e=k(".s7embeddialog .s7dialogheadericon",{"background-image":g("dlgembed_cap.png"),"width":"24px","height":"14px"})+k(".s7embeddialog .s7dialogviewarea",{"height":"300px"})+k(".s7embeddialog .s7dialoginputwide",{"border":"none","padding-bottom":"10px","width":"430px"})+k(".s7embeddialog .s7dialoginputcontainer",{"padding":"10px","width":"430px","font-size":"10pt","word-wrap":"break-word","border":"1px solid #cccccc"})+k(".s7embeddialog .s7dialogmessage",{"-moz-user-select":"text","-khtml-user-select":"text","-webkit-user-select":"text","-o-user-select":"text","white-space":"pre-wrap","white-space":"-moz-pre-wrap","white-space":"-pre-wrap","white-space":"-o-pre-wrap","word-wrap":"break-word","user-select":"text","border":"none","resize":"none","height":"50px"})+k(".s7embeddialog .s7dialogembedsizepanel",{"font-size":"10pt","padding":"10px","border":"none"})+k(".s7embeddialog .s7dialogembedsizelabel",{"vertical-align":"top","display":"inline-block","width":"80px"})+k(".s7embeddialog .s7dialogcustomsizepanel",{"position":"relative","display":"inline-block","left":"20px","vertical-align":"top"})+k(".s7embeddialog .s7comboboxtext",{"position":"relative","display":"inline-block","height":"40px"})+k(".s7embeddialog .s7comboboxdropdown",{"font-size":"10pt","border":"1px solid #cccccc"})+k(".s7embeddialog .s7dialogcustomsize",{"position":"relative","display":"inline-block","border":"1px solid #cccccc","padding-left":"2px","padding-right":"2px","margin-right":"20px","width":"70px"})+k(".s7embeddialog .s7dialogcustomsizeinput",{"border":"none","display":"inline-block","vertical-align":"middle","width":"100%"})+k(".s7embeddialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+k(".s7embeddialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+k(".s7embeddialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+k(".s7embeddialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+k(".s7embeddialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"})+k(".s7embeddialog .s7dialogactionbutton",{"width":"82px","height":"34px"})+k(".s7embeddialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+k(".s7embeddialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+k(".s7embeddialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+k(".s7embeddialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"});var f=k(".s7embeddialog .s7scrollbar",{"background-color":"transparent","position":"absolute","top":"8px","bottom":"8px","right":"8px","width":"28px"})+k(".s7embeddialog .s7scrollbar .s7scrolltrack",{"background-color":"rgb(178, 178, 178)"});e=f+e;var j=d.share.comboBoxDDDefaultCSS(".s7embeddialog");var i=d.share.comboBoxDefaultCSS(".s7embeddialog");e=j+e+i;var h=[];h.push({cssNm:"s7dialogactionbutton",skins:[]});d.share.dialogsDefaultCSS("EmbedDialog",".s7embeddialog",h,e)})()}if(!d.share.PrintControl){d.share.PrintControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.PrintControl.NS,e.constructor,d.share.Print.RESTRICTED_STYLES])};d.share.PrintControl.NS="s7sdk.share.PrintControl";d.Class.inherits(d.share.PrintControl.NS,"s7sdk.ControlComponent")}if(!d.share.Print){d.share.Print=function Print(e,g,f){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.Print constructor - container: %0, settings: %1 , compId: %2",e,g,f);arguments.callee.superclass.apply(this,[f,e,null,0,0,"s7print",g]);var i=!!arguments[3];this.serverUrl=d.Util.normalizeUrl(this.serverUrl);var h=this;this.onclickHandler=function(){h.btnClick()};d.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!i){this.printdialog=new d.share.PrintDialog(this.id,this.settings,this.id+"_dialog",d.share.getDialogSymbols(this),this);this.printdialog.setServerUrl(this.serverUrl);this.printdialog.setPrintquality(this.printquality);return new d.share.PrintControl(this)}else{return this}};d.Class.inherits("s7sdk.share.Print","s7sdk.common.Button");d.share.Print.prototype.symbols={TOOLTIP:"Prepare to print",HEADER:"Prepare to print",TOOLTIP_HEADER_CLOSE:"Close",PRINT_RANGE:"Select Print Pages",PRINT_RANGE_CURRENT:"Current pages",PRINT_RANGE_FROM:"Spread range from:",PRINT_RANGE_TO:"to:",PRINT_RANGE_ALL:"All pages",PAGE_HANDLING:"Page Handling",PAGE_HANDLING_ONE:"1 page per sheet",PAGE_HANDLING_TWO:"2 pages per sheet",ACTION:"Send to Print",TOOLTIP_ACTION:"Send to Print",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};d.share.Print.prototype.modifiers={printquality:{params:["wid"],defaults:[1000],ranges:["1:"]},serverUrl:{params:["isRootPath"],defaults:["/is/image/"]}};d.share.Print.RESTRICTED_STYLES={"s7print":["width","height"]};d.share.Print.prototype.setCSS=function(g,f,e){if(this.isRestrictedCSSProperty(d.share.Print.RESTRICTED_STYLES,f)){throw new Error("You cannot set "+g+" : "+f+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[g,f,e])}};d.share.Print.prototype.btnClick=function(){this.printdialog.show()};d.share.Print.prototype.addEventListener=function(g,f,e){d.Logger.log(d.Logger.FINE,"s7sdk.share.Print.addEventListener - type: %0, handler: %1, useCapture: %2",g,f.toString().substring(0,f.toString().indexOf("(")),e);this.superproto.addEventListener.apply(this,[g,f,e])};d.share.Print.prototype.setCurrentFrameIndex=function(e){this.currentFrameIndex=e;this.printdialog.setCurrentFrameIndex(e)};d.share.Print.prototype.setMediaSet=function(f){var e=f;if(!(f instanceof d.OrientationSetDesc)){e=new d.OrientationSetDesc(e,null)}if(e.landscape==null||typeof(e.landscape.items[0])=="undefined"){return}this.printdialog.setMediaSet(e.landscape)};d.share.Print.prototype.cleanUp=function(){d.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.printdialog){this.printdialog.dispose()}this.superproto.cleanUp.apply(this)};d.share.Print.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function a(){d.share.buttonsDefaultCSS("Print",".s7print",["print_up.png","print_over.png","print_down.png","print_disabled.png"])})()}if(!d.share.PrintDialogControl){d.share.PrintDialogControl=function(e){arguments.callee.superclass.apply(this,[e,d.share.PrintDialogControl.NS,e.constructor,d.share.PrintDialog.RESTRICTED_STYLES])};d.share.PrintDialogControl.prototype.setCSS=function(i,h,g){if(this.component){function f(j){return j.replace(/\./g,"").split(" ")}var e=f(i);if(e[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[i,h,g])}}};d.share.PrintDialogControl.NS="s7sdk.share.PrintDialogControl";d.Class.inherits(d.share.PrintDialogControl.NS,"s7sdk.ControlComponent")}if(!d.share.PrintDialog){d.share.PrintDialog=function PrintDialog(e,i,g,f,h){d.Logger.log(d.Logger.CONFIG,"s7sdk.share.PrintDialog constructor - containerId: %0, settings: %1 , compId: %2",e,i,g);var j=!!arguments[5];arguments.callee.superclass.apply(this,[e,i,g,"s7printdialog",f,h,!j]);this.createDialog(d.browser.device.name!="desktop");if(!j){return new d.share.PrintDialogControl(this)}else{return this}};d.Class.inherits("s7sdk.share.PrintDialog","s7sdk.share.SocialDialog");d.share.PrintDialog.prototype.symbols={HEADER:"",PRINT_RANGE:"",PRINT_RANGE_CURRENT:"",PRINT_RANGE_FROM:"",PRINT_RANGE_TO:"",PRINT_RANGE_ALL:"",PAGE_HANDLING:"",PAGE_HANDLING_ONE:"",PAGE_HANDLING_TWO:"",ACTION:"",TOOLTIP_ACTION:"",CANCEL:"",TOOLTIP_CANCEL:""};d.share.PrintDialog.prototype.setupScroll=function(){this.isTouch=false};d.share.PrintDialog.prototype.createContent=function(){this.popupparams={};this.popupparams.inputs=[];var f=this.popupparams.inputs;var g=this;this.popupparams.validate=function(l){for(var k=0;k<f.length;k++){var j=f[k];var m=l.target.groupId?l.target:l.currentTarget;if(j.groupId==m.groupId){j.inp.checked=j==m;if(j.inp.checked){j.inp.setAttribute("tabindex","0");j.inp.setAttribute("aria-checked","true")}else{j.inp.setAttribute("tabindex","-1");j.inp.setAttribute("aria-checked","false")}}}g.focusableElements=g.getFocusableElements();g.firstFocusableElement=g.focusableElements[0];g.lastFocusableElement=g.focusableElements[g.focusableElements.length-1]};var e=this.createPrintLable(this.getLocalizedText("PRINT_RANGE"));this.radioGroup1=document.createElement("fieldset");this.radioGroup1.className="s7radiogroup";this.radioGroup1.setAttribute("tabindex","-1");this.radioGroup1.setAttribute("role","radiogroup");this.radioGroup1.setAttribute("aria-labelledby",e.id);var h=this.createOneLine(1,this.getLocalizedText("PRINT_RANGE_FROM"),"mode");this.createNumberCtrl(h,this.getLocalizedText("PRINT_RANGE_FROM"),this.getLocalizedText("PRINT_RANGE_TO"));this.radioGroup1.appendChild(this.createOneLine(0,this.getLocalizedText("PRINT_RANGE_CURRENT"),"mode"));this.radioGroup1.appendChild(h);this.radioGroup1.appendChild(this.createOneLine(2,this.getLocalizedText("PRINT_RANGE_ALL"),"mode"));this.contentSpan.appendChild(this.radioGroup1);this.setSelected("mode",0);var i=this.createPrintLable(this.getLocalizedText("PAGE_HANDLING"),true);this.radioGroup2=document.createElement("fieldset");this.radioGroup2.className="s7radiogroup";this.radioGroup2.setAttribute("tabindex","-1");this.radioGroup2.setAttribute("role","radiogroup");this.radioGroup2.setAttribute("aria-labelledby",i.id);this.radioGroup2.appendChild(this.createOneLine(0,this.getLocalizedText("PAGE_HANDLING_ONE"),"layout"));this.radioGroup2.appendChild(this.createOneLine(1,this.getLocalizedText("PAGE_HANDLING_TWO"),"layout"));this.contentSpan.appendChild(this.radioGroup2);this.setSelected("layout",1)};d.share.PrintDialog.prototype.setSelected=function(h,e){for(var g=0;g<this.popupparams.inputs.length;g++){var f=this.popupparams.inputs[g];if(f.groupId==h){f.inp.checked=f.inp.value==e;if(f.inp.checked){f.inp.setAttribute("tabindex","0");f.inp.setAttribute("aria-checked","true")}else{f.inp.setAttribute("tabindex","-1");f.inp.setAttribute("aria-checked","false")}}}this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1]};d.share.PrintDialog.prototype.getSelected=function(g){for(var f=0;f<this.popupparams.inputs.length;f++){var e=this.popupparams.inputs[f];if((e.groupId==g)&&e.inp.checked){return parseInt(e.inp.value)}}return 0};d.share.PrintDialog.prototype.createPrintLable=function(e,g){var f=document.createElement("span");f.id=d.Util.createUniqueId();f.className="s7dialogline s7dialoglabel"+(g?" s7horizontaldivider":" s7dialoginputwide");this.contentSpan.appendChild(f);f.innerText=e;this.createLineFeed();return f};d.share.PrintDialog.prototype.createNumberCtrl=function(j,h,e){var g=document.createElement("input");g.setAttribute("type","number");g.setAttribute("role","textbox");g.setAttribute("aria-multiline",false);g.setAttribute("aria-label",h);g.className="s7dialogrange";g.value=1;g.setAttribute("min",1);g.setAttribute("max",1);j.appendChild(g);this.popupparams.startPg=g;var i=document.createElement("span");i.innerText=e;j.appendChild(i);var f=document.createElement("input");f.setAttribute("type","number");f.setAttribute("role","textbox");f.setAttribute("aria-multiline",false);f.setAttribute("aria-label",e);f.className="s7dialogrange";f.value=1;f.setAttribute("min",1);f.setAttribute("max",1);j.appendChild(f);this.popupparams.endPg=f;this.popupparams.startPg.onchange=function(k){f.setAttribute("min",g.value)};this.popupparams.endPg.onchange=function(k){g.setAttribute("max",f.value)}};d.share.PrintDialog.prototype.createOneLine=function(f,e,i){var g=document.createElement("div");g.className="s7dialoginputcontainer";var k=document.createElement("div");k.groupId=i;k.className="s7dialogoption";var h=this.popupparams;k.onclick=function(m){h.validate(m)};var j=document.createElement("input");j.setAttribute("type","radio");j.setAttribute("role","radio");j.setAttribute("aria-label",e);j.setAttribute("tabindex","-1");j.value=f;j.name=i;k.inp=j;k.appendChild(j);var l=document.createElement("span");l.innerText=e;k.appendChild(l);this.popupparams.inputs.push(k);g.appendChild(k);this.contentSpan.appendChild(g);this.createLineFeed();return g};d.share.PrintDialog.prototype.setMediaSet=function(f){this.items=f.items;var e=f.name;var g=e.split("/");e=g.length==1?e:g[1];this.title=e;this.min=1;this.max=this.items.length;this.popupparams.startPg.setAttribute("min",this.min);this.popupparams.startPg.setAttribute("max",this.max);this.popupparams.startPg.value=this.min;this.popupparams.endPg.setAttribute("min",this.min);this.popupparams.endPg.setAttribute("max",this.max);this.popupparams.endPg.value=this.max};d.share.PrintDialog.prototype.setPrintquality=function(e){this.printquality=e};d.share.PrintDialog.prototype.setServerUrl=function(e){this.serverUrl=d.Util.normalizeUrl(e)};d.share.PrintDialog.prototype.setCurrentFrameIndex=function(e){this.currentFrameIndex=e};d.share.PrintDialog.prototype.onCancel=function(){this.hide()};d.share.PrintDialog.prototype.pageUrl=function(h,g){var e=d.Util.resolveURL(this.serverUrl,h.name);e+=(e.indexOf("?")>=0?"&":"?");var f=g?h.width/2:h.width;e+="wid="+(f<this.printquality?f:this.printquality+"&hei="+this.printquality+"&fit=fit,1");return e};d.share.PrintDialog.prototype.prepareOnePage=function(e,g){if(g.np){url=this.pageUrl(g,false)}else{var i=this.getSelected("layout");if(i==0){if(g instanceof d.ImageDesc){var h=g.name.split("?")[0].split("/")[0];var j=Math.round(g.width/2);url=d.Util.resolveURL(this.serverUrl,h)+"?src=is("+g.name+(g.name.indexOf("?")==-1?"?":"&")+"rgn=0,0,"+j+","+g.height+")";url+="wid="+(j<this.printquality?j:this.printquality+"&hei="+this.printquality+"&fit=fit,1");e.push(url);url=d.Util.resolveURL(this.serverUrl,h)+"?src=is("+g.name+(g.name.indexOf("?")==-1?"?":"&")+"rgn="+j+",0,"+j+","+g.height+")";url+="wid="+(j<this.printquality?j:this.printquality+"&hei="+this.printquality+"&fit=fit,1")}else{var f=g.images[0];url=this.pageUrl(f,true);e.push(url);f=g.images[1];url=this.pageUrl(f,true)}}else{url=this.pageUrl(g,false)}}e.push(url)};d.share.PrintDialog.prototype.onAction=function(){var f=[];var g=this.items;var l;var k;var j=this.getSelected("mode");switch(j){case 2:l=true;case 1:var m=l?0:parseInt(this.popupparams.startPg.value)-1;var e=l?g.length:parseInt(this.popupparams.endPg.value);for(var h=m;h<e;h++){var k=g[h];this.prepareOnePage(f,k)}break;default:k=g[this.currentFrameIndex];this.prepareOnePage(f,k);break}this.executePrint(f)};d.share.PrintDialog.prototype.executePrint=function(e){var h="<style type='text/css'>";h+="html,body{height:100%;margin:0;padding:0;}div{height:90%;}img{max-height: 100%;max-width: 100%;}";h+="</style>";var i="<html><head><title>"+this.title+"</title>"+h+"</head><body ></body></html>";var g=document.createElement("iframe");g.width="1";g.height="1";g.style.position="absolute";g.style.left="0px";g.style.top="0px";g.src="about:blank";var f=this;g.onload=function(){var o=g.contentWindow.document.createElement("script");o.type="text/javascript";var m="var imgs = [];  \n";m+="function checkReady(){ \n"+"for(var i=0;i<imgs.length;i++) {\n"+"if(!imgs[i].isready){ \n"+"return false;\n"+"}\n "+"} \n"+"return true; \n"+"};\n";m+="function Print(){ \n"+"var img;\n"+"var div;\n";for(var n=0;n<e.length;n++){m+='div = document.createElement("div");\n';if(n!=e.length-1){m+='div.style.pageBreakAfter="always";\n'}m+='img = document.createElement("img");\n';m+="div.appendChild(img);\n"+'img.id="s7im_'+n+'";\n '+'img.src="'+e[n]+'";\n '+"img.onload = function(e){\n "+"e.target.isready = true;"+"if(checkReady()) { \n"+"window.focus(); \n"+"window.print();\n"+"window.document.body.isTestPrinting = false; \n"+"} \n"+"};\n"+"imgs.push(img);"+"window.document.body.appendChild(div);\n"}m+="}";var l=g.contentWindow.document.createTextNode(m);o.appendChild(l);g.contentWindow.document.body.innerHTML=i;g.contentWindow.document.body.appendChild(o);g.contentWindow.document.body.isTestPrinting=true;function k(j){if(j.newIframe.contentWindow.document.body.isTestPrinting){setTimeout(function(){k(j)},200);return}j.newIframe.contentWindow.document.body.removeChild(j.script_tag);j.newIframe.parentElement.removeChild(j.newIframe);f.hide()}setTimeout(function(){g.contentWindow.Print();var j={};j.newIframe=g;j.script_tag=o;k(j)},200)};document.body.appendChild(g)};(function a(){var h=d.Util.css.createCssRuleText;var f=d.Util.css.createCssImgUrlText;var e=h(".s7printdialog .s7dialogheadericon",{"background-image":f("dlgprint_cap.png"),"width":"22px","height":"22px"})+h(".s7printdialog .s7dialogviewarea",{"height":"auto"})+h(".s7printdialog .s7radiogroup",{"border":"none"})+h(".s7printdialog .s7dialogoption input",{"margin-right":"10px"})+h(".s7printdialog .s7dialogoption",{"text-decoration":"none","position":"relative","display":"inline-block","color":"#000000","width":"150px"})+h(".s7printdialog .s7dialoginputwide",{"cursor":"default","border":"none","padding-bottom":"10px","width":"430px"})+h(".s7printdialog .s7horizontaldivider",{"cursor":"default","padding-bottom":"10px","width":"430px","margin-top":"10px","padding-top":"10px","border-top":"1px solid #aaaaaa"})+h(".s7printdialog .s7dialoginputcontainer",{"padding-left":"30px"})+h(".s7printdialog .s7dialogrange",{"display":"inline-block","width":"42px","margin-left":"10px","margin-right":"10px"})+h(".s7printdialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+h(".s7printdialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+h(".s7printdialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+h(".s7printdialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+h(".s7printdialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"})+h(".s7printdialog .s7dialogactionbutton",{"width":"96px","height":"34px"})+h(".s7printdialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+h(".s7printdialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+h(".s7printdialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+h(".s7printdialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"});var g=[];d.share.dialogsDefaultCSS("PrintDialog",".s7printdialog",g,e)})()}})(s7getCurrentNameSpace());