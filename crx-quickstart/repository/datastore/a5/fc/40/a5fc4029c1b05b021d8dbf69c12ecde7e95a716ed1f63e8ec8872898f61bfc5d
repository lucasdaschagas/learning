/*!************************************************************************
 * Portions copyright (c) 2017 Adobe Systems Incorporated
 **************************************************************************/
(function(a){a.pkg("s7sdk.libs.three");(function(c,b){(b((c.THREE=c.THREE||{})))}(a.libs.three,(function(bt){if(Number.EPSILON===undefined){Number.EPSILON=Math.pow(2,-52)}if(Number.isInteger===undefined){Number.isInteger=function(k5){return typeof k5==="number"&&isFinite(k5)&&Math.floor(k5)===k5}}if(Math.sign===undefined){Math.sign=function(k5){return(k5<0)?-1:(k5>0)?1:+k5}}if("name" in Function.prototype===false){Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}})}if(Object.assign===undefined){(function(){Object.assign=function(k9){if(k9===undefined||k9===null){throw new TypeError("Cannot convert undefined or null to object")}var k6=Object(k9);for(var k7=1;k7<arguments.length;k7++){var k8=arguments[k7];if(k8!==undefined&&k8!==null){for(var k5 in k8){if(Object.prototype.hasOwnProperty.call(k8,k5)){k6[k5]=k8[k5]}}}}return k6}})()}function aQ(){}Object.assign(aQ.prototype,{addEventListener:function(k6,k7){if(this._listeners===undefined){this._listeners={}}var k5=this._listeners;if(k5[k6]===undefined){k5[k6]=[]}if(k5[k6].indexOf(k7)===-1){k5[k6].push(k7)}},hasEventListener:function(k6,k7){if(this._listeners===undefined){return false}var k5=this._listeners;return k5[k6]!==undefined&&k5[k6].indexOf(k7)!==-1},removeEventListener:function(k8,k9){if(this._listeners===undefined){return}var k7=this._listeners;var k5=k7[k8];if(k5!==undefined){var k6=k5.indexOf(k9);if(k6!==-1){k5.splice(k6,1)}}},dispatchEvent:function(k9){if(this._listeners===undefined){return}var k8=this._listeners;var k5=k8[k9.type];if(k5!==undefined){k9.target=this;var la=k5.slice(0);for(var k7=0,k6=la.length;k7<k6;k7++){la[k7].call(this,k9)}}}});var he="102";var dq={LEFT:0,MIDDLE:1,RIGHT:2};var f=0;var jC=1;var kc=2;var gp=3;var bG=0;var kd=1;var cs=0;var hB=1;var fr=2;var D=0;var c5=1;var fE=2;var hJ=1;var kj=2;var kr=0;var iO=1;var h2=2;var cW=0;var iK=1;var aX=2;var b7=3;var gk=4;var bw=5;var cM=100;var cd=101;var hD=102;var eD=103;var cR=104;var bP=200;var i=201;var bX=202;var hb=203;var cE=204;var h9=205;var be=206;var gu=207;var av=208;var fH=209;var j0=210;var kV=0;var dB=1;var kQ=2;var bY=3;var K=4;var H=5;var iI=6;var cr=7;var u=0;var d9=1;var gi=2;var kA=0;var ku=1;var g2=2;var gB=3;var jj=4;var fu=5;var hU=300;var b3=301;var j1=302;var eT=303;var bn=304;var ge=305;var L=306;var hH=307;var co=1000;var g7=1001;var jV=1002;var da=1003;var gK=1004;var ia=1005;var j2=1006;var B=1007;var ap=1008;var iv=1009;var eg=1010;var au=1011;var gI=1012;var jY=1013;var jz=1014;var ee=1015;var ex=1016;var aG=1017;var iT=1018;var gh=1019;var de=1020;var dp=1021;var fK=1022;var gt=1023;var dL=1024;var em=1025;var gg=gt;var cK=1026;var fc=1027;var gd=1028;var bW=33776;var jd=33777;var eA=33778;var kO=33779;var h=35840;var aC=35841;var gM=35842;var gm=35843;var ij=36196;var ii=37808;var d8=37809;var ct=37810;var ar=37811;var j5=37812;var h1=37813;var fX=37814;var Z=37815;var ks=37816;var iw=37817;var dP=37818;var dc=37819;var ig=37820;var dD=37821;var dI=2200;var ek=2201;var kM=2202;var io=2300;var an=2301;var ae=2302;var e6=2400;var dt=2401;var dS=2402;var cZ=0;var bh=1;var fI=2;var fq=3000;var cB=3001;var i9=3007;var fz=3002;var fT=3003;var dd=3004;var jS=3005;var kf=3006;var eO=3200;var ej=3201;var iB=0;var iM=1;var dY={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(function(){var k6=[];for(var k5=0;k5<256;k5++){k6[k5]=(k5<16?"0":"")+(k5).toString(16)}return function k7(){var lc=Math.random()*4294967295|0;var lb=Math.random()*4294967295|0;var la=Math.random()*4294967295|0;var k9=Math.random()*4294967295|0;var k8=k6[lc&255]+k6[lc>>8&255]+k6[lc>>16&255]+k6[lc>>24&255]+"-"+k6[lb&255]+k6[lb>>8&255]+"-"+k6[lb>>16&15|64]+k6[lb>>24&255]+"-"+k6[la&63|128]+k6[la>>8&255]+"-"+k6[la>>16&255]+k6[la>>24&255]+k6[k9&255]+k6[k9>>8&255]+k6[k9>>16&255]+k6[k9>>24&255];return k8.toUpperCase()}})(),clamp:function(k7,k6,k5){return Math.max(k6,Math.min(k5,k7))},euclideanModulo:function(k6,k5){return((k6%k5)+k5)%k5},mapLinear:function(k6,k7,k5,k9,k8){return k9+(k6-k7)*(k8-k9)/(k5-k7)},lerp:function(k5,k7,k6){return(1-k6)*k5+k6*k7},smoothstep:function(k6,k7,k5){if(k6<=k7){return 0}if(k6>=k5){return 1}k6=(k6-k7)/(k5-k7);return k6*k6*(3-2*k6)},smootherstep:function(k6,k7,k5){if(k6<=k7){return 0}if(k6>=k5){return 1}k6=(k6-k7)/(k5-k7);return k6*k6*k6*(k6*(k6*6-15)+10)},randInt:function(k5,k6){return k5+Math.floor(Math.random()*(k6-k5+1))},randFloat:function(k5,k6){return k5+Math.random()*(k6-k5)},randFloatSpread:function(k5){return k5*(0.5-Math.random())},degToRad:function(k5){return k5*dY.DEG2RAD},radToDeg:function(k5){return k5*dY.RAD2DEG},isPowerOfTwo:function(k5){return(k5&(k5-1))===0&&k5!==0},ceilPowerOfTwo:function(k5){return Math.pow(2,Math.ceil(Math.log(k5)/Math.LN2))},floorPowerOfTwo:function(k5){return Math.pow(2,Math.floor(Math.log(k5)/Math.LN2))}};function bg(k5,k6){this.x=k5||0;this.y=k6||0}Object.defineProperties(bg.prototype,{"width":{get:function(){return this.x},set:function(k5){this.x=k5}},"height":{get:function(){return this.y},set:function(k5){this.y=k5}}});Object.assign(bg.prototype,{isVector2:true,set:function(k5,k6){this.x=k5;this.y=k6;return this},setScalar:function(k5){this.x=k5;this.y=k5;return this},setX:function(k5){this.x=k5;return this},setY:function(k5){this.y=k5;return this},setComponent:function(k5,k6){switch(k5){case 0:this.x=k6;break;case 1:this.y=k6;break;default:throw new Error("index is out of range: "+k5)}return this},getComponent:function(k5){switch(k5){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+k5)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(k5){this.x=k5.x;this.y=k5.y;return this},add:function(k6,k5){if(k5!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(k6,k5)}this.x+=k6.x;this.y+=k6.y;return this},addScalar:function(k5){this.x+=k5;this.y+=k5;return this},addVectors:function(k6,k5){this.x=k6.x+k5.x;this.y=k6.y+k5.y;return this},addScaledVector:function(k5,k6){this.x+=k5.x*k6;this.y+=k5.y*k6;return this},sub:function(k6,k5){if(k5!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(k6,k5)}this.x-=k6.x;this.y-=k6.y;return this},subScalar:function(k5){this.x-=k5;this.y-=k5;return this},subVectors:function(k6,k5){this.x=k6.x-k5.x;this.y=k6.y-k5.y;return this},multiply:function(k5){this.x*=k5.x;this.y*=k5.y;return this},multiplyScalar:function(k5){this.x*=k5;this.y*=k5;return this},divide:function(k5){this.x/=k5.x;this.y/=k5.y;return this},divideScalar:function(k5){return this.multiplyScalar(1/k5)},applyMatrix3:function(k6){var k5=this.x,k8=this.y;var k7=k6.elements;this.x=k7[0]*k5+k7[3]*k8+k7[6];this.y=k7[1]*k5+k7[4]*k8+k7[7];return this},min:function(k5){this.x=Math.min(this.x,k5.x);this.y=Math.min(this.y,k5.y);return this},max:function(k5){this.x=Math.max(this.x,k5.x);this.y=Math.max(this.y,k5.y);return this},clamp:function(k6,k5){this.x=Math.max(k6.x,Math.min(k5.x,this.x));this.y=Math.max(k6.y,Math.min(k5.y,this.y));return this},clampScalar:function(){var k7=new bg();var k6=new bg();return function k5(k8,k9){k7.set(k8,k8);k6.set(k9,k9);return this.clamp(k7,k6)}}(),clampLength:function(k6,k5){var k7=this.length();return this.divideScalar(k7||1).multiplyScalar(Math.max(k6,Math.min(k5,k7)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=(this.x<0)?Math.ceil(this.x):Math.floor(this.x);this.y=(this.y<0)?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(k5){return this.x*k5.x+this.y*k5.y},cross:function(k5){return this.x*k5.y-this.y*k5.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var k5=Math.atan2(this.y,this.x);if(k5<0){k5+=2*Math.PI}return k5},distanceTo:function(k5){return Math.sqrt(this.distanceToSquared(k5))},distanceToSquared:function(k7){var k6=this.x-k7.x,k5=this.y-k7.y;return k6*k6+k5*k5},manhattanDistanceTo:function(k5){return Math.abs(this.x-k5.x)+Math.abs(this.y-k5.y)},setLength:function(k5){return this.normalize().multiplyScalar(k5)},lerp:function(k5,k6){this.x+=(k5.x-this.x)*k6;this.y+=(k5.y-this.y)*k6;return this},lerpVectors:function(k7,k6,k5){return this.subVectors(k6,k7).multiplyScalar(k5).add(k7)},equals:function(k5){return((k5.x===this.x)&&(k5.y===this.y))},fromArray:function(k6,k5){if(k5===undefined){k5=0}this.x=k6[k5];this.y=k6[k5+1];return this},toArray:function(k6,k5){if(k6===undefined){k6=[]}if(k5===undefined){k5=0}k6[k5]=this.x;k6[k5+1]=this.y;return k6},fromBufferAttribute:function(k6,k5,k7){if(k7!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector2: offset has been removed from .fromBufferAttribute().")}this.x=k6.getX(k5);this.y=k6.getY(k5);return this},rotateAround:function(k6,k8){var la=Math.cos(k8),k7=Math.sin(k8);var k5=this.x-k6.x;var k9=this.y-k6.y;this.x=k5*la-k9*k7+k6.x;this.y=k5*k7+k9*la+k6.y;return this}});function fv(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];if(arguments.length>0){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(fv.prototype,{isMatrix4:true,set:function(li,lh,lf,ld,la,k9,k8,k7,k5,ll,lk,lj,lg,le,lc,lb){var k6=this.elements;k6[0]=li;k6[4]=lh;k6[8]=lf;k6[12]=ld;k6[1]=la;k6[5]=k9;k6[9]=k8;k6[13]=k7;k6[2]=k5;k6[6]=ll;k6[10]=lk;k6[14]=lj;k6[3]=lg;k6[7]=le;k6[11]=lc;k6[15]=lb;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return new fv().fromArray(this.elements)},copy:function(k5){var k7=this.elements;var k6=k5.elements;k7[0]=k6[0];k7[1]=k6[1];k7[2]=k6[2];k7[3]=k6[3];k7[4]=k6[4];k7[5]=k6[5];k7[6]=k6[6];k7[7]=k6[7];k7[8]=k6[8];k7[9]=k6[9];k7[10]=k6[10];k7[11]=k6[11];k7[12]=k6[12];k7[13]=k6[13];k7[14]=k6[14];k7[15]=k6[15];return this},copyPosition:function(k5){var k7=this.elements,k6=k5.elements;k7[12]=k6[12];k7[13]=k6[13];k7[14]=k6[14];return this},extractBasis:function(k6,k5,k7){k6.setFromMatrixColumn(this,0);k5.setFromMatrixColumn(this,1);k7.setFromMatrixColumn(this,2);return this},makeBasis:function(k6,k5,k7){this.set(k6.x,k5.x,k7.x,0,k6.y,k5.y,k7.y,0,k6.z,k5.z,k7.z,0,0,0,0,1);return this},extractRotation:function(){var k6=new bf();return function k5(k7){var lc=this.elements;var lb=k7.elements;var la=1/k6.setFromMatrixColumn(k7,0).length();var k9=1/k6.setFromMatrixColumn(k7,1).length();var k8=1/k6.setFromMatrixColumn(k7,2).length();lc[0]=lb[0]*la;lc[1]=lb[1]*la;lc[2]=lb[2]*la;lc[3]=0;lc[4]=lb[4]*k9;lc[5]=lb[5]*k9;lc[6]=lb[6]*k9;lc[7]=0;lc[8]=lb[8]*k8;lc[9]=lb[9]*k8;lc[10]=lb[10]*k8;lc[11]=0;lc[12]=0;lc[13]=0;lc[14]=0;lc[15]=1;return this}}(),makeRotationFromEuler:function(ld){if(!(ld&&ld.isEuler)){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.")}var k9=this.elements;var lc=ld.x,lb=ld.y,la=ld.z;var lr=Math.cos(lc),lq=Math.sin(lc);var lo=Math.cos(lb),ll=Math.sin(lb);var li=Math.cos(la),lg=Math.sin(la);if(ld.order==="XYZ"){var lk=lr*li,lh=lr*lg,k6=lq*li,k5=lq*lg;k9[0]=lo*li;k9[4]=-lo*lg;k9[8]=ll;k9[1]=lh+k6*ll;k9[5]=lk-k5*ll;k9[9]=-lq*lo;k9[2]=k5-lk*ll;k9[6]=k6+lh*ll;k9[10]=lr*lo}else{if(ld.order==="YXZ"){var lf=lo*li,le=lo*lg,ln=ll*li,lj=ll*lg;k9[0]=lf+lj*lq;k9[4]=ln*lq-le;k9[8]=lr*ll;k9[1]=lr*lg;k9[5]=lr*li;k9[9]=-lq;k9[2]=le*lq-ln;k9[6]=lj+lf*lq;k9[10]=lr*lo}else{if(ld.order==="ZXY"){var lf=lo*li,le=lo*lg,ln=ll*li,lj=ll*lg;k9[0]=lf-lj*lq;k9[4]=-lr*lg;k9[8]=ln+le*lq;k9[1]=le+ln*lq;k9[5]=lr*li;k9[9]=lj-lf*lq;k9[2]=-lr*ll;k9[6]=lq;k9[10]=lr*lo}else{if(ld.order==="ZYX"){var lk=lr*li,lh=lr*lg,k6=lq*li,k5=lq*lg;k9[0]=lo*li;k9[4]=k6*ll-lh;k9[8]=lk*ll+k5;k9[1]=lo*lg;k9[5]=k5*ll+lk;k9[9]=lh*ll-k6;k9[2]=-ll;k9[6]=lq*lo;k9[10]=lr*lo}else{if(ld.order==="YZX"){var lp=lr*lo,lm=lr*ll,k8=lq*lo,k7=lq*ll;k9[0]=lo*li;k9[4]=k7-lp*lg;k9[8]=k8*lg+lm;k9[1]=lg;k9[5]=lr*li;k9[9]=-lq*li;k9[2]=-ll*li;k9[6]=lm*lg+k8;k9[10]=lp-k7*lg}else{if(ld.order==="XZY"){var lp=lr*lo,lm=lr*ll,k8=lq*lo,k7=lq*ll;k9[0]=lo*li;k9[4]=-lg;k9[8]=ll*li;k9[1]=lp*lg+k7;k9[5]=lr*li;k9[9]=lm*lg-k8;k9[2]=k8*lg-lm;k9[6]=lq*li;k9[10]=k7*lg+lp}}}}}}k9[3]=0;k9[7]=0;k9[11]=0;k9[12]=0;k9[13]=0;k9[14]=0;k9[15]=1;return this},makeRotationFromQuaternion:function(){var k6=new bf(0,0,0);var k5=new bf(1,1,1);return function k7(k8){return this.compose(k6,k8,k5)}}(),lookAt:function(){var k5=new bf();var k8=new bf();var k6=new bf();return function k7(la,lb,k9){var lc=this.elements;k6.subVectors(la,lb);if(k6.lengthSq()===0){k6.z=1}k6.normalize();k5.crossVectors(k9,k6);if(k5.lengthSq()===0){if(Math.abs(k9.z)===1){k6.x+=0.0001}else{k6.z+=0.0001}k6.normalize();k5.crossVectors(k9,k6)}k5.normalize();k8.crossVectors(k6,k5);lc[0]=k5.x;lc[4]=k8.x;lc[8]=k6.x;lc[1]=k5.y;lc[5]=k8.y;lc[9]=k6.y;lc[2]=k5.z;lc[6]=k8.z;lc[10]=k6.z;return this}}(),multiply:function(k5,k6){if(k6!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(k5,k6)}return this.multiplyMatrices(this,k5)},premultiply:function(k5){return this.multiplyMatrices(k5,this)},multiplyMatrices:function(lF,lE){var ll=lF.elements;var lD=lE.elements;var k5=this.elements;var li=ll[0],lg=ll[4],lf=ll[8],le=ll[12];var lC=ll[1],lB=ll[5],lA=ll[9],lz=ll[13];var lu=ll[2],lt=ll[6],ls=ll[10],lr=ll[14];var lm=ll[3],lk=ll[7],lj=ll[11],lh=ll[15];var lb=lD[0],k9=lD[4],k7=lD[8],k6=lD[12];var ly=lD[1],lx=lD[5],lw=lD[9],lv=lD[13];var lq=lD[2],lp=lD[6],lo=lD[10],ln=lD[14];var ld=lD[3],lc=lD[7],la=lD[11],k8=lD[15];k5[0]=li*lb+lg*ly+lf*lq+le*ld;k5[4]=li*k9+lg*lx+lf*lp+le*lc;k5[8]=li*k7+lg*lw+lf*lo+le*la;k5[12]=li*k6+lg*lv+lf*ln+le*k8;k5[1]=lC*lb+lB*ly+lA*lq+lz*ld;k5[5]=lC*k9+lB*lx+lA*lp+lz*lc;k5[9]=lC*k7+lB*lw+lA*lo+lz*la;k5[13]=lC*k6+lB*lv+lA*ln+lz*k8;k5[2]=lu*lb+lt*ly+ls*lq+lr*ld;k5[6]=lu*k9+lt*lx+ls*lp+lr*lc;k5[10]=lu*k7+lt*lw+ls*lo+lr*la;k5[14]=lu*k6+lt*lv+ls*ln+lr*k8;k5[3]=lm*lb+lk*ly+lj*lq+lh*ld;k5[7]=lm*k9+lk*lx+lj*lp+lh*lc;k5[11]=lm*k7+lk*lw+lj*lo+lh*la;k5[15]=lm*k6+lk*lv+lj*ln+lh*k8;return this},multiplyScalar:function(k5){var k6=this.elements;k6[0]*=k5;k6[4]*=k5;k6[8]*=k5;k6[12]*=k5;k6[1]*=k5;k6[5]*=k5;k6[9]*=k5;k6[13]*=k5;k6[2]*=k5;k6[6]*=k5;k6[10]*=k5;k6[14]*=k5;k6[3]*=k5;k6[7]*=k5;k6[11]*=k5;k6[15]*=k5;return this},applyToBufferAttribute:function(){var k6=new bf();return function k5(k9){for(var k8=0,k7=k9.count;k8<k7;k8++){k6.x=k9.getX(k8);k6.y=k9.getY(k8);k6.z=k9.getZ(k8);k6.applyMatrix4(this);k9.setXYZ(k8,k6.x,k6.y,k6.z)}return k9}}(),determinant:function(){var k7=this.elements;var li=k7[0],lh=k7[4],lf=k7[8],ld=k7[12];var la=k7[1],k9=k7[5],k8=k7[9],k6=k7[13];var k5=k7[2],ll=k7[6],lk=k7[10],lj=k7[14];var lg=k7[3],le=k7[7],lc=k7[11],lb=k7[15];return(lg*(+ld*k8*ll-lf*k6*ll-ld*k9*lk+lh*k6*lk+lf*k9*lj-lh*k8*lj)+le*(+li*k8*lj-li*k6*lk+ld*la*lk-lf*la*lj+lf*k6*k5-ld*k8*k5)+lc*(+li*k6*ll-li*k9*lj-ld*la*ll+lh*la*lj+ld*k9*k5-lh*k6*k5)+lb*(-lf*k9*k5-li*k8*ll+li*k9*lk+lf*la*ll-lh*la*lk+lh*k8*k5))},transpose:function(){var k6=this.elements;var k5;k5=k6[1];k6[1]=k6[4];k6[4]=k5;k5=k6[2];k6[2]=k6[8];k6[8]=k5;k5=k6[6];k6[6]=k6[9];k6[9]=k5;k5=k6[3];k6[3]=k6[12];k6[12]=k5;k5=k6[7];k6[7]=k6[13];k6[13]=k5;k5=k6[11];k6[11]=k6[14];k6[14]=k5;return this},setPosition:function(k5){var k6=this.elements;k6[12]=k5.x;k6[13]=k5.y;k6[14]=k5.z;return this},getInverse:function(lm,lc){var ld=this.elements,lv=lm.elements,lj=lv[0],lu=lv[1],k9=lv[2],ll=lv[3],lh=lv[4],lt=lv[5],k8=lv[6],lk=lv[7],lg=lv[8],lr=lv[9],k7=lv[10],li=lv[11],le=lv[12],lp=lv[13],k5=lv[14],lf=lv[15],ls=lr*k5*lk-lp*k7*lk+lp*k8*li-lt*k5*li-lr*k8*lf+lt*k7*lf,lq=le*k7*lk-lg*k5*lk-le*k8*li+lh*k5*li+lg*k8*lf-lh*k7*lf,lo=lg*lp*lk-le*lr*lk+le*lt*li-lh*lp*li-lg*lt*lf+lh*lr*lf,ln=le*lr*k8-lg*lp*k8-le*lt*k7+lh*lp*k7+lg*lt*k5-lh*lr*k5;var la=lj*ls+lu*lq+k9*lo+ll*ln;if(la===0){var lb="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(lc===true){throw new Error(lb)}else{a.Logger.log(a.Logger.WARNING,lb)}return this.identity()}var k6=1/la;ld[0]=ls*k6;ld[1]=(lp*k7*ll-lr*k5*ll-lp*k9*li+lu*k5*li+lr*k9*lf-lu*k7*lf)*k6;ld[2]=(lt*k5*ll-lp*k8*ll+lp*k9*lk-lu*k5*lk-lt*k9*lf+lu*k8*lf)*k6;ld[3]=(lr*k8*ll-lt*k7*ll-lr*k9*lk+lu*k7*lk+lt*k9*li-lu*k8*li)*k6;ld[4]=lq*k6;ld[5]=(lg*k5*ll-le*k7*ll+le*k9*li-lj*k5*li-lg*k9*lf+lj*k7*lf)*k6;ld[6]=(le*k8*ll-lh*k5*ll-le*k9*lk+lj*k5*lk+lh*k9*lf-lj*k8*lf)*k6;ld[7]=(lh*k7*ll-lg*k8*ll+lg*k9*lk-lj*k7*lk-lh*k9*li+lj*k8*li)*k6;ld[8]=lo*k6;ld[9]=(le*lr*ll-lg*lp*ll-le*lu*li+lj*lp*li+lg*lu*lf-lj*lr*lf)*k6;ld[10]=(lh*lp*ll-le*lt*ll+le*lu*lk-lj*lp*lk-lh*lu*lf+lj*lt*lf)*k6;ld[11]=(lg*lt*ll-lh*lr*ll-lg*lu*lk+lj*lr*lk+lh*lu*li-lj*lt*li)*k6;ld[12]=ln*k6;ld[13]=(lg*lp*k9-le*lr*k9+le*lu*k7-lj*lp*k7-lg*lu*k5+lj*lr*k5)*k6;ld[14]=(le*lt*k9-lh*lp*k9-le*lu*k8+lj*lp*k8+lh*lu*k5-lj*lt*k5)*k6;ld[15]=(lh*lr*k9-lg*lt*k9+lg*lu*k8-lj*lr*k8-lh*lu*k7+lj*lt*k7)*k6;return this},scale:function(k6){var k8=this.elements;var k5=k6.x,k9=k6.y,k7=k6.z;k8[0]*=k5;k8[4]*=k9;k8[8]*=k7;k8[1]*=k5;k8[5]*=k9;k8[9]*=k7;k8[2]*=k5;k8[6]*=k9;k8[10]*=k7;k8[3]*=k5;k8[7]*=k9;k8[11]*=k7;return this},getMaxScaleOnAxis:function(){var k7=this.elements;var k8=k7[0]*k7[0]+k7[1]*k7[1]+k7[2]*k7[2];var k6=k7[4]*k7[4]+k7[5]*k7[5]+k7[6]*k7[6];var k5=k7[8]*k7[8]+k7[9]*k7[9]+k7[10]*k7[10];return Math.sqrt(Math.max(k8,k6,k5))},makeTranslation:function(k5,k7,k6){this.set(1,0,0,k5,0,1,0,k7,0,0,1,k6,0,0,0,1);return this},makeRotationX:function(k5){var k7=Math.cos(k5),k6=Math.sin(k5);this.set(1,0,0,0,0,k7,-k6,0,0,k6,k7,0,0,0,0,1);return this},makeRotationY:function(k5){var k7=Math.cos(k5),k6=Math.sin(k5);this.set(k7,0,k6,0,0,1,0,0,-k6,0,k7,0,0,0,0,1);return this},makeRotationZ:function(k5){var k7=Math.cos(k5),k6=Math.sin(k5);this.set(k7,-k6,0,0,k6,k7,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(k5,k6){var k9=Math.cos(k6);var le=Math.sin(k6);var ld=1-k9;var lc=k5.x,lb=k5.y,la=k5.z;var k8=ld*lc,k7=ld*lb;this.set(k8*lc+k9,k8*lb-le*la,k8*la+le*lb,0,k8*lb+le*la,k7*lb+k9,k7*la-le*lc,0,k8*la-le*lb,k7*la+le*lc,ld*la*la+k9,0,0,0,0,1);return this},makeScale:function(k5,k7,k6){this.set(k5,0,0,0,0,k7,0,0,0,0,k6,0,0,0,0,1);return this},makeShear:function(k5,k7,k6){this.set(1,k7,k6,0,k5,1,k6,0,k5,k7,1,0,0,0,0,1);return this},compose:function(lq,k5,lr){var la=this.elements;var ld=k5._x,lc=k5._y,lb=k5._z,le=k5._w;var ll=ld+ld,k6=lc+lc,lf=lb+lb;var k9=ld*ll,k8=ld*k6,k7=ld*lf;var lk=lc*k6,lj=lc*lf,lo=lb*lf;var lp=le*ll,ln=le*k6,lm=le*lf;var li=lr.x,lh=lr.y,lg=lr.z;la[0]=(1-(lk+lo))*li;la[1]=(k8+lm)*li;la[2]=(k7-ln)*li;la[3]=0;la[4]=(k8-lm)*lh;la[5]=(1-(k9+lo))*lh;la[6]=(lj+lp)*lh;la[7]=0;la[8]=(k7+ln)*lg;la[9]=(lj-lp)*lg;la[10]=(1-(k9+lk))*lg;la[11]=0;la[12]=lq.x;la[13]=lq.y;la[14]=lq.z;la[15]=1;return this},decompose:function(){var k6=new bf();var k7=new fv();return function k5(le,ld,lc){var lb=this.elements;var li=k6.set(lb[0],lb[1],lb[2]).length();var lh=k6.set(lb[4],lb[5],lb[6]).length();var lg=k6.set(lb[8],lb[9],lb[10]).length();var lf=this.determinant();if(lf<0){li=-li}le.x=lb[12];le.y=lb[13];le.z=lb[14];k7.copy(this);var la=1/li;var k9=1/lh;var k8=1/lg;k7.elements[0]*=la;k7.elements[1]*=la;k7.elements[2]*=la;k7.elements[4]*=k9;k7.elements[5]*=k9;k7.elements[6]*=k9;k7.elements[8]*=k8;k7.elements[9]*=k8;k7.elements[10]*=k8;ld.setFromRotationMatrix(k7);lc.x=li;lc.y=lh;lc.z=lg;return this}}(),makePerspective:function(k7,lh,le,k5,k9,k8){if(k8===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.")}var k6=this.elements;var lg=2*k9/(lh-k7);var ld=2*k9/(le-k5);var lf=(lh+k7)/(lh-k7);var lc=(le+k5)/(le-k5);var lb=-(k8+k9)/(k8-k9);var la=-2*k8*k9/(k8-k9);k6[0]=lg;k6[4]=0;k6[8]=lf;k6[12]=0;k6[1]=0;k6[5]=ld;k6[9]=lc;k6[13]=0;k6[2]=0;k6[6]=0;k6[10]=lb;k6[14]=la;k6[3]=0;k6[7]=0;k6[11]=-1;k6[15]=0;return this},makeOrthographic:function(k8,lh,le,k5,lb,la){var k7=this.elements;var lg=1/(lh-k8);var k9=1/(le-k5);var k6=1/(la-lb);var lf=(lh+k8)*lg;var ld=(le+k5)*k9;var lc=(la+lb)*k6;k7[0]=2*lg;k7[4]=0;k7[8]=0;k7[12]=-lf;k7[1]=0;k7[5]=2*k9;k7[9]=0;k7[13]=-ld;k7[2]=0;k7[6]=0;k7[10]=-2*k6;k7[14]=-lc;k7[3]=0;k7[7]=0;k7[11]=0;k7[15]=1;return this},equals:function(k5){var k8=this.elements;var k7=k5.elements;for(var k6=0;k6<16;k6++){if(k8[k6]!==k7[k6]){return false}}return true},fromArray:function(k7,k6){if(k6===undefined){k6=0}for(var k5=0;k5<16;k5++){this.elements[k5]=k7[k5+k6]}return this},toArray:function(k7,k6){if(k7===undefined){k7=[]}if(k6===undefined){k6=0}var k5=this.elements;k7[k6]=k5[0];k7[k6+1]=k5[1];k7[k6+2]=k5[2];k7[k6+3]=k5[3];k7[k6+4]=k5[4];k7[k6+5]=k5[5];k7[k6+6]=k5[6];k7[k6+7]=k5[7];k7[k6+8]=k5[8];k7[k6+9]=k5[9];k7[k6+10]=k5[10];k7[k6+11]=k5[11];k7[k6+12]=k5[12];k7[k6+13]=k5[13];k7[k6+14]=k5[14];k7[k6+15]=k5[15];return k7}});function hd(k5,k8,k7,k6){this._x=k5||0;this._y=k8||0;this._z=k7||0;this._w=(k6!==undefined)?k6:1}Object.assign(hd,{slerp:function(k8,k7,k6,k5){return k6.copy(k8).slerp(k7,k5)},slerpFlat:function(lr,lb,lq,lj,lp,li,lg){var lo=lq[lj+0],k9=lq[lj+1],lf=lq[lj+2],ld=lq[lj+3],lm=lp[li+0],k8=lp[li+1],le=lp[li+2],lc=lp[li+3];if(ld!==lc||lo!==lm||k9!==k8||lf!==le){var lh=1-lg,k6=lo*lm+k9*k8+lf*le+ld*lc,lk=(k6>=0?1:-1),k7=1-k6*k6;if(k7>Number.EPSILON){var k5=Math.sqrt(k7),ll=Math.atan2(k5,k6*lk);lh=Math.sin(lh*ll)/k5;lg=Math.sin(lg*ll)/k5}var la=lg*lk;lo=lo*lh+lm*la;k9=k9*lh+k8*la;lf=lf*lh+le*la;ld=ld*lh+lc*la;if(lh===1-lg){var ln=1/Math.sqrt(lo*lo+k9*k9+lf*lf+ld*ld);lo*=ln;k9*=ln;lf*=ln;ld*=ln}}lr[lb]=lo;lr[lb+1]=k9;lr[lb+2]=lf;lr[lb+3]=ld}});Object.defineProperties(hd.prototype,{x:{get:function(){return this._x},set:function(k5){this._x=k5;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(k5){this._y=k5;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(k5){this._z=k5;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(k5){this._w=k5;this.onChangeCallback()}}});Object.assign(hd.prototype,{isQuaternion:true,set:function(k5,k8,k7,k6){this._x=k5;this._y=k8;this._z=k7;this._w=k6;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(k5){this._x=k5.x;this._y=k5.y;this._z=k5.z;this._w=k5.w;this.onChangeCallback();return this},setFromEuler:function(k5,k9){if(!(k5&&k5.isEuler)){throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")}var lf=k5._x,ld=k5._y,lb=k5._z,k6=k5.order;var li=Math.cos;var lc=Math.sin;var la=li(lf/2);var k8=li(ld/2);var k7=li(lb/2);var lh=lc(lf/2);var lg=lc(ld/2);var le=lc(lb/2);if(k6==="XYZ"){this._x=lh*k8*k7+la*lg*le;this._y=la*lg*k7-lh*k8*le;this._z=la*k8*le+lh*lg*k7;this._w=la*k8*k7-lh*lg*le}else{if(k6==="YXZ"){this._x=lh*k8*k7+la*lg*le;this._y=la*lg*k7-lh*k8*le;this._z=la*k8*le-lh*lg*k7;this._w=la*k8*k7+lh*lg*le}else{if(k6==="ZXY"){this._x=lh*k8*k7-la*lg*le;this._y=la*lg*k7+lh*k8*le;this._z=la*k8*le+lh*lg*k7;this._w=la*k8*k7-lh*lg*le}else{if(k6==="ZYX"){this._x=lh*k8*k7-la*lg*le;this._y=la*lg*k7+lh*k8*le;this._z=la*k8*le-lh*lg*k7;this._w=la*k8*k7+lh*lg*le}else{if(k6==="YZX"){this._x=lh*k8*k7+la*lg*le;this._y=la*lg*k7+lh*k8*le;this._z=la*k8*le-lh*lg*k7;this._w=la*k8*k7-lh*lg*le}else{if(k6==="XZY"){this._x=lh*k8*k7-la*lg*le;this._y=la*lg*k7-lh*k8*le;this._z=la*k8*le+lh*lg*k7;this._w=la*k8*k7+lh*lg*le}}}}}}if(k9!==false){this.onChangeCallback()}return this},setFromAxisAngle:function(k7,k8){var k5=k8/2,k6=Math.sin(k5);this._x=k7.x*k6;this._y=k7.y*k6;this._z=k7.z*k6;this._w=Math.cos(k5);this.onChangeCallback();return this},setFromRotationMatrix:function(k9){var k8=k9.elements,ld=k8[0],lc=k8[4],lb=k8[8],k7=k8[1],k6=k8[5],k5=k8[9],lg=k8[2],lf=k8[6],le=k8[10],la=ld+k6+le,lh;if(la>0){lh=0.5/Math.sqrt(la+1);this._w=0.25/lh;this._x=(lf-k5)*lh;this._y=(lb-lg)*lh;this._z=(k7-lc)*lh}else{if(ld>k6&&ld>le){lh=2*Math.sqrt(1+ld-k6-le);this._w=(lf-k5)/lh;this._x=0.25*lh;this._y=(lc+k7)/lh;this._z=(lb+lg)/lh}else{if(k6>le){lh=2*Math.sqrt(1+k6-ld-le);this._w=(lb-lg)/lh;this._x=(lc+k7)/lh;this._y=0.25*lh;this._z=(k5+lf)/lh}else{lh=2*Math.sqrt(1+le-ld-k6);this._w=(k7-lc)/lh;this._x=(lb+lg)/lh;this._y=(k5+lf)/lh;this._z=0.25*lh}}}this.onChangeCallback();return this},setFromUnitVectors:function(){var k8=new bf();var k6;var k7=0.000001;return function k5(k9,la){if(k8===undefined){k8=new bf()}k6=k9.dot(la)+1;if(k6<k7){k6=0;if(Math.abs(k9.x)>Math.abs(k9.z)){k8.set(-k9.y,k9.x,0)}else{k8.set(0,-k9.z,k9.y)}}else{k8.crossVectors(k9,la)}this._x=k8.x;this._y=k8.y;this._z=k8.z;this._w=k6;return this.normalize()}}(),angleTo:function(k5){return 2*Math.acos(Math.abs(dY.clamp(this.dot(k5),-1,1)))},rotateTowards:function(k7,k6){var k8=this.angleTo(k7);if(k8===0){return this}var k5=Math.min(1,k6/k8);this.slerp(k7,k5);return this},inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(k5){return this._x*k5._x+this._y*k5._y+this._z*k5._z+this._w*k5._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var k5=this.length();if(k5===0){this._x=0;this._y=0;this._z=0;this._w=1}else{k5=1/k5;this._x=this._x*k5;this._y=this._y*k5;this._z=this._z*k5;this._w=this._w*k5}this.onChangeCallback();return this},multiply:function(k5,k6){if(k6!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(k5,k6)}return this.multiplyQuaternions(this,k5)},premultiply:function(k5){return this.multiplyQuaternions(k5,this)},multiplyQuaternions:function(le,ld){var lb=le._x,la=le._y,k9=le._z,lc=le._w;var k7=ld._x,k6=ld._y,k5=ld._z,k8=ld._w;this._x=lb*k8+lc*k7+la*k5-k9*k6;this._y=la*k8+lc*k6+k9*k7-lb*k5;this._z=k9*k8+lc*k5+lb*k6-la*k7;this._w=lc*k8-lb*k7-la*k6-k9*k5;this.onChangeCallback();return this},slerp:function(k7,lg){if(lg===0){return this}if(lg===1){return this.copy(k7)}var le=this._x,ld=this._y,lb=this._z,lf=this._w;var k6=lf*k7._w+le*k7._x+ld*k7._y+lb*k7._z;if(k6<0){this._w=-k7._w;this._x=-k7._x;this._y=-k7._y;this._z=-k7._z;k6=-k6}else{this.copy(k7)}if(k6>=1){this._w=lf;this._x=le;this._y=ld;this._z=lb;return this}var lc=1-k6*k6;if(lc<=Number.EPSILON){var lh=1-lg;this._w=lh*lf+lg*this._w;this._x=lh*le+lg*this._x;this._y=lh*ld+lg*this._y;this._z=lh*lb+lg*this._z;return this.normalize()}var k5=Math.sqrt(lc);var k8=Math.atan2(k5,k6);var la=Math.sin((1-lg)*k8)/k5,k9=Math.sin(lg*k8)/k5;this._w=(lf*la+this._w*k9);this._x=(le*la+this._x*k9);this._y=(ld*la+this._y*k9);this._z=(lb*la+this._z*k9);this.onChangeCallback();return this},equals:function(k5){return(k5._x===this._x)&&(k5._y===this._y)&&(k5._z===this._z)&&(k5._w===this._w)},fromArray:function(k6,k5){if(k5===undefined){k5=0}this._x=k6[k5];this._y=k6[k5+1];this._z=k6[k5+2];this._w=k6[k5+3];this.onChangeCallback();return this},toArray:function(k6,k5){if(k6===undefined){k6=[]}if(k5===undefined){k5=0}k6[k5]=this._x;k6[k5+1]=this._y;k6[k5+2]=this._z;k6[k5+3]=this._w;return k6},onChange:function(k5){this.onChangeCallback=k5;return this},onChangeCallback:function(){}});function bf(k5,k7,k6){this.x=k5||0;this.y=k7||0;this.z=k6||0}Object.assign(bf.prototype,{isVector3:true,set:function(k5,k7,k6){this.x=k5;this.y=k7;this.z=k6;return this},setScalar:function(k5){this.x=k5;this.y=k5;this.z=k5;return this},setX:function(k5){this.x=k5;return this},setY:function(k5){this.y=k5;return this},setZ:function(k5){this.z=k5;return this},setComponent:function(k5,k6){switch(k5){case 0:this.x=k6;break;case 1:this.y=k6;break;case 2:this.z=k6;break;default:throw new Error("index is out of range: "+k5)}return this},getComponent:function(k5){switch(k5){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+k5)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(k5){this.x=k5.x;this.y=k5.y;this.z=k5.z;return this},add:function(k6,k5){if(k5!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(k6,k5)}this.x+=k6.x;this.y+=k6.y;this.z+=k6.z;return this},addScalar:function(k5){this.x+=k5;this.y+=k5;this.z+=k5;return this},addVectors:function(k6,k5){this.x=k6.x+k5.x;this.y=k6.y+k5.y;this.z=k6.z+k5.z;return this},addScaledVector:function(k5,k6){this.x+=k5.x*k6;this.y+=k5.y*k6;this.z+=k5.z*k6;return this},sub:function(k6,k5){if(k5!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(k6,k5)}this.x-=k6.x;this.y-=k6.y;this.z-=k6.z;return this},subScalar:function(k5){this.x-=k5;this.y-=k5;this.z-=k5;return this},subVectors:function(k6,k5){this.x=k6.x-k5.x;this.y=k6.y-k5.y;this.z=k6.z-k5.z;return this},multiply:function(k6,k5){if(k5!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(k6,k5)}this.x*=k6.x;this.y*=k6.y;this.z*=k6.z;return this},multiplyScalar:function(k5){this.x*=k5;this.y*=k5;this.z*=k5;return this},multiplyVectors:function(k6,k5){this.x=k6.x*k5.x;this.y=k6.y*k5.y;this.z=k6.z*k5.z;return this},applyEuler:function(){var k5=new hd();return function k6(k7){if(!(k7&&k7.isEuler)){a.Logger.log(a.Logger.SEVERE,"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.")}return this.applyQuaternion(k5.setFromEuler(k7))}}(),applyAxisAngle:function(){var k5=new hd();return function k6(k7,k8){return this.applyQuaternion(k5.setFromAxisAngle(k7,k8))}}(),applyMatrix3:function(k6){var k5=this.x,k9=this.y,k8=this.z;var k7=k6.elements;this.x=k7[0]*k5+k7[3]*k9+k7[6]*k8;this.y=k7[1]*k5+k7[4]*k9+k7[7]*k8;this.z=k7[2]*k5+k7[5]*k9+k7[8]*k8;return this},applyMatrix4:function(k6){var k5=this.x,la=this.y,k9=this.z;var k8=k6.elements;var k7=1/(k8[3]*k5+k8[7]*la+k8[11]*k9+k8[15]);this.x=(k8[0]*k5+k8[4]*la+k8[8]*k9+k8[12])*k7;this.y=(k8[1]*k5+k8[5]*la+k8[9]*k9+k8[13])*k7;this.z=(k8[2]*k5+k8[6]*la+k8[10]*k9+k8[14])*k7;return this},applyQuaternion:function(k5){var lg=this.x,lf=this.y,le=this.z;var lc=k5.x,lb=k5.y,la=k5.z,ld=k5.w;var k8=ld*lg+lb*le-la*lf;var k7=ld*lf+la*lg-lc*le;var k6=ld*le+lc*lf-lb*lg;var k9=-lc*lg-lb*lf-la*le;this.x=k8*ld+k9*-lc+k7*-la-k6*-lb;this.y=k7*ld+k9*-lb+k6*-lc-k8*-la;this.z=k6*ld+k9*-la+k8*-lb-k7*-lc;return this},project:function(k5){return this.applyMatrix4(k5.matrixWorldInverse).applyMatrix4(k5.projectionMatrix)},unproject:function(){var k5=new fv();return function k6(k7){return this.applyMatrix4(k5.getInverse(k7.projectionMatrix)).applyMatrix4(k7.matrixWorld)}}(),transformDirection:function(k6){var k5=this.x,k9=this.y,k8=this.z;var k7=k6.elements;this.x=k7[0]*k5+k7[4]*k9+k7[8]*k8;this.y=k7[1]*k5+k7[5]*k9+k7[9]*k8;this.z=k7[2]*k5+k7[6]*k9+k7[10]*k8;return this.normalize()},divide:function(k5){this.x/=k5.x;this.y/=k5.y;this.z/=k5.z;return this},divideScalar:function(k5){return this.multiplyScalar(1/k5)},min:function(k5){this.x=Math.min(this.x,k5.x);this.y=Math.min(this.y,k5.y);this.z=Math.min(this.z,k5.z);return this},max:function(k5){this.x=Math.max(this.x,k5.x);this.y=Math.max(this.y,k5.y);this.z=Math.max(this.z,k5.z);return this},clamp:function(k6,k5){this.x=Math.max(k6.x,Math.min(k5.x,this.x));this.y=Math.max(k6.y,Math.min(k5.y,this.y));this.z=Math.max(k6.z,Math.min(k5.z,this.z));return this},clampScalar:function(){var k7=new bf();var k6=new bf();return function k5(k8,k9){k7.set(k8,k8,k8);k6.set(k9,k9,k9);return this.clamp(k7,k6)}}(),clampLength:function(k6,k5){var k7=this.length();return this.divideScalar(k7||1).multiplyScalar(Math.max(k6,Math.min(k5,k7)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=(this.x<0)?Math.ceil(this.x):Math.floor(this.x);this.y=(this.y<0)?Math.ceil(this.y):Math.floor(this.y);this.z=(this.z<0)?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(k5){return this.x*k5.x+this.y*k5.y+this.z*k5.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(k5){return this.normalize().multiplyScalar(k5)},lerp:function(k5,k6){this.x+=(k5.x-this.x)*k6;this.y+=(k5.y-this.y)*k6;this.z+=(k5.z-this.z)*k6;return this},lerpVectors:function(k7,k6,k5){return this.subVectors(k6,k7).multiplyScalar(k5).add(k7)},cross:function(k6,k5){if(k5!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(k6,k5)}return this.crossVectors(this,k6)},crossVectors:function(k6,k5){var la=k6.x,k8=k6.y,k7=k6.z;var lc=k5.x,lb=k5.y,k9=k5.z;this.x=k8*k9-k7*lb;this.y=k7*lc-la*k9;this.z=la*lb-k8*lc;return this},projectOnVector:function(k5){var k6=k5.dot(this)/k5.lengthSq();return this.copy(k5).multiplyScalar(k6)},projectOnPlane:function(){var k6=new bf();return function k5(k7){k6.copy(this).projectOnVector(k7);return this.sub(k6)}}(),reflect:function(){var k6=new bf();return function k5(k7){return this.sub(k6.copy(k7).multiplyScalar(2*this.dot(k7)))}}(),angleTo:function(k5){var k6=this.dot(k5)/(Math.sqrt(this.lengthSq()*k5.lengthSq()));return Math.acos(dY.clamp(k6,-1,1))},distanceTo:function(k5){return Math.sqrt(this.distanceToSquared(k5))},distanceToSquared:function(k8){var k7=this.x-k8.x,k6=this.y-k8.y,k5=this.z-k8.z;return k7*k7+k6*k6+k5*k5},manhattanDistanceTo:function(k5){return Math.abs(this.x-k5.x)+Math.abs(this.y-k5.y)+Math.abs(this.z-k5.z)},setFromSpherical:function(k5){return this.setFromSphericalCoords(k5.radius,k5.phi,k5.theta)},setFromSphericalCoords:function(k5,k8,k7){var k6=Math.sin(k8)*k5;this.x=k6*Math.sin(k7);this.y=Math.cos(k8)*k5;this.z=k6*Math.cos(k7);return this},setFromCylindrical:function(k5){return this.setFromCylindricalCoords(k5.radius,k5.theta,k5.y)},setFromCylindricalCoords:function(k5,k6,k7){this.x=k5*Math.sin(k6);this.y=k7;this.z=k5*Math.cos(k6);return this},setFromMatrixPosition:function(k5){var k6=k5.elements;this.x=k6[12];this.y=k6[13];this.z=k6[14];return this},setFromMatrixScale:function(k5){var k8=this.setFromMatrixColumn(k5,0).length();var k7=this.setFromMatrixColumn(k5,1).length();var k6=this.setFromMatrixColumn(k5,2).length();this.x=k8;this.y=k7;this.z=k6;return this},setFromMatrixColumn:function(k5,k6){return this.fromArray(k5.elements,k6*4)},equals:function(k5){return((k5.x===this.x)&&(k5.y===this.y)&&(k5.z===this.z))},fromArray:function(k6,k5){if(k5===undefined){k5=0}this.x=k6[k5];this.y=k6[k5+1];this.z=k6[k5+2];return this},toArray:function(k6,k5){if(k6===undefined){k6=[]}if(k5===undefined){k5=0}k6[k5]=this.x;k6[k5+1]=this.y;k6[k5+2]=this.z;return k6},fromBufferAttribute:function(k6,k5,k7){if(k7!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: offset has been removed from .fromBufferAttribute().")}this.x=k6.getX(k5);this.y=k6.getY(k5);this.z=k6.getZ(k5);return this}});function fw(){this.elements=[1,0,0,0,1,0,0,0,1];if(arguments.length>0){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(fw.prototype,{isMatrix3:true,set:function(lc,lb,la,k9,k8,k7,k5,le,ld){var k6=this.elements;k6[0]=lc;k6[1]=k9;k6[2]=k5;k6[3]=lb;k6[4]=k8;k6[5]=le;k6[6]=la;k6[7]=k7;k6[8]=ld;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(k5){var k7=this.elements;var k6=k5.elements;k7[0]=k6[0];k7[1]=k6[1];k7[2]=k6[2];k7[3]=k6[3];k7[4]=k6[4];k7[5]=k6[5];k7[6]=k6[6];k7[7]=k6[7];k7[8]=k6[8];return this},setFromMatrix4:function(k5){var k6=k5.elements;this.set(k6[0],k6[4],k6[8],k6[1],k6[5],k6[9],k6[2],k6[6],k6[10]);return this},applyToBufferAttribute:function(){var k6=new bf();return function k5(k9){for(var k8=0,k7=k9.count;k8<k7;k8++){k6.x=k9.getX(k8);k6.y=k9.getY(k8);k6.z=k9.getZ(k8);k6.applyMatrix3(this);k9.setXYZ(k8,k6.x,k6.y,k6.z)}return k9}}(),multiply:function(k5){return this.multiplyMatrices(this,k5)},premultiply:function(k5){return this.multiplyMatrices(k5,this)},multiplyMatrices:function(lo,ln){var lm=lo.elements;var k8=ln.elements;var lc=this.elements;var lb=lm[0],la=lm[3],k9=lm[6];var li=lm[1],lh=lm[4],lg=lm[7];var lr=lm[2],lq=lm[5],lp=lm[8];var ll=k8[0],lk=k8[3],lj=k8[6];var k7=k8[1],k6=k8[4],k5=k8[7];var lf=k8[2],le=k8[5],ld=k8[8];lc[0]=lb*ll+la*k7+k9*lf;lc[3]=lb*lk+la*k6+k9*le;lc[6]=lb*lj+la*k5+k9*ld;lc[1]=li*ll+lh*k7+lg*lf;lc[4]=li*lk+lh*k6+lg*le;lc[7]=li*lj+lh*k5+lg*ld;lc[2]=lr*ll+lq*k7+lp*lf;lc[5]=lr*lk+lq*k6+lp*le;lc[8]=lr*lj+lq*k5+lp*ld;return this},multiplyScalar:function(k5){var k6=this.elements;k6[0]*=k5;k6[3]*=k5;k6[6]*=k5;k6[1]*=k5;k6[4]*=k5;k6[7]*=k5;k6[2]*=k5;k6[5]*=k5;k6[8]*=k5;return this},determinant:function(){var k5=this.elements;var le=k5[0],ld=k5[1],lc=k5[2],lb=k5[3],la=k5[4],k9=k5[5],k8=k5[6],k7=k5[7],k6=k5[8];return le*la*k6-le*k9*k7-ld*lb*k6+ld*k9*k8+lc*lb*k7-lc*la*k8},getInverse:function(lg,lb){if(lg&&lg.isMatrix4){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.")}var ln=lg.elements,lc=this.elements,lf=ln[0],lm=ln[1],k8=ln[2],le=ln[3],lk=ln[4],k7=ln[5],ld=ln[6],lj=ln[7],k6=ln[8],ll=k6*lk-k7*lj,li=k7*ld-k6*le,lh=lj*le-lk*ld,k9=lf*ll+lm*li+k8*lh;if(k9===0){var la="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(lb===true){throw new Error(la)}else{a.Logger.log(a.Logger.WARNING,la)}return this.identity()}var k5=1/k9;lc[0]=ll*k5;lc[1]=(k8*lj-k6*lm)*k5;lc[2]=(k7*lm-k8*lk)*k5;lc[3]=li*k5;lc[4]=(k6*lf-k8*ld)*k5;lc[5]=(k8*le-k7*lf)*k5;lc[6]=lh*k5;lc[7]=(lm*ld-lj*lf)*k5;lc[8]=(lk*lf-lm*le)*k5;return this},transpose:function(){var k6,k5=this.elements;k6=k5[1];k5[1]=k5[3];k5[3]=k6;k6=k5[2];k5[2]=k5[6];k5[6]=k6;k6=k5[5];k5[5]=k5[7];k5[7]=k6;return this},getNormalMatrix:function(k5){return this.setFromMatrix4(k5).getInverse(this).transpose()},transposeIntoArray:function(k6){var k5=this.elements;k6[0]=k5[0];k6[1]=k5[3];k6[2]=k5[6];k6[3]=k5[1];k6[4]=k5[4];k6[5]=k5[7];k6[6]=k5[2];k6[7]=k5[5];k6[8]=k5[8];return this},setUvTransform:function(k8,k7,lb,la,lc,k6,k5){var k9=Math.cos(lc);var ld=Math.sin(lc);this.set(lb*k9,lb*ld,-lb*(k9*k6+ld*k5)+k6+k8,-la*ld,la*k9,-la*(-ld*k6+k9*k5)+k5+k7,0,0,1)},scale:function(k7,k6){var k5=this.elements;k5[0]*=k7;k5[3]*=k7;k5[6]*=k7;k5[1]*=k6;k5[4]*=k6;k5[7]*=k6;return this},rotate:function(k5){var la=Math.cos(k5);var le=Math.sin(k5);var k6=this.elements;var ld=k6[0],lc=k6[3],lb=k6[6];var k9=k6[1],k8=k6[4],k7=k6[7];k6[0]=la*ld+le*k9;k6[3]=la*lc+le*k8;k6[6]=la*lb+le*k7;k6[1]=-le*ld+la*k9;k6[4]=-le*lc+la*k8;k6[7]=-le*lb+la*k7;return this},translate:function(k6,k5){var k7=this.elements;k7[0]+=k6*k7[2];k7[3]+=k6*k7[5];k7[6]+=k6*k7[8];k7[1]+=k5*k7[2];k7[4]+=k5*k7[5];k7[7]+=k5*k7[8];return this},equals:function(k5){var k8=this.elements;var k7=k5.elements;for(var k6=0;k6<9;k6++){if(k8[k6]!==k7[k6]){return false}}return true},fromArray:function(k7,k6){if(k6===undefined){k6=0}for(var k5=0;k5<9;k5++){this.elements[k5]=k7[k5+k6]}return this},toArray:function(k7,k6){if(k7===undefined){k7=[]}if(k6===undefined){k6=0}var k5=this.elements;k7[k6]=k5[0];k7[k6+1]=k5[1];k7[k6+2]=k5[2];k7[k6+3]=k5[3];k7[k6+4]=k5[4];k7[k6+5]=k5[5];k7[k6+6]=k5[6];k7[k6+7]=k5[7];k7[k6+8]=k5[8];return k7}});var gc;var cO={getDataURL:function(k7){var k5;if(typeof HTMLCanvasElement=="undefined"){return k7.src}else{if(k7 instanceof HTMLCanvasElement){k5=k7}else{if(gc===undefined){gc=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}gc.width=k7.width;gc.height=k7.height;var k6=gc.getContext("2d");if(k7 instanceof ImageData){k6.putImageData(k7,0,0)}else{k6.drawImage(k7,0,0,k7.width,k7.height)}k5=gc}}if(k5.width>2048||k5.height>2048){return k5.toDataURL("image/jpeg",0.6)}else{return k5.toDataURL("image/png")}}};var dv=0;function eq(k9,k6,lb,la,le,k7,ld,lc,k5,k8){Object.defineProperty(this,"id",{value:dv++});this.uuid=dY.generateUUID();this.name="";this.image=k9!==undefined?k9:eq.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=k6!==undefined?k6:eq.DEFAULT_MAPPING;this.wrapS=lb!==undefined?lb:g7;this.wrapT=la!==undefined?la:g7;this.magFilter=le!==undefined?le:j2;this.minFilter=k7!==undefined?k7:ap;this.anisotropy=k5!==undefined?k5:1;this.format=ld!==undefined?ld:gt;this.type=lc!==undefined?lc:iv;this.offset=new bg(0,0);this.repeat=new bg(1,1);this.center=new bg(0,0);this.rotation=0;this.matrixAutoUpdate=true;this.matrix=new fw();this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this.encoding=k8!==undefined?k8:fq;this.version=0;this.onUpdate=null}eq.DEFAULT_IMAGE=undefined;eq.DEFAULT_MAPPING=hU;eq.prototype=Object.assign(Object.create(aQ.prototype),{constructor:eq,isTexture:true,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.name=k5.name;this.image=k5.image;this.mipmaps=k5.mipmaps.slice(0);this.mapping=k5.mapping;this.wrapS=k5.wrapS;this.wrapT=k5.wrapT;this.magFilter=k5.magFilter;this.minFilter=k5.minFilter;this.anisotropy=k5.anisotropy;this.format=k5.format;this.type=k5.type;this.offset.copy(k5.offset);this.repeat.copy(k5.repeat);this.center.copy(k5.center);this.rotation=k5.rotation;this.matrixAutoUpdate=k5.matrixAutoUpdate;this.matrix.copy(k5.matrix);this.generateMipmaps=k5.generateMipmaps;this.premultiplyAlpha=k5.premultiplyAlpha;this.flipY=k5.flipY;this.unpackAlignment=k5.unpackAlignment;this.encoding=k5.encoding;return this},toJSON:function(lb){var k9=(lb===undefined||typeof lb==="string");if(!k9&&lb.textures[this.uuid]!==undefined){return lb.textures[this.uuid]}var k6={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==undefined){var la=this.image;if(la.uuid===undefined){la.uuid=dY.generateUUID()}if(!k9&&lb.images[la.uuid]===undefined){var k7;if(Array.isArray(la)){k7=[];for(var k8=0,k5=la.length;k8<k5;k8++){k7.push(cO.getDataURL(la[k8]))}}else{k7=cO.getDataURL(la)}lb.images[la.uuid]={uuid:la.uuid,url:k7}}k6.image=la.uuid}if(!k9){lb.textures[this.uuid]=k6}return k6},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(k5){if(this.mapping!==hU){return k5}k5.applyMatrix3(this.matrix);if(k5.x<0||k5.x>1){switch(this.wrapS){case co:k5.x=k5.x-Math.floor(k5.x);break;case g7:k5.x=k5.x<0?0:1;break;case jV:if(Math.abs(Math.floor(k5.x)%2)===1){k5.x=Math.ceil(k5.x)-k5.x}else{k5.x=k5.x-Math.floor(k5.x)}break}}if(k5.y<0||k5.y>1){switch(this.wrapT){case co:k5.y=k5.y-Math.floor(k5.y);break;case g7:k5.y=k5.y<0?0:1;break;case jV:if(Math.abs(Math.floor(k5.y)%2)===1){k5.y=Math.ceil(k5.y)-k5.y}else{k5.y=k5.y-Math.floor(k5.y)}break}}if(this.flipY){k5.y=1-k5.y}return k5}});Object.defineProperty(eq.prototype,"needsUpdate",{set:function(k5){if(k5===true){this.version++}}});function bd(k5,k8,k7,k6){this.x=k5||0;this.y=k8||0;this.z=k7||0;this.w=(k6!==undefined)?k6:1}Object.assign(bd.prototype,{isVector4:true,set:function(k5,k8,k7,k6){this.x=k5;this.y=k8;this.z=k7;this.w=k6;return this},setScalar:function(k5){this.x=k5;this.y=k5;this.z=k5;this.w=k5;return this},setX:function(k5){this.x=k5;return this},setY:function(k5){this.y=k5;return this},setZ:function(k5){this.z=k5;return this},setW:function(k5){this.w=k5;return this},setComponent:function(k5,k6){switch(k5){case 0:this.x=k6;break;case 1:this.y=k6;break;case 2:this.z=k6;break;case 3:this.w=k6;break;default:throw new Error("index is out of range: "+k5)}return this},getComponent:function(k5){switch(k5){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+k5)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(k5){this.x=k5.x;this.y=k5.y;this.z=k5.z;this.w=(k5.w!==undefined)?k5.w:1;return this},add:function(k6,k5){if(k5!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(k6,k5)}this.x+=k6.x;this.y+=k6.y;this.z+=k6.z;this.w+=k6.w;return this},addScalar:function(k5){this.x+=k5;this.y+=k5;this.z+=k5;this.w+=k5;return this},addVectors:function(k6,k5){this.x=k6.x+k5.x;this.y=k6.y+k5.y;this.z=k6.z+k5.z;this.w=k6.w+k5.w;return this},addScaledVector:function(k5,k6){this.x+=k5.x*k6;this.y+=k5.y*k6;this.z+=k5.z*k6;this.w+=k5.w*k6;return this},sub:function(k6,k5){if(k5!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(k6,k5)}this.x-=k6.x;this.y-=k6.y;this.z-=k6.z;this.w-=k6.w;return this},subScalar:function(k5){this.x-=k5;this.y-=k5;this.z-=k5;this.w-=k5;return this},subVectors:function(k6,k5){this.x=k6.x-k5.x;this.y=k6.y-k5.y;this.z=k6.z-k5.z;this.w=k6.w-k5.w;return this},multiplyScalar:function(k5){this.x*=k5;this.y*=k5;this.z*=k5;this.w*=k5;return this},applyMatrix4:function(k6){var k5=this.x,la=this.y,k9=this.z,k7=this.w;var k8=k6.elements;this.x=k8[0]*k5+k8[4]*la+k8[8]*k9+k8[12]*k7;this.y=k8[1]*k5+k8[5]*la+k8[9]*k9+k8[13]*k7;this.z=k8[2]*k5+k8[6]*la+k8[10]*k9+k8[14]*k7;this.w=k8[3]*k5+k8[7]*la+k8[11]*k9+k8[15]*k7;return this},divideScalar:function(k5){return this.multiplyScalar(1/k5)},setAxisAngleFromQuaternion:function(k6){this.w=2*Math.acos(k6.w);var k5=Math.sqrt(1-k6.w*k6.w);if(k5<0.0001){this.x=1;this.y=0;this.z=0}else{this.x=k6.x/k5;this.y=k6.y/k5;this.z=k6.z/k5}return this},setAxisAngleFromRotationMatrix:function(lm){var ln,le,ld,lc,ls=0.01,lf=0.1,lb=lm.elements,lr=lb[0],lp=lb[4],lo=lb[8],k9=lb[1],k7=lb[5],k5=lb[9],ll=lb[2],lj=lb[6],lh=lb[10];if((Math.abs(lp-k9)<ls)&&(Math.abs(lo-ll)<ls)&&(Math.abs(k5-lj)<ls)){if((Math.abs(lp+k9)<lf)&&(Math.abs(lo+ll)<lf)&&(Math.abs(k5+lj)<lf)&&(Math.abs(lr+k7+lh-3)<lf)){this.set(1,0,0,0);return this}ln=Math.PI;var la=(lr+1)/2;var lk=(k7+1)/2;var lq=(lh+1)/2;var k8=(lp+k9)/4;var k6=(lo+ll)/4;var li=(k5+lj)/4;if((la>lk)&&(la>lq)){if(la<ls){le=0;ld=0.707106781;lc=0.707106781}else{le=Math.sqrt(la);ld=k8/le;lc=k6/le}}else{if(lk>lq){if(lk<ls){le=0.707106781;ld=0;lc=0.707106781}else{ld=Math.sqrt(lk);le=k8/ld;lc=li/ld}}else{if(lq<ls){le=0.707106781;ld=0.707106781;lc=0}else{lc=Math.sqrt(lq);le=k6/lc;ld=li/lc}}}this.set(le,ld,lc,ln);return this}var lg=Math.sqrt((lj-k5)*(lj-k5)+(lo-ll)*(lo-ll)+(k9-lp)*(k9-lp));if(Math.abs(lg)<0.001){lg=1}this.x=(lj-k5)/lg;this.y=(lo-ll)/lg;this.z=(k9-lp)/lg;this.w=Math.acos((lr+k7+lh-1)/2);return this},min:function(k5){this.x=Math.min(this.x,k5.x);this.y=Math.min(this.y,k5.y);this.z=Math.min(this.z,k5.z);this.w=Math.min(this.w,k5.w);return this},max:function(k5){this.x=Math.max(this.x,k5.x);this.y=Math.max(this.y,k5.y);this.z=Math.max(this.z,k5.z);this.w=Math.max(this.w,k5.w);return this},clamp:function(k6,k5){this.x=Math.max(k6.x,Math.min(k5.x,this.x));this.y=Math.max(k6.y,Math.min(k5.y,this.y));this.z=Math.max(k6.z,Math.min(k5.z,this.z));this.w=Math.max(k6.w,Math.min(k5.w,this.w));return this},clampScalar:function(){var k7,k6;return function k5(k8,k9){if(k7===undefined){k7=new bd();k6=new bd()}k7.set(k8,k8,k8,k8);k6.set(k9,k9,k9,k9);return this.clamp(k7,k6)}}(),clampLength:function(k6,k5){var k7=this.length();return this.divideScalar(k7||1).multiplyScalar(Math.max(k6,Math.min(k5,k7)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=(this.x<0)?Math.ceil(this.x):Math.floor(this.x);this.y=(this.y<0)?Math.ceil(this.y):Math.floor(this.y);this.z=(this.z<0)?Math.ceil(this.z):Math.floor(this.z);this.w=(this.w<0)?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(k5){return this.x*k5.x+this.y*k5.y+this.z*k5.z+this.w*k5.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(k5){return this.normalize().multiplyScalar(k5)},lerp:function(k5,k6){this.x+=(k5.x-this.x)*k6;this.y+=(k5.y-this.y)*k6;this.z+=(k5.z-this.z)*k6;this.w+=(k5.w-this.w)*k6;return this},lerpVectors:function(k7,k6,k5){return this.subVectors(k6,k7).multiplyScalar(k5).add(k7)},equals:function(k5){return((k5.x===this.x)&&(k5.y===this.y)&&(k5.z===this.z)&&(k5.w===this.w))},fromArray:function(k6,k5){if(k5===undefined){k5=0}this.x=k6[k5];this.y=k6[k5+1];this.z=k6[k5+2];this.w=k6[k5+3];return this},toArray:function(k6,k5){if(k6===undefined){k6=[]}if(k5===undefined){k5=0}k6[k5]=this.x;k6[k5+1]=this.y;k6[k5+2]=this.z;k6[k5+3]=this.w;return k6},fromBufferAttribute:function(k6,k5,k7){if(k7!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.Vector4: offset has been removed from .fromBufferAttribute().")}this.x=k6.getX(k5);this.y=k6.getY(k5);this.z=k6.getZ(k5);this.w=k6.getW(k5);return this}});function e3(k7,k5,k6){this.width=k7;this.height=k5;this.scissor=new bd(0,0,k7,k5);this.scissorTest=false;this.viewport=new bd(0,0,k7,k5);k6=k6||{};this.texture=new eq(undefined,undefined,k6.wrapS,k6.wrapT,k6.magFilter,k6.minFilter,k6.format,k6.type,k6.anisotropy,k6.encoding);this.texture.generateMipmaps=k6.generateMipmaps!==undefined?k6.generateMipmaps:false;this.texture.minFilter=k6.minFilter!==undefined?k6.minFilter:j2;this.depthBuffer=k6.depthBuffer!==undefined?k6.depthBuffer:true;this.stencilBuffer=k6.stencilBuffer!==undefined?k6.stencilBuffer:true;this.depthTexture=k6.depthTexture!==undefined?k6.depthTexture:null}e3.prototype=Object.assign(Object.create(aQ.prototype),{constructor:e3,isWebGLRenderTarget:true,setSize:function(k6,k5){if(this.width!==k6||this.height!==k5){this.width=k6;this.height=k5;this.dispose()}this.viewport.set(0,0,k6,k5);this.scissor.set(0,0,k6,k5)},clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.width=k5.width;this.height=k5.height;this.viewport.copy(k5.viewport);this.texture=k5.texture.clone();this.depthBuffer=k5.depthBuffer;this.stencilBuffer=k5.stencilBuffer;this.depthTexture=k5.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function jr(k7,k5,k6){e3.call(this,k7,k5,k6);this.samples=4}jr.prototype=Object.assign(Object.create(e3.prototype),{constructor:jr,isWebGLMultisampleRenderTarget:true,copy:function(k5){e3.prototype.copy.call(this,k5);this.samples=k5.samples;return this}});function hq(k7,k5,k6){e3.call(this,k7,k5,k6)}hq.prototype=Object.create(e3.prototype);hq.prototype.constructor=hq;hq.prototype.isWebGLRenderTargetCube=true;function t(lb,k8,lg,le,ld,k6,lc,la,lf,k7,k5,k9){eq.call(this,null,k6,lc,la,lf,k7,le,ld,k5,k9);this.image={data:lb,width:k8,height:lg};this.magFilter=lf!==undefined?lf:da;this.minFilter=k7!==undefined?k7:da;this.generateMipmaps=false;this.flipY=false;this.unpackAlignment=1}t.prototype=Object.create(eq.prototype);t.prototype.constructor=t;t.prototype.isDataTexture=true;function aO(k6,k5){this.min=(k6!==undefined)?k6:new bf(+Infinity,+Infinity,+Infinity);this.max=(k5!==undefined)?k5:new bf(-Infinity,-Infinity,-Infinity)}Object.assign(aO.prototype,{isBox3:true,set:function(k6,k5){this.min.copy(k6);this.max.copy(k5);return this},setFromArray:function(lc){var la=+Infinity;var k8=+Infinity;var k7=+Infinity;var k6=-Infinity;var k5=-Infinity;var lg=-Infinity;for(var lb=0,k9=lc.length;lb<k9;lb+=3){var lf=lc[lb];var le=lc[lb+1];var ld=lc[lb+2];if(lf<la){la=lf}if(le<k8){k8=le}if(ld<k7){k7=ld}if(lf>k6){k6=lf}if(le>k5){k5=le}if(ld>lg){lg=ld}}this.min.set(la,k8,k7);this.max.set(k6,k5,lg);return this},setFromBufferAttribute:function(k7){var lb=+Infinity;var k9=+Infinity;var k8=+Infinity;var k6=-Infinity;var k5=-Infinity;var lg=-Infinity;for(var lc=0,la=k7.count;lc<la;lc++){var lf=k7.getX(lc);var le=k7.getY(lc);var ld=k7.getZ(lc);if(lf<lb){lb=lf}if(le<k9){k9=le}if(ld<k8){k8=ld}if(lf>k6){k6=lf}if(le>k5){k5=le}if(ld>lg){lg=ld}}this.min.set(lb,k9,k8);this.max.set(k6,k5,lg);return this},setFromPoints:function(k7){this.makeEmpty();for(var k6=0,k5=k7.length;k6<k5;k6++){this.expandByPoint(k7[k6])}return this},setFromCenterAndSize:function(){var k6=new bf();return function k5(k7,k9){var k8=k6.copy(k9).multiplyScalar(0.5);this.min.copy(k7).sub(k8);this.max.copy(k7).add(k8);return this}}(),setFromObject:function(k5){this.makeEmpty();return this.expandByObject(k5)},clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.min.copy(k5.min);this.max.copy(k5.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=+Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return(this.max.x<this.min.x)||(this.max.y<this.min.y)||(this.max.z<this.min.z)},getCenter:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .getCenter() target is now required");k5=new bf()}return this.isEmpty()?k5.set(0,0,0):k5.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .getSize() target is now required");k5=new bf()}return this.isEmpty()?k5.set(0,0,0):k5.subVectors(this.max,this.min)},expandByPoint:function(k5){this.min.min(k5);this.max.max(k5);return this},expandByVector:function(k5){this.min.sub(k5);this.max.add(k5);return this},expandByScalar:function(k5){this.min.addScalar(-k5);this.max.addScalar(k5);return this},expandByObject:function(){var k8,k7,k5;var la=new bf();function k9(ld){var le=ld.geometry;if(le!==undefined){if(le.isGeometry){var lb=le.vertices;for(k7=0,k5=lb.length;k7<k5;k7++){la.copy(lb[k7]);la.applyMatrix4(ld.matrixWorld);k8.expandByPoint(la)}}else{if(le.isBufferGeometry){var lc=le.attributes.position;if(lc!==undefined){for(k7=0,k5=lc.count;k7<k5;k7++){la.fromBufferAttribute(lc,k7).applyMatrix4(ld.matrixWorld);k8.expandByPoint(la)}}}}}}return function k6(lb){k8=this;lb.updateMatrixWorld(true);lb.traverse(k9);return this}}(),containsPoint:function(k5){return k5.x<this.min.x||k5.x>this.max.x||k5.y<this.min.y||k5.y>this.max.y||k5.z<this.min.z||k5.z>this.max.z?false:true},containsBox:function(k5){return this.min.x<=k5.min.x&&k5.max.x<=this.max.x&&this.min.y<=k5.min.y&&k5.max.y<=this.max.y&&this.min.z<=k5.min.z&&k5.max.z<=this.max.z},getParameter:function(k5,k6){if(k6===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .getParameter() target is now required");k6=new bf()}return k6.set((k5.x-this.min.x)/(this.max.x-this.min.x),(k5.y-this.min.y)/(this.max.y-this.min.y),(k5.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(k5){return k5.max.x<this.min.x||k5.min.x>this.max.x||k5.max.y<this.min.y||k5.min.y>this.max.y||k5.max.z<this.min.z||k5.min.z>this.max.z?false:true},intersectsSphere:(function(){var k5=new bf();return function k6(k7){this.clampPoint(k7.center,k5);return k5.distanceToSquared(k7.center)<=(k7.radius*k7.radius)}})(),intersectsPlane:function(k6){var k7,k5;if(k6.normal.x>0){k7=k6.normal.x*this.min.x;k5=k6.normal.x*this.max.x}else{k7=k6.normal.x*this.max.x;k5=k6.normal.x*this.min.x}if(k6.normal.y>0){k7+=k6.normal.y*this.min.y;k5+=k6.normal.y*this.max.y}else{k7+=k6.normal.y*this.max.y;k5+=k6.normal.y*this.min.y}if(k6.normal.z>0){k7+=k6.normal.z*this.min.z;k5+=k6.normal.z*this.max.z}else{k7+=k6.normal.z*this.max.z;k5+=k6.normal.z*this.min.z}return(k7<=-k6.constant&&k5>=-k6.constant)},intersectsTriangle:(function(){var lg=new bf();var lf=new bf();var ld=new bf();var k9=new bf();var k8=new bf();var k7=new bf();var le=new bf();var k5=new bf();var lc=new bf();var la=new bf();function lb(ll){var li,lh;for(li=0,lh=ll.length-3;li<=lh;li+=3){le.fromArray(ll,li);var lj=lc.x*Math.abs(le.x)+lc.y*Math.abs(le.y)+lc.z*Math.abs(le.z);var ln=lg.dot(le);var lm=lf.dot(le);var lk=ld.dot(le);if(Math.max(-Math.max(ln,lm,lk),Math.min(ln,lm,lk))>lj){return false}}return true}return function k6(li){if(this.isEmpty()){return false}this.getCenter(k5);lc.subVectors(this.max,k5);lg.subVectors(li.a,k5);lf.subVectors(li.b,k5);ld.subVectors(li.c,k5);k9.subVectors(lf,lg);k8.subVectors(ld,lf);k7.subVectors(lg,ld);var lh=[0,-k9.z,k9.y,0,-k8.z,k8.y,0,-k7.z,k7.y,k9.z,0,-k9.x,k8.z,0,-k8.x,k7.z,0,-k7.x,-k9.y,k9.x,0,-k8.y,k8.x,0,-k7.y,k7.x,0];if(!lb(lh)){return false}lh=[1,0,0,0,1,0,0,0,1];if(!lb(lh)){return false}la.crossVectors(k9,k8);lh=[la.x,la.y,la.z];return lb(lh)}})(),clampPoint:function(k5,k6){if(k6===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .clampPoint() target is now required");k6=new bf()}return k6.copy(k5).clamp(this.min,this.max)},distanceToPoint:function(){var k6=new bf();return function k5(k7){var k8=k6.copy(k7).clamp(this.min,this.max);return k8.sub(k7).length()}}(),getBoundingSphere:function(){var k6=new bf();return function k5(k7){if(k7===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .getBoundingSphere() target is now required");k7=new d0()}this.getCenter(k7.center);k7.radius=this.getSize(k6).length()*0.5;return k7}}(),intersect:function(k5){this.min.max(k5.min);this.max.min(k5.max);if(this.isEmpty()){this.makeEmpty()}return this},union:function(k5){this.min.min(k5.min);this.max.max(k5.max);return this},applyMatrix4:function(){var k5=[new bf(),new bf(),new bf(),new bf(),new bf(),new bf(),new bf(),new bf()];return function k6(k7){if(this.isEmpty()){return this}k5[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(k7);k5[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(k7);k5[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(k7);k5[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(k7);k5[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(k7);k5[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(k7);k5[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(k7);k5[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(k7);this.setFromPoints(k5);return this}}(),translate:function(k5){this.min.add(k5);this.max.add(k5);return this},equals:function(k5){return k5.min.equals(this.min)&&k5.max.equals(this.max)}});function d0(k6,k5){this.center=(k6!==undefined)?k6:new bf();this.radius=(k5!==undefined)?k5:0}Object.assign(d0.prototype,{set:function(k6,k5){this.center.copy(k6);this.radius=k5;return this},setFromPoints:function(){var k5=new aO();return function k6(lb,lc){var k7=this.center;if(lc!==undefined){k7.copy(lc)}else{k5.setFromPoints(lb).getCenter(k7)}var k8=0;for(var la=0,k9=lb.length;la<k9;la++){k8=Math.max(k8,k7.distanceToSquared(lb[la]))}this.radius=Math.sqrt(k8);return this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.center.copy(k5.center);this.radius=k5.radius;return this},empty:function(){return(this.radius<=0)},containsPoint:function(k5){return(k5.distanceToSquared(this.center)<=(this.radius*this.radius))},distanceToPoint:function(k5){return(k5.distanceTo(this.center)-this.radius)},intersectsSphere:function(k5){var k6=this.radius+k5.radius;return k5.center.distanceToSquared(this.center)<=(k6*k6)},intersectsBox:function(k5){return k5.intersectsSphere(this)},intersectsPlane:function(k5){return Math.abs(k5.distanceToPoint(this.center))<=this.radius},clampPoint:function(k5,k7){var k6=this.center.distanceToSquared(k5);if(k7===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Sphere: .clampPoint() target is now required");k7=new bf()}k7.copy(k5);if(k6>(this.radius*this.radius)){k7.sub(this.center).normalize();k7.multiplyScalar(this.radius).add(this.center)}return k7},getBoundingBox:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Sphere: .getBoundingBox() target is now required");k5=new aO()}k5.set(this.center,this.center);k5.expandByScalar(this.radius);return k5},applyMatrix4:function(k5){this.center.applyMatrix4(k5);this.radius=this.radius*k5.getMaxScaleOnAxis();return this},translate:function(k5){this.center.add(k5);return this},equals:function(k5){return k5.center.equals(this.center)&&(k5.radius===this.radius)}});function fA(k6,k5){this.normal=(k6!==undefined)?k6:new bf(1,0,0);this.constant=(k5!==undefined)?k5:0}Object.assign(fA.prototype,{set:function(k6,k5){this.normal.copy(k6);this.constant=k5;return this},setComponents:function(k5,k8,k7,k6){this.normal.set(k5,k8,k7);this.constant=k6;return this},setFromNormalAndCoplanarPoint:function(k6,k5){this.normal.copy(k6);this.constant=-k5.dot(this.normal);return this},setFromCoplanarPoints:function(){var k7=new bf();var k6=new bf();return function k5(k9,k8,lb){var la=k7.subVectors(lb,k8).cross(k6.subVectors(k9,k8)).normalize();this.setFromNormalAndCoplanarPoint(la,k9);return this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.normal.copy(k5.normal);this.constant=k5.constant;return this},normalize:function(){var k5=1/this.normal.length();this.normal.multiplyScalar(k5);this.constant*=k5;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(k5){return this.normal.dot(k5)+this.constant},distanceToSphere:function(k5){return this.distanceToPoint(k5.center)-k5.radius},projectPoint:function(k5,k6){if(k6===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Plane: .projectPoint() target is now required");k6=new bf()}return k6.copy(this.normal).multiplyScalar(-this.distanceToPoint(k5)).add(k5)},intersectLine:function(){var k6=new bf();return function k5(k7,la){if(la===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Plane: .intersectLine() target is now required");la=new bf()}var k9=k7.delta(k6);var lb=this.normal.dot(k9);if(lb===0){if(this.distanceToPoint(k7.start)===0){return la.copy(k7.start)}return undefined}var k8=-(k7.start.dot(this.normal)+this.constant)/lb;if(k8<0||k8>1){return undefined}return la.copy(k9).multiplyScalar(k8).add(k7.start)}}(),intersectsLine:function(k5){var k7=this.distanceToPoint(k5.start);var k6=this.distanceToPoint(k5.end);return(k7<0&&k6>0)||(k6<0&&k7>0)},intersectsBox:function(k5){return k5.intersectsPlane(this)},intersectsSphere:function(k5){return k5.intersectsPlane(this)},coplanarPoint:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Plane: .coplanarPoint() target is now required");k5=new bf()}return k5.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var k7=new bf();var k5=new fw();return function k6(k9,la){var lc=la||k5.getNormalMatrix(k9);var k8=this.coplanarPoint(k7).applyMatrix4(k9);var lb=this.normal.applyMatrix3(lc).normalize();this.constant=-k8.dot(lb);return this}}(),translate:function(k5){this.constant-=k5.dot(this.normal);return this},equals:function(k5){return k5.normal.equals(this.normal)&&(k5.constant===this.constant)}});function hA(la,k9,k8,k7,k6,k5){this.planes=[(la!==undefined)?la:new fA(),(k9!==undefined)?k9:new fA(),(k8!==undefined)?k8:new fA(),(k7!==undefined)?k7:new fA(),(k6!==undefined)?k6:new fA(),(k5!==undefined)?k5:new fA()]}Object.assign(hA.prototype,{set:function(lb,la,k9,k8,k7,k6){var k5=this.planes;k5[0].copy(lb);k5[1].copy(la);k5[2].copy(k9);k5[3].copy(k8);k5[4].copy(k7);k5[5].copy(k6);return this},clone:function(){return new this.constructor().copy(this)},copy:function(k7){var k5=this.planes;for(var k6=0;k6<6;k6++){k5[k6].copy(k7.planes[k6])}return this},setFromMatrix:function(li){var lc=this.planes;var ln=li.elements;var lg=ln[0],le=ln[1],ld=ln[2],lb=ln[3];var la=ln[4],k9=ln[5],k8=ln[6],k7=ln[7];var k6=ln[8],k5=ln[9],lm=ln[10],ll=ln[11];var lk=ln[12],lj=ln[13],lh=ln[14],lf=ln[15];lc[0].setComponents(lb-lg,k7-la,ll-k6,lf-lk).normalize();lc[1].setComponents(lb+lg,k7+la,ll+k6,lf+lk).normalize();lc[2].setComponents(lb+le,k7+k9,ll+k5,lf+lj).normalize();lc[3].setComponents(lb-le,k7-k9,ll-k5,lf-lj).normalize();lc[4].setComponents(lb-ld,k7-k8,ll-lm,lf-lh).normalize();lc[5].setComponents(lb+ld,k7+k8,ll+lm,lf+lh).normalize();return this},intersectsObject:function(){var k6=new d0();return function k5(k7){var k8=k7.geometry;if(k8.boundingSphere===null){k8.computeBoundingSphere()}k6.copy(k8.boundingSphere).applyMatrix4(k7.matrixWorld);return this.intersectsSphere(k6)}}(),intersectsSprite:function(){var k5=new d0();return function k6(k7){k5.center.set(0,0,0);k5.radius=0.7071067811865476;k5.applyMatrix4(k7.matrixWorld);return this.intersectsSphere(k5)}}(),intersectsSphere:function(k7){var k8=this.planes;var k5=k7.center;var k6=-k7.radius;for(var k9=0;k9<6;k9++){var la=k8[k9].distanceToPoint(k5);if(la<k6){return false}}return true},intersectsBox:function(){var k6=new bf();return function k5(la){var k8=this.planes;for(var k9=0;k9<6;k9++){var k7=k8[k9];k6.x=k7.normal.x>0?la.max.x:la.min.x;k6.y=k7.normal.y>0?la.max.y:la.min.y;k6.z=k7.normal.z>0?la.max.z:la.min.z;if(k7.distanceToPoint(k6)<0){return false}}return true}}(),containsPoint:function(k5){var k6=this.planes;for(var k7=0;k7<6;k7++){if(k6[k7].distanceToPoint(k5)<0){return false}}return true}});var a3="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif";var f8="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif";var jH="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif";var cL="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif";var eB="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";var g6="vec3 transformed = vec3( position );";var iA="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif";var dA="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}";var eU="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif";var kK="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif";var f5="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif";var eJ="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif";var eF="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif";var b4="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";var je="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var ib="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var a5="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";var ey="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}";var eh="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif";var al="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif";var aZ="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif";var bq="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif";var gU="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif";var dH="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif";var km="gl_FragColor = linearToOutputTexel( gl_FragColor );";var ip="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}";var hV="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif";var aE="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif";var js="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif";var hW="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif";var T="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif";var kn="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif";var az="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif";var bS="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";var gf="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif";var kL="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif";var dC="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";var iV="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif";var dl="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif";var fP="#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif";var at="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;";var il="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)";var b8="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif";var ce="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}";var fU="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif";var aA="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif";var gv="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif";var aJ="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif";var kq="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif";var eQ="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif";var bc="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif";var dV="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif";var gZ="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif";var cI="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif";var eu="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif";var e5="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif";var dE="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";var hc="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif";var ab="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";var cC="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif";var e8="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif";var a2="#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif";var hl="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif";var cz="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}";var fd="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif";var cb="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;";var iS="#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif";var ci="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif";var hn="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif";var gH="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";var kT="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif";var aw="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif";var A="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif";var j4="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}";var jw="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";var iL="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif";var gC="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif";var hI="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif";var hh="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";var ep="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";var ea="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif";var gF="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}";var jF="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";var bC="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif";var jN="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif";var e7="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";var er="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";var gP="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";var cJ="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif";var eR="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}";var ic="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}";var dJ="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}";var g5="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}";var b9="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}";var e1="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}";var di="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}";var gz="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}";var eV="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}";var ih="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}";var h8="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var o="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";var j="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var cx="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}";var dF="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var gX="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var hQ="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var c="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}";var kl="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var bF="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var hm="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var ky="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var hN="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}";var k3="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}";var eH="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var h0="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}";var kF="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}";var bZ="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var fY="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var jc="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";var fl={alphamap_fragment:a3,alphamap_pars_fragment:f8,alphatest_fragment:jH,aomap_fragment:cL,aomap_pars_fragment:eB,begin_vertex:g6,beginnormal_vertex:iA,bsdfs:dA,bumpmap_pars_fragment:eU,clipping_planes_fragment:kK,clipping_planes_pars_fragment:f5,clipping_planes_pars_vertex:eJ,clipping_planes_vertex:eF,color_fragment:b4,color_pars_fragment:je,color_pars_vertex:ib,color_vertex:a5,common:ey,cube_uv_reflection_fragment:eh,defaultnormal_vertex:al,displacementmap_pars_vertex:aZ,displacementmap_vertex:bq,emissivemap_fragment:gU,emissivemap_pars_fragment:dH,encodings_fragment:km,encodings_pars_fragment:ip,envmap_fragment:hV,envmap_pars_fragment:aE,envmap_pars_vertex:js,envmap_physical_pars_fragment:fP,envmap_vertex:hW,fog_vertex:T,fog_pars_vertex:kn,fog_fragment:az,fog_pars_fragment:bS,gradientmap_pars_fragment:gf,lightmap_fragment:kL,lightmap_pars_fragment:dC,lights_lambert_vertex:iV,lights_pars_begin:dl,lights_phong_fragment:at,lights_phong_pars_fragment:il,lights_physical_fragment:b8,lights_physical_pars_fragment:ce,lights_fragment_begin:fU,lights_fragment_maps:aA,lights_fragment_end:gv,logdepthbuf_fragment:aJ,logdepthbuf_pars_fragment:kq,logdepthbuf_pars_vertex:eQ,logdepthbuf_vertex:bc,map_fragment:dV,map_pars_fragment:gZ,map_particle_fragment:cI,map_particle_pars_fragment:eu,metalnessmap_fragment:e5,metalnessmap_pars_fragment:dE,morphnormal_vertex:hc,morphtarget_pars_vertex:ab,morphtarget_vertex:cC,normal_fragment_begin:e8,normal_fragment_maps:a2,normalmap_pars_fragment:hl,packing:cz,premultiplied_alpha_fragment:fd,project_vertex:cb,dithering_fragment:iS,dithering_pars_fragment:ci,roughnessmap_fragment:hn,roughnessmap_pars_fragment:gH,shadowmap_pars_fragment:kT,shadowmap_pars_vertex:aw,shadowmap_vertex:A,shadowmask_pars_fragment:j4,skinbase_vertex:jw,skinning_pars_vertex:iL,skinning_vertex:gC,skinnormal_vertex:hI,specularmap_fragment:hh,specularmap_pars_fragment:ep,tonemapping_fragment:ea,tonemapping_pars_fragment:gF,uv_pars_fragment:jF,uv_pars_vertex:bC,uv_vertex:jN,uv2_pars_fragment:e7,uv2_pars_vertex:er,uv2_vertex:gP,worldpos_vertex:cJ,background_frag:eR,background_vert:ic,cube_frag:dJ,cube_vert:g5,depth_frag:b9,depth_vert:e1,distanceRGBA_frag:di,distanceRGBA_vert:gz,equirect_frag:eV,equirect_vert:ih,linedashed_frag:h8,linedashed_vert:o,meshbasic_frag:j,meshbasic_vert:cx,meshlambert_frag:dF,meshlambert_vert:gX,meshmatcap_frag:hQ,meshmatcap_vert:c,meshphong_frag:kl,meshphong_vert:bF,meshphysical_frag:hm,meshphysical_vert:ky,normal_frag:hN,normal_vert:k3,points_frag:eH,points_vert:h0,shadow_frag:kF,shadow_vert:bZ,sprite_frag:fY,sprite_vert:jc};function ke(k8){var k9={};for(var k5 in k8){k9[k5]={};for(var k7 in k8[k5]){var k6=k8[k5][k7];if(k6&&(k6.isColor||k6.isMatrix3||k6.isMatrix4||k6.isVector2||k6.isVector3||k6.isVector4||k6.isTexture)){k9[k5][k7]=k6.clone()}else{if(Array.isArray(k6)){k9[k5][k7]=k6.slice()}else{k9[k5][k7]=k6}}}}return k9}function i2(k6){var k5={};for(var k7=0;k7<k6.length;k7++){var k8=ke(k6[k7]);for(var k9 in k8){k5[k9]=k8[k9]}}return k5}var bU={clone:ke,merge:i2};var cp={"aliceblue":15792383,"antiquewhite":16444375,"aqua":65535,"aquamarine":8388564,"azure":15794175,"beige":16119260,"bisque":16770244,"black":0,"blanchedalmond":16772045,"blue":255,"blueviolet":9055202,"brown":10824234,"burlywood":14596231,"cadetblue":6266528,"chartreuse":8388352,"chocolate":13789470,"coral":16744272,"cornflowerblue":6591981,"cornsilk":16775388,"crimson":14423100,"cyan":65535,"darkblue":139,"darkcyan":35723,"darkgoldenrod":12092939,"darkgray":11119017,"darkgreen":25600,"darkgrey":11119017,"darkkhaki":12433259,"darkmagenta":9109643,"darkolivegreen":5597999,"darkorange":16747520,"darkorchid":10040012,"darkred":9109504,"darksalmon":15308410,"darkseagreen":9419919,"darkslateblue":4734347,"darkslategray":3100495,"darkslategrey":3100495,"darkturquoise":52945,"darkviolet":9699539,"deeppink":16716947,"deepskyblue":49151,"dimgray":6908265,"dimgrey":6908265,"dodgerblue":2003199,"firebrick":11674146,"floralwhite":16775920,"forestgreen":2263842,"fuchsia":16711935,"gainsboro":14474460,"ghostwhite":16316671,"gold":16766720,"goldenrod":14329120,"gray":8421504,"green":32768,"greenyellow":11403055,"grey":8421504,"honeydew":15794160,"hotpink":16738740,"indianred":13458524,"indigo":4915330,"ivory":16777200,"khaki":15787660,"lavender":15132410,"lavenderblush":16773365,"lawngreen":8190976,"lemonchiffon":16775885,"lightblue":11393254,"lightcoral":15761536,"lightcyan":14745599,"lightgoldenrodyellow":16448210,"lightgray":13882323,"lightgreen":9498256,"lightgrey":13882323,"lightpink":16758465,"lightsalmon":16752762,"lightseagreen":2142890,"lightskyblue":8900346,"lightslategray":7833753,"lightslategrey":7833753,"lightsteelblue":11584734,"lightyellow":16777184,"lime":65280,"limegreen":3329330,"linen":16445670,"magenta":16711935,"maroon":8388608,"mediumaquamarine":6737322,"mediumblue":205,"mediumorchid":12211667,"mediumpurple":9662683,"mediumseagreen":3978097,"mediumslateblue":8087790,"mediumspringgreen":64154,"mediumturquoise":4772300,"mediumvioletred":13047173,"midnightblue":1644912,"mintcream":16121850,"mistyrose":16770273,"moccasin":16770229,"navajowhite":16768685,"navy":128,"oldlace":16643558,"olive":8421376,"olivedrab":7048739,"orange":16753920,"orangered":16729344,"orchid":14315734,"palegoldenrod":15657130,"palegreen":10025880,"paleturquoise":11529966,"palevioletred":14381203,"papayawhip":16773077,"peachpuff":16767673,"peru":13468991,"pink":16761035,"plum":14524637,"powderblue":11591910,"purple":8388736,"rebeccapurple":6697881,"red":16711680,"rosybrown":12357519,"royalblue":4286945,"saddlebrown":9127187,"salmon":16416882,"sandybrown":16032864,"seagreen":3050327,"seashell":16774638,"sienna":10506797,"silver":12632256,"skyblue":8900331,"slateblue":6970061,"slategray":7372944,"slategrey":7372944,"snow":16775930,"springgreen":65407,"steelblue":4620980,"tan":13808780,"teal":32896,"thistle":14204888,"tomato":16737095,"turquoise":4251856,"violet":15631086,"wheat":16113331,"white":16777215,"whitesmoke":16119285,"yellow":16776960,"yellowgreen":10145074};function id(k7,k6,k5){if(k6===undefined&&k5===undefined){return this.set(k7)}return this.setRGB(k7,k6,k5)}Object.assign(id.prototype,{isColor:true,r:1,g:1,b:1,set:function(k5){if(k5&&k5.isColor){this.copy(k5)}else{if(typeof k5==="number"){this.setHex(k5)}else{if(typeof k5==="string"){this.setStyle(k5)}}}return this},setScalar:function(k5){this.r=k5;this.g=k5;this.b=k5;return this},setHex:function(k5){k5=Math.floor(k5);this.r=(k5>>16&255)/255;this.g=(k5>>8&255)/255;this.b=(k5&255)/255;return this},setRGB:function(k7,k6,k5){this.r=k7;this.g=k6;this.b=k5;return this},setHSL:function(){function k5(k9,k8,k7){if(k7<0){k7+=1}if(k7>1){k7-=1}if(k7<1/6){return k9+(k8-k9)*6*k7}if(k7<1/2){return k8}if(k7<2/3){return k9+(k8-k9)*6*(2/3-k7)}return k9}return function k6(k9,k8,k7){k9=dY.euclideanModulo(k9,1);k8=dY.clamp(k8,0,1);k7=dY.clamp(k7,0,1);if(k8===0){this.r=this.g=this.b=k7}else{var lb=k7<=0.5?k7*(1+k8):k7+k8-(k7*k8);var la=(2*k7)-lb;this.r=k5(la,lb,k9+1/3);this.g=k5(la,lb,k9);this.b=k5(la,lb,k9-1/3)}return this}}(),setStyle:function(k5){function ld(lg){if(lg===undefined){return}if(parseFloat(lg)<1){a.Logger.log(a.Logger.WARNING,"THREE.Color: Alpha component of "+k5+" will be ignored.")}}var k8;if(k8=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(k5)){var la;var k6=k8[1];var lc=k8[2];switch(k6){case"rgb":case"rgba":if(la=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(lc)){this.r=Math.min(255,parseInt(la[1],10))/255;this.g=Math.min(255,parseInt(la[2],10))/255;this.b=Math.min(255,parseInt(la[3],10))/255;ld(la[5]);return this}if(la=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(lc)){this.r=Math.min(100,parseInt(la[1],10))/100;this.g=Math.min(100,parseInt(la[2],10))/100;this.b=Math.min(100,parseInt(la[3],10))/100;ld(la[5]);return this}break;case"hsl":case"hsla":if(la=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(lc)){var lb=parseFloat(la[1])/360;var lf=parseInt(la[2],10)/100;var k9=parseInt(la[3],10)/100;ld(la[5]);return this.setHSL(lb,lf,k9)}break}}else{if(k8=/^\#([A-Fa-f0-9]+)$/.exec(k5)){var k7=k8[1];var le=k7.length;if(le===3){this.r=parseInt(k7.charAt(0)+k7.charAt(0),16)/255;this.g=parseInt(k7.charAt(1)+k7.charAt(1),16)/255;this.b=parseInt(k7.charAt(2)+k7.charAt(2),16)/255;return this}else{if(le===6){this.r=parseInt(k7.charAt(0)+k7.charAt(1),16)/255;this.g=parseInt(k7.charAt(2)+k7.charAt(3),16)/255;this.b=parseInt(k7.charAt(4)+k7.charAt(5),16)/255;return this}}}}if(k5&&k5.length>0){var k7=cp[k5];if(k7!==undefined){this.setHex(k7)}else{a.Logger.log(a.Logger.WARNING,"THREE.Color: Unknown color "+k5)}}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(k5){this.r=k5.r;this.g=k5.g;this.b=k5.b;return this},copyGammaToLinear:function(k5,k6){if(k6===undefined){k6=2}this.r=Math.pow(k5.r,k6);this.g=Math.pow(k5.g,k6);this.b=Math.pow(k5.b,k6);return this},copyLinearToGamma:function(k6,k7){if(k7===undefined){k7=2}var k5=(k7>0)?(1/k7):1;this.r=Math.pow(k6.r,k5);this.g=Math.pow(k6.g,k5);this.b=Math.pow(k6.b,k5);return this},convertGammaToLinear:function(k5){this.copyGammaToLinear(this,k5);return this},convertLinearToGamma:function(k5){this.copyLinearToGamma(this,k5);return this},copySRGBToLinear:function(){function k6(k7){return(k7<0.04045)?k7*0.0773993808:Math.pow(k7*0.9478672986+0.0521327014,2.4)}return function k5(k7){this.r=k6(k7.r);this.g=k6(k7.g);this.b=k6(k7.b);return this}}(),copyLinearToSRGB:function(){function k6(k7){return(k7<0.0031308)?k7*12.92:1.055*(Math.pow(k7,0.41666))-0.055}return function k5(k7){this.r=k6(k7.r);this.g=k6(k7.g);this.b=k6(k7.b);return this}}(),convertSRGBToLinear:function(){this.copySRGBToLinear(this);return this},convertLinearToSRGB:function(){this.copyLinearToSRGB(this);return this},getHex:function(){return(this.r*255)<<16^(this.g*255)<<8^(this.b*255)<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(la){if(la===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Color: .getHSL() target is now required");la={h:0,s:0,l:0}}var k5=this.r,k8=this.g,lb=this.b;var lc=Math.max(k5,k8,lb);var k6=Math.min(k5,k8,lb);var k9,k7;var le=(k6+lc)/2;if(k6===lc){k9=0;k7=0}else{var ld=lc-k6;k7=le<=0.5?ld/(lc+k6):ld/(2-lc-k6);switch(lc){case k5:k9=(k8-lb)/ld+(k8<lb?6:0);break;case k8:k9=(lb-k5)/ld+2;break;case lb:k9=(k5-k8)/ld+4;break}k9/=6}la.h=k9;la.s=k7;la.l=le;return la},getStyle:function(){return"rgb("+((this.r*255)|0)+","+((this.g*255)|0)+","+((this.b*255)|0)+")"},offsetHSL:function(){var k5={};return function(k8,k7,k6){this.getHSL(k5);k5.h+=k8;k5.s+=k7;k5.l+=k6;this.setHSL(k5.h,k5.s,k5.l);return this}}(),add:function(k5){this.r+=k5.r;this.g+=k5.g;this.b+=k5.b;return this},addColors:function(k6,k5){this.r=k6.r+k5.r;this.g=k6.g+k5.g;this.b=k6.b+k5.b;return this},addScalar:function(k5){this.r+=k5;this.g+=k5;this.b+=k5;return this},sub:function(k5){this.r=Math.max(0,this.r-k5.r);this.g=Math.max(0,this.g-k5.g);this.b=Math.max(0,this.b-k5.b);return this},multiply:function(k5){this.r*=k5.r;this.g*=k5.g;this.b*=k5.b;return this},multiplyScalar:function(k5){this.r*=k5;this.g*=k5;this.b*=k5;return this},lerp:function(k5,k6){this.r+=(k5.r-this.r)*k6;this.g+=(k5.g-this.g)*k6;this.b+=(k5.b-this.b)*k6;return this},lerpHSL:function(){var k7={h:0,s:0,l:0};var k6={h:0,s:0,l:0};return function k5(k9,lc){this.getHSL(k7);k9.getHSL(k6);var lb=dY.lerp(k7.h,k6.h,lc);var la=dY.lerp(k7.s,k6.s,lc);var k8=dY.lerp(k7.l,k6.l,lc);this.setHSL(lb,la,k8);return this}}(),equals:function(k5){return(k5.r===this.r)&&(k5.g===this.g)&&(k5.b===this.b)},fromArray:function(k6,k5){if(k5===undefined){k5=0}this.r=k6[k5];this.g=k6[k5+1];this.b=k6[k5+2];return this},toArray:function(k6,k5){if(k6===undefined){k6=[]}if(k5===undefined){k5=0}k6[k5]=this.r;k6[k5+1]=this.g;k6[k5+2]=this.b;return k6},toJSON:function(){return this.getHex()}});var f6={common:{diffuse:{value:new id(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new fw()},alphaMap:{value:null},},specularmap:{specularMap:{value:null},},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:0.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new bg(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:0.00025},fogNear:{value:1},fogFar:{value:2000},fogColor:{value:new id(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new id(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new fw()}},sprite:{diffuse:{value:new id(15658734)},opacity:{value:1},center:{value:new bg(0.5,0.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new fw()}}};var kx={basic:{uniforms:i2([f6.common,f6.specularmap,f6.envmap,f6.aomap,f6.lightmap,f6.fog]),vertexShader:fl.meshbasic_vert,fragmentShader:fl.meshbasic_frag},lambert:{uniforms:i2([f6.common,f6.specularmap,f6.envmap,f6.aomap,f6.lightmap,f6.emissivemap,f6.fog,f6.lights,{emissive:{value:new id(0)}}]),vertexShader:fl.meshlambert_vert,fragmentShader:fl.meshlambert_frag},phong:{uniforms:i2([f6.common,f6.specularmap,f6.envmap,f6.aomap,f6.lightmap,f6.emissivemap,f6.bumpmap,f6.normalmap,f6.displacementmap,f6.gradientmap,f6.fog,f6.lights,{emissive:{value:new id(0)},specular:{value:new id(1118481)},shininess:{value:30}}]),vertexShader:fl.meshphong_vert,fragmentShader:fl.meshphong_frag},standard:{uniforms:i2([f6.common,f6.envmap,f6.aomap,f6.lightmap,f6.emissivemap,f6.bumpmap,f6.normalmap,f6.displacementmap,f6.roughnessmap,f6.metalnessmap,f6.fog,f6.lights,{emissive:{value:new id(0)},roughness:{value:0.5},metalness:{value:0.5},envMapIntensity:{value:1}}]),vertexShader:fl.meshphysical_vert,fragmentShader:fl.meshphysical_frag},matcap:{uniforms:i2([f6.common,f6.bumpmap,f6.normalmap,f6.displacementmap,f6.fog,{matcap:{value:null}}]),vertexShader:fl.meshmatcap_vert,fragmentShader:fl.meshmatcap_frag},points:{uniforms:i2([f6.points,f6.fog]),vertexShader:fl.points_vert,fragmentShader:fl.points_frag},dashed:{uniforms:i2([f6.common,f6.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fl.linedashed_vert,fragmentShader:fl.linedashed_frag},depth:{uniforms:i2([f6.common,f6.displacementmap]),vertexShader:fl.depth_vert,fragmentShader:fl.depth_frag},normal:{uniforms:i2([f6.common,f6.bumpmap,f6.normalmap,f6.displacementmap,{opacity:{value:1}}]),vertexShader:fl.normal_vert,fragmentShader:fl.normal_frag},sprite:{uniforms:i2([f6.sprite,f6.fog]),vertexShader:fl.sprite_vert,fragmentShader:fl.sprite_frag},background:{uniforms:{uvTransform:{value:new fw()},t2D:{value:null},},vertexShader:fl.background_vert,fragmentShader:fl.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fl.cube_vert,fragmentShader:fl.cube_frag},equirect:{uniforms:{tEquirect:{value:null},},vertexShader:fl.equirect_vert,fragmentShader:fl.equirect_frag},distanceRGBA:{uniforms:i2([f6.common,f6.displacementmap,{referencePosition:{value:new bf()},nearDistance:{value:1},farDistance:{value:1000}}]),vertexShader:fl.distanceRGBA_vert,fragmentShader:fl.distanceRGBA_frag},shadow:{uniforms:i2([f6.lights,f6.fog,{color:{value:new id(0)},opacity:{value:1}},]),vertexShader:fl.shadow_vert,fragmentShader:fl.shadow_frag}};kx.physical={uniforms:i2([kx.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:fl.meshphysical_vert,fragmentShader:fl.meshphysical_frag};function cV(){var k7=null;var k8=false;var k5=null;function k6(k9,la){if(k8===false){return}k5(k9,la);k7.requestAnimationFrame(k6)}return{start:function(){if(k8===true){return}if(k5===null){return}k7.requestAnimationFrame(k6);k8=true},stop:function(){k8=false},setAnimationLoop:function(k9){k5=k9},setContext:function(k9){k7=k9}}}function z(k9){var k7=new WeakMap();function lb(lf,lc){var lh=lf.array;var lg=lf.dynamic?35048:35044;var ld=k9.createBuffer();k9.bindBuffer(lc,ld);k9.bufferData(lc,lh,lg);lf.onUploadCallback();var le=5126;if(lh instanceof Float32Array){le=5126}else{if(lh instanceof Float64Array){a.Logger.log(a.Logger.WARNING,"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.")}else{if(lh instanceof Uint16Array){le=5123}else{if(lh instanceof Int16Array){le=5122}else{if(lh instanceof Uint32Array){le=5125}else{if(lh instanceof Int32Array){le=5124}else{if(lh instanceof Int8Array){le=5120}else{if(lh instanceof Uint8Array){le=5121}}}}}}}}return{buffer:ld,type:le,bytesPerElement:lh.BYTES_PER_ELEMENT,version:lf.version}}function k6(ld,le,lc){var lg=le.array;var lf=le.updateRange;k9.bindBuffer(lc,ld);if(le.dynamic===false){k9.bufferData(lc,lg,35044)}else{if(lf.count===-1){k9.bufferSubData(lc,0,lg)}else{if(lf.count===0){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.")}else{k9.bufferSubData(lc,lf.offset*lg.BYTES_PER_ELEMENT,lg.subarray(lf.offset,lf.offset+lf.count));lf.count=-1}}}}function k8(lc){if(lc.isInterleavedBufferAttribute){lc=lc.data}return k7.get(lc)}function k5(lc){if(lc.isInterleavedBufferAttribute){lc=lc.data}var ld=k7.get(lc);if(ld){k9.deleteBuffer(ld.buffer);k7["delete"](lc)}}function la(ld,lc){if(ld.isInterleavedBufferAttribute){ld=ld.data}var le=k7.get(ld);if(le===undefined){k7.set(ld,lb(ld,lc))}else{if(le.version<ld.version){k6(le.buffer,ld,lc);le.version=ld.version}}}return{get:k8,remove:k5,update:la}}function dO(k7,k6,la,k9,k8,k5){this.a=k7;this.b=k6;this.c=la;this.normal=(k9&&k9.isVector3)?k9:new bf();this.vertexNormals=Array.isArray(k9)?k9:[];this.color=(k8&&k8.isColor)?k8:new id();this.vertexColors=Array.isArray(k8)?k8:[];this.materialIndex=k5!==undefined?k5:0}Object.assign(dO.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(k7){this.a=k7.a;this.b=k7.b;this.c=k7.c;this.normal.copy(k7.normal);this.color.copy(k7.color);this.materialIndex=k7.materialIndex;for(var k6=0,k5=k7.vertexNormals.length;k6<k5;k6++){this.vertexNormals[k6]=k7.vertexNormals[k6].clone()}for(var k6=0,k5=k7.vertexColors.length;k6<k5;k6++){this.vertexColors[k6]=k7.vertexColors[k6].clone()}return this}});function b0(k6,k8,k7,k5){this._x=k6||0;this._y=k8||0;this._z=k7||0;this._order=k5||b0.DefaultOrder}b0.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];b0.DefaultOrder="XYZ";Object.defineProperties(b0.prototype,{x:{get:function(){return this._x},set:function(k5){this._x=k5;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(k5){this._y=k5;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(k5){this._z=k5;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(k5){this._order=k5;this.onChangeCallback()}}});Object.assign(b0.prototype,{isEuler:true,set:function(k6,k8,k7,k5){this._x=k6;this._y=k8;this._z=k7;this._order=k5||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(k5){this._x=k5._x;this._y=k5._y;this._z=k5._z;this._order=k5._order;this.onChangeCallback();return this},setFromRotationMatrix:function(k9,la,lb){var le=dY.clamp;var k8=k9.elements;var lf=k8[0],ld=k8[4],lc=k8[8];var k7=k8[1],k6=k8[5],k5=k8[9];var li=k8[2],lh=k8[6],lg=k8[10];la=la||this._order;if(la==="XYZ"){this._y=Math.asin(le(lc,-1,1));if(Math.abs(lc)<0.99999){this._x=Math.atan2(-k5,lg);this._z=Math.atan2(-ld,lf)}else{this._x=Math.atan2(lh,k6);this._z=0}}else{if(la==="YXZ"){this._x=Math.asin(-le(k5,-1,1));if(Math.abs(k5)<0.99999){this._y=Math.atan2(lc,lg);this._z=Math.atan2(k7,k6)}else{this._y=Math.atan2(-li,lf);this._z=0}}else{if(la==="ZXY"){this._x=Math.asin(le(lh,-1,1));if(Math.abs(lh)<0.99999){this._y=Math.atan2(-li,lg);this._z=Math.atan2(-ld,k6)}else{this._y=0;this._z=Math.atan2(k7,lf)}}else{if(la==="ZYX"){this._y=Math.asin(-le(li,-1,1));if(Math.abs(li)<0.99999){this._x=Math.atan2(lh,lg);this._z=Math.atan2(k7,lf)}else{this._x=0;this._z=Math.atan2(-ld,k6)}}else{if(la==="YZX"){this._z=Math.asin(le(k7,-1,1));if(Math.abs(k7)<0.99999){this._x=Math.atan2(-k5,k6);this._y=Math.atan2(-li,lf)}else{this._x=0;this._y=Math.atan2(lc,lg)}}else{if(la==="XZY"){this._z=Math.asin(-le(ld,-1,1));if(Math.abs(ld)<0.99999){this._x=Math.atan2(lh,k6);this._y=Math.atan2(lc,lf)}else{this._x=Math.atan2(-k5,lg);this._y=0}}else{a.Logger.log(a.Logger.WARNING,"THREE.Euler: .setFromRotationMatrix() given unsupported order: "+la)}}}}}}this._order=la;if(lb!==false){this.onChangeCallback()}return this},setFromQuaternion:function(){var k5=new fv();return function k6(k8,k7,k9){k5.makeRotationFromQuaternion(k8);return this.setFromRotationMatrix(k5,k7,k9)}}(),setFromVector3:function(k6,k5){return this.set(k6.x,k6.y,k6.z,k5||this._order)},reorder:function(){var k6=new hd();return function k5(k7){k6.setFromEuler(this);return this.setFromQuaternion(k6,k7)}}(),equals:function(k5){return(k5._x===this._x)&&(k5._y===this._y)&&(k5._z===this._z)&&(k5._order===this._order)},fromArray:function(k5){this._x=k5[0];this._y=k5[1];this._z=k5[2];if(k5[3]!==undefined){this._order=k5[3]}this.onChangeCallback();return this},toArray:function(k6,k5){if(k6===undefined){k6=[]}if(k5===undefined){k5=0}k6[k5]=this._x;k6[k5+1]=this._y;k6[k5+2]=this._z;k6[k5+3]=this._order;return k6},toVector3:function(k5){if(k5){return k5.set(this._x,this._y,this._z)}else{return new bf(this._x,this._y,this._z)}},onChange:function(k5){this.onChangeCallback=k5;return this},onChangeCallback:function(){}});function fa(){this.mask=1|0}Object.assign(fa.prototype,{set:function(k5){this.mask=1<<k5|0},enable:function(k5){this.mask|=1<<k5|0},toggle:function(k5){this.mask^=1<<k5|0},disable:function(k5){this.mask&=~(1<<k5|0)},test:function(k5){return(this.mask&k5.mask)!==0}});var am=0;function fg(){Object.defineProperty(this,"id",{value:am++});this.uuid=dY.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=fg.DefaultUp.clone();var k5=new bf();var k7=new b0();var k9=new hd();var la=new bf(1,1,1);function k8(){k9.setFromEuler(k7,false)}function k6(){k7.setFromQuaternion(k9,undefined,false)}k7.onChange(k8);k9.onChange(k6);Object.defineProperties(this,{position:{configurable:true,enumerable:true,value:k5},rotation:{configurable:true,enumerable:true,value:k7},quaternion:{configurable:true,enumerable:true,value:k9},scale:{configurable:true,enumerable:true,value:la},modelViewMatrix:{value:new fv()},normalMatrix:{value:new fw()}});this.matrix=new fv();this.matrixWorld=new fv();this.matrixAutoUpdate=fg.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=false;this.layers=new fa();this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.renderOrder=0;this.userData={}}fg.DefaultUp=new bf(0,1,0);fg.DefaultMatrixAutoUpdate=true;fg.prototype=Object.assign(Object.create(aQ.prototype),{constructor:fg,isObject3D:true,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(k5){this.matrix.multiplyMatrices(k5,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(k5){this.quaternion.premultiply(k5);return this},setRotationFromAxisAngle:function(k5,k6){this.quaternion.setFromAxisAngle(k5,k6)},setRotationFromEuler:function(k5){this.quaternion.setFromEuler(k5,true)},setRotationFromMatrix:function(k5){this.quaternion.setFromRotationMatrix(k5)},setRotationFromQuaternion:function(k5){this.quaternion.copy(k5)},rotateOnAxis:function(){var k5=new hd();return function k6(k7,k8){k5.setFromAxisAngle(k7,k8);this.quaternion.multiply(k5);return this}}(),rotateOnWorldAxis:function(){var k6=new hd();return function k5(k7,k8){k6.setFromAxisAngle(k7,k8);this.quaternion.premultiply(k6);return this}}(),rotateX:function(){var k6=new bf(1,0,0);return function k5(k7){return this.rotateOnAxis(k6,k7)}}(),rotateY:function(){var k6=new bf(0,1,0);return function k5(k7){return this.rotateOnAxis(k6,k7)}}(),rotateZ:function(){var k6=new bf(0,0,1);return function k5(k7){return this.rotateOnAxis(k6,k7)}}(),translateOnAxis:function(){var k6=new bf();return function k5(k7,k8){k6.copy(k7).applyQuaternion(this.quaternion);this.position.add(k6.multiplyScalar(k8));return this}}(),translateX:function(){var k6=new bf(1,0,0);return function k5(k7){return this.translateOnAxis(k6,k7)}}(),translateY:function(){var k6=new bf(0,1,0);return function k5(k7){return this.translateOnAxis(k6,k7)}}(),translateZ:function(){var k6=new bf(0,0,1);return function k5(k7){return this.translateOnAxis(k6,k7)}}(),localToWorld:function(k5){return k5.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var k6=new fv();return function k5(k7){return k7.applyMatrix4(k6.getInverse(this.matrixWorld))}}(),lookAt:function(){var k6=new hd();var k7=new fv();var k8=new bf();var k5=new bf();return function k9(la,ld,lc){if(la.isVector3){k8.copy(la)}else{k8.set(la,ld,lc)}var lb=this.parent;this.updateWorldMatrix(true,false);k5.setFromMatrixPosition(this.matrixWorld);if(this.isCamera||this.isLight){k7.lookAt(k5,k8,this.up)}else{k7.lookAt(k8,k5,this.up)}this.quaternion.setFromRotationMatrix(k7);if(lb){k7.extractRotation(lb.matrixWorld);k6.setFromRotationMatrix(k7);this.quaternion.premultiply(k6.inverse())}}}(),add:function(k5){if(arguments.length>1){for(var k6=0;k6<arguments.length;k6++){this.add(arguments[k6])}return this}if(k5===this){a.Logger.log(a.Logger.SEVERE,"THREE.Object3D.add: object can't be added as a child of itself.",k5);return this}if((k5&&k5.isObject3D)){if(k5.parent!==null){k5.parent.remove(k5)}k5.parent=this;k5.dispatchEvent({type:"added"});this.children.push(k5)}else{a.Logger.log(a.Logger.SEVERE,"THREE.Object3D.add: object not an instance of THREE.Object3D.",k5)}return this},remove:function(k6){if(arguments.length>1){for(var k7=0;k7<arguments.length;k7++){this.remove(arguments[k7])}return this}var k5=this.children.indexOf(k6);if(k5!==-1){k6.parent=null;k6.dispatchEvent({type:"removed"});this.children.splice(k5,1)}return this},getObjectById:function(k5){return this.getObjectByProperty("id",k5)},getObjectByName:function(k5){return this.getObjectByProperty("name",k5)},getObjectByProperty:function(k7,k9){if(this[k7]===k9){return this}for(var k8=0,k5=this.children.length;k8<k5;k8++){var la=this.children[k8];var k6=la.getObjectByProperty(k7,k9);if(k6!==undefined){return k6}}return undefined},getWorldPosition:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .getWorldPosition() target is now required");k5=new bf()}this.updateMatrixWorld(true);return k5.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var k6=new bf();var k7=new bf();return function k5(k8){if(k8===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .getWorldQuaternion() target is now required");k8=new hd()}this.updateMatrixWorld(true);this.matrixWorld.decompose(k6,k8,k7);return k8}}(),getWorldScale:function(){var k5=new bf();var k6=new hd();return function k7(k8){if(k8===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .getWorldScale() target is now required");k8=new bf()}this.updateMatrixWorld(true);this.matrixWorld.decompose(k5,k6,k8);return k8}}(),getWorldDirection:function(k6){if(k6===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .getWorldDirection() target is now required");k6=new bf()}this.updateMatrixWorld(true);var k5=this.matrixWorld.elements;return k6.set(k5[8],k5[9],k5[10]).normalize()},raycast:function(){},traverse:function(k8){k8(this);var k7=this.children;for(var k6=0,k5=k7.length;k6<k5;k6++){k7[k6].traverse(k8)}},traverseVisible:function(k8){if(this.visible===false){return}k8(this);var k7=this.children;for(var k6=0,k5=k7.length;k6<k5;k6++){k7[k6].traverseVisible(k8)}},traverseAncestors:function(k6){var k5=this.parent;if(k5!==null){k6(k5);k5.traverseAncestors(k6)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(k8){if(this.matrixAutoUpdate){this.updateMatrix()}if(this.matrixWorldNeedsUpdate||k8){if(this.parent===null){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}this.matrixWorldNeedsUpdate=false;k8=true}var k7=this.children;for(var k6=0,k5=k7.length;k6<k5;k6++){k7[k6].updateMatrixWorld(k8)}},updateWorldMatrix:function(k7,k6){var la=this.parent;if(k7===true&&la!==null){la.updateWorldMatrix(true,false)}if(this.matrixAutoUpdate){this.updateMatrix()}if(this.parent===null){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}if(k6===true){var k9=this.children;for(var k8=0,k5=k9.length;k8<k5;k8++){k9[k8].updateWorldMatrix(false,true)}}},toJSON:function(lj){var k5=(lj===undefined||typeof lj==="string");var k8={};if(k5){lj={geometries:{},materials:{},textures:{},images:{},shapes:{}};k8.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}}var lb={};lb.uuid=this.uuid;lb.type=this.type;if(this.name!==""){lb.name=this.name}if(this.castShadow===true){lb.castShadow=true}if(this.receiveShadow===true){lb.receiveShadow=true}if(this.visible===false){lb.visible=false}if(this.frustumCulled===false){lb.frustumCulled=false}if(this.renderOrder!==0){lb.renderOrder=this.renderOrder}if(JSON.stringify(this.userData)!=="{}"){lb.userData=this.userData}lb.layers=this.layers.mask;lb.matrix=this.matrix.toArray();if(this.matrixAutoUpdate===false){lb.matrixAutoUpdate=false}if(this.isMesh&&this.drawMode!==cZ){lb.drawMode=this.drawMode}function lk(ll,lm){if(ll[lm.uuid]===undefined){ll[lm.uuid]=lm.toJSON(lj)}return lm.uuid}if(this.isMesh||this.isLine||this.isPoints){lb.geometry=lk(lj.geometries,this.geometry);var li=this.geometry.parameters;if(li!==undefined&&li.shapes!==undefined){var k6=li.shapes;if(Array.isArray(k6)){for(var lc=0,k9=k6.length;lc<k9;lc++){var ld=k6[lc];lk(lj.shapes,ld)}}else{lk(lj.shapes,k6)}}}if(this.material!==undefined){if(Array.isArray(this.material)){var la=[];for(var lc=0,k9=this.material.length;lc<k9;lc++){la.push(lk(lj.materials,this.material[lc]))}lb.material=la}else{lb.material=lk(lj.materials,this.material)}}if(this.children.length>0){lb.children=[];for(var lc=0;lc<this.children.length;lc++){lb.children.push(this.children[lc].toJSON(lj).object)}}if(k5){var k7=lf(lj.geometries);var lh=lf(lj.materials);var lg=lf(lj.textures);var le=lf(lj.images);var k6=lf(lj.shapes);if(k7.length>0){k8.geometries=k7}if(lh.length>0){k8.materials=lh}if(lg.length>0){k8.textures=lg}if(le.length>0){k8.images=le}if(k6.length>0){k8.shapes=k6}}k8.object=lb;return k8;function lf(lm){var ll=[];for(var ln in lm){var lo=lm[ln];delete lo.metadata;ll.push(lo)}return ll}},clone:function(k5){return new this.constructor().copy(this,k5)},copy:function(k7,k5){if(k5===undefined){k5=true}this.name=k7.name;this.up.copy(k7.up);this.position.copy(k7.position);this.quaternion.copy(k7.quaternion);this.scale.copy(k7.scale);this.matrix.copy(k7.matrix);this.matrixWorld.copy(k7.matrixWorld);this.matrixAutoUpdate=k7.matrixAutoUpdate;this.matrixWorldNeedsUpdate=k7.matrixWorldNeedsUpdate;this.layers.mask=k7.layers.mask;this.visible=k7.visible;this.castShadow=k7.castShadow;this.receiveShadow=k7.receiveShadow;this.frustumCulled=k7.frustumCulled;this.renderOrder=k7.renderOrder;this.userData=JSON.parse(JSON.stringify(k7.userData));if(k5===true){for(var k6=0;k6<k7.children.length;k6++){var k8=k7.children[k6];this.add(k8.clone())}}return this}});var kJ=0;function fm(){Object.defineProperty(this,"id",{value:kJ+=2});this.uuid=dY.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.elementsNeedUpdate=false;this.verticesNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.groupsNeedUpdate=false}fm.prototype=Object.assign(Object.create(aQ.prototype),{constructor:fm,isGeometry:true,applyMatrix:function(k6){var lc=new fw().getNormalMatrix(k6);for(var k9=0,k5=this.vertices.length;k9<k5;k9++){var lb=this.vertices[k9];lb.applyMatrix4(k6)}for(var k9=0,k5=this.faces.length;k9<k5;k9++){var la=this.faces[k9];la.normal.applyMatrix3(lc).normalize();for(var k7=0,k8=la.vertexNormals.length;k7<k8;k7++){la.vertexNormals[k7].applyMatrix3(lc).normalize()}}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}this.verticesNeedUpdate=true;this.normalsNeedUpdate=true;return this},rotateX:function(){var k6=new fv();return function k5(k7){k6.makeRotationX(k7);this.applyMatrix(k6);return this}}(),rotateY:function(){var k6=new fv();return function k5(k7){k6.makeRotationY(k7);this.applyMatrix(k6);return this}}(),rotateZ:function(){var k6=new fv();return function k5(k7){k6.makeRotationZ(k7);this.applyMatrix(k6);return this}}(),translate:function(){var k5=new fv();return function k6(k7,k9,k8){k5.makeTranslation(k7,k9,k8);this.applyMatrix(k5);return this}}(),scale:function(){var k5=new fv();return function k6(k7,k9,k8){k5.makeScale(k7,k9,k8);this.applyMatrix(k5);return this}}(),lookAt:function(){var k5=new fg();return function k6(k7){k5.lookAt(k7);k5.updateMatrix();this.applyMatrix(k5.matrix)}}(),fromBufferGeometry:function(lg){var ll=this;var lj=lg.index!==null?lg.index.array:undefined;var la=lg.attributes;var ld=la.position.array;var lh=la.normal!==undefined?la.normal.array:undefined;var k5=la.color!==undefined?la.color.array:undefined;var k9=la.uv!==undefined?la.uv.array:undefined;var lk=la.uv2!==undefined?la.uv2.array:undefined;if(lk!==undefined){this.faceVertexUvs[1]=[]}for(var lc=0,k8=0;lc<ld.length;lc+=3,k8+=2){ll.vertices.push(new bf().fromArray(ld,lc));if(k5!==undefined){ll.colors.push(new id().fromArray(k5,lc))}}function lf(lo,ln,ls,lm){var lq=(k5===undefined)?[]:[ll.colors[lo].clone(),ll.colors[ln].clone(),ll.colors[ls].clone()];var lp=(lh===undefined)?[]:[new bf().fromArray(lh,lo*3),new bf().fromArray(lh,ln*3),new bf().fromArray(lh,ls*3)];var lr=new dO(lo,ln,ls,lp,lq,lm);ll.faces.push(lr);if(k9!==undefined){ll.faceVertexUvs[0].push([new bg().fromArray(k9,lo*2),new bg().fromArray(k9,ln*2),new bg().fromArray(k9,ls*2)])}if(lk!==undefined){ll.faceVertexUvs[1].push([new bg().fromArray(lk,lo*2),new bg().fromArray(lk,ln*2),new bg().fromArray(lk,ls*2)])}}var k7=lg.groups;if(k7.length>0){for(var lc=0;lc<k7.length;lc++){var li=k7[lc];var k6=li.start;var le=li.count;for(var k8=k6,lb=k6+le;k8<lb;k8+=3){if(lj!==undefined){lf(lj[k8],lj[k8+1],lj[k8+2],li.materialIndex)}else{lf(k8,k8+1,k8+2,li.materialIndex)}}}}else{if(lj!==undefined){for(var lc=0;lc<lj.length;lc+=3){lf(lj[lc],lj[lc+1],lj[lc+2])}}else{for(var lc=0;lc<ld.length/3;lc+=3){lf(lc,lc+1,lc+2)}}}this.computeFaceNormals();if(lg.boundingBox!==null){this.boundingBox=lg.boundingBox.clone()}if(lg.boundingSphere!==null){this.boundingSphere=lg.boundingSphere.clone()}return this},center:function(){var k6=new bf();return function k5(){this.computeBoundingBox();this.boundingBox.getCenter(k6).negate();this.translate(k6.x,k6.y,k6.z);return this}}(),normalize:function(){this.computeBoundingSphere();var k6=this.boundingSphere.center;var k5=this.boundingSphere.radius;var k8=k5===0?1:1/k5;var k7=new fv();k7.set(k8,0,0,-k8*k6.x,0,k8,0,-k8*k6.y,0,0,k8,-k8*k6.z,0,0,0,1);this.applyMatrix(k7);return this},computeFaceNormals:function(){var k5=new bf(),lc=new bf();for(var lb=0,la=this.faces.length;lb<la;lb++){var k9=this.faces[lb];var k8=this.vertices[k9.a];var k7=this.vertices[k9.b];var k6=this.vertices[k9.c];k5.subVectors(k6,k7);lc.subVectors(k8,k7);k5.cross(lc);k5.normalize();k9.normal.copy(k5)}},computeVertexNormals:function(lb){if(lb===undefined){lb=true}var lg,k9,lc,lf,le,ld;ld=new Array(this.vertices.length);for(lg=0,k9=this.vertices.length;lg<k9;lg++){ld[lg]=new bf()}if(lb){var k7,k6,k5;var la=new bf(),lh=new bf();for(lc=0,lf=this.faces.length;lc<lf;lc++){le=this.faces[lc];k7=this.vertices[le.a];k6=this.vertices[le.b];k5=this.vertices[le.c];la.subVectors(k5,k6);lh.subVectors(k7,k6);la.cross(lh);ld[le.a].add(la);ld[le.b].add(la);ld[le.c].add(la)}}else{this.computeFaceNormals();for(lc=0,lf=this.faces.length;lc<lf;lc++){le=this.faces[lc];ld[le.a].add(le.normal);ld[le.b].add(le.normal);ld[le.c].add(le.normal)}}for(lg=0,k9=this.vertices.length;lg<k9;lg++){ld[lg].normalize()}for(lc=0,lf=this.faces.length;lc<lf;lc++){le=this.faces[lc];var k8=le.vertexNormals;if(k8.length===3){k8[0].copy(ld[le.a]);k8[1].copy(ld[le.b]);k8[2].copy(ld[le.c])}else{k8[0]=ld[le.a].clone();k8[1]=ld[le.b].clone();k8[2]=ld[le.c].clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeFlatVertexNormals:function(){var k8,k7,k6;this.computeFaceNormals();for(k8=0,k7=this.faces.length;k8<k7;k8++){k6=this.faces[k8];var k5=k6.vertexNormals;if(k5.length===3){k5[0].copy(k6.normal);k5[1].copy(k6.normal);k5[2].copy(k6.normal)}else{k5[0]=k6.normal.clone();k5[1]=k6.normal.clone();k5[2]=k6.normal.clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeMorphNormals:function(){var k9,le,la,lf,lb;for(la=0,lf=this.faces.length;la<lf;la++){lb=this.faces[la];if(!lb.__originalFaceNormal){lb.__originalFaceNormal=lb.normal.clone()}else{lb.__originalFaceNormal.copy(lb.normal)}if(!lb.__originalVertexNormals){lb.__originalVertexNormals=[]}for(k9=0,le=lb.vertexNormals.length;k9<le;k9++){if(!lb.__originalVertexNormals[k9]){lb.__originalVertexNormals[k9]=lb.vertexNormals[k9].clone()}else{lb.__originalVertexNormals[k9].copy(lb.vertexNormals[k9])}}}var k7=new fm();k7.faces=this.faces;for(k9=0,le=this.morphTargets.length;k9<le;k9++){if(!this.morphNormals[k9]){this.morphNormals[k9]={};this.morphNormals[k9].faceNormals=[];this.morphNormals[k9].vertexNormals=[];var k8=this.morphNormals[k9].faceNormals;var k5=this.morphNormals[k9].vertexNormals;var ld,k6;for(la=0,lf=this.faces.length;la<lf;la++){ld=new bf();k6={a:new bf(),b:new bf(),c:new bf()};k8.push(ld);k5.push(k6)}}var lc=this.morphNormals[k9];k7.vertices=this.morphTargets[k9].vertices;k7.computeFaceNormals();k7.computeVertexNormals();var ld,k6;for(la=0,lf=this.faces.length;la<lf;la++){lb=this.faces[la];ld=lc.faceNormals[la];k6=lc.vertexNormals[la];ld.copy(lb.normal);k6.a.copy(lb.vertexNormals[0]);k6.b.copy(lb.vertexNormals[1]);k6.c.copy(lb.vertexNormals[2])}}for(la=0,lf=this.faces.length;la<lf;la++){lb=this.faces[la];lb.normal=lb.__originalFaceNormal;lb.vertexNormals=lb.__originalVertexNormals}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new aO()}this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new d0()}this.boundingSphere.setFromPoints(this.vertices)},merge:function(lc,ln,lv){if(!(lc&&lc.isGeometry)){a.Logger.log(a.Logger.SEVERE,"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",lc);return}var lf,lh=this.vertices.length,la=this.vertices,k8=lc.vertices,k6=this.faces,k5=lc.faces,ls=this.faceVertexUvs[0],lr=lc.faceVertexUvs[0],k9=this.colors,k7=lc.colors;if(lv===undefined){lv=0}if(ln!==undefined){lf=new fw().getNormalMatrix(ln)}for(var lo=0,lg=k8.length;lo<lg;lo++){var lt=k8[lo];var lk=lt.clone();if(ln!==undefined){lk.applyMatrix4(ln)}la.push(lk)}for(var lo=0,lg=k7.length;lo<lg;lo++){k9.push(k7[lo].clone())}for(lo=0,lg=k5.length;lo<lg;lo++){var le=k5[lo],lj,lu,ll,li=le.vertexNormals,lq=le.vertexColors;lj=new dO(le.a+lh,le.b+lh,le.c+lh);lj.normal.copy(le.normal);if(lf!==undefined){lj.normal.applyMatrix3(lf).normalize()}for(var lm=0,lp=li.length;lm<lp;lm++){lu=li[lm].clone();if(lf!==undefined){lu.applyMatrix3(lf).normalize()}lj.vertexNormals.push(lu)}lj.color.copy(le.color);for(var lm=0,lp=lq.length;lm<lp;lm++){ll=lq[lm];lj.vertexColors.push(ll.clone())}lj.materialIndex=le.materialIndex+lv;k6.push(lj)}for(lo=0,lg=lr.length;lo<lg;lo++){var ld=lr[lo],lb=[];if(ld===undefined){continue}for(var lm=0,lp=ld.length;lm<lp;lm++){lb.push(ld[lm].clone())}ls.push(lb)}},mergeMesh:function(k5){if(!(k5&&k5.isMesh)){a.Logger.log(a.Logger.SEVERE,"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",k5);return}if(k5.matrixAutoUpdate){k5.updateMatrix()}this.merge(k5.geometry,k5.matrix)},mergeVertices:function(){var ld={};var k7=[],lg=[];var lk,lj;var k9=4;var lb=Math.pow(10,k9);var la,lf,lc;var ll,k6,k8;for(la=0,lf=this.vertices.length;la<lf;la++){lk=this.vertices[la];lj=Math.round(lk.x*lb)+"_"+Math.round(lk.y*lb)+"_"+Math.round(lk.z*lb);if(ld[lj]===undefined){ld[lj]=la;k7.push(this.vertices[la]);lg[la]=k7.length-1}else{lg[la]=lg[ld[lj]]}}var le=[];for(la=0,lf=this.faces.length;la<lf;la++){lc=this.faces[la];lc.a=lg[lc.a];lc.b=lg[lc.b];lc.c=lg[lc.c];ll=[lc.a,lc.b,lc.c];for(var k5=0;k5<3;k5++){if(ll[k5]===ll[(k5+1)%3]){le.push(la);break}}}for(la=le.length-1;la>=0;la--){var li=le[la];this.faces.splice(li,1);for(k6=0,k8=this.faceVertexUvs.length;k6<k8;k6++){this.faceVertexUvs[k6].splice(li,1)}}var lh=this.vertices.length-k7.length;this.vertices=k7;return lh},setFromPoints:function(k8){this.vertices=[];for(var k7=0,k6=k8.length;k7<k6;k7++){var k5=k8[k7];this.vertices.push(new bf(k5.x,k5.y,k5.z||0))}return this},sortFacesByMaterialIndex:function(){var k7=this.faces;var k6=k7.length;for(var k8=0;k8<k6;k8++){k7[k8]._id=k8}function lb(lf,le){return lf.materialIndex-le.materialIndex}k7.sort(lb);var ld=this.faceVertexUvs[0];var lc=this.faceVertexUvs[1];var la,k9;if(ld&&ld.length===k6){la=[]}if(lc&&lc.length===k6){k9=[]}for(var k8=0;k8<k6;k8++){var k5=k7[k8]._id;if(la){la.push(ld[k5])}if(k9){k9.push(lc[k5])}}if(la){this.faceVertexUvs[0]=la}if(k9){this.faceVertexUvs[1]=k9}},toJSON:function(){var lv={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};lv.uuid=this.uuid;lv.type=this.type;if(this.name!==""){lv.name=this.name}if(this.parameters!==undefined){var la=this.parameters;for(var lx in la){if(la[lx]!==undefined){lv[lx]=la[lx]}}return lv}var k9=[];for(var lo=0;lo<this.vertices.length;lo++){var lq=this.vertices[lo];k9.push(lq.x,lq.y,lq.z)}var k6=[];var lj=[];var lg={};var lc=[];var lt={};var ld=[];var k8={};for(var lo=0;lo<this.faces.length;lo++){var lb=this.faces[lo];var lh=true;var ls=false;var k5=this.faceVertexUvs[0][lo]!==undefined;var lp=lb.normal.length()>0;var ln=lb.vertexNormals.length>0;var ll=lb.color.r!==1||lb.color.g!==1||lb.color.b!==1;var li=lb.vertexColors.length>0;var lw=0;lw=lf(lw,0,0);lw=lf(lw,1,lh);lw=lf(lw,2,ls);lw=lf(lw,3,k5);lw=lf(lw,4,lp);lw=lf(lw,5,ln);lw=lf(lw,6,ll);lw=lf(lw,7,li);k6.push(lw);k6.push(lb.a,lb.b,lb.c);k6.push(lb.materialIndex);if(k5){var lr=this.faceVertexUvs[0][lo];k6.push(k7(lr[0]),k7(lr[1]),k7(lr[2]))}if(lp){k6.push(lu(lb.normal))}if(ln){var lm=lb.vertexNormals;k6.push(lu(lm[0]),lu(lm[1]),lu(lm[2]))}if(ll){k6.push(le(lb.color))}if(li){var lk=lb.vertexColors;k6.push(le(lk[0]),le(lk[1]),le(lk[2]))}}function lf(lA,ly,lz){return lz?lA|(1<<ly):lA&(~(1<<ly))}function lu(lz){var ly=lz.x.toString()+lz.y.toString()+lz.z.toString();if(lg[ly]!==undefined){return lg[ly]}lg[ly]=lj.length/3;lj.push(lz.x,lz.y,lz.z);return lg[ly]}function le(ly){var lz=ly.r.toString()+ly.g.toString()+ly.b.toString();if(lt[lz]!==undefined){return lt[lz]}lt[lz]=lc.length;lc.push(ly.getHex());return lt[lz]}function k7(ly){var lz=ly.x.toString()+ly.y.toString();if(k8[lz]!==undefined){return k8[lz]}k8[lz]=ld.length/2;ld.push(ly.x,ly.y);return k8[lz]}lv.data={};lv.data.vertices=k9;lv.data.normals=lj;if(lc.length>0){lv.data.colors=lc}if(ld.length>0){lv.data.uvs=[ld]}lv.data.faces=k6;return lv},clone:function(){return new fm().copy(this)},copy:function(lk){var ln,ld,lm,lo,ll,k6;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.name=lk.name;var k8=lk.vertices;for(ln=0,ld=k8.length;ln<ld;ln++){this.vertices.push(k8[ln].clone())}var lc=lk.colors;for(ln=0,ld=lc.length;ln<ld;ln++){this.colors.push(lc[ln].clone())}var k5=lk.faces;for(ln=0,ld=k5.length;ln<ld;ln++){this.faces.push(k5[ln].clone())}for(ln=0,ld=lk.faceVertexUvs.length;ln<ld;ln++){var lr=lk.faceVertexUvs[ln];if(this.faceVertexUvs[ln]===undefined){this.faceVertexUvs[ln]=[]}for(lm=0,lo=lr.length;lm<lo;lm++){var le=lr[lm],lt=[];for(ll=0,k6=le.length;ll<k6;ll++){var k9=le[ll];lt.push(k9.clone())}this.faceVertexUvs[ln].push(lt)}}var lf=lk.morphTargets;for(ln=0,ld=lf.length;ln<ld;ln++){var lq={};lq.name=lf[ln].name;if(lf[ln].vertices!==undefined){lq.vertices=[];for(lm=0,lo=lf[ln].vertices.length;lm<lo;lm++){lq.vertices.push(lf[ln].vertices[lm].clone())}}if(lf[ln].normals!==undefined){lq.normals=[];for(lm=0,lo=lf[ln].normals.length;lm<lo;lm++){lq.normals.push(lf[ln].normals[lm].clone())}}this.morphTargets.push(lq)}var li=lk.morphNormals;for(ln=0,ld=li.length;ln<ld;ln++){var lp={};if(li[ln].vertexNormals!==undefined){lp.vertexNormals=[];for(lm=0,lo=li[ln].vertexNormals.length;lm<lo;lm++){var ls=li[ln].vertexNormals[lm];var lj={};lj.a=ls.a.clone();lj.b=ls.b.clone();lj.c=ls.c.clone();lp.vertexNormals.push(lj)}}if(li[ln].faceNormals!==undefined){lp.faceNormals=[];for(lm=0,lo=li[ln].faceNormals.length;lm<lo;lm++){lp.faceNormals.push(li[ln].faceNormals[lm].clone())}}this.morphNormals.push(lp)}var k7=lk.skinWeights;for(ln=0,ld=k7.length;ln<ld;ln++){this.skinWeights.push(k7[ln].clone())}var lh=lk.skinIndices;for(ln=0,ld=lh.length;ln<ld;ln++){this.skinIndices.push(lh[ln].clone())}var lg=lk.lineDistances;for(ln=0,ld=lg.length;ln<ld;ln++){this.lineDistances.push(lg[ln])}var la=lk.boundingBox;if(la!==null){this.boundingBox=la.clone()}var lb=lk.boundingSphere;if(lb!==null){this.boundingSphere=lb.clone()}this.elementsNeedUpdate=lk.elementsNeedUpdate;this.verticesNeedUpdate=lk.verticesNeedUpdate;this.uvsNeedUpdate=lk.uvsNeedUpdate;this.normalsNeedUpdate=lk.normalsNeedUpdate;this.colorsNeedUpdate=lk.colorsNeedUpdate;this.lineDistancesNeedUpdate=lk.lineDistancesNeedUpdate;this.groupsNeedUpdate=lk.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function gy(k7,k5,k6){if(Array.isArray(k7)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.name="";this.array=k7;this.itemSize=k5;this.count=k7!==undefined?k7.length/k5:0;this.normalized=k6===true;this.dynamic=false;this.updateRange={offset:0,count:-1};this.version=0}Object.defineProperty(gy.prototype,"needsUpdate",{set:function(k5){if(k5===true){this.version++}}});Object.assign(gy.prototype,{isBufferAttribute:true,onUploadCallback:function(){},setArray:function(k5){if(Array.isArray(k5)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=k5!==undefined?k5.length/this.itemSize:0;this.array=k5;return this},setDynamic:function(k5){this.dynamic=k5;return this},copy:function(k5){this.name=k5.name;this.array=new k5.array.constructor(k5.array);this.itemSize=k5.itemSize;this.count=k5.count;this.normalized=k5.normalized;this.dynamic=k5.dynamic;return this},copyAt:function(k9,k7,k8){k9*=this.itemSize;k8*=k7.itemSize;for(var k6=0,k5=this.itemSize;k6<k5;k6++){this.array[k9+k6]=k7.array[k8+k6]}return this},copyArray:function(k5){this.array.set(k5);return this},copyColorsArray:function(k6){var la=this.array,k9=0;for(var k8=0,k5=k6.length;k8<k5;k8++){var k7=k6[k8];if(k7===undefined){a.Logger.log(a.Logger.WARNING,"THREE.BufferAttribute.copyColorsArray(): color is undefined",k8);k7=new id()}la[k9++]=k7.r;la[k9++]=k7.g;la[k9++]=k7.b}return this},copyVector2sArray:function(k8){var la=this.array,k9=0;for(var k7=0,k6=k8.length;k7<k6;k7++){var k5=k8[k7];if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.BufferAttribute.copyVector2sArray(): vector is undefined",k7);k5=new bg()}la[k9++]=k5.x;la[k9++]=k5.y}return this},copyVector3sArray:function(k8){var la=this.array,k9=0;for(var k7=0,k6=k8.length;k7<k6;k7++){var k5=k8[k7];if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.BufferAttribute.copyVector3sArray(): vector is undefined",k7);k5=new bf()}la[k9++]=k5.x;la[k9++]=k5.y;la[k9++]=k5.z}return this},copyVector4sArray:function(k8){var la=this.array,k9=0;for(var k7=0,k6=k8.length;k7<k6;k7++){var k5=k8[k7];if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.BufferAttribute.copyVector4sArray(): vector is undefined",k7);k5=new bd()}la[k9++]=k5.x;la[k9++]=k5.y;la[k9++]=k5.z;la[k9++]=k5.w}return this},set:function(k5,k6){if(k6===undefined){k6=0}this.array.set(k5,k6);return this},getX:function(k5){return this.array[k5*this.itemSize]},setX:function(k6,k5){this.array[k6*this.itemSize]=k5;return this},getY:function(k5){return this.array[k5*this.itemSize+1]},setY:function(k5,k6){this.array[k5*this.itemSize+1]=k6;return this},getZ:function(k5){return this.array[k5*this.itemSize+2]},setZ:function(k5,k6){this.array[k5*this.itemSize+2]=k6;return this},getW:function(k5){return this.array[k5*this.itemSize+3]},setW:function(k6,k5){this.array[k6*this.itemSize+3]=k5;return this},setXY:function(k6,k5,k7){k6*=this.itemSize;this.array[k6+0]=k5;this.array[k6+1]=k7;return this},setXYZ:function(k6,k5,k8,k7){k6*=this.itemSize;this.array[k6+0]=k5;this.array[k6+1]=k8;this.array[k6+2]=k7;return this},setXYZW:function(k7,k5,k9,k8,k6){k7*=this.itemSize;this.array[k7+0]=k5;this.array[k7+1]=k9;this.array[k7+2]=k8;this.array[k7+3]=k6;return this},onUpload:function(k5){this.onUploadCallback=k5;return this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function c8(k7,k5,k6){gy.call(this,new Int8Array(k7),k5,k6)}c8.prototype=Object.create(gy.prototype);c8.prototype.constructor=c8;function fe(k7,k5,k6){gy.call(this,new Uint8Array(k7),k5,k6)}fe.prototype=Object.create(gy.prototype);fe.prototype.constructor=fe;function d6(k7,k5,k6){gy.call(this,new Uint8ClampedArray(k7),k5,k6)}d6.prototype=Object.create(gy.prototype);d6.prototype.constructor=d6;function f0(k7,k5,k6){gy.call(this,new Int16Array(k7),k5,k6)}f0.prototype=Object.create(gy.prototype);f0.prototype.constructor=f0;function aI(k7,k5,k6){gy.call(this,new Uint16Array(k7),k5,k6)}aI.prototype=Object.create(gy.prototype);aI.prototype.constructor=aI;function ha(k7,k5,k6){gy.call(this,new Int32Array(k7),k5,k6)}ha.prototype=Object.create(gy.prototype);ha.prototype.constructor=ha;function b2(k7,k5,k6){gy.call(this,new Uint32Array(k7),k5,k6)}b2.prototype=Object.create(gy.prototype);b2.prototype.constructor=b2;function ei(k7,k5,k6){gy.call(this,new Float32Array(k7),k5,k6)}ei.prototype=Object.create(gy.prototype);ei.prototype.constructor=ei;function it(k7,k5,k6){gy.call(this,new Float64Array(k7),k5,k6)}it.prototype=Object.create(gy.prototype);it.prototype.constructor=it;function dj(){this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingBox=null;this.boundingSphere=null;this.verticesNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.uvsNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(dj.prototype,{computeGroups:function(lb){var la;var k7=[];var k6=undefined;var k5=lb.faces;for(var k8=0;k8<k5.length;k8++){var k9=k5[k8];if(k9.materialIndex!==k6){k6=k9.materialIndex;if(la!==undefined){la.count=(k8*3)-la.start;k7.push(la)}la={start:k8*3,materialIndex:k6}}}if(la!==undefined){la.count=(k8*3)-la.start;k7.push(la)}this.groups=k7},fromGeometry:function(k9){var k7=k9.faces;var la=k9.vertices;var lr=k9.faceVertexUvs;var k5=lr[0]&&lr[0].length>0;var ln=lr[1]&&lr[1].length>0;var ld=k9.morphTargets;var ls=ld.length;var k6;if(ls>0){k6=[];for(var lo=0;lo<ls;lo++){k6[lo]={name:ld[lo].name,data:[]}}this.morphTargets.position=k6}var lf=k9.morphNormals;var lj=lf.length;var li;if(lj>0){li=[];for(var lo=0;lo<lj;lo++){li[lo]={name:lf[lo].name,data:[]}}this.morphTargets.normal=li}var lg=k9.skinIndices;var k8=k9.skinWeights;var lb=lg.length===la.length;var lt=k8.length===la.length;if(la.length>0&&k7.length===0){a.Logger.log(a.Logger.SEVERE,"THREE.DirectGeometry: Faceless geometries are not supported.")}for(var lo=0;lo<k7.length;lo++){var lc=k7[lo];this.vertices.push(la[lc.a],la[lc.b],la[lc.c]);var ll=lc.vertexNormals;if(ll.length===3){this.normals.push(ll[0],ll[1],ll[2])}else{var lu=lc.normal;this.normals.push(lu,lu,lu)}var lh=lc.vertexColors;if(lh.length===3){this.colors.push(lh[0],lh[1],lh[2])}else{var lk=lc.color;this.colors.push(lk,lk,lk)}if(k5===true){var le=lr[0][lo];if(le!==undefined){this.uvs.push(le[0],le[1],le[2])}else{a.Logger.log(a.Logger.WARNING,"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",lo);this.uvs.push(new bg(),new bg(),new bg())}}if(ln===true){var le=lr[1][lo];if(le!==undefined){this.uvs2.push(le[0],le[1],le[2])}else{a.Logger.log(a.Logger.WARNING,"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",lo);this.uvs2.push(new bg(),new bg(),new bg())}}for(var lm=0;lm<ls;lm++){var lq=ld[lm].vertices;k6[lm].data.push(lq[lc.a],lq[lc.b],lq[lc.c])}for(var lm=0;lm<lj;lm++){var lp=lf[lm].vertexNormals[lo];li[lm].data.push(lp.a,lp.b,lp.c)}if(lb){this.skinIndices.push(lg[lc.a],lg[lc.b],lg[lc.c])}if(lt){this.skinWeights.push(k8[lc.a],k8[lc.b],k8[lc.c])}}this.computeGroups(k9);this.verticesNeedUpdate=k9.verticesNeedUpdate;this.normalsNeedUpdate=k9.normalsNeedUpdate;this.colorsNeedUpdate=k9.colorsNeedUpdate;this.uvsNeedUpdate=k9.uvsNeedUpdate;this.groupsNeedUpdate=k9.groupsNeedUpdate;return this}});function i7(k8){if(k8.length===0){return -Infinity}var k5=k8[0];for(var k7=1,k6=k8.length;k7<k6;++k7){if(k8[k7]>k5){k5=k8[k7]}}return k5}var iU=1;function cl(){Object.defineProperty(this,"id",{value:iU+=2});this.uuid=dY.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.drawRange={start:0,count:Infinity};this.userData={}}cl.prototype=Object.assign(Object.create(aQ.prototype),{constructor:cl,isBufferGeometry:true,getIndex:function(){return this.index},setIndex:function(k5){if(Array.isArray(k5)){this.index=new (i7(k5)>65535?b2:aI)(k5,1)}else{this.index=k5}},addAttribute:function(k5,k6){if(!(k6&&k6.isBufferAttribute)&&!(k6&&k6.isInterleavedBufferAttribute)){a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).");return this.addAttribute(k5,new gy(arguments[1],arguments[2]))}if(k5==="index"){a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.");this.setIndex(k6);return this}this.attributes[k5]=k6;return this},getAttribute:function(k5){return this.attributes[k5]},removeAttribute:function(k5){delete this.attributes[k5];return this},addGroup:function(k7,k6,k5){this.groups.push({start:k7,count:k6,materialIndex:k5!==undefined?k5:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(k6,k5){this.drawRange.start=k6;this.drawRange.count=k5},applyMatrix:function(k6){var k5=this.attributes.position;if(k5!==undefined){k6.applyToBufferAttribute(k5);k5.needsUpdate=true}var k8=this.attributes.normal;if(k8!==undefined){var k9=new fw().getNormalMatrix(k6);k9.applyToBufferAttribute(k8);k8.needsUpdate=true}var k7=this.attributes.tangent;if(k7!==undefined){var k9=new fw().getNormalMatrix(k6);k9.applyToBufferAttribute(k7);k7.needsUpdate=true}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}return this},rotateX:function(){var k6=new fv();return function k5(k7){k6.makeRotationX(k7);this.applyMatrix(k6);return this}}(),rotateY:function(){var k6=new fv();return function k5(k7){k6.makeRotationY(k7);this.applyMatrix(k6);return this}}(),rotateZ:function(){var k6=new fv();return function k5(k7){k6.makeRotationZ(k7);this.applyMatrix(k6);return this}}(),translate:function(){var k5=new fv();return function k6(k7,k9,k8){k5.makeTranslation(k7,k9,k8);this.applyMatrix(k5);return this}}(),scale:function(){var k5=new fv();return function k6(k7,k9,k8){k5.makeScale(k7,k9,k8);this.applyMatrix(k5);return this}}(),lookAt:function(){var k5=new fg();return function k6(k7){k5.lookAt(k7);k5.updateMatrix();this.applyMatrix(k5.matrix)}}(),center:function(){var k6=new bf();return function k5(){this.computeBoundingBox();this.boundingBox.getCenter(k6).negate();this.translate(k6.x,k6.y,k6.z);return this}}(),setFromObject:function(k8){var k9=k8.geometry;if(k8.isPoints||k8.isLine){var k6=new ei(k9.vertices.length*3,3);var k5=new ei(k9.colors.length*3,3);this.addAttribute("position",k6.copyVector3sArray(k9.vertices));this.addAttribute("color",k5.copyColorsArray(k9.colors));if(k9.lineDistances&&k9.lineDistances.length===k9.vertices.length){var k7=new ei(k9.lineDistances.length,1);this.addAttribute("lineDistance",k7.copyArray(k9.lineDistances))}if(k9.boundingSphere!==null){this.boundingSphere=k9.boundingSphere.clone()}if(k9.boundingBox!==null){this.boundingBox=k9.boundingBox.clone()}}else{if(k8.isMesh){if(k9&&k9.isGeometry){this.fromGeometry(k9)}}}return this},setFromPoints:function(k9){var k6=[];for(var k8=0,k7=k9.length;k8<k7;k8++){var k5=k9[k8];k6.push(k5.x,k5.y,k5.z||0)}this.addAttribute("position",new ei(k6,3));return this},updateFromObject:function(k5){var k7=k5.geometry;if(k5.isMesh){var k8=k7.__directGeometry;if(k7.elementsNeedUpdate===true){k8=undefined;k7.elementsNeedUpdate=false}if(k8===undefined){return this.fromGeometry(k7)}k8.verticesNeedUpdate=k7.verticesNeedUpdate;k8.normalsNeedUpdate=k7.normalsNeedUpdate;k8.colorsNeedUpdate=k7.colorsNeedUpdate;k8.uvsNeedUpdate=k7.uvsNeedUpdate;k8.groupsNeedUpdate=k7.groupsNeedUpdate;k7.verticesNeedUpdate=false;k7.normalsNeedUpdate=false;k7.colorsNeedUpdate=false;k7.uvsNeedUpdate=false;k7.groupsNeedUpdate=false;k7=k8}var k6;if(k7.verticesNeedUpdate===true){k6=this.attributes.position;if(k6!==undefined){k6.copyVector3sArray(k7.vertices);k6.needsUpdate=true}k7.verticesNeedUpdate=false}if(k7.normalsNeedUpdate===true){k6=this.attributes.normal;if(k6!==undefined){k6.copyVector3sArray(k7.normals);k6.needsUpdate=true}k7.normalsNeedUpdate=false}if(k7.colorsNeedUpdate===true){k6=this.attributes.color;if(k6!==undefined){k6.copyColorsArray(k7.colors);k6.needsUpdate=true}k7.colorsNeedUpdate=false}if(k7.uvsNeedUpdate){k6=this.attributes.uv;if(k6!==undefined){k6.copyVector2sArray(k7.uvs);k6.needsUpdate=true}k7.uvsNeedUpdate=false}if(k7.lineDistancesNeedUpdate){k6=this.attributes.lineDistance;if(k6!==undefined){k6.copyArray(k7.lineDistances);k6.needsUpdate=true}k7.lineDistancesNeedUpdate=false}if(k7.groupsNeedUpdate){k7.computeGroups(k5.geometry);this.groups=k7.groups;k7.groupsNeedUpdate=false}return this},fromGeometry:function(k5){k5.__directGeometry=new dj().fromGeometry(k5);return this.fromDirectGeometry(k5.__directGeometry)},fromDirectGeometry:function(lh){var lf=new Float32Array(lh.vertices.length*3);this.addAttribute("position",new gy(lf,3).copyVector3sArray(lh.vertices));if(lh.normals.length>0){var li=new Float32Array(lh.normals.length*3);this.addAttribute("normal",new gy(li,3).copyVector3sArray(lh.normals))}if(lh.colors.length>0){var k6=new Float32Array(lh.colors.length*3);this.addAttribute("color",new gy(k6,3).copyColorsArray(lh.colors))}if(lh.uvs.length>0){var lc=new Float32Array(lh.uvs.length*2);this.addAttribute("uv",new gy(lc,2).copyVector2sArray(lh.uvs))}if(lh.uvs2.length>0){var lj=new Float32Array(lh.uvs2.length*2);this.addAttribute("uv2",new gy(lj,2).copyVector2sArray(lh.uvs2))}this.groups=lh.groups;for(var k7 in lh.morphTargets){var lg=[];var la=lh.morphTargets[k7];for(var le=0,lb=la.length;le<lb;le++){var ld=la[le];var k9=new ei(ld.data.length*3,3);k9.name=ld.name;lg.push(k9.copyVector3sArray(ld.data))}this.morphAttributes[k7]=lg}if(lh.skinIndices.length>0){var k8=new ei(lh.skinIndices.length*4,4);this.addAttribute("skinIndex",k8.copyVector4sArray(lh.skinIndices))}if(lh.skinWeights.length>0){var k5=new ei(lh.skinWeights.length*4,4);this.addAttribute("skinWeight",k5.copyVector4sArray(lh.skinWeights))}if(lh.boundingSphere!==null){this.boundingSphere=lh.boundingSphere.clone()}if(lh.boundingBox!==null){this.boundingBox=lh.boundingBox.clone()}return this},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new aO()}var k5=this.attributes.position;if(k5!==undefined){this.boundingBox.setFromBufferAttribute(k5)}else{this.boundingBox.makeEmpty()}if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)){a.Logger.log(a.Logger.SEVERE,'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},computeBoundingSphere:function(){var k7=new aO();var k5=new bf();return function k6(){if(this.boundingSphere===null){this.boundingSphere=new d0()}var k9=this.attributes.position;if(k9){var k8=this.boundingSphere.center;k7.setFromBufferAttribute(k9);k7.getCenter(k8);var la=0;for(var lc=0,lb=k9.count;lc<lb;lc++){k5.x=k9.getX(lc);k5.y=k9.getY(lc);k5.z=k9.getZ(lc);la=Math.max(la,k8.distanceToSquared(k5))}this.boundingSphere.radius=Math.sqrt(la);if(isNaN(this.boundingSphere.radius)){a.Logger.log(a.Logger.SEVERE,'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var lf=this.index;var lc=this.attributes;if(lc.position){var le=lc.position.array;if(lc.normal===undefined){this.addAttribute("normal",new gy(new Float32Array(le.length),3))}else{var lg=lc.normal.array;for(var ld=0,li=lg.length;ld<li;ld++){lg[ld]=0}}var lh=lc.normal.array;var k8,k6,k5;var la=new bf(),k9=new bf(),k7=new bf();var lb=new bf(),lk=new bf();if(lf){var lj=lf.array;for(var ld=0,li=lf.count;ld<li;ld+=3){k8=lj[ld+0]*3;k6=lj[ld+1]*3;k5=lj[ld+2]*3;la.fromArray(le,k8);k9.fromArray(le,k6);k7.fromArray(le,k5);lb.subVectors(k7,k9);lk.subVectors(la,k9);lb.cross(lk);lh[k8]+=lb.x;lh[k8+1]+=lb.y;lh[k8+2]+=lb.z;lh[k6]+=lb.x;lh[k6+1]+=lb.y;lh[k6+2]+=lb.z;lh[k5]+=lb.x;lh[k5+1]+=lb.y;lh[k5+2]+=lb.z}}else{for(var ld=0,li=le.length;ld<li;ld+=9){la.fromArray(le,ld);k9.fromArray(le,ld+3);k7.fromArray(le,ld+6);lb.subVectors(k7,k9);lk.subVectors(la,k9);lb.cross(lk);lh[ld]=lb.x;lh[ld+1]=lb.y;lh[ld+2]=lb.z;lh[ld+3]=lb.x;lh[ld+4]=lb.y;lh[ld+5]=lb.z;lh[ld+6]=lb.x;lh[ld+7]=lb.y;lh[ld+8]=lb.z}}this.normalizeNormals();lc.normal.needsUpdate=true}},merge:function(le,la){if(!(le&&le.isBufferGeometry)){a.Logger.log(a.Logger.SEVERE,"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",le);return}if(la===undefined){la=0;a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. "+"Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.")}var lb=this.attributes;for(var lf in lb){if(le.attributes[lf]===undefined){continue}var k8=lb[lf];var k6=k8.array;var k7=le.attributes[lf];var k5=k7.array;var ld=k7.itemSize;for(var lc=0,k9=ld*la;lc<k5.length;lc++,k9++){k6[k9]=k5[lc]}}return this},normalizeNormals:function(){var k5=new bf();return function k6(){var k9=this.attributes.normal;for(var k8=0,k7=k9.count;k8<k7;k8++){k5.x=k9.getX(k8);k5.y=k9.getY(k8);k5.z=k9.getZ(k8);k5.normalize();k9.setXYZ(k8,k5.x,k5.y,k5.z)}}}(),toNonIndexed:function(){function li(lk,lr){var lp=lk.array;var ls=lk.itemSize;var lt=new lp.constructor(lr.length*ls);var lo=0,lq=0;for(var ln=0,ll=lr.length;ln<ll;ln++){lo=lr[ln]*ls;for(var lm=0;lm<ls;lm++){lt[lq++]=lp[lo++]}}return new gy(lt,ls)}if(this.index===null){a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.");return this}var lf=new cl();var lj=this.index.array;var lc=this.attributes;for(var k5 in lc){var k7=lc[k5];var k6=li(k7,lj);lf.addAttribute(k5,k6)}var le=this.morphAttributes;for(k5 in le){var lb=[];var k9=le[k5];for(var ld=0,lg=k9.length;ld<lg;ld++){var k7=k9[ld];var k6=li(k7,lj);lb.push(k6)}lf.morphAttributes[k5]=lb}var k8=this.groups;for(var ld=0,la=k8.length;ld<la;ld++){var lh=k8[ld];lf.addGroup(lh.start,lh.count,lh.materialIndex)}return lf},toJSON:function(){var lb={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};lb.uuid=this.uuid;lb.type=this.type;if(this.name!==""){lb.name=this.name}if(Object.keys(this.userData).length>0){lb.userData=this.userData}if(this.parameters!==undefined){var lj=this.parameters;for(var li in lj){if(lj[li]!==undefined){lb[li]=lj[li]}}return lb}lb.data={attributes:{}};var le=this.index;if(le!==null){lb.data.index={type:le.array.constructor.name,array:Array.prototype.slice.call(le.array)}}var k9=this.attributes;for(var li in k9){var k7=k9[li];var k5={itemSize:k7.itemSize,type:k7.array.constructor.name,array:Array.prototype.slice.call(k7.array),normalized:k7.normalized};if(k7.name!==""){k5.name=k7.name}lb.data.attributes[li]=k5}var ld={};var lc=false;for(var li in this.morphAttributes){var k6=this.morphAttributes[li];var lf=[];for(var la=0,lh=k6.length;la<lh;la++){var k7=k6[la];var k5={itemSize:k7.itemSize,type:k7.array.constructor.name,array:Array.prototype.slice.call(k7.array),normalized:k7.normalized};if(k7.name!==""){k5.name=k7.name}lf.push(k5)}if(lf.length>0){ld[li]=lf;lc=true}}if(lc){lb.data.morphAttributes=ld}var k8=this.groups;if(k8.length>0){lb.data.groups=JSON.parse(JSON.stringify(k8))}var lg=this.boundingSphere;if(lg!==null){lb.data.boundingSphere={center:lg.center.toArray(),radius:lg.radius}}return lb},clone:function(){return new cl().copy(this)},copy:function(k5){var k6,ld,la;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.name=k5.name;var lf=k5.index;if(lf!==null){this.setIndex(lf.clone())}var lc=k5.attributes;for(k6 in lc){var k7=lc[k6];this.addAttribute(k6,k7.clone())}var le=k5.morphAttributes;for(k6 in le){var lg=[];var k9=le[k6];for(ld=0,la=k9.length;ld<la;ld++){lg.push(k9[ld].clone())}this.morphAttributes[k6]=lg}var k8=k5.groups;for(ld=0,la=k8.length;ld<la;ld++){var li=k8[ld];this.addGroup(li.start,li.count,li.materialIndex)}var lb=k5.boundingBox;if(lb!==null){this.boundingBox=lb.clone()}var lh=k5.boundingSphere;if(lh!==null){this.boundingSphere=lh.clone()}this.drawRange.start=k5.drawRange.start;this.drawRange.count=k5.drawRange.count;this.userData=k5.userData;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function f7(k7,k5,la,k9,k8,k6){fm.call(this);this.type="BoxGeometry";this.parameters={width:k7,height:k5,depth:la,widthSegments:k9,heightSegments:k8,depthSegments:k6};this.fromBufferGeometry(new jg(k7,k5,la,k9,k8,k6));this.mergeVertices()}f7.prototype=Object.create(fm.prototype);f7.prototype.constructor=f7;function jg(k5,lh,la,k6,lg,k7){cl.call(this);this.type="BoxBufferGeometry";this.parameters={width:k5,height:lh,depth:la,widthSegments:k6,heightSegments:lg,depthSegments:k7};var li=this;k5=k5||1;lh=lh||1;la=la||1;k6=Math.floor(k6)||1;lg=Math.floor(lg)||1;k7=Math.floor(k7)||1;var lf=[];var lc=[];var le=[];var k8=[];var ld=0;var k9=0;lb("z","y","x",-1,-1,la,lh,k5,k7,lg,0);lb("z","y","x",1,-1,la,lh,-k5,k7,lg,1);lb("x","z","y",1,1,k5,la,lh,k6,k7,2);lb("x","z","y",1,-1,k5,la,-lh,k6,k7,3);lb("x","y","z",1,-1,k5,lh,la,k6,lg,4);lb("x","y","z",-1,-1,k5,lh,-la,k6,lg,5);this.setIndex(lf);this.addAttribute("position",new ei(lc,3));this.addAttribute("normal",new ei(le,3));this.addAttribute("uv",new ei(k8,2));function lb(ly,lx,lw,lj,lr,lB,lz,lL,lF,lE,lt){var lD=lB/lF;var ls=lz/lE;var lA=lB/2;var lC=lz/2;var lq=lL/2;var lG=lF+1;var lm=lE+1;var ll=0;var lo=0;var lp,ln;var lk=new bf();for(ln=0;ln<lm;ln++){var lu=ln*ls-lC;for(lp=0;lp<lG;lp++){var lv=lp*lD-lA;lk[ly]=lv*lj;lk[lx]=lu*lr;lk[lw]=lq;lc.push(lk.x,lk.y,lk.z);lk[ly]=0;lk[lx]=0;lk[lw]=lL>0?1:-1;le.push(lk.x,lk.y,lk.z);k8.push(lp/lF);k8.push(1-(ln/lE));ll+=1}}for(ln=0;ln<lE;ln++){for(lp=0;lp<lF;lp++){var lK=ld+lp+lG*ln;var lJ=ld+lp+lG*(ln+1);var lI=ld+(lp+1)+lG*(ln+1);var lH=ld+(lp+1)+lG*ln;lf.push(lK,lJ,lH);lf.push(lJ,lI,lH);lo+=6}}li.addGroup(k9,lo,lt);k9+=lo;ld+=ll}}jg.prototype=Object.create(cl.prototype);jg.prototype.constructor=jg;function eZ(k6,k5,k8,k7){fm.call(this);this.type="PlaneGeometry";this.parameters={width:k6,height:k5,widthSegments:k8,heightSegments:k7};this.fromBufferGeometry(new c0(k6,k5,k8,k7));this.mergeVertices()}eZ.prototype=Object.create(fm.prototype);eZ.prototype.constructor=eZ;function c0(lj,lh,k6,lg){cl.call(this);this.type="PlaneBufferGeometry";this.parameters={width:lj,height:lh,widthSegments:k6,heightSegments:lg};lj=lj||1;lh=lh||1;var la=lj/2;var k7=lh/2;var ll=Math.floor(k6)||1;var lk=Math.floor(lg)||1;var lm=ll+1;var k5=lk+1;var ls=lj/ll;var lo=lh/lk;var k9,k8;var lb=[];var lc=[];var li=[];var lf=[];for(k8=0;k8<k5;k8++){var ld=k8*lo-k7;for(k9=0;k9<lm;k9++){var le=k9*ls-la;lc.push(le,-ld,0);li.push(0,0,1);lf.push(k9/ll);lf.push(1-(k8/lk))}}for(k8=0;k8<lk;k8++){for(k9=0;k9<ll;k9++){var lr=k9+lm*k8;var lq=k9+lm*(k8+1);var lp=(k9+1)+lm*(k8+1);var ln=(k9+1)+lm*k8;lb.push(lr,lq,ln);lb.push(lq,lp,ln)}}this.setIndex(lb);this.addAttribute("position",new ei(lc,3));this.addAttribute("normal",new ei(li,3));this.addAttribute("uv",new ei(lf,2))}c0.prototype=Object.create(cl.prototype);c0.prototype.constructor=c0;var cS=0;function jo(){Object.defineProperty(this,"id",{value:cS++});this.uuid=dY.generateUUID();this.name="";this.type="Material";this.fog=true;this.lights=true;this.blending=iK;this.side=D;this.flatShading=false;this.vertexTangents=false;this.vertexColors=kr;this.opacity=1;this.transparent=false;this.blendSrc=cE;this.blendDst=h9;this.blendEquation=cM;this.blendSrcAlpha=null;this.blendDstAlpha=null;this.blendEquationAlpha=null;this.depthFunc=bY;this.depthTest=true;this.depthWrite=true;this.clippingPlanes=null;this.clipIntersection=false;this.clipShadows=false;this.shadowSide=null;this.colorWrite=true;this.precision=null;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.dithering=false;this.alphaTest=0;this.premultipliedAlpha=false;this.visible=true;this.userData={};this.needsUpdate=true}jo.prototype=Object.assign(Object.create(aQ.prototype),{constructor:jo,isMaterial:true,onBeforeCompile:function(){},setValues:function(k5){if(k5===undefined){return}for(var k6 in k5){var k8=k5[k6];if(k8===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Material: '"+k6+"' parameter is undefined.");continue}if(k6==="shading"){a.Logger.log(a.Logger.WARNING,"THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=(k8===hJ)?true:false;continue}var k7=this[k6];if(k7===undefined){a.Logger.log(a.Logger.WARNING,"THREE."+this.type+": '"+k6+"' is not a property of this material.");continue}if(k7&&k7.isColor){k7.set(k8)}else{if((k7&&k7.isVector3)&&(k8&&k8.isVector3)){k7.copy(k8)}else{this[k6]=k8}}}},toJSON:function(la){var k8=(la===undefined||typeof la==="string");if(k8){la={textures:{},images:{}}}var k9={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};k9.uuid=this.uuid;k9.type=this.type;if(this.name!==""){k9.name=this.name}if(this.color&&this.color.isColor){k9.color=this.color.getHex()}if(this.roughness!==undefined){k9.roughness=this.roughness}if(this.metalness!==undefined){k9.metalness=this.metalness}if(this.emissive&&this.emissive.isColor){k9.emissive=this.emissive.getHex()}if(this.emissiveIntensity!==1){k9.emissiveIntensity=this.emissiveIntensity}if(this.specular&&this.specular.isColor){k9.specular=this.specular.getHex()}if(this.shininess!==undefined){k9.shininess=this.shininess}if(this.clearCoat!==undefined){k9.clearCoat=this.clearCoat}if(this.clearCoatRoughness!==undefined){k9.clearCoatRoughness=this.clearCoatRoughness}if(this.map&&this.map.isTexture){k9.map=this.map.toJSON(la).uuid}if(this.alphaMap&&this.alphaMap.isTexture){k9.alphaMap=this.alphaMap.toJSON(la).uuid}if(this.lightMap&&this.lightMap.isTexture){k9.lightMap=this.lightMap.toJSON(la).uuid}if(this.aoMap&&this.aoMap.isTexture){k9.aoMap=this.aoMap.toJSON(la).uuid;k9.aoMapIntensity=this.aoMapIntensity}if(this.bumpMap&&this.bumpMap.isTexture){k9.bumpMap=this.bumpMap.toJSON(la).uuid;k9.bumpScale=this.bumpScale}if(this.normalMap&&this.normalMap.isTexture){k9.normalMap=this.normalMap.toJSON(la).uuid;k9.normalMapType=this.normalMapType;k9.normalScale=this.normalScale.toArray()}if(this.displacementMap&&this.displacementMap.isTexture){k9.displacementMap=this.displacementMap.toJSON(la).uuid;k9.displacementScale=this.displacementScale;k9.displacementBias=this.displacementBias}if(this.roughnessMap&&this.roughnessMap.isTexture){k9.roughnessMap=this.roughnessMap.toJSON(la).uuid}if(this.metalnessMap&&this.metalnessMap.isTexture){k9.metalnessMap=this.metalnessMap.toJSON(la).uuid}if(this.emissiveMap&&this.emissiveMap.isTexture){k9.emissiveMap=this.emissiveMap.toJSON(la).uuid}if(this.specularMap&&this.specularMap.isTexture){k9.specularMap=this.specularMap.toJSON(la).uuid}if(this.envMap&&this.envMap.isTexture){k9.envMap=this.envMap.toJSON(la).uuid;k9.reflectivity=this.reflectivity;if(this.combine!==undefined){k9.combine=this.combine}if(this.envMapIntensity!==undefined){k9.envMapIntensity=this.envMapIntensity}}if(this.gradientMap&&this.gradientMap.isTexture){k9.gradientMap=this.gradientMap.toJSON(la).uuid}if(this.size!==undefined){k9.size=this.size}if(this.sizeAttenuation!==undefined){k9.sizeAttenuation=this.sizeAttenuation}if(this.blending!==iK){k9.blending=this.blending}if(this.flatShading===true){k9.flatShading=this.flatShading}if(this.side!==D){k9.side=this.side}if(this.vertexColors!==kr){k9.vertexColors=this.vertexColors}if(this.opacity<1){k9.opacity=this.opacity}if(this.transparent===true){k9.transparent=this.transparent}k9.depthFunc=this.depthFunc;k9.depthTest=this.depthTest;k9.depthWrite=this.depthWrite;if(this.rotation!==0){k9.rotation=this.rotation}if(this.polygonOffset===true){k9.polygonOffset=true}if(this.polygonOffsetFactor!==0){k9.polygonOffsetFactor=this.polygonOffsetFactor}if(this.polygonOffsetUnits!==0){k9.polygonOffsetUnits=this.polygonOffsetUnits}if(this.linewidth!==1){k9.linewidth=this.linewidth}if(this.dashSize!==undefined){k9.dashSize=this.dashSize}if(this.gapSize!==undefined){k9.gapSize=this.gapSize}if(this.scale!==undefined){k9.scale=this.scale}if(this.dithering===true){k9.dithering=true}if(this.alphaTest>0){k9.alphaTest=this.alphaTest}if(this.premultipliedAlpha===true){k9.premultipliedAlpha=this.premultipliedAlpha}if(this.wireframe===true){k9.wireframe=this.wireframe}if(this.wireframeLinewidth>1){k9.wireframeLinewidth=this.wireframeLinewidth}if(this.wireframeLinecap!=="round"){k9.wireframeLinecap=this.wireframeLinecap}if(this.wireframeLinejoin!=="round"){k9.wireframeLinejoin=this.wireframeLinejoin}if(this.morphTargets===true){k9.morphTargets=true}if(this.skinning===true){k9.skinning=true}if(this.visible===false){k9.visible=false}if(JSON.stringify(this.userData)!=="{}"){k9.userData=this.userData}function k7(lc){var lb=[];for(var ld in lc){var le=lc[ld];delete le.metadata;lb.push(le)}return lb}if(k8){var k6=k7(la.textures);var k5=k7(la.images);if(k6.length>0){k9.textures=k6}if(k5.length>0){k9.images=k5}}return k9},clone:function(){return new this.constructor().copy(this)},copy:function(k7){this.name=k7.name;this.fog=k7.fog;this.lights=k7.lights;this.blending=k7.blending;this.side=k7.side;this.flatShading=k7.flatShading;this.vertexColors=k7.vertexColors;this.opacity=k7.opacity;this.transparent=k7.transparent;this.blendSrc=k7.blendSrc;this.blendDst=k7.blendDst;this.blendEquation=k7.blendEquation;this.blendSrcAlpha=k7.blendSrcAlpha;this.blendDstAlpha=k7.blendDstAlpha;this.blendEquationAlpha=k7.blendEquationAlpha;this.depthFunc=k7.depthFunc;this.depthTest=k7.depthTest;this.depthWrite=k7.depthWrite;this.colorWrite=k7.colorWrite;this.precision=k7.precision;this.polygonOffset=k7.polygonOffset;this.polygonOffsetFactor=k7.polygonOffsetFactor;this.polygonOffsetUnits=k7.polygonOffsetUnits;this.dithering=k7.dithering;this.alphaTest=k7.alphaTest;this.premultipliedAlpha=k7.premultipliedAlpha;this.visible=k7.visible;this.userData=JSON.parse(JSON.stringify(k7.userData));this.clipShadows=k7.clipShadows;this.clipIntersection=k7.clipIntersection;var k6=k7.clippingPlanes,k8=null;if(k6!==null){var k9=k6.length;k8=new Array(k9);for(var k5=0;k5!==k9;++k5){k8[k5]=k6[k5].clone()}}this.clippingPlanes=k8;this.shadowSide=k7.shadowSide;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var cA="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";var hs="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function jW(k5){jo.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader=cA;this.fragmentShader=hs;this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.clipping=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.extensions={derivatives:false,fragDepth:false,drawBuffers:false,shaderTextureLOD:false};this.defaultAttributeValues={"color":[1,1,1],"uv":[0,0],"uv2":[0,0]};this.index0AttributeName=undefined;this.uniformsNeedUpdate=false;if(k5!==undefined){if(k5.attributes!==undefined){a.Logger.log(a.Logger.SEVERE,"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.")}this.setValues(k5)}}jW.prototype=Object.create(jo.prototype);jW.prototype.constructor=jW;jW.prototype.isShaderMaterial=true;jW.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.fragmentShader=k5.fragmentShader;this.vertexShader=k5.vertexShader;this.uniforms=ke(k5.uniforms);this.defines=Object.assign({},k5.defines);this.wireframe=k5.wireframe;this.wireframeLinewidth=k5.wireframeLinewidth;this.lights=k5.lights;this.clipping=k5.clipping;this.skinning=k5.skinning;this.morphTargets=k5.morphTargets;this.morphNormals=k5.morphNormals;this.extensions=k5.extensions;return this};jW.prototype.toJSON=function(lb){var la=jo.prototype.toJSON.call(this,lb);la.uniforms={};for(var k6 in this.uniforms){var k5=this.uniforms[k6];var k9=k5.value;if(k9&&k9.isTexture){la.uniforms[k6]={type:"t",value:k9.toJSON(lb).uuid}}else{if(k9&&k9.isColor){la.uniforms[k6]={type:"c",value:k9.getHex()}}else{if(k9&&k9.isVector2){la.uniforms[k6]={type:"v2",value:k9.toArray()}}else{if(k9&&k9.isVector3){la.uniforms[k6]={type:"v3",value:k9.toArray()}}else{if(k9&&k9.isVector4){la.uniforms[k6]={type:"v4",value:k9.toArray()}}else{if(k9&&k9.isMatrix3){la.uniforms[k6]={type:"m3",value:k9.toArray()}}else{if(k9&&k9.isMatrix4){la.uniforms[k6]={type:"m4",value:k9.toArray()}}else{la.uniforms[k6]={value:k9}}}}}}}}}if(Object.keys(this.defines).length>0){la.defines=this.defines}la.vertexShader=this.vertexShader;la.fragmentShader=this.fragmentShader;var k8={};for(var k7 in this.extensions){if(this.extensions[k7]===true){k8[k7]=true}}if(Object.keys(k8).length>0){la.extensions=k8}return la};function gr(k5,k6){this.origin=(k5!==undefined)?k5:new bf();this.direction=(k6!==undefined)?k6:new bf()}Object.assign(gr.prototype,{set:function(k5,k6){this.origin.copy(k5);this.direction.copy(k6);return this},clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.origin.copy(k5.origin);this.direction.copy(k5.direction);return this},at:function(k5,k6){if(k6===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Ray: .at() target is now required");k6=new bf()}return k6.copy(this.direction).multiplyScalar(k5).add(this.origin)},lookAt:function(k5){this.direction.copy(k5).sub(this.origin).normalize();return this},recast:function(){var k6=new bf();return function k5(k7){this.origin.copy(this.at(k7,k6));return this}}(),closestPointToPoint:function(k5,k7){if(k7===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Ray: .closestPointToPoint() target is now required");k7=new bf()}k7.subVectors(k5,this.origin);var k6=k7.dot(this.direction);if(k6<0){return k7.copy(this.origin)}return k7.copy(this.direction).multiplyScalar(k6).add(this.origin)},distanceToPoint:function(k5){return Math.sqrt(this.distanceSqToPoint(k5))},distanceSqToPoint:function(){var k6=new bf();return function k5(k7){var k8=k6.subVectors(k7,this.origin).dot(this.direction);if(k8<0){return this.origin.distanceToSquared(k7)}k6.copy(this.direction).multiplyScalar(k8).add(this.origin);return k6.distanceToSquared(k7)}}(),distanceSqToSegment:function(){var k7=new bf();var k6=new bf();var k8=new bf();return function k5(ll,lh,li,lb){k7.copy(ll).add(lh).multiplyScalar(0.5);k6.copy(lh).sub(ll).normalize();k8.copy(this.origin).sub(k7);var ld=ll.distanceTo(lh)*0.5;var k9=-this.direction.dot(k6);var lj=k8.dot(this.direction);var lg=-k8.dot(k6);var lf=k8.lengthSq();var le=Math.abs(1-k9*k9);var ln,lk,la,lm;if(le>0){ln=k9*lg-lj;lk=k9*lj-lg;lm=ld*le;if(ln>=0){if(lk>=-lm){if(lk<=lm){var lc=1/le;ln*=lc;lk*=lc;la=ln*(ln+k9*lk+2*lj)+lk*(k9*ln+lk+2*lg)+lf}else{lk=ld;ln=Math.max(0,-(k9*lk+lj));la=-ln*ln+lk*(lk+2*lg)+lf}}else{lk=-ld;ln=Math.max(0,-(k9*lk+lj));la=-ln*ln+lk*(lk+2*lg)+lf}}else{if(lk<=-lm){ln=Math.max(0,-(-k9*ld+lj));lk=(ln>0)?-ld:Math.min(Math.max(-ld,-lg),ld);la=-ln*ln+lk*(lk+2*lg)+lf}else{if(lk<=lm){ln=0;lk=Math.min(Math.max(-ld,-lg),ld);la=lk*(lk+2*lg)+lf}else{ln=Math.max(0,-(k9*ld+lj));lk=(ln>0)?ld:Math.min(Math.max(-ld,-lg),ld);la=-ln*ln+lk*(lk+2*lg)+lf}}}}else{lk=(k9>0)?-ld:ld;ln=Math.max(0,-(k9*lk+lj));la=-ln*ln+lk*(lk+2*lg)+lf}if(li){li.copy(this.direction).multiplyScalar(ln).add(this.origin)}if(lb){lb.copy(k6).multiplyScalar(lk).add(k7)}return la}}(),intersectSphere:function(){var k6=new bf();return function k5(k7,ld){k6.subVectors(k7.center,this.origin);var le=k6.dot(this.direction);var la=k6.dot(k6)-le*le;var k8=k7.radius*k7.radius;if(la>k8){return null}var lc=Math.sqrt(k8-la);var lb=le-lc;var k9=le+lc;if(lb<0&&k9<0){return null}if(lb<0){return this.at(k9,ld)}return this.at(lb,ld)}}(),intersectsSphere:function(k5){return this.distanceSqToPoint(k5.center)<=(k5.radius*k5.radius)},distanceToPlane:function(k5){var k7=k5.normal.dot(this.direction);if(k7===0){if(k5.distanceToPoint(this.origin)===0){return 0}return null}var k6=-(this.origin.dot(k5.normal)+k5.constant)/k7;return k6>=0?k6:null},intersectPlane:function(k5,k7){var k6=this.distanceToPlane(k5);if(k6===null){return null}return this.at(k6,k7)},intersectsPlane:function(k5){var k6=k5.distanceToPoint(this.origin);if(k6===0){return true}var k7=k5.normal.dot(this.direction);if(k7*k6<0){return true}return false},intersectBox:function(la,ld){var k7,lb,le,k5,lc,lg;var k9=1/this.direction.x,k8=1/this.direction.y,k6=1/this.direction.z;var lf=this.origin;if(k9>=0){k7=(la.min.x-lf.x)*k9;lb=(la.max.x-lf.x)*k9}else{k7=(la.max.x-lf.x)*k9;lb=(la.min.x-lf.x)*k9}if(k8>=0){le=(la.min.y-lf.y)*k8;k5=(la.max.y-lf.y)*k8}else{le=(la.max.y-lf.y)*k8;k5=(la.min.y-lf.y)*k8}if((k7>k5)||(le>lb)){return null}if(le>k7||k7!==k7){k7=le}if(k5<lb||lb!==lb){lb=k5}if(k6>=0){lc=(la.min.z-lf.z)*k6;lg=(la.max.z-lf.z)*k6}else{lc=(la.max.z-lf.z)*k6;lg=(la.min.z-lf.z)*k6}if((k7>lg)||(lc>lb)){return null}if(lc>k7||k7!==k7){k7=lc}if(lg<lb||lb!==lb){lb=lg}if(lb<0){return null}return this.at(k7>=0?k7:lb,ld)},intersectsBox:(function(){var k6=new bf();return function k5(k7){return this.intersectBox(k7,k6)!==null}})(),intersectTriangle:function(){var k9=new bf();var k6=new bf();var k5=new bf();var k8=new bf();return function k7(lj,lh,lg,la,le){k6.subVectors(lh,lj);k5.subVectors(lg,lj);k8.crossVectors(k6,k5);var lf=this.direction.dot(k8);var lb;if(lf>0){if(la){return null}lb=1}else{if(lf<0){lb=-1;lf=-lf}else{return null}}k9.subVectors(this.origin,lj);var li=lb*this.direction.dot(k5.crossVectors(k9,k5));if(li<0){return null}var lc=lb*this.direction.dot(k6.cross(k9));if(lc<0){return null}if(li+lc>lf){return null}var ld=-lb*k9.dot(k8);if(ld<0){return null}return this.at(ld/lf,le)}}(),applyMatrix4:function(k5){this.origin.applyMatrix4(k5);this.direction.transformDirection(k5);return this},equals:function(k5){return k5.origin.equals(this.origin)&&k5.direction.equals(this.direction)}});function gD(k6,k5,k7){this.a=(k6!==undefined)?k6:new bf();this.b=(k5!==undefined)?k5:new bf();this.c=(k7!==undefined)?k7:new bf()}Object.assign(gD,{getNormal:function(){var k5=new bf();return function k6(k8,k7,lb,la){if(la===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .getNormal() target is now required");la=new bf()}la.subVectors(lb,k7);k5.subVectors(k8,k7);la.cross(k5);var k9=la.lengthSq();if(k9>0){return la.multiplyScalar(1/Math.sqrt(k9))}return la.set(0,0,0)}}(),getBarycoord:function(){var k5=new bf();var k8=new bf();var k7=new bf();return function k6(lk,lj,lh,le,ld){k5.subVectors(le,lj);k8.subVectors(lh,lj);k7.subVectors(lk,lj);var li=k5.dot(k5);var lg=k5.dot(k8);var lf=k5.dot(k7);var lb=k8.dot(k8);var k9=k8.dot(k7);var lc=(li*lb-lg*lg);if(ld===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .getBarycoord() target is now required");ld=new bf()}if(lc===0){return ld.set(-2,-1,-1)}var la=1/lc;var lm=(lb*lf-lg*k9)*la;var ll=(li*k9-lg*lf)*la;return ld.set(1-lm-ll,ll,lm)}}(),containsPoint:function(){var k6=new bf();return function k5(k8,k9,k7,la){gD.getBarycoord(k8,k9,k7,la,k6);return(k6.x>=0)&&(k6.y>=0)&&((k6.x+k6.y)<=1)}}(),getUV:function(){var k6=new bf();return function k5(k7,le,ld,lb,la,k9,k8,lc){this.getBarycoord(k7,le,ld,lb,k6);lc.set(0,0);lc.addScaledVector(la,k6.x);lc.addScaledVector(k9,k6.y);lc.addScaledVector(k8,k6.z);return lc}}()});Object.assign(gD.prototype,{set:function(k6,k5,k7){this.a.copy(k6);this.b.copy(k5);this.c.copy(k7);return this},setFromPointsAndIndices:function(k6,k8,k7,k5){this.a.copy(k6[k8]);this.b.copy(k6[k7]);this.c.copy(k6[k5]);return this},clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.a.copy(k5.a);this.b.copy(k5.b);this.c.copy(k5.c);return this},getArea:function(){var k5=new bf();var k7=new bf();return function k6(){k5.subVectors(this.c,this.b);k7.subVectors(this.a,this.b);return k5.cross(k7).length()*0.5}}(),getMidpoint:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .getMidpoint() target is now required");k5=new bf()}return k5.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(k5){return gD.getNormal(this.a,this.b,this.c,k5)},getPlane:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .getPlane() target is now required");k5=new bf()}return k5.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(k5,k6){return gD.getBarycoord(k5,this.a,this.b,this.c,k6)},containsPoint:function(k5){return gD.containsPoint(k5,this.a,this.b,this.c)},getUV:function(k6,k9,k8,k7,k5){return gD.getUV(k6,this.a,this.b,this.c,k9,k8,k7,k5)},intersectsBox:function(k5){return k5.intersectsTriangle(this)},closestPointToPoint:function(){var k9=new bf();var k8=new bf();var lb=new bf();var k6=new bf();var k7=new bf();var la=new bf();return function k5(le,lg){if(lg===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .closestPointToPoint() target is now required");lg=new bf()}var lm=this.a,ll=this.b,lj=this.c;var lp,ln;k9.subVectors(ll,lm);k8.subVectors(lj,lm);k6.subVectors(le,lm);var ld=k9.dot(k6);var lc=k8.dot(k6);if(ld<=0&&lc<=0){return lg.copy(lm)}k7.subVectors(le,ll);var ls=k9.dot(k7);var lr=k8.dot(k7);if(ls>=0&&lr<=ls){return lg.copy(ll)}var lh=ld*lr-ls*lc;if(lh<=0&&ld>=0&&ls<=0){lp=ld/(ld-ls);return lg.copy(lm).addScaledVector(k9,lp)}la.subVectors(le,lj);var lq=k9.dot(la);var lo=k8.dot(la);if(lo>=0&&lq<=lo){return lg.copy(lj)}var li=lq*lc-ld*lo;if(li<=0&&lc>=0&&lo<=0){ln=lc/(lc-lo);return lg.copy(lm).addScaledVector(k8,ln)}var lk=ls*lo-lq*lr;if(lk<=0&&(lr-ls)>=0&&(lq-lo)>=0){lb.subVectors(lj,ll);ln=(lr-ls)/((lr-ls)+(lq-lo));return lg.copy(ll).addScaledVector(lb,ln)}var lf=1/(lk+li+lh);lp=li*lf;ln=lh*lf;return lg.copy(lm).addScaledVector(k9,lp).addScaledVector(k8,ln)}}(),equals:function(k5){return k5.a.equals(this.a)&&k5.b.equals(this.b)&&k5.c.equals(this.c)}});function e2(k5){jo.call(this);this.type="MeshBasicMaterial";this.color=new id(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=u;this.reflectivity=1;this.refractionRatio=0.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.lights=false;this.setValues(k5)}e2.prototype=Object.create(jo.prototype);e2.prototype.constructor=e2;e2.prototype.isMeshBasicMaterial=true;e2.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.color.copy(k5.color);this.map=k5.map;this.lightMap=k5.lightMap;this.lightMapIntensity=k5.lightMapIntensity;this.aoMap=k5.aoMap;this.aoMapIntensity=k5.aoMapIntensity;this.specularMap=k5.specularMap;this.alphaMap=k5.alphaMap;this.envMap=k5.envMap;this.combine=k5.combine;this.reflectivity=k5.reflectivity;this.refractionRatio=k5.refractionRatio;this.wireframe=k5.wireframe;this.wireframeLinewidth=k5.wireframeLinewidth;this.wireframeLinecap=k5.wireframeLinecap;this.wireframeLinejoin=k5.wireframeLinejoin;this.skinning=k5.skinning;this.morphTargets=k5.morphTargets;return this};function kH(k6,k5){fg.call(this);this.type="Mesh";this.geometry=k6!==undefined?k6:new cl();this.material=k5!==undefined?k5:new e2({color:Math.random()*16777215});this.drawMode=cZ;this.updateMorphTargets()}kH.prototype=Object.assign(Object.create(fg.prototype),{constructor:kH,isMesh:true,setDrawMode:function(k5){this.drawMode=k5},copy:function(k5){fg.prototype.copy.call(this,k5);this.drawMode=k5.drawMode;if(k5.morphTargetInfluences!==undefined){this.morphTargetInfluences=k5.morphTargetInfluences.slice()}if(k5.morphTargetDictionary!==undefined){this.morphTargetDictionary=Object.assign({},k5.morphTargetDictionary)}return this},updateMorphTargets:function(){var la=this.geometry;var k5,lc,k7;if(la.isBufferGeometry){var k8=la.morphAttributes;var k9=Object.keys(k8);if(k9.length>0){var lb=k8[k9[0]];if(lb!==undefined){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(k5=0,lc=lb.length;k5<lc;k5++){k7=lb[k5].name||String(k5);this.morphTargetInfluences.push(0);this.morphTargetDictionary[k7]=k5}}}}else{var k6=la.morphTargets;if(k6!==undefined&&k6.length>0){a.Logger.log(a.Logger.SEVERE,"THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},raycast:(function(){var lk=new fv();var lj=new gr();var lb=new d0();var k8=new bf();var k7=new bf();var k6=new bf();var lg=new bf();var ld=new bf();var lc=new bf();var li=new bg();var lh=new bg();var lf=new bg();var ll=new bf();var k5=new bf();function le(lr,ls,lt,lu,lq,lo,ln,lv){var lp;if(ls.side===c5){lp=lu.intersectTriangle(ln,lo,lq,true,lv)}else{lp=lu.intersectTriangle(lq,lo,ln,ls.side!==fE,lv)}if(lp===null){return null}k5.copy(lv);k5.applyMatrix4(lr.matrixWorld);var lm=lt.ray.origin.distanceTo(k5);if(lm<lt.near||lm>lt.far){return null}return{distance:lm,point:k5.clone(),object:lr}}function k9(lo,lq,lt,lv,lp,ln,lw,lu,ls){k8.fromBufferAttribute(lp,lw);k7.fromBufferAttribute(lp,lu);k6.fromBufferAttribute(lp,ls);var lm=le(lo,lq,lt,lv,k8,k7,k6,ll);if(lm){if(ln){li.fromBufferAttribute(ln,lw);lh.fromBufferAttribute(ln,lu);lf.fromBufferAttribute(ln,ls);lm.uv=gD.getUV(ll,k8,k7,k6,li,lh,lf,new bg())}var lr=new dO(lw,lu,ls);gD.getNormal(k8,k7,k6,lr.normal);lm.face=lr}return lm}return function la(lJ,lw){var lx=this.geometry;var lR=this.material;var lE=this.matrixWorld;if(lR===undefined){return}if(lx.boundingSphere===null){lx.computeBoundingSphere()}lb.copy(lx.boundingSphere);lb.applyMatrix4(lE);if(lJ.ray.intersectsSphere(lb)===false){return}lk.getInverse(lE);lj.copy(lJ.ray).applyMatrix4(lk);if(lx.boundingBox!==null){if(lj.intersectsBox(lx.boundingBox)===false){return}}var lo;if(lx.isBufferGeometry){var lX,lW,lV;var lI=lx.index;var lO=lx.attributes.position;var lG=lx.attributes.uv;var lr=lx.groups;var lq=lx.drawRange;var lT,lS,lH,lt;var lA,lC;var lD,lz;if(lI!==null){if(Array.isArray(lR)){for(lT=0,lH=lr.length;lT<lH;lT++){lA=lr[lT];lC=lR[lA.materialIndex];lD=Math.max(lA.start,lq.start);lz=Math.min((lA.start+lA.count),(lq.start+lq.count));for(lS=lD,lt=lz;lS<lt;lS+=3){lX=lI.getX(lS);lW=lI.getX(lS+1);lV=lI.getX(lS+2);lo=k9(this,lC,lJ,lj,lO,lG,lX,lW,lV);if(lo){lo.faceIndex=Math.floor(lS/3);lo.face.materialIndex=lA.materialIndex;lw.push(lo)}}}}else{lD=Math.max(0,lq.start);lz=Math.min(lI.count,(lq.start+lq.count));for(lT=lD,lH=lz;lT<lH;lT+=3){lX=lI.getX(lT);lW=lI.getX(lT+1);lV=lI.getX(lT+2);lo=k9(this,lR,lJ,lj,lO,lG,lX,lW,lV);if(lo){lo.faceIndex=Math.floor(lT/3);lw.push(lo)}}}}else{if(lO!==undefined){if(Array.isArray(lR)){for(lT=0,lH=lr.length;lT<lH;lT++){lA=lr[lT];lC=lR[lA.materialIndex];lD=Math.max(lA.start,lq.start);lz=Math.min((lA.start+lA.count),(lq.start+lq.count));for(lS=lD,lt=lz;lS<lt;lS+=3){lX=lS;lW=lS+1;lV=lS+2;lo=k9(this,lC,lJ,lj,lO,lG,lX,lW,lV);if(lo){lo.faceIndex=Math.floor(lS/3);lo.face.materialIndex=lA.materialIndex;lw.push(lo)}}}}else{lD=Math.max(0,lq.start);lz=Math.min(lO.count,(lq.start+lq.count));for(lT=lD,lH=lz;lT<lH;lT+=3){lX=lT;lW=lT+1;lV=lT+2;lo=k9(this,lR,lJ,lj,lO,lG,lX,lW,lV);if(lo){lo.faceIndex=Math.floor(lT/3);lw.push(lo)}}}}}}else{if(lx.isGeometry){var l0,lZ,lY;var lB=Array.isArray(lR);var lp=lx.vertices;var lv=lx.faces;var lN;var lM=lx.faceVertexUvs[0];if(lM.length>0){lN=lM}for(var lU=0,lF=lv.length;lU<lF;lU++){var lu=lv[lU];var ls=lB?lR[lu.materialIndex]:lR;if(ls===undefined){continue}l0=lp[lu.a];lZ=lp[lu.b];lY=lp[lu.c];if(ls.morphTargets===true){var ly=lx.morphTargets;var lQ=this.morphTargetInfluences;k8.set(0,0,0);k7.set(0,0,0);k6.set(0,0,0);for(var lP=0,lm=ly.length;lP<lm;lP++){var lK=lQ[lP];if(lK===0){continue}var lL=ly[lP].vertices;k8.addScaledVector(lg.subVectors(lL[lu.a],l0),lK);k7.addScaledVector(ld.subVectors(lL[lu.b],lZ),lK);k6.addScaledVector(lc.subVectors(lL[lu.c],lY),lK)}k8.add(l0);k7.add(lZ);k6.add(lY);l0=k8;lZ=k7;lY=k6}lo=le(this,ls,lJ,lj,l0,lZ,lY,ll);if(lo){if(lN&&lN[lU]){var ln=lN[lU];li.copy(ln[0]);lh.copy(ln[1]);lf.copy(ln[2]);lo.uv=gD.getUV(ll,l0,lZ,lY,li,lh,lf,new bg())}lo.face=lu;lo.faceIndex=lU;lw.push(lo)}}}}}}()),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function k1(la,k5,le,k8){var lf=new id(0);var lg=0;var lc;var k7;var k9=null;var lb=0;function k6(lk,ll,li,lm){var lh=ll.background;if(lh===null){ld(lf,lg);k9=null;lb=0}else{if(lh&&lh.isColor){ld(lh,1);lm=true;k9=null;lb=0}}if(la.autoClear||lm){la.clear(la.autoClearColor,la.autoClearDepth,la.autoClearStencil)}if(lh&&(lh.isCubeTexture||lh.isWebGLRenderTargetCube)){if(k7===undefined){k7=new kH(new jg(1,1,1),new jW({type:"BackgroundCubeMaterial",uniforms:ke(kx.cube.uniforms),vertexShader:kx.cube.vertexShader,fragmentShader:kx.cube.fragmentShader,side:c5,depthTest:false,depthWrite:false,fog:false}));k7.geometry.removeAttribute("normal");k7.geometry.removeAttribute("uv");k7.onBeforeRender=function(lo,lp,ln){this.matrixWorld.copyPosition(ln.matrixWorld)};Object.defineProperty(k7.material,"map",{get:function(){return this.uniforms.tCube.value}});le.update(k7)}var lj=lh.isWebGLRenderTargetCube?lh.texture:lh;k7.material.uniforms.tCube.value=lj;k7.material.uniforms.tFlip.value=(lh.isWebGLRenderTargetCube)?1:-1;if(k9!==lh||lb!==lj.version){k7.material.needsUpdate=true;k9=lh;lb=lj.version}lk.unshift(k7,k7.geometry,k7.material,0,0,null)}else{if(lh&&lh.isTexture){if(lc===undefined){lc=new kH(new c0(2,2),new jW({type:"BackgroundMaterial",uniforms:ke(kx.background.uniforms),vertexShader:kx.background.vertexShader,fragmentShader:kx.background.fragmentShader,side:D,depthTest:false,depthWrite:false,fog:false}));lc.geometry.removeAttribute("normal");Object.defineProperty(lc.material,"map",{get:function(){return this.uniforms.t2D.value}});le.update(lc)}lc.material.uniforms.t2D.value=lh;if(lh.matrixAutoUpdate===true){lh.updateMatrix()}lc.material.uniforms.uvTransform.value.copy(lh.matrix);if(k9!==lh||lb!==lh.version){lc.material.needsUpdate=true;k9=lh;lb=lh.version}lk.unshift(lc,lc.geometry,lc.material,0,0,null)}}}function ld(lh,li){k5.buffers.color.setClear(lh.r,lh.g,lh.b,li,k8)}return{getClearColor:function(){return lf},setClearColor:function(lh,li){lf.set(lh);lg=li!==undefined?li:1;ld(lf,lg)},getClearAlpha:function(){return lg},setClearAlpha:function(lh){lg=lh;ld(lf,lg)},render:k6}}function f3(lc,k8,k9,k5){var lb;function k6(ld){lb=ld}function k7(le,ld){lc.drawArrays(lb,le,ld);k9.update(ld,lb)}function la(le,lg,ld){var lf;if(k5.isWebGL2){lf=lc}else{lf=k8.get("ANGLE_instanced_arrays");if(lf===null){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}lf[k5.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](lb,lg,ld,le.maxInstancedCount);k9.update(ld,lb,le.maxInstancedCount)}this.setMode=k6;this.render=k7;this.renderInstances=la}function ew(lm,lq,k9){var k6;function lf(){if(k6!==undefined){return k6}var lr=lq.get("EXT_texture_filter_anisotropic");if(lr!==null){k6=lm.getParameter(lr.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else{k6=0}return k6}function lb(lr){if(lr==="highp"){if(lm.getShaderPrecisionFormat(35633,36338).precision>0&&lm.getShaderPrecisionFormat(35632,36338).precision>0){return"highp"}lr="mediump"}if(lr==="mediump"){if(lm.getShaderPrecisionFormat(35633,36337).precision>0&&lm.getShaderPrecisionFormat(35632,36337).precision>0){return"mediump"}}return"lowp"}var k7=typeof WebGL2RenderingContext!=="undefined"&&lm instanceof WebGL2RenderingContext;var ln=k9.precision!==undefined?k9.precision:"highp";var ld=lb(ln);if(ld!==ln){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer:",ln,"not supported, using",ld,"instead.");ln=ld}var li=k9.logarithmicDepthBuffer===true;var le=lm.getParameter(34930);var lc=lm.getParameter(35660);var lo=lm.getParameter(3379);var la=lm.getParameter(34076);var k8=lm.getParameter(34921);var lh=lm.getParameter(36347);var ll=lm.getParameter(36348);var lp=lm.getParameter(36349);var lg=lc>0;var lk=k7||!!lq.get("OES_texture_float");var k5=lg&&lk;var lj=k7?lm.getParameter(36183):0;return{isWebGL2:k7,getMaxAnisotropy:lf,getMaxPrecision:lb,precision:ln,logarithmicDepthBuffer:li,maxTextures:le,maxVertexTextures:lc,maxTextureSize:lo,maxCubemapSize:la,maxAttributes:k8,maxVertexUniforms:lh,maxVaryings:ll,maxFragmentUniforms:lp,vertexTextures:lg,floatFragmentTextures:lk,floatVertexTextures:k5,maxSamples:lj}}function E(){var le=this,k9=null,k8=0,lb=false,lc=false,ld=new fA(),k6=new fw(),k7={value:null,needsUpdate:false};this.uniform=k7;this.numPlanes=0;this.numIntersection=0;this.init=function(lh,lf,li){var lg=lh.length!==0||lf||k8!==0||lb;lb=lf;k9=la(lh,li,0);k8=lh.length;return lg};this.beginShadows=function(){lc=true;la(null)};this.endShadows=function(){lc=false;k5()};this.setState=function(lj,lh,ln,ll,lf,lg){if(!lb||lj===null||lj.length===0||lc&&!ln){if(lc){la(null)}else{k5()}}else{var lo=lc?0:k8,lm=lo*4,lk=lf.clippingState||null;k7.value=lk;lk=la(lj,ll,lm,lg);for(var li=0;li!==lm;++li){lk[li]=k9[li]}lf.clippingState=lk;this.numIntersection=lh?this.numPlanes:0;this.numPlanes+=lo}};function k5(){if(k7.value!==k9){k7.value=k9;k7.needsUpdate=k8>0}le.numPlanes=k8;le.numIntersection=0}function la(ll,ln,lf,lo){var li=ll!==null?ll.length:0,lm=null;if(li!==0){lm=k7.value;if(lo!==true||lm===null){var lh=lf+li*4,lj=ln.matrixWorldInverse;k6.getNormalMatrix(lj);if(lm===null||lm.length<lh){lm=new Float32Array(lh)}for(var lk=0,lg=lf;lk!==li;++lk,lg+=4){ld.copy(ll[lk]).applyMatrix4(lj,k6);ld.normal.toArray(lm,lg);lm[lg+3]=ld.constant}}k7.value=lm;k7.needsUpdate=true}le.numPlanes=li;return lm}}function cc(k6){var k5={};return{get:function(k7){if(k5[k7]!==undefined){return k5[k7]}var k8;switch(k7){case"WEBGL_depth_texture":k8=k6.getExtension("WEBGL_depth_texture")||k6.getExtension("MOZ_WEBGL_depth_texture")||k6.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":k8=k6.getExtension("EXT_texture_filter_anisotropic")||k6.getExtension("MOZ_EXT_texture_filter_anisotropic")||k6.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":k8=k6.getExtension("WEBGL_compressed_texture_s3tc")||k6.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||k6.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":k8=k6.getExtension("WEBGL_compressed_texture_pvrtc")||k6.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:k8=k6.getExtension(k7)}if(k8===null){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: "+k7+" extension not supported.")}k5[k7]=k8;return k8}}}function hL(lc,lb,k8){var k7={};var ld={};function k6(lg){var li=lg.target;var lh=k7[li.id];if(lh.index!==null){lb.remove(lh.index)}for(var le in lh.attributes){lb.remove(lh.attributes[le])}li.removeEventListener("dispose",k6);delete k7[li.id];var lf=ld[lh.id];if(lf){lb.remove(lf);delete ld[lh.id]}k8.memory.geometries--}function k9(le,lg){var lf=k7[lg.id];if(lf){return lf}lg.addEventListener("dispose",k6);if(lg.isBufferGeometry){lf=lg}else{if(lg.isGeometry){if(lg._bufferGeometry===undefined){lg._bufferGeometry=new cl().setFromObject(le)}lf=lg._bufferGeometry}}k7[lg.id]=lf;k8.memory.geometries++;return lf}function la(lk){var lh=lk.index;var lg=lk.attributes;if(lh!==null){lb.update(lh,34963)}for(var lf in lg){lb.update(lg[lf],34962)}var lj=lk.morphAttributes;for(var lf in lj){var ll=lj[lf];for(var li=0,le=ll.length;li<le;li++){lb.update(ll[li],34962)}}}function k5(lm){var lf=ld[lm.id];if(lf){return lf}var lo=[];var le=lm.index;var li=lm.attributes;if(le!==null){var lj=le.array;for(var lh=0,lg=lj.length;lh<lg;lh+=3){var ln=lj[lh+0];var ll=lj[lh+1];var lk=lj[lh+2];lo.push(ln,ll,ll,lk,lk,ln)}}else{var lj=li.position.array;for(var lh=0,lg=(lj.length/3)-1;lh<lg;lh+=3){var ln=lh+0;var ll=lh+1;var lk=lh+2;lo.push(ln,ll,ll,lk,lk,ln)}}lf=new (i7(lo)>65535?b2:aI)(lo,1);lb.update(lf,34963);ld[lm.id]=lf;return lf}return{get:k9,update:la,getWireframeAttribute:k5}}function bi(lb,ld,k9,k7){var lc;function k6(lg){lc=lg}var le,lf;function k5(lg){le=lg.type;lf=lg.bytesPerElement}function k8(lh,lg){lb.drawElements(lc,lg,le,lh*lf);k9.update(lg,lc)}function la(lh,lj,lg){var li;if(k7.isWebGL2){li=lb}else{var li=ld.get("ANGLE_instanced_arrays");if(li===null){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}li[k7.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](lc,lg,le,lj*lf,lh.maxInstancedCount);k9.update(lg,lc,lh.maxInstancedCount)}this.setMode=k6;this.setIndex=k5;this.render=k8;this.renderInstances=la}function i5(k7){var k9={geometries:0,textures:0};var k5={frame:0,calls:0,triangles:0,points:0,lines:0};function k8(lb,lc,la){la=la||1;k5.calls++;switch(lc){case 4:k5.triangles+=la*(lb/3);break;case 5:case 6:k5.triangles+=la*(lb-2);break;case 1:k5.lines+=la*(lb/2);break;case 3:k5.lines+=la*(lb-1);break;case 2:k5.lines+=la*lb;break;case 0:k5.points+=la*lb;break;default:a.Logger.log(a.Logger.SEVERE,"THREE.WebGLInfo: Unknown draw mode:",lc);break}}function k6(){k5.frame++;k5.calls=0;k5.triangles=0;k5.points=0;k5.lines=0}return{memory:k9,render:k5,programs:null,autoReset:true,reset:k6,update:k8}}function hO(k6,k5){return Math.abs(k5[1])-Math.abs(k6[1])}function b6(k7){var k6={};var k5=new Float32Array(8);function k8(lb,li,lf,ld){var lj=lb.morphTargetInfluences;var k9=lj.length;var lk=k6[li.id];if(lk===undefined){lk=[];for(var lc=0;lc<k9;lc++){lk[lc]=[lc,0]}k6[li.id]=lk}var la=lf.morphTargets&&li.morphAttributes.position;var lh=lf.morphNormals&&li.morphAttributes.normal;for(var lc=0;lc<k9;lc++){var lg=lk[lc];if(lg[1]!==0){if(la){li.removeAttribute("morphTarget"+lc)}if(lh){li.removeAttribute("morphNormal"+lc)}}}for(var lc=0;lc<k9;lc++){var lg=lk[lc];lg[0]=lc;lg[1]=lj[lc]}lk.sort(hO);for(var lc=0;lc<8;lc++){var lg=lk[lc];if(lg){var le=lg[0];var ll=lg[1];if(ll){if(la){li.addAttribute("morphTarget"+lc,la[le])}if(lh){li.addAttribute("morphNormal"+lc,lh[le])}k5[lc]=ll;continue}}k5[lc]=0}ld.getUniforms().setValue(k7,"morphTargetInfluences",k5)}return{update:k8}}function jB(k6,k8){var k5={};function k9(la){var ld=k8.render.frame;var lc=la.geometry;var lb=k6.get(la,lc);if(k5[lb.id]!==ld){if(lc.isGeometry){lb.updateFromObject(la)}k6.update(lb);k5[lb.id]=ld}return lb}function k7(){k5={}}return{update:k9,dispose:k7}}function hf(lc,k6,la,k9,le,k7,ld,lb,k5,k8){lc=lc!==undefined?lc:[];k6=k6!==undefined?k6:b3;ld=ld!==undefined?ld:fK;eq.call(this,lc,k6,la,k9,le,k7,ld,lb,k5,k8);this.flipY=false}hf.prototype=Object.create(eq.prototype);hf.prototype.constructor=hf;hf.prototype.isCubeTexture=true;Object.defineProperty(hf.prototype,"images",{get:function(){return this.image},set:function(k5){this.image=k5}});function aM(k7,k6,k5,k8){eq.call(this,null);this.image={data:k7,width:k6,height:k5,depth:k8};this.magFilter=da;this.minFilter=da;this.wrapR=g7;this.generateMipmaps=false;this.flipY=false}aM.prototype=Object.create(eq.prototype);aM.prototype.constructor=aM;aM.prototype.isDataTexture3D=true;var jT=new eq();var a8=new aM();var kY=new hf();function gn(){this.seq=[];this.map={}}var i0=[];var ki=[];var aY=new Float32Array(16);var M=new Float32Array(9);var kE=new Float32Array(4);function eN(lc,lb,k6){var k8=lc[0];if(k8<=0||k8>0){return lc}var la=lb*k6,k7=i0[la];if(k7===undefined){k7=new Float32Array(la);i0[la]=k7}if(lb!==0){k8.toArray(k7,0);for(var k5=1,k9=0;k5!==lb;++k5){k9+=k6;lc[k5].toArray(k7,k9)}}return k7}function ak(k7,k5){if(k7.length!==k5.length){return false}for(var k8=0,k6=k7.length;k8<k6;k8++){if(k7[k8]!==k5[k8]){return false}}return true}function fb(k7,k5){for(var k8=0,k6=k5.length;k8<k6;k8++){k7[k8]=k5[k8]}}function bT(k7,k8){var k6=ki[k8];if(k6===undefined){k6=new Int32Array(k8);ki[k8]=k6}for(var k5=0;k5!==k8;++k5){k6[k5]=k7.allocTextureUnit()}return k6}function fO(k7,k6){var k5=this.cache;if(k5[0]===k6){return}k7.uniform1f(this.addr,k6);k5[0]=k6}function fJ(k7,k6){var k5=this.cache;if(k5[0]===k6){return}k7.uniform1i(this.addr,k6);k5[0]=k6}function G(k7,k6){var k5=this.cache;if(k6.x!==undefined){if(k5[0]!==k6.x||k5[1]!==k6.y){k7.uniform2f(this.addr,k6.x,k6.y);k5[0]=k6.x;k5[1]=k6.y}}else{if(ak(k5,k6)){return}k7.uniform2fv(this.addr,k6);fb(k5,k6)}}function dR(k7,k6){var k5=this.cache;if(k6.x!==undefined){if(k5[0]!==k6.x||k5[1]!==k6.y||k5[2]!==k6.z){k7.uniform3f(this.addr,k6.x,k6.y,k6.z);k5[0]=k6.x;k5[1]=k6.y;k5[2]=k6.z}}else{if(k6.r!==undefined){if(k5[0]!==k6.r||k5[1]!==k6.g||k5[2]!==k6.b){k7.uniform3f(this.addr,k6.r,k6.g,k6.b);k5[0]=k6.r;k5[1]=k6.g;k5[2]=k6.b}}else{if(ak(k5,k6)){return}k7.uniform3fv(this.addr,k6);fb(k5,k6)}}}function iP(k7,k6){var k5=this.cache;if(k6.x!==undefined){if(k5[0]!==k6.x||k5[1]!==k6.y||k5[2]!==k6.z||k5[3]!==k6.w){k7.uniform4f(this.addr,k6.x,k6.y,k6.z,k6.w);k5[0]=k6.x;k5[1]=k6.y;k5[2]=k6.z;k5[3]=k6.w}}else{if(ak(k5,k6)){return}k7.uniform4fv(this.addr,k6);fb(k5,k6)}}function Q(k8,k6){var k5=this.cache;var k7=k6.elements;if(k7===undefined){if(ak(k5,k6)){return}k8.uniformMatrix2fv(this.addr,false,k6);fb(k5,k6)}else{if(ak(k5,k7)){return}kE.set(k7);k8.uniformMatrix2fv(this.addr,false,kE);fb(k5,k7)}}function dX(k8,k6){var k5=this.cache;var k7=k6.elements;if(k7===undefined){if(ak(k5,k6)){return}k8.uniformMatrix3fv(this.addr,false,k6);fb(k5,k6)}else{if(ak(k5,k7)){return}M.set(k7);k8.uniformMatrix3fv(this.addr,false,M);fb(k5,k7)}}function iR(k8,k6){var k5=this.cache;var k7=k6.elements;if(k7===undefined){if(ak(k5,k6)){return}k8.uniformMatrix4fv(this.addr,false,k6);fb(k5,k6)}else{if(ak(k5,k7)){return}aY.set(k7);k8.uniformMatrix4fv(this.addr,false,aY);fb(k5,k7)}}function jM(k9,k6,k8){var k5=this.cache;var k7=k8.allocTextureUnit();if(k5[0]!==k7){k9.uniform1i(this.addr,k7);k5[0]=k7}k8.setTexture2D(k6||jT,k7)}function j8(k9,k6,k8){var k5=this.cache;var k7=k8.allocTextureUnit();if(k5[0]!==k7){k9.uniform1i(this.addr,k7);k5[0]=k7}k8.setTexture3D(k6||a8,k7)}function jI(k9,k6,k8){var k5=this.cache;var k7=k8.allocTextureUnit();if(k5[0]!==k7){k9.uniform1i(this.addr,k7);k5[0]=k7}k8.setTextureCube(k6||kY,k7)}function kZ(k7,k6){var k5=this.cache;if(ak(k5,k6)){return}k7.uniform2iv(this.addr,k6);fb(k5,k6)}function df(k7,k6){var k5=this.cache;if(ak(k5,k6)){return}k7.uniform3iv(this.addr,k6);fb(k5,k6)}function hR(k7,k6){var k5=this.cache;if(ak(k5,k6)){return}k7.uniform4iv(this.addr,k6);fb(k5,k6)}function bV(k5){switch(k5){case 5126:return fO;case 35664:return G;case 35665:return dR;case 35666:return iP;case 35674:return Q;case 35675:return dX;case 35676:return iR;case 35678:case 36198:return jM;case 35679:return j8;case 35680:return jI;case 5124:case 35670:return fJ;case 35667:case 35671:return kZ;case 35668:case 35672:return df;case 35669:case 35673:return hR}}function g1(k7,k6){var k5=this.cache;if(ak(k5,k6)){return}k7.uniform1fv(this.addr,k6);fb(k5,k6)}function gq(k7,k6){var k5=this.cache;if(ak(k5,k6)){return}k7.uniform1iv(this.addr,k6);fb(k5,k6)}function f2(k8,k6){var k5=this.cache;var k7=eN(k6,this.size,2);if(ak(k5,k7)){return}k8.uniform2fv(this.addr,k7);this.updateCache(k7)}function fF(k8,k6){var k5=this.cache;var k7=eN(k6,this.size,3);if(ak(k5,k7)){return}k8.uniform3fv(this.addr,k7);this.updateCache(k7)}function fs(k8,k6){var k5=this.cache;var k7=eN(k6,this.size,4);if(ak(k5,k7)){return}k8.uniform4fv(this.addr,k7);this.updateCache(k7)}function bK(k8,k6){var k5=this.cache;var k7=eN(k6,this.size,4);if(ak(k5,k7)){return}k8.uniformMatrix2fv(this.addr,false,k7);this.updateCache(k7)}function by(k8,k6){var k5=this.cache;var k7=eN(k6,this.size,9);if(ak(k5,k7)){return}k8.uniformMatrix3fv(this.addr,false,k7);this.updateCache(k7)}function bk(k8,k6){var k5=this.cache;var k7=eN(k6,this.size,16);if(ak(k5,k7)){return}k8.uniformMatrix4fv(this.addr,false,k7);this.updateCache(k7)}function jl(la,k7,k9){var k6=this.cache;var lb=k7.length;var k5=bT(k9,lb);if(ak(k6,k5)===false){la.uniform1iv(this.addr,k5);fb(k6,k5)}for(var k8=0;k8!==lb;++k8){k9.setTexture2D(k7[k8]||jT,k5[k8])}}function hZ(la,k7,k9){var k6=this.cache;var lb=k7.length;var k5=bT(k9,lb);if(ak(k6,k5)===false){la.uniform1iv(this.addr,k5);fb(k6,k5)}for(var k8=0;k8!==lb;++k8){k9.setTextureCube(k7[k8]||kY,k5[k8])}}function kw(k5){switch(k5){case 5126:return g1;case 35664:return f2;case 35665:return fF;case 35666:return fs;case 35674:return bK;case 35675:return by;case 35676:return bk;case 35678:return jl;case 35680:return hZ;case 5124:case 35670:return gq;case 35667:case 35671:return kZ;case 35668:case 35672:return df;case 35669:case 35673:return hR}}function j7(k7,k5,k6){this.id=k7;this.addr=k6;this.cache=[];this.setValue=bV(k5.type)}function i8(k7,k5,k6){this.id=k7;this.addr=k6;this.cache=[];this.size=k5.size;this.setValue=kw(k5.type)}i8.prototype.updateCache=function(k6){var k5=this.cache;if(k6 instanceof Float32Array&&k5.length!==k6.length){this.cache=new Float32Array(k6.length)}fb(k5,k6)};function eo(k5){this.id=k5;gn.call(this)}eo.prototype.setValue=function(la,k9,k8){var k5=this.seq;for(var k7=0,lb=k5.length;k7!==lb;++k7){var k6=k5[k7];k6.setValue(la,k9[k6.id],k8)}};var aR=/([\w\d_]+)(\])?(\[|\.)?/g;function dk(k5,k6){k5.seq.push(k6);k5.map[k6.id]=k6}function bz(ld,lc,k6){var lg=ld.name,lf=lg.length;aR.lastIndex=0;while(true){var la=aR.exec(lg),k8=aR.lastIndex,k7=la[1],lb=la[2]==="]",le=la[3];if(lb){k7=k7|0}if(le===undefined||le==="["&&k8+2===lf){dk(k6,le===undefined?new j7(k7,ld,lc):new i8(k7,ld,lc));break}else{var k5=k6.map,k9=k5[k7];if(k9===undefined){k9=new eo(k7);dk(k6,k9)}k6=k9}}}function x(k9,k5,k7){gn.call(this);this.renderer=k7;var lb=k9.getProgramParameter(k5,35718);for(var k6=0;k6<lb;++k6){var k8=k9.getActiveUniform(k5,k6),la=k9.getUniformLocation(k5,k8.name);bz(k8,la,this)}}x.prototype.setValue=function(k8,k6,k7){var k5=this.map[k6];if(k5!==undefined){k5.setValue(k8,k7,this.renderer)}};x.prototype.setOptional=function(k8,k7,k6){var k5=k7[k6];if(k5!==undefined){this.setValue(k8,k6,k5)}};x.upload=function(lb,k7,k6,la){for(var k9=0,lc=k7.length;k9!==lc;++k9){var k8=k7[k9],k5=k6[k8.id];if(k5.needsUpdate!==false){k8.setValue(lb,k5.value,la)}}};x.seqWithValue=function(k6,k5){var k9=[];for(var k8=0,la=k6.length;k8!==la;++k8){var k7=k6[k8];if(k7.id in k5){k9.push(k7)}}return k9};function k4(k6){var k5=k6.split("\n");for(var k7=0;k7<k5.length;k7++){k5[k7]=(k7+1)+": "+k5[k7]}return k5.join("\n")}function fR(k8,k6,k5){var k7=k8.createShader(k6);k8.shaderSource(k7,k5);k8.compileShader(k7);if(k8.getShaderParameter(k7,35713)===false){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLShader: Shader couldn't compile.")}if(k8.getShaderInfoLog(k7)!==""){a.Logger.log(a.Logger.WARNING,"THREE.WebGLShader: gl.getShaderInfoLog()",k6===35633?"vertex":"fragment",k8.getShaderInfoLog(k7),k4(k5))}return k7}var Y=0;function cH(k5){switch(k5){case fq:return["Linear","( value )"];case cB:return["sRGB","( value )"];case fz:return["RGBE","( value )"];case dd:return["RGBM","( value, 7.0 )"];case jS:return["RGBM","( value, 16.0 )"];case kf:return["RGBD","( value, 256.0 )"];case i9:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+k5)}}function bN(k7,k6){var k5=cH(k6);return"vec4 "+k7+"( vec4 value ) { return "+k5[0]+"ToLinear"+k5[1]+"; }"}function g4(k7,k6){var k5=cH(k6);return"vec4 "+k7+"( vec4 value ) { return LinearTo"+k5[0]+k5[1]+"; }"}function c4(k7,k5){var k6;switch(k5){case ku:k6="Linear";break;case g2:k6="Reinhard";break;case gB:k6="Uncharted2";break;case jj:k6="OptimizedCineon";break;case fu:k6="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+k5)}return"vec3 "+k7+"( vec3 color ) { return "+k6+"ToneMapping( color ); }"}function jp(k6,k7,k5){k6=k6||{};var k8=[(k6.derivatives||k7.envMapCubeUV||k7.bumpMap||(k7.normalMap&&!k7.objectSpaceNormalMap)||k7.flatShading)?"#extension GL_OES_standard_derivatives : enable":"",(k6.fragDepth||k7.logarithmicDepthBuffer)&&k5.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",(k6.drawBuffers)&&k5.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(k6.shaderTextureLOD||k7.envMap)&&k5.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return k8.filter(s).join("\n")}function jK(k6){var k8=[];for(var k5 in k6){var k7=k6[k5];if(k7===false){continue}k8.push("#define "+k5+" "+k7)}return k8.join("\n")}function iY(la,k6){var k5={};var lb=la.getProgramParameter(k6,35721);for(var k8=0;k8<lb;k8++){var k9=la.getActiveAttrib(k6,k8);var k7=k9.name;k5[k7]=la.getAttribLocation(k6,k7)}return k5}function s(k5){return k5!==""}function kD(k5,k6){return k5.replace(/NUM_DIR_LIGHTS/g,k6.numDirLights).replace(/NUM_SPOT_LIGHTS/g,k6.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,k6.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,k6.numPointLights).replace(/NUM_HEMI_LIGHTS/g,k6.numHemiLights)}function du(k5,k6){return k5.replace(/NUM_CLIPPING_PLANES/g,k6.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,(k6.numClippingPlanes-k6.numClipIntersection))}function kt(k5){var k7=/^[ \t]*#include +<([\w\d./]+)>/gm;function k6(k9,k8){var la=fl[k8];if(la===undefined){throw new Error("Can not resolve #include <"+k8+">")}return kt(la)}return k5.replace(k7,k6)}function hF(k5){var k7=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function k6(k9,ld,k8,lb){var lc="";for(var la=parseInt(ld);la<parseInt(k8);la++){lc+=lb.replace(/\[ i \]/g,"[ "+la+" ]")}return lc}return k5.replace(k7,k6)}function ay(lr,lB,k8,lp,k6,lj,le){var lx=lr.context;var lw=lp.defines;var lf=k6.vertexShader;var k7=k6.fragmentShader;var la="SHADOWMAP_TYPE_BASIC";if(lj.shadowMapType===hB){la="SHADOWMAP_TYPE_PCF"}else{if(lj.shadowMapType===fr){la="SHADOWMAP_TYPE_PCF_SOFT"}}var lA="ENVMAP_TYPE_CUBE";var lt="ENVMAP_MODE_REFLECTION";var k9="ENVMAP_BLENDING_MULTIPLY";if(lj.envMap){switch(lp.envMap.mapping){case b3:case j1:lA="ENVMAP_TYPE_CUBE";break;case L:case hH:lA="ENVMAP_TYPE_CUBE_UV";break;case eT:case bn:lA="ENVMAP_TYPE_EQUIREC";break;case ge:lA="ENVMAP_TYPE_SPHERE";break}switch(lp.envMap.mapping){case j1:case bn:lt="ENVMAP_MODE_REFRACTION";break}switch(lp.combine){case u:k9="ENVMAP_BLENDING_MULTIPLY";break;case d9:k9="ENVMAP_BLENDING_MIX";break;case gi:k9="ENVMAP_BLENDING_ADD";break}}var lh=(lr.gammaFactor>0)?lr.gammaFactor:1;var lc=le.isWebGL2?"":jp(lp.extensions,lj,lB);var ld=jK(lw);var ll=lx.createProgram();var lk,ls;if(lp.isRawShaderMaterial){lk=[ld].filter(s).join("\n");if(lk.length>0){lk+="\n"}ls=[lc,ld].filter(s).join("\n");if(ls.length>0){ls+="\n"}}else{lk=["precision "+lj.precision+" float;","precision "+lj.precision+" int;","#define SHADER_NAME "+k6.name,ld,lj.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+lh,"#define MAX_BONES "+lj.maxBones,(lj.useFog&&lj.fog)?"#define USE_FOG":"",(lj.useFog&&lj.fogExp)?"#define FOG_EXP2":"",lj.map?"#define USE_MAP":"",lj.envMap?"#define USE_ENVMAP":"",lj.envMap?"#define "+lt:"",lj.lightMap?"#define USE_LIGHTMAP":"",lj.aoMap?"#define USE_AOMAP":"",lj.emissiveMap?"#define USE_EMISSIVEMAP":"",lj.bumpMap?"#define USE_BUMPMAP":"",lj.normalMap?"#define USE_NORMALMAP":"",(lj.normalMap&&lj.objectSpaceNormalMap)?"#define OBJECTSPACE_NORMALMAP":"",lj.displacementMap&&lj.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",lj.specularMap?"#define USE_SPECULARMAP":"",lj.roughnessMap?"#define USE_ROUGHNESSMAP":"",lj.metalnessMap?"#define USE_METALNESSMAP":"",lj.alphaMap?"#define USE_ALPHAMAP":"",lj.vertexTangents?"#define USE_TANGENT":"",lj.vertexColors?"#define USE_COLOR":"",lj.flatShading?"#define FLAT_SHADED":"",lj.skinning?"#define USE_SKINNING":"",lj.useVertexTexture?"#define BONE_TEXTURE":"",lj.morphTargets?"#define USE_MORPHTARGETS":"",lj.morphNormals&&lj.flatShading===false?"#define USE_MORPHNORMALS":"",lj.doubleSided?"#define DOUBLE_SIDED":"",lj.flipSided?"#define FLIP_SIDED":"",lj.shadowMapEnabled?"#define USE_SHADOWMAP":"",lj.shadowMapEnabled?"#define "+la:"",lj.sizeAttenuation?"#define USE_SIZEATTENUATION":"",lj.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",lj.logarithmicDepthBuffer&&(le.isWebGL2||lB.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(s).join("\n");ls=[lc,"precision "+lj.precision+" float;","precision "+lj.precision+" int;","#define SHADER_NAME "+k6.name,ld,lj.alphaTest?"#define ALPHATEST "+lj.alphaTest+(lj.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+lh,(lj.useFog&&lj.fog)?"#define USE_FOG":"",(lj.useFog&&lj.fogExp)?"#define FOG_EXP2":"",lj.map?"#define USE_MAP":"",lj.matcap?"#define USE_MATCAP":"",lj.envMap?"#define USE_ENVMAP":"",lj.envMap?"#define "+lA:"",lj.envMap?"#define "+lt:"",lj.envMap?"#define "+k9:"",lj.lightMap?"#define USE_LIGHTMAP":"",lj.aoMap?"#define USE_AOMAP":"",lj.emissiveMap?"#define USE_EMISSIVEMAP":"",lj.bumpMap?"#define USE_BUMPMAP":"",lj.normalMap?"#define USE_NORMALMAP":"",(lj.normalMap&&lj.objectSpaceNormalMap)?"#define OBJECTSPACE_NORMALMAP":"",lj.specularMap?"#define USE_SPECULARMAP":"",lj.roughnessMap?"#define USE_ROUGHNESSMAP":"",lj.metalnessMap?"#define USE_METALNESSMAP":"",lj.alphaMap?"#define USE_ALPHAMAP":"",lj.vertexTangents?"#define USE_TANGENT":"",lj.vertexColors?"#define USE_COLOR":"",lj.gradientMap?"#define USE_GRADIENTMAP":"",lj.flatShading?"#define FLAT_SHADED":"",lj.doubleSided?"#define DOUBLE_SIDED":"",lj.flipSided?"#define FLIP_SIDED":"",lj.shadowMapEnabled?"#define USE_SHADOWMAP":"",lj.shadowMapEnabled?"#define "+la:"",lj.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",lj.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",lj.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",lj.logarithmicDepthBuffer&&(le.isWebGL2||lB.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",lj.envMap&&(le.isWebGL2||lB.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",(lj.toneMapping!==kA)?"#define TONE_MAPPING":"",(lj.toneMapping!==kA)?fl["tonemapping_pars_fragment"]:"",(lj.toneMapping!==kA)?c4("toneMapping",lj.toneMapping):"",lj.dithering?"#define DITHERING":"",(lj.outputEncoding||lj.mapEncoding||lj.matcapEncoding||lj.envMapEncoding||lj.emissiveMapEncoding)?fl["encodings_pars_fragment"]:"",lj.mapEncoding?bN("mapTexelToLinear",lj.mapEncoding):"",lj.matcapEncoding?bN("matcapTexelToLinear",lj.matcapEncoding):"",lj.envMapEncoding?bN("envMapTexelToLinear",lj.envMapEncoding):"",lj.emissiveMapEncoding?bN("emissiveMapTexelToLinear",lj.emissiveMapEncoding):"",lj.outputEncoding?g4("linearToOutputTexel",lj.outputEncoding):"",lj.depthPacking?"#define DEPTH_PACKING "+lp.depthPacking:"","\n"].filter(s).join("\n")}lf=kt(lf);lf=kD(lf,lj);lf=du(lf,lj);k7=kt(k7);k7=kD(k7,lj);k7=du(k7,lj);lf=hF(lf);k7=hF(k7);if(le.isWebGL2&&!lp.isRawShaderMaterial){var k5=false;var lz=/^\s*#version\s+300\s+es\s*\n/;if(lp.isShaderMaterial&&lf.match(lz)!==null&&k7.match(lz)!==null){k5=true;lf=lf.replace(lz,"");k7=k7.replace(lz,"")}lk=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+lk;ls=["#version 300 es\n","#define varying in",k5?"":"out highp vec4 pc_fragColor;",k5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+ls}var ly=lk+lf;var lv=ls+k7;var lg=fR(lx,35633,ly);var lu=fR(lx,35632,lv);lx.attachShader(ll,lg);lx.attachShader(ll,lu);if(lp.index0AttributeName!==undefined){lx.bindAttribLocation(ll,0,lp.index0AttributeName)}else{if(lj.morphTargets===true){lx.bindAttribLocation(ll,0,"position")}}lx.linkProgram(ll);var lb=lx.getProgramInfoLog(ll).trim();var lm=lx.getShaderInfoLog(lg).trim();var lC=lx.getShaderInfoLog(lu).trim();var lo=true;var lq=true;if(lx.getProgramParameter(ll,35714)===false){lo=false;a.Logger.log(a.Logger.SEVERE,"THREE.WebGLProgram: shader error: ",lx.getError(),"35715",lx.getProgramParameter(ll,35715),"gl.getProgramInfoLog",lb,lm,lC)}else{if(lb!==""){a.Logger.log(a.Logger.WARNING,"THREE.WebGLProgram: gl.getProgramInfoLog()",lb)}else{if(lm===""||lC===""){lq=false}}}if(lq){this.diagnostics={runnable:lo,material:lp,programLog:lb,vertexShader:{log:lm,prefix:lk},fragmentShader:{log:lC,prefix:ls}}}lx.deleteShader(lg);lx.deleteShader(lu);var li;this.getUniforms=function(){if(li===undefined){li=new x(lx,ll,lr)}return li};var ln;this.getAttributes=function(){if(ln===undefined){ln=iY(lx,ll)}return ln};this.destroy=function(){lx.deleteProgram(ll);this.program=undefined};Object.defineProperties(this,{uniforms:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.name=k6.name;this.id=Y++;this.code=k8;this.usedTimes=1;this.program=ll;this.vertexShader=lg;this.fragmentShader=lu;return this}function eL(lb,k7,k5){var la=[];var k9={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};var k6=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function k8(lh){var li=lh.skeleton;var ld=li.bones;if(k5.floatVertexTextures){return 1024}else{var lf=k5.maxVertexUniforms;var lg=Math.floor((lf-20)/4);var le=Math.min(lg,ld.length);if(le<ld.length){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Skeleton has "+ld.length+" bones. This GPU supports "+le+".");return 0}return le}}function lc(lf,ld){var le;if(!lf){le=fq}else{if(lf.isTexture){le=lf.encoding}else{if(lf.isWebGLRenderTarget){a.Logger.log(a.Logger.WARNING,"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.");le=lf.texture.encoding}}}if(le===fq&&ld){le=i9}return le}this.getParameters=function(ll,li,lh,lf,lo,lj,lg){var lm=k9[ll.type];var ld=lg.isSkinnedMesh?k8(lg):0;var lk=k5.precision;if(ll.precision!==null){lk=k5.getMaxPrecision(ll.precision);if(lk!==ll.precision){a.Logger.log(a.Logger.WARNING,"THREE.WebGLProgram.getParameters:",ll.precision,"not supported, using",lk,"instead.")}}var le=lb.getRenderTarget();var ln={shaderID:lm,precision:lk,supportsVertexTextures:k5.vertexTextures,outputEncoding:lc((!le)?null:le.texture,lb.gammaOutput),map:!!ll.map,mapEncoding:lc(ll.map,lb.gammaInput),matcap:!!ll.matcap,matcapEncoding:lc(ll.matcap,lb.gammaInput),envMap:!!ll.envMap,envMapMode:ll.envMap&&ll.envMap.mapping,envMapEncoding:lc(ll.envMap,lb.gammaInput),envMapCubeUV:(!!ll.envMap)&&((ll.envMap.mapping===L)||(ll.envMap.mapping===hH)),lightMap:!!ll.lightMap,aoMap:!!ll.aoMap,emissiveMap:!!ll.emissiveMap,emissiveMapEncoding:lc(ll.emissiveMap,lb.gammaInput),bumpMap:!!ll.bumpMap,normalMap:!!ll.normalMap,objectSpaceNormalMap:ll.normalMapType===iM,displacementMap:!!ll.displacementMap,roughnessMap:!!ll.roughnessMap,metalnessMap:!!ll.metalnessMap,specularMap:!!ll.specularMap,alphaMap:!!ll.alphaMap,gradientMap:!!ll.gradientMap,combine:ll.combine,vertexTangents:(ll.normalMap&&ll.vertexTangents),vertexColors:ll.vertexColors,fog:!!lf,useFog:ll.fog,fogExp:(lf&&lf.isFogExp2),flatShading:ll.flatShading,sizeAttenuation:ll.sizeAttenuation,logarithmicDepthBuffer:k5.logarithmicDepthBuffer,skinning:ll.skinning&&ld>0,maxBones:ld,useVertexTexture:k5.floatVertexTextures,morphTargets:ll.morphTargets,morphNormals:ll.morphNormals,maxMorphTargets:lb.maxMorphTargets,maxMorphNormals:lb.maxMorphNormals,numDirLights:li.directional.length,numPointLights:li.point.length,numSpotLights:li.spot.length,numRectAreaLights:li.rectArea.length,numHemiLights:li.hemi.length,numClippingPlanes:lo,numClipIntersection:lj,dithering:ll.dithering,shadowMapEnabled:lb.shadowMap.enabled&&lg.receiveShadow&&lh.length>0,shadowMapType:lb.shadowMap.type,toneMapping:lb.toneMapping,physicallyCorrectLights:lb.physicallyCorrectLights,premultipliedAlpha:ll.premultipliedAlpha,alphaTest:ll.alphaTest,doubleSided:ll.side===fE,flipSided:ll.side===c5,depthPacking:(ll.depthPacking!==undefined)?ll.depthPacking:false};return ln};this.getProgramCode=function(lf,lg){var lh=[];if(lg.shaderID){lh.push(lg.shaderID)}else{lh.push(lf.fragmentShader);lh.push(lf.vertexShader)}if(lf.defines!==undefined){for(var ld in lf.defines){lh.push(ld);lh.push(lf.defines[ld])}}for(var le=0;le<k6.length;le++){lh.push(lg[k6[le]])}lh.push(lf.onBeforeCompile.toString());lh.push(lb.gammaOutput);lh.push(lb.gammaFactor);return lh.join()};this.acquireProgram=function(lg,lj,li,lh){var ld;for(var lk=0,lf=la.length;lk<lf;lk++){var le=la[lk];if(le.code===lh){ld=le;++ld.usedTimes;break}}if(ld===undefined){ld=new ay(lb,k7,lh,lg,lj,li,k5);la.push(ld)}return ld};this.releaseProgram=function(ld){if(--ld.usedTimes===0){var le=la.indexOf(ld);la[le]=la[la.length-1];la.pop();ld.destroy()}};this.programs=la}function bM(){var k7=new WeakMap();function k6(la){var lb=k7.get(la);if(lb===undefined){lb={};k7.set(la,lb)}return lb}function k5(la){k7["delete"](la)}function k9(la,lb,lc){k7.get(la)[lb]=lc}function k8(){k7=new WeakMap()}return{get:k6,remove:k5,update:k9,dispose:k8}}function iz(k6,k5){if(k6.groupOrder!==k5.groupOrder){return k6.groupOrder-k5.groupOrder}else{if(k6.renderOrder!==k5.renderOrder){return k6.renderOrder-k5.renderOrder}else{if(k6.program&&k5.program&&k6.program!==k5.program){return k6.program.id-k5.program.id}else{if(k6.material.id!==k5.material.id){return k6.material.id-k5.material.id}else{if(k6.z!==k5.z){return k6.z-k5.z}else{return k6.id-k5.id}}}}}}function k0(k6,k5){if(k6.groupOrder!==k5.groupOrder){return k6.groupOrder-k5.groupOrder}else{if(k6.renderOrder!==k5.renderOrder){return k6.renderOrder-k5.renderOrder}else{if(k6.z!==k5.z){return k5.z-k6.z}else{return k6.id-k5.id}}}}function fG(){var k8=[];var lb=0;var k7=[];var ld=[];function lc(){lb=0;k7.length=0;ld.length=0}function la(le,lk,lg,lf,lj,li){var lh=k8[lb];if(lh===undefined){lh={id:le.id,object:le,geometry:lk,material:lg,program:lg.program,groupOrder:lf,renderOrder:le.renderOrder,z:lj,group:li};k8[lb]=lh}else{lh.id=le.id;lh.object=le;lh.geometry=lk;lh.material=lg;lh.program=lg.program;lh.groupOrder=lf;lh.renderOrder=le.renderOrder;lh.z=lj;lh.group=li}lb++;return lh}function k9(le,lk,lg,lf,lj,li){var lh=la(le,lk,lg,lf,lj,li);(lg.transparent===true?ld:k7).push(lh)}function k5(le,lk,lg,lf,lj,li){var lh=la(le,lk,lg,lf,lj,li);(lg.transparent===true?ld:k7).unshift(lh)}function k6(){if(k7.length>1){k7.sort(iz)}if(ld.length>1){ld.sort(k0)}}return{opaque:k7,transparent:ld,init:lc,push:k9,unshift:k5,sort:k6}}function gl(){var k5={};function k7(k9){var la=k9.target;la.removeEventListener("dispose",k7);delete k5[la.id]}function k6(lc,la){var k9=k5[lc.id];var lb;if(k9===undefined){lb=new fG();k5[lc.id]={};k5[lc.id][la.id]=lb;lc.addEventListener("dispose",k7)}else{lb=k9[la.id];if(lb===undefined){lb=new fG();k9[la.id]=lb}}return lb}function k8(){k5={}}return{get:k6,dispose:k8}}function dn(){var k5={};return{get:function(k7){if(k5[k7.id]!==undefined){return k5[k7.id]}var k6;switch(k7.type){case"DirectionalLight":k6={direction:new bf(),color:new id(),shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new bg()};break;case"SpotLight":k6={position:new bf(),direction:new bf(),color:new id(),distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new bg()};break;case"PointLight":k6={position:new bf(),color:new id(),distance:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new bg(),shadowCameraNear:1,shadowCameraFar:1000};break;case"HemisphereLight":k6={direction:new bf(),skyColor:new id(),groundColor:new id()};break;case"RectAreaLight":k6={color:new id(),position:new bf(),halfWidth:new bf(),halfHeight:new bf()};break}k5[k7.id]=k6;return k6}}}var gb=0;function O(){var k6=new dn();var la={id:gb++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};var k8=new bf();var k7=new fv();var k9=new fv();function k5(lt,lb,lp){var lk=0,lq=0,ls=0;var ll=0;var lu=0;var lv=0;var lc=0;var lj=0;var lf=lp.matrixWorldInverse;for(var lo=0,lm=lt.length;lo<lm;lo++){var lg=lt[lo];var ln=lg.color;var lh=lg.intensity;var le=lg.distance;var ld=(lg.shadow&&lg.shadow.map)?lg.shadow.map.texture:null;if(lg.isAmbientLight){lk+=ln.r*lh;lq+=ln.g*lh;ls+=ln.b*lh}else{if(lg.isDirectionalLight){var lr=k6.get(lg);lr.color.copy(lg.color).multiplyScalar(lg.intensity);lr.direction.setFromMatrixPosition(lg.matrixWorld);k8.setFromMatrixPosition(lg.target.matrixWorld);lr.direction.sub(k8);lr.direction.transformDirection(lf);lr.shadow=lg.castShadow;if(lg.castShadow){var li=lg.shadow;lr.shadowBias=li.bias;lr.shadowRadius=li.radius;lr.shadowMapSize=li.mapSize}la.directionalShadowMap[ll]=ld;la.directionalShadowMatrix[ll]=lg.shadow.matrix;la.directional[ll]=lr;ll++}else{if(lg.isSpotLight){var lr=k6.get(lg);lr.position.setFromMatrixPosition(lg.matrixWorld);lr.position.applyMatrix4(lf);lr.color.copy(ln).multiplyScalar(lh);lr.distance=le;lr.direction.setFromMatrixPosition(lg.matrixWorld);k8.setFromMatrixPosition(lg.target.matrixWorld);lr.direction.sub(k8);lr.direction.transformDirection(lf);lr.coneCos=Math.cos(lg.angle);lr.penumbraCos=Math.cos(lg.angle*(1-lg.penumbra));lr.decay=lg.decay;lr.shadow=lg.castShadow;if(lg.castShadow){var li=lg.shadow;lr.shadowBias=li.bias;lr.shadowRadius=li.radius;lr.shadowMapSize=li.mapSize}la.spotShadowMap[lv]=ld;la.spotShadowMatrix[lv]=lg.shadow.matrix;la.spot[lv]=lr;lv++}else{if(lg.isRectAreaLight){var lr=k6.get(lg);lr.color.copy(ln).multiplyScalar(lh);lr.position.setFromMatrixPosition(lg.matrixWorld);lr.position.applyMatrix4(lf);k9.identity();k7.copy(lg.matrixWorld);k7.premultiply(lf);k9.extractRotation(k7);lr.halfWidth.set(lg.width*0.5,0,0);lr.halfHeight.set(0,lg.height*0.5,0);lr.halfWidth.applyMatrix4(k9);lr.halfHeight.applyMatrix4(k9);la.rectArea[lc]=lr;lc++}else{if(lg.isPointLight){var lr=k6.get(lg);lr.position.setFromMatrixPosition(lg.matrixWorld);lr.position.applyMatrix4(lf);lr.color.copy(lg.color).multiplyScalar(lg.intensity);lr.distance=lg.distance;lr.decay=lg.decay;lr.shadow=lg.castShadow;if(lg.castShadow){var li=lg.shadow;lr.shadowBias=li.bias;lr.shadowRadius=li.radius;lr.shadowMapSize=li.mapSize;lr.shadowCameraNear=li.camera.near;lr.shadowCameraFar=li.camera.far}la.pointShadowMap[lu]=ld;la.pointShadowMatrix[lu]=lg.shadow.matrix;la.point[lu]=lr;lu++}else{if(lg.isHemisphereLight){var lr=k6.get(lg);lr.direction.setFromMatrixPosition(lg.matrixWorld);lr.direction.transformDirection(lf);lr.direction.normalize();lr.skyColor.copy(lg.color).multiplyScalar(lh);lr.groundColor.copy(lg.groundColor).multiplyScalar(lh);la.hemi[lj]=lr;lj++}}}}}}}la.ambient[0]=lk;la.ambient[1]=lq;la.ambient[2]=ls;la.directional.length=ll;la.spot.length=lv;la.rectArea.length=lc;la.point.length=lu;la.hemi.length=lj;la.hash.stateID=la.id;la.hash.directionalLength=ll;la.hash.pointLength=lu;la.hash.spotLength=lv;la.hash.rectAreaLength=lc;la.hash.hemiLength=lj;la.hash.shadowsLength=lb.length}return{setup:k5,state:la}}function jU(){var k6=new O();var k9=[];var k7=[];function lb(){k9.length=0;k7.length=0}function lc(ld){k9.push(ld)}function k8(ld){k7.push(ld)}function k5(ld){k6.setup(k9,k7,ld)}var la={lightsArray:k9,shadowsArray:k7,lights:k6};return{init:lb,state:la,setupLights:k5,pushLight:lc,pushShadow:k8}}function k(){var k5={};function k7(k9){var la=k9.target;la.removeEventListener("dispose",k7);delete k5[la.id]}function k6(lb,k9){var la;if(k5[lb.id]===undefined){la=new jU();k5[lb.id]={};k5[lb.id][k9.id]=la;lb.addEventListener("dispose",k7)}else{if(k5[lb.id][k9.id]===undefined){la=new jU();k5[lb.id][k9.id]=la}else{la=k5[lb.id][k9.id]}}return la}function k8(){k5={}}return{get:k6,dispose:k8}}function aa(k5){jo.call(this);this.type="MeshDepthMaterial";this.depthPacking=eO;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.setValues(k5)}aa.prototype=Object.create(jo.prototype);aa.prototype.constructor=aa;aa.prototype.isMeshDepthMaterial=true;aa.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.depthPacking=k5.depthPacking;this.skinning=k5.skinning;this.morphTargets=k5.morphTargets;this.map=k5.map;this.alphaMap=k5.alphaMap;this.displacementMap=k5.displacementMap;this.displacementScale=k5.displacementScale;this.displacementBias=k5.displacementBias;this.wireframe=k5.wireframe;this.wireframeLinewidth=k5.wireframeLinewidth;return this};function jE(k5){jo.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new bf();this.nearDistance=1;this.farDistance=1000;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.fog=false;this.lights=false;this.setValues(k5)}jE.prototype=Object.create(jo.prototype);jE.prototype.constructor=jE;jE.prototype.isMeshDistanceMaterial=true;jE.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.referencePosition.copy(k5.referencePosition);this.nearDistance=k5.nearDistance;this.farDistance=k5.farDistance;this.skinning=k5.skinning;this.morphTargets=k5.morphTargets;this.map=k5.map;this.alphaMap=k5.alphaMap;this.displacementMap=k5.displacementMap;this.displacementScale=k5.displacementScale;this.displacementBias=k5.displacementBias;return this};function iy(ls,ll,lt){var lr=new hA(),lb=new fv(),lo=new bg(),k8=new bg(lt,lt),li=new bf(),lg=new bf(),ld=1,lh=2,lv=(ld|lh)+1,lj=new Array(lv),lc=new Array(lv),lf={};var lu={0:c5,1:D,2:fE};var lp=[new bf(1,0,0),new bf(-1,0,0),new bf(0,0,1),new bf(0,0,-1),new bf(0,1,0),new bf(0,-1,0)];var ln=[new bf(0,1,0),new bf(0,1,0),new bf(0,1,0),new bf(0,1,0),new bf(0,0,1),new bf(0,0,-1)];var la=[new bd(),new bd(),new bd(),new bd(),new bd(),new bd()];for(var lq=0;lq!==lv;++lq){var le=(lq&ld)!==0;var lm=(lq&lh)!==0;var k9=new aa({depthPacking:ej,morphTargets:le,skinning:lm});lj[lq]=k9;var lk=new jE({morphTargets:le,skinning:lm});lc[lq]=lk}var k7=this;this.enabled=false;this.autoUpdate=true;this.needsUpdate=false;this.type=hB;this.render=function(lN,lL,lJ){if(k7.enabled===false){return}if(k7.autoUpdate===false&&k7.needsUpdate===false){return}if(lN.length===0){return}var lw=ls.getRenderTarget();var lK=ls.state;lK.setBlending(cW);lK.buffers.color.setClear(1,1,1,1);lK.buffers.depth.setTest(true);lK.setScissorTest(false);var lF;for(var lI=0,lE=lN.length;lI<lE;lI++){var ly=lN[lI];var lB=ly.shadow;var lA=ly&&ly.isPointLight;if(lB===undefined){a.Logger.log(a.Logger.WARNING,"THREE.WebGLShadowMap:",ly,"has no shadow.");continue}var lO=lB.camera;lo.copy(lB.mapSize);lo.min(k8);if(lA){var lG=lo.x;var lz=lo.y;la[0].set(lG*2,lz,lG,lz);la[1].set(0,lz,lG,lz);la[2].set(lG*3,lz,lG,lz);la[3].set(lG,lz,lG,lz);la[4].set(lG*3,0,lG,lz);la[5].set(lG,0,lG,lz);lo.x*=4;lo.y*=2}if(lB.map===null){var lH={minFilter:da,magFilter:da,format:gt};lB.map=new e3(lo.x,lo.y,lH);lB.map.texture.name=ly.name+".shadowMap";lO.updateProjectionMatrix()}if(lB.isSpotLightShadow){lB.update(ly)}var lx=lB.map;var lM=lB.matrix;lg.setFromMatrixPosition(ly.matrixWorld);lO.position.copy(lg);if(lA){lF=6;lM.makeTranslation(-lg.x,-lg.y,-lg.z)}else{lF=1;li.setFromMatrixPosition(ly.target.matrixWorld);lO.lookAt(li);lO.updateMatrixWorld();lM.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);lM.multiply(lO.projectionMatrix);lM.multiply(lO.matrixWorldInverse)}ls.setRenderTarget(lx);ls.clear();for(var lD=0;lD<lF;lD++){if(lA){li.copy(lO.position);li.add(lp[lD]);lO.up.copy(ln[lD]);lO.lookAt(li);lO.updateMatrixWorld();var lC=la[lD];lK.viewport(lC)}lb.multiplyMatrices(lO.projectionMatrix,lO.matrixWorldInverse);lr.setFromMatrix(lb);k6(lL,lJ,lO,lA)}}k7.needsUpdate=false;ls.setRenderTarget(lw)};function k5(lz,lF,ly,lJ,lE,lC){var lI=lz.geometry;var lM=null;var lH=lj;var lD=lz.customDepthMaterial;if(ly){lH=lc;lD=lz.customDistanceMaterial}if(!lD){var lL=false;if(lF.morphTargets){if(lI&&lI.isBufferGeometry){lL=lI.morphAttributes&&lI.morphAttributes.position&&lI.morphAttributes.position.length>0}else{if(lI&&lI.isGeometry){lL=lI.morphTargets&&lI.morphTargets.length>0}}}if(lz.isSkinnedMesh&&lF.skinning===false){a.Logger.log(a.Logger.WARNING,"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",lz)}var lB=lz.isSkinnedMesh&&lF.skinning;var lA=0;if(lL){lA|=ld}if(lB){lA|=lh}lM=lH[lA]}else{lM=lD}if(ls.localClippingEnabled&&lF.clipShadows===true&&lF.clippingPlanes.length!==0){var lx=lM.uuid,lw=lF.uuid;var lG=lf[lx];if(lG===undefined){lG={};lf[lx]=lG}var lK=lG[lw];if(lK===undefined){lK=lM.clone();lG[lw]=lK}lM=lK}lM.visible=lF.visible;lM.wireframe=lF.wireframe;lM.side=(lF.shadowSide!=null)?lF.shadowSide:lu[lF.side];lM.clipShadows=lF.clipShadows;lM.clippingPlanes=lF.clippingPlanes;lM.clipIntersection=lF.clipIntersection;lM.wireframeLinewidth=lF.wireframeLinewidth;lM.linewidth=lF.linewidth;if(ly&&lM.isMeshDistanceMaterial){lM.referencePosition.copy(lJ);lM.nearDistance=lE;lM.farDistance=lC}return lM}function k6(lG,lI,ly,lD){if(lG.visible===false){return}var lB=lG.layers.test(lI.layers);if(lB&&(lG.isMesh||lG.isLine||lG.isPoints)){if(lG.castShadow&&(!lG.frustumCulled||lr.intersectsObject(lG))){lG.modelViewMatrix.multiplyMatrices(ly.matrixWorldInverse,lG.matrixWorld);var lK=ll.update(lG);var lJ=lG.material;if(Array.isArray(lJ)){var lA=lK.groups;for(var lF=0,lw=lA.length;lF<lw;lF++){var lL=lA[lF];var lE=lJ[lL.materialIndex];if(lE&&lE.visible){var lz=k5(lG,lE,lD,lg,ly.near,ly.far);ls.renderBufferDirect(ly,null,lK,lz,lG,lL)}}}else{if(lJ.visible){var lz=k5(lG,lJ,lD,lg,ly.near,ly.far);ls.renderBufferDirect(ly,null,lK,lz,lG,null)}}}}var lx=lG.children;for(var lH=0,lC=lx.length;lH<lC;lH++){k6(lx[lH],lI,ly,lD)}}}function gx(lo,lX,l5,lB){function lp(){var l8=false;var l7=new bd();var ma=null;var l9=new bd(0,0,0,0);return{setMask:function(mb){if(ma!==mb&&!l8){lo.colorMask(mb,mb,mb,mb);ma=mb}},setLocked:function(mb){l8=mb},setClear:function(mf,me,mb,mc,md){if(md===true){mf*=mc;me*=mc;mb*=mc}l7.set(mf,me,mb,mc);if(l9.equals(l7)===false){lo.clearColor(mf,me,mb,mc);l9.copy(l7)}},reset:function(){l8=false;ma=null;l9.set(-1,0,0,0)}}}function lK(){var l7=false;var l8=null;var ma=null;var l9=null;return{setTest:function(mb){if(mb){lj(2929)}else{lc(2929)}},setMask:function(mb){if(l8!==mb&&!l7){lo.depthMask(mb);l8=mb}},setFunc:function(mb){if(ma!==mb){if(mb){switch(mb){case kV:lo.depthFunc(512);break;case dB:lo.depthFunc(519);break;case kQ:lo.depthFunc(513);break;case bY:lo.depthFunc(515);break;case K:lo.depthFunc(514);break;case H:lo.depthFunc(518);break;case iI:lo.depthFunc(516);break;case cr:lo.depthFunc(517);break;default:lo.depthFunc(515)}}else{lo.depthFunc(515)}ma=mb}},setLocked:function(mb){l7=mb},setClear:function(mb){if(l9!==mb){lo.clearDepth(mb);l9=mb}},reset:function(){l7=false;l8=null;ma=null;l9=null}}}function lm(){var l8=false;var mc=null;var me=null;var md=null;var mb=null;var mf=null;var l7=null;var ma=null;var l9=null;return{setTest:function(mg){if(mg){lj(2960)}else{lc(2960)}},setMask:function(mg){if(mc!==mg&&!l8){lo.stencilMask(mg);mc=mg}},setFunc:function(mi,mh,mg){if(me!==mi||md!==mh||mb!==mg){lo.stencilFunc(mi,mh,mg);me=mi;md=mh;mb=mg}},setOp:function(mg,mi,mh){if(mf!==mg||l7!==mi||ma!==mh){lo.stencilOp(mg,mi,mh);mf=mg;l7=mi;ma=mh}},setLocked:function(mg){l8=mg},setClear:function(mg){if(l9!==mg){lo.clearStencil(mg);l9=mg}},reset:function(){l8=false;mc=null;me=null;md=null;mb=null;mf=null;l7=null;ma=null;l9=null}}}var lk=new lp();var lI=new lK();var lL=new lm();var lS=lo.getParameter(34921);var lE=new Uint8Array(lS);var k5=new Uint8Array(lS);var lv=new Uint8Array(lS);var li={};var lg=null;var lt=null;var k7=null;var l2=null;var lU=null;var ln=null;var lz=null;var lY=null;var lO=null;var lu=null;var lh=false;var lx=null;var ly=null;var k8=null;var la=null;var ll=null;var lD=lo.getParameter(35661);var lN=false;var l0=0;var le=lo.getParameter(7938);if(le.indexOf("WebGL")!==-1){l0=parseFloat(/^WebGL\ ([0-9])/.exec(le)[1]);lN=(l0>=1)}else{if(le.indexOf("OpenGL ES")!==-1){l0=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(le)[1]);lN=(l0>=2)}}var lG=null;var lC={};var lw=new bd();var lV=new bd();function lM(l8,mc,ma){var mb=new Uint8Array(4);var l9=lo.createTexture();lo.bindTexture(l8,l9);lo.texParameteri(l8,10241,9728);lo.texParameteri(l8,10240,9728);for(var l7=0;l7<ma;l7++){lo.texImage2D(mc+l7,0,6408,1,1,0,6408,5121,mb)}return l9}var lQ={};lQ[3553]=lM(3553,3553,1);lQ[34067]=lM(34067,34069,6);lk.setClear(0,0,0,1);lI.setClear(1);lL.setClear(0);lj(2929);lI.setFunc(bY);ls(false);lA(jC);lj(2884);l4(cW);function l6(){for(var l8=0,l7=lE.length;l8<l7;l8++){lE[l8]=0}}function lW(l7){k6(l7,0)}function k6(l8,l7){lE[l8]=1;if(k5[l8]===0){lo.enableVertexAttribArray(l8);k5[l8]=1}if(lv[l8]!==l7){var l9=lB.isWebGL2?lo:lX.get("ANGLE_instanced_arrays");l9[lB.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](l8,l7);lv[l8]=l7}}function lJ(){for(var l8=0,l7=k5.length;l8!==l7;++l8){if(k5[l8]!==lE[l8]){lo.disableVertexAttribArray(l8);k5[l8]=0}}}function lj(l7){if(li[l7]!==true){lo.enable(l7);li[l7]=true}}function lc(l7){if(li[l7]!==false){lo.disable(l7);li[l7]=false}}function lT(){if(lg===null){lg=[];if(lX.get("WEBGL_compressed_texture_pvrtc")||lX.get("WEBGL_compressed_texture_s3tc")||lX.get("WEBGL_compressed_texture_etc1")||lX.get("WEBGL_compressed_texture_astc")){var l7=lo.getParameter(34467);for(var l8=0;l8<l7.length;l8++){lg.push(l7[l8])}}}return lg}function lf(l7){if(lt!==l7){lo.useProgram(l7);lt=l7;return true}return false}function l4(ma,l9,mb,mc,me,md,l7,l8){if(ma===cW){if(k7){lc(3042);k7=false}return}if(!k7){lj(3042);k7=true}if(ma!==bw){if(ma!==l2||l8!==lh){if(lU!==cM||lY!==cM){lo.blendEquation(32774);lU=cM;lY=cM}if(l8){switch(ma){case iK:lo.blendFuncSeparate(1,771,1,771);break;case aX:lo.blendFunc(1,1);break;case b7:lo.blendFuncSeparate(0,0,769,771);break;case gk:lo.blendFuncSeparate(0,768,0,770);break;default:a.Logger.log(a.Logger.SEVERE,"THREE.WebGLState: Invalid blending: ",ma);break}}else{switch(ma){case iK:lo.blendFuncSeparate(770,771,1,771);break;case aX:lo.blendFunc(770,1);break;case b7:lo.blendFunc(0,769);break;case gk:lo.blendFunc(0,768);break;default:a.Logger.log(a.Logger.SEVERE,"THREE.WebGLState: Invalid blending: ",ma);break}}ln=null;lz=null;lO=null;lu=null;l2=ma;lh=l8}return}me=me||l9;md=md||mb;l7=l7||mc;if(l9!==lU||me!==lY){lo.blendEquationSeparate(l5.convert(l9),l5.convert(me));lU=l9;lY=me}if(mb!==ln||mc!==lz||md!==lO||l7!==lu){lo.blendFuncSeparate(l5.convert(mb),l5.convert(mc),l5.convert(md),l5.convert(l7));ln=mb;lz=mc;lO=md;lu=l7}l2=ma;lh=null}function l3(l9,l8){l9.side===fE?lc(2884):lj(2884);var l7=(l9.side===c5);if(l8){l7=!l7}ls(l7);(l9.blending===iK&&l9.transparent===false)?l4(cW):l4(l9.blending,l9.blendEquation,l9.blendSrc,l9.blendDst,l9.blendEquationAlpha,l9.blendSrcAlpha,l9.blendDstAlpha,l9.premultipliedAlpha);lI.setFunc(l9.depthFunc);lI.setTest(l9.depthTest);lI.setMask(l9.depthWrite);lk.setMask(l9.colorWrite);ld(l9.polygonOffset,l9.polygonOffsetFactor,l9.polygonOffsetUnits)}function ls(l7){if(lx!==l7){if(l7){lo.frontFace(2304)}else{lo.frontFace(2305)}lx=l7}}function lA(l7){if(l7!==f){lj(2884);if(l7!==ly){if(l7===jC){lo.cullFace(1029)}else{if(l7===kc){lo.cullFace(1028)}else{lo.cullFace(1032)}}}}else{lc(2884)}ly=l7}function lZ(l7){if(l7!==k8){if(lN){lo.lineWidth(l7)}k8=l7}}function ld(l9,l8,l7){if(l9){lj(32823);if(la!==l8||ll!==l7){lo.polygonOffset(l8,l7);la=l8;ll=l7}}else{lc(32823)}}function lb(l7){if(l7){lj(3089)}else{lc(3089)}}function lq(l7){if(l7===undefined){l7=33984+lD-1}if(lG!==l7){lo.activeTexture(l7);lG=l7}}function lF(l7,l8){if(lG===null){lq()}var l9=lC[lG];if(l9===undefined){l9={type:undefined,texture:undefined};lC[lG]=l9}if(l9.type!==l7||l9.texture!==l8){lo.bindTexture(l7,l8||lQ[l7]);l9.type=l7;l9.texture=l8}}function lr(){try{lo.compressedTexImage2D.apply(lo,arguments)}catch(l7){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLState:",l7)}}function l1(){try{lo.texImage2D.apply(lo,arguments)}catch(l7){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLState:",l7)}}function lH(){try{lo.texImage3D.apply(lo,arguments)}catch(l7){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLState:",l7)}}function k9(l7){if(lw.equals(l7)===false){lo.scissor(l7.x,l7.y,l7.z,l7.w);lw.copy(l7)}}function lP(l7){if(lV.equals(l7)===false){lo.viewport(l7.x,l7.y,l7.z,l7.w);lV.copy(l7)}}function lR(){for(var l7=0;l7<k5.length;l7++){if(k5[l7]===1){lo.disableVertexAttribArray(l7);k5[l7]=0}}li={};lg=null;lG=null;lC={};lt=null;l2=null;lx=null;ly=null;lk.reset();lI.reset();lL.reset()}return{buffers:{color:lk,depth:lI,stencil:lL},initAttributes:l6,enableAttribute:lW,enableAttributeAndDivisor:k6,disableUnusedAttributes:lJ,enable:lj,disable:lc,getCompressedTextureFormats:lT,useProgram:lf,setBlending:l4,setMaterial:l3,setFlipSided:ls,setCullFace:lA,setLineWidth:lZ,setPolygonOffset:ld,setScissorTest:lb,activeTexture:lq,bindTexture:lF,compressedTexImage2D:lr,texImage2D:l1,texImage3D:lH,scissor:k9,viewport:lP,reset:lR}}function d3(lc,ly,lG,k6,lo,lF,lA){var k9={};var lk;var lz=typeof OffscreenCanvas!=="undefined";function lj(lI,lH){return lz?new OffscreenCanvas(lI,lH):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function ld(lM,lH,lQ,lO){var lL=1;if(lM.width>lO||lM.height>lO){lL=lO/Math.max(lM.width,lM.height)}if(lL<1||lH===true){if(lM instanceof ImageBitmap||lM instanceof HTMLImageElement||lM instanceof HTMLCanvasElement){var lN=lH?dY.floorPowerOfTwo:Math.floor;var lJ=lN(lL*lM.width);var lP=lN(lL*lM.height);if(lk===undefined){lk=lj(lJ,lP)}var lK=lQ?lj(lJ,lP):lk;lK.width=lJ;lK.height=lP;var lI=lK.getContext("2d");lI.drawImage(lM,0,0,lJ,lP);a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Texture has been resized from ("+lM.width+"x"+lM.height+") to ("+lJ+"x"+lP+").");return lz?lK.transferToImageBitmap():lK}else{if("data" in lM){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Image in DataTexture is too big ("+lM.width+"x"+lM.height+").")}return lM}}return lM}function lq(lH){return dY.isPowerOfTwo(lH.width)&&dY.isPowerOfTwo(lH.height)}function lC(lH){if(lo.isWebGL2){return false}return(lH.wrapS!==g7||lH.wrapT!==g7)||(lH.minFilter!==da&&lH.minFilter!==j2)}function le(lI,lH){return lI.generateMipmaps&&lH&&lI.minFilter!==da&&lI.minFilter!==j2}function k8(lL,lJ,lI,lH){lc.generateMipmap(lL);var lK=k6.get(lJ);lK.__maxMipLevel=Math.log(Math.max(lI,lH))*Math.LOG2E}function lp(lI,lJ){if(!lo.isWebGL2){return lI}var lH=lI;if(lI===6403){if(lJ===5126){lH=33326}if(lJ===5131){lH=33325}if(lJ===5121){lH=33321}}if(lI===6407){if(lJ===5126){lH=34837}if(lJ===5131){lH=34843}if(lJ===5121){lH=32849}}if(lI===6408){if(lJ===5126){lH=34836}if(lJ===5131){lH=34842}if(lJ===5121){lH=32856}}if(lH===33325||lH===33326||lH===34842||lH===34836){ly.get("EXT_color_buffer_float")}else{if(lH===34843||lH===34837){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead.")}}return lH}function lx(lH){if(lH===da||lH===gK||lH===ia){return 9728}return 9729}function ln(lI){var lH=lI.target;lH.removeEventListener("dispose",ln);lm(lH);if(lH.isVideoTexture){delete k9[lH.id]}lA.memory.textures--}function lE(lH){var lI=lH.target;lI.removeEventListener("dispose",lE);lr(lI);lA.memory.textures--}function lm(lH){var lI=k6.get(lH);if(lI.__webglInit===undefined){return}lc.deleteTexture(lI.__webglTexture);k6.remove(lH)}function lr(lK){var lH=k6.get(lK);var lJ=k6.get(lK.texture);if(!lK){return}if(lJ.__webglTexture!==undefined){lc.deleteTexture(lJ.__webglTexture)}if(lK.depthTexture){lK.depthTexture.dispose()}if(lK.isWebGLRenderTargetCube){for(var lI=0;lI<6;lI++){lc.deleteFramebuffer(lH.__webglFramebuffer[lI]);if(lH.__webglDepthbuffer){lc.deleteRenderbuffer(lH.__webglDepthbuffer[lI])}}}else{lc.deleteFramebuffer(lH.__webglFramebuffer);if(lH.__webglDepthbuffer){lc.deleteRenderbuffer(lH.__webglDepthbuffer)}}k6.remove(lK.texture);k6.remove(lK)}function k7(lH,lK){var lI=k6.get(lH);if(lH.isVideoTexture){lf(lH)}if(lH.version>0&&lI.__version!==lH.version){var lJ=lH.image;if(lJ===undefined){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Texture marked for update but image is undefined")}else{if(lJ.complete===false){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Texture marked for update but image is incomplete")}else{k5(lI,lH,lK);return}}}lG.activeTexture(33984+lK);lG.bindTexture(3553,lI.__webglTexture)}function ls(lH,lJ){var lI=k6.get(lH);if(lH.version>0&&lI.__version!==lH.version){k5(lI,lH,lJ);return}lG.activeTexture(33984+lJ);lG.bindTexture(32879,lI.__webglTexture)}function ll(lU,lV){var lJ=k6.get(lU);if(lU.image.length===6){if(lU.version>0&&lJ.__version!==lU.version){lv(lJ,lU);lG.activeTexture(33984+lV);lG.bindTexture(34067,lJ.__webglTexture);lc.pixelStorei(37440,lU.flipY);var lM=(lU&&lU.isCompressedTexture);var lL=(lU.image[0]&&lU.image[0].isDataTexture);var lH=[];for(var lS=0;lS<6;lS++){if(!lM&&!lL){lH[lS]=ld(lU.image[lS],false,true,lo.maxCubemapSize)}else{lH[lS]=lL?lU.image[lS].image:lU.image[lS]}}var lP=lH[0],lW=lq(lP)||lo.isWebGL2,lI=lF.convert(lU.format),lN=lF.convert(lU.type),lT=lp(lI,lN);lg(34067,lU,lW);for(var lS=0;lS<6;lS++){if(!lM){if(lL){lG.texImage2D(34069+lS,0,lT,lH[lS].width,lH[lS].height,0,lI,lN,lH[lS].data)}else{lG.texImage2D(34069+lS,0,lT,lI,lN,lH[lS])}}else{var lK,lO=lH[lS].mipmaps;for(var lQ=0,lR=lO.length;lQ<lR;lQ++){lK=lO[lQ];if(lU.format!==gt&&lU.format!==fK){if(lG.getCompressedTextureFormats().indexOf(lI)>-1){lG.compressedTexImage2D(34069+lS,lQ,lT,lK.width,lK.height,0,lK.data)}else{a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()")}}else{lG.texImage2D(34069+lS,lQ,lT,lK.width,lK.height,0,lI,lN,lK.data)}}}}if(!lM){lJ.__maxMipLevel=0}else{lJ.__maxMipLevel=lO.length-1}if(le(lU,lW)){k8(34067,lU,lP.width,lP.height)}lJ.__version=lU.version;if(lU.onUpdate){lU.onUpdate(lU)}}else{lG.activeTexture(33984+lV);lG.bindTexture(34067,lJ.__webglTexture)}}}function lD(lH,lI){lG.activeTexture(33984+lI);lG.bindTexture(34067,k6.get(lH).__webglTexture)}function lg(lH,lJ,lI){var lK;if(lI){lc.texParameteri(lH,10242,lF.convert(lJ.wrapS));lc.texParameteri(lH,10243,lF.convert(lJ.wrapT));if(lH===32879){lc.texParameteri(lH,32882,lF.convert(lJ.wrapR))}lc.texParameteri(lH,10240,lF.convert(lJ.magFilter));lc.texParameteri(lH,10241,lF.convert(lJ.minFilter))}else{lc.texParameteri(lH,10242,33071);lc.texParameteri(lH,10243,33071);if(lH===32879){lc.texParameteri(lH,32882,33071)}if(lJ.wrapS!==g7||lJ.wrapT!==g7){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.")}lc.texParameteri(lH,10240,lx(lJ.magFilter));lc.texParameteri(lH,10241,lx(lJ.minFilter));if(lJ.minFilter!==da&&lJ.minFilter!==j2){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")}}lK=ly.get("EXT_texture_filter_anisotropic");if(lK){if(lJ.type===ee&&ly.get("OES_texture_float_linear")===null){return}if(lJ.type===ex&&(lo.isWebGL2||ly.get("OES_texture_half_float_linear"))===null){return}if(lJ.anisotropy>1||k6.get(lJ).__currentAnisotropy){lc.texParameterf(lH,lK.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(lJ.anisotropy,lo.getMaxAnisotropy()));k6.get(lJ).__currentAnisotropy=lJ.anisotropy}}}function lv(lI,lH){if(lI.__webglInit===undefined){lI.__webglInit=true;lH.addEventListener("dispose",ln);lI.__webglTexture=lc.createTexture();lA.memory.textures++}}function k5(lJ,lQ,lS){var lT=(lQ.isDataTexture3D)?32879:3553;lv(lJ,lQ);lG.activeTexture(33984+lS);lG.bindTexture(lT,lJ.__webglTexture);lc.pixelStorei(37440,lQ.flipY);lc.pixelStorei(37441,lQ.premultiplyAlpha);lc.pixelStorei(3317,lQ.unpackAlignment);var lH=lC(lQ)&&lq(lQ.image)===false;var lN=ld(lQ.image,lH,false,lo.maxTextureSize);var lU=lq(lN)||lo.isWebGL2,lI=lF.convert(lQ.format),lL=lF.convert(lQ.type),lP=lp(lI,lL);lg(lT,lQ,lU);var lK,lM=lQ.mipmaps;if(lQ.isDepthTexture){lP=6402;if(lQ.type===ee){if(!lo.isWebGL2){throw new Error("Float Depth Texture only supported in WebGL2.0")}lP=36012}else{if(lo.isWebGL2){lP=33189}}if(lQ.format===cK&&lP===6402){if(lQ.type!==gI&&lQ.type!==jz){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.");lQ.type=gI;lL=lF.convert(lQ.type)}}if(lQ.format===fc){lP=34041;if(lQ.type!==de){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.");lQ.type=de;lL=lF.convert(lQ.type)}}lG.texImage2D(3553,0,lP,lN.width,lN.height,0,lI,lL,null)}else{if(lQ.isDataTexture){if(lM.length>0&&lU){for(var lO=0,lR=lM.length;lO<lR;lO++){lK=lM[lO];lG.texImage2D(3553,lO,lP,lK.width,lK.height,0,lI,lL,lK.data)}lQ.generateMipmaps=false;lJ.__maxMipLevel=lM.length-1}else{lG.texImage2D(3553,0,lP,lN.width,lN.height,0,lI,lL,lN.data);lJ.__maxMipLevel=0}}else{if(lQ.isCompressedTexture){for(var lO=0,lR=lM.length;lO<lR;lO++){lK=lM[lO];if(lQ.format!==gt&&lQ.format!==fK){if(lG.getCompressedTextureFormats().indexOf(lI)>-1){lG.compressedTexImage2D(3553,lO,lP,lK.width,lK.height,0,lK.data)}else{a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()")}}else{lG.texImage2D(3553,lO,lP,lK.width,lK.height,0,lI,lL,lK.data)}}lJ.__maxMipLevel=lM.length-1}else{if(lQ.isDataTexture3D){lG.texImage3D(32879,0,lP,lN.width,lN.height,lN.depth,0,lI,lL,lN.data);lJ.__maxMipLevel=0}else{if(lM.length>0&&lU){for(var lO=0,lR=lM.length;lO<lR;lO++){lK=lM[lO];lG.texImage2D(3553,lO,lP,lI,lL,lK)}lQ.generateMipmaps=false;lJ.__maxMipLevel=lM.length-1}else{lG.texImage2D(3553,0,lP,lI,lL,lN);lJ.__maxMipLevel=0}}}}}if(le(lQ,lU)){k8(3553,lQ,lN.width,lN.height)}lJ.__version=lQ.version;if(lQ.onUpdate){lQ.onUpdate(lQ)}}function lb(lK,lJ,lM,lH){var lL=lF.convert(lJ.texture.format);var lN=lF.convert(lJ.texture.type);var lI=lp(lL,lN);lG.texImage2D(lH,0,lI,lJ.width,lJ.height,0,lL,lN,null);lc.bindFramebuffer(36160,lK);lc.framebufferTexture2D(36160,lM,lH,k6.get(lJ.texture).__webglTexture,0);lc.bindFramebuffer(36160,null)}function lw(lI,lL,lH){lc.bindRenderbuffer(36161,lI);if(lL.depthBuffer&&!lL.stencilBuffer){if(lH){var lJ=lu(lL);lc.renderbufferStorageMultisample(36161,lJ,33189,lL.width,lL.height)}else{lc.renderbufferStorage(36161,33189,lL.width,lL.height)}lc.framebufferRenderbuffer(36160,36096,36161,lI)}else{if(lL.depthBuffer&&lL.stencilBuffer){if(lH){var lJ=lu(lL);lc.renderbufferStorageMultisample(36161,lJ,34041,lL.width,lL.height)}else{lc.renderbufferStorage(36161,34041,lL.width,lL.height)}lc.framebufferRenderbuffer(36160,33306,36161,lI)}else{var lM=lF.convert(lL.texture.format);var lN=lF.convert(lL.texture.type);var lK=lp(lM,lN);if(lH){var lJ=lu(lL);lc.renderbufferStorageMultisample(36161,lJ,lK,lL.width,lL.height)}else{lc.renderbufferStorage(36161,lK,lL.width,lL.height)}}}lc.bindRenderbuffer(36161,null)}function li(lK,lJ){var lI=(lJ&&lJ.isWebGLRenderTargetCube);if(lI){throw new Error("Depth Texture with cube render targets is not supported")}lc.bindFramebuffer(36160,lK);if(!(lJ.depthTexture&&lJ.depthTexture.isDepthTexture)){throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture")}if(!k6.get(lJ.depthTexture).__webglTexture||lJ.depthTexture.image.width!==lJ.width||lJ.depthTexture.image.height!==lJ.height){lJ.depthTexture.image.width=lJ.width;lJ.depthTexture.image.height=lJ.height;lJ.depthTexture.needsUpdate=true}k7(lJ.depthTexture,0);var lH=k6.get(lJ.depthTexture).__webglTexture;if(lJ.depthTexture.format===cK){lc.framebufferTexture2D(36160,36096,3553,lH,0)}else{if(lJ.depthTexture.format===fc){lc.framebufferTexture2D(36160,33306,3553,lH,0)}else{throw new Error("Unknown depthTexture format")}}}function lt(lK){var lI=k6.get(lK);var lH=(lK.isWebGLRenderTargetCube===true);if(lK.depthTexture){if(lH){throw new Error("target.depthTexture not supported in Cube render targets")}li(lI.__webglFramebuffer,lK)}else{if(lH){lI.__webglDepthbuffer=[];for(var lJ=0;lJ<6;lJ++){lc.bindFramebuffer(36160,lI.__webglFramebuffer[lJ]);lI.__webglDepthbuffer[lJ]=lc.createRenderbuffer();lw(lI.__webglDepthbuffer[lJ],lK)}}else{lc.bindFramebuffer(36160,lI.__webglFramebuffer);lI.__webglDepthbuffer=lc.createRenderbuffer();lw(lI.__webglDepthbuffer,lK)}}lc.bindFramebuffer(36160,null)}function lB(lL){var lM=k6.get(lL);var lI=k6.get(lL.texture);lL.addEventListener("dispose",lE);lI.__webglTexture=lc.createTexture();lA.memory.textures++;var lP=(lL.isWebGLRenderTargetCube===true);var lQ=(lL.isWebGLMultisampleRenderTarget===true);var lR=lq(lL)||lo.isWebGL2;if(lP){lM.__webglFramebuffer=[];for(var lK=0;lK<6;lK++){lM.__webglFramebuffer[lK]=lc.createFramebuffer()}}else{lM.__webglFramebuffer=lc.createFramebuffer();if(lQ){if(lo.isWebGL2){lM.__webglMultisampledFramebuffer=lc.createFramebuffer();lM.__webglColorRenderbuffer=lc.createRenderbuffer();lc.bindRenderbuffer(36161,lM.__webglColorRenderbuffer);var lH=lF.convert(lL.texture.format);var lJ=lF.convert(lL.texture.type);var lN=lp(lH,lJ);var lO=lu(lL);lc.renderbufferStorageMultisample(36161,lO,lN,lL.width,lL.height);lc.bindFramebuffer(36160,lM.__webglMultisampledFramebuffer);lc.framebufferRenderbuffer(36160,36064,36161,lM.__webglColorRenderbuffer);lc.bindRenderbuffer(36161,null);if(lL.depthBuffer){lM.__webglDepthRenderbuffer=lc.createRenderbuffer();lw(lM.__webglDepthRenderbuffer,lL,true)}lc.bindFramebuffer(36160,null)}else{a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}}}if(lP){lG.bindTexture(34067,lI.__webglTexture);lg(34067,lL.texture,lR);for(var lK=0;lK<6;lK++){lb(lM.__webglFramebuffer[lK],lL,36064,34069+lK)}if(le(lL.texture,lR)){k8(34067,lL.texture,lL.width,lL.height)}lG.bindTexture(34067,null)}else{lG.bindTexture(3553,lI.__webglTexture);lg(3553,lL.texture,lR);lb(lM.__webglFramebuffer,lL,36064,3553);if(le(lL.texture,lR)){k8(3553,lL.texture,lL.width,lL.height)}lG.bindTexture(3553,null)}if(lL.depthBuffer){lt(lL)}}function la(lK){var lJ=lK.texture;var lH=lq(lK)||lo.isWebGL2;if(le(lJ,lH)){var lL=lK.isWebGLRenderTargetCube?34067:3553;var lI=k6.get(lJ).__webglTexture;lG.bindTexture(lL,lI);k8(lL,lJ,lK.width,lK.height);lG.bindTexture(lL,null)}}function lh(lL){if(lL.isWebGLMultisampleRenderTarget){if(lo.isWebGL2){var lJ=k6.get(lL);lc.bindFramebuffer(36008,lJ.__webglMultisampledFramebuffer);lc.bindFramebuffer(36009,lJ.__webglFramebuffer);var lK=lL.width;var lH=lL.height;var lI=16384;if(lL.depthBuffer){lI|=256}if(lL.stencilBuffer){lI|=1024}lc.blitFramebuffer(0,0,lK,lH,0,0,lK,lH,lI,9728)}else{a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}}}function lu(lH){return(lo.isWebGL2&&lH.isWebGLMultisampleRenderTarget)?Math.min(lo.maxSamples,lH.samples):0}function lf(lH){var lJ=lH.id;var lI=lA.render.frame;if(k9[lJ]!==lI){k9[lJ]=lI;lH.update()}}this.setTexture2D=k7;this.setTexture3D=ls;this.setTextureCube=ll;this.setTextureCubeDynamic=lD;this.setupRenderTarget=lB;this.updateRenderTargetMipmap=la;this.updateMultisampleRenderTarget=lh}function eK(k8,k6,k5){function k7(k9){var la;if(k9===co){return 10497}if(k9===g7){return 33071}if(k9===jV){return 33648}if(k9===da){return 9728}if(k9===gK){return 9984}if(k9===ia){return 9986}if(k9===j2){return 9729}if(k9===B){return 9985}if(k9===ap){return 9987}if(k9===iv){return 5121}if(k9===aG){return 32819}if(k9===iT){return 32820}if(k9===gh){return 33635}if(k9===eg){return 5120}if(k9===au){return 5122}if(k9===gI){return 5123}if(k9===jY){return 5124}if(k9===jz){return 5125}if(k9===ee){return 5126}if(k9===ex){if(k5.isWebGL2){return 5131}la=k6.get("OES_texture_half_float");if(la!==null){return la.HALF_FLOAT_OES}}if(k9===dp){return 6406}if(k9===fK){return 6407}if(k9===gt){return 6408}if(k9===dL){return 6409}if(k9===em){return 6410}if(k9===cK){return 6402}if(k9===fc){return 34041}if(k9===gd){return 6403}if(k9===cM){return 32774}if(k9===cd){return 32778}if(k9===hD){return 32779}if(k9===bP){return 0}if(k9===i){return 1}if(k9===bX){return 768}if(k9===hb){return 769}if(k9===cE){return 770}if(k9===h9){return 771}if(k9===be){return 772}if(k9===gu){return 773}if(k9===av){return 774}if(k9===fH){return 775}if(k9===j0){return 776}if(k9===bW||k9===jd||k9===eA||k9===kO){la=k6.get("WEBGL_compressed_texture_s3tc");if(la!==null){if(k9===bW){return la.COMPRESSED_RGB_S3TC_DXT1_EXT}if(k9===jd){return la.COMPRESSED_RGBA_S3TC_DXT1_EXT}if(k9===eA){return la.COMPRESSED_RGBA_S3TC_DXT3_EXT}if(k9===kO){return la.COMPRESSED_RGBA_S3TC_DXT5_EXT}}}if(k9===h||k9===aC||k9===gM||k9===gm){la=k6.get("WEBGL_compressed_texture_pvrtc");if(la!==null){if(k9===h){return la.COMPRESSED_RGB_PVRTC_4BPPV1_IMG}if(k9===aC){return la.COMPRESSED_RGB_PVRTC_2BPPV1_IMG}if(k9===gM){return la.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG}if(k9===gm){return la.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}}if(k9===ij){la=k6.get("WEBGL_compressed_texture_etc1");if(la!==null){return la.COMPRESSED_RGB_ETC1_WEBGL}}if(k9===ii||k9===d8||k9===ct||k9===ar||k9===j5||k9===h1||k9===fX||k9===Z||k9===ks||k9===iw||k9===dP||k9===dc||k9===ig||k9===dD){la=k6.get("WEBGL_compressed_texture_astc");if(la!==null){return k9}}if(k9===eD||k9===cR){if(k5.isWebGL2){if(k9===eD){return 32775}if(k9===cR){return 32776}}la=k6.get("EXT_blend_minmax");if(la!==null){if(k9===eD){return la.MIN_EXT}if(k9===cR){return la.MAX_EXT}}}if(k9===de){if(k5.isWebGL2){return 34042}la=k6.get("WEBGL_depth_texture");if(la!==null){return la.UNSIGNED_INT_24_8_WEBGL}}return 0}return{convert:k7}}function kG(){fg.call(this);this.type="Group"}kG.prototype=Object.assign(Object.create(fg.prototype),{constructor:kG,isGroup:true});function eI(){fg.call(this);this.type="Camera";this.matrixWorldInverse=new fv();this.projectionMatrix=new fv();this.projectionMatrixInverse=new fv()}eI.prototype=Object.assign(Object.create(fg.prototype),{constructor:eI,isCamera:true,copy:function(k6,k5){fg.prototype.copy.call(this,k6,k5);this.matrixWorldInverse.copy(k6.matrixWorldInverse);this.projectionMatrix.copy(k6.projectionMatrix);this.projectionMatrixInverse.copy(k6.projectionMatrixInverse);return this},getWorldDirection:function(k6){if(k6===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Camera: .getWorldDirection() target is now required");k6=new bf()}this.updateMatrixWorld(true);var k5=this.matrixWorld.elements;return k6.set(-k5[8],-k5[9],-k5[10]).normalize()},updateMatrixWorld:function(k5){fg.prototype.updateMatrixWorld.call(this,k5);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function kR(k7,k6,k8,k5){eI.call(this);this.type="PerspectiveCamera";this.fov=k7!==undefined?k7:50;this.zoom=1;this.near=k8!==undefined?k8:0.1;this.far=k5!==undefined?k5:2000;this.focus=10;this.aspect=k6!==undefined?k6:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}kR.prototype=Object.assign(Object.create(eI.prototype),{constructor:kR,isPerspectiveCamera:true,copy:function(k6,k5){eI.prototype.copy.call(this,k6,k5);this.fov=k6.fov;this.zoom=k6.zoom;this.near=k6.near;this.far=k6.far;this.focus=k6.focus;this.aspect=k6.aspect;this.view=k6.view===null?null:Object.assign({},k6.view);this.filmGauge=k6.filmGauge;this.filmOffset=k6.filmOffset;return this},setFocalLength:function(k6){var k5=0.5*this.getFilmHeight()/k6;this.fov=dY.RAD2DEG*2*Math.atan(k5);this.updateProjectionMatrix()},getFocalLength:function(){var k5=Math.tan(dY.DEG2RAD*0.5*this.fov);return 0.5*this.getFilmHeight()/k5},getEffectiveFOV:function(){return dY.RAD2DEG*2*Math.atan(Math.tan(dY.DEG2RAD*0.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(k9,k7,k6,la,k8,k5){this.aspect=k9/k7;if(this.view===null){this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}}this.view.enabled=true;this.view.fullWidth=k9;this.view.fullHeight=k7;this.view.offsetX=k6;this.view.offsetY=la;this.view.width=k8;this.view.height=k5;this.updateProjectionMatrix()},clearViewOffset:function(){if(this.view!==null){this.view.enabled=false}this.updateProjectionMatrix()},updateProjectionMatrix:function(){var k7=this.near,k8=k7*Math.tan(dY.DEG2RAD*0.5*this.fov)/this.zoom,lc=2*k8,k5=this.aspect*lc,k6=-0.5*k5,k9=this.view;if(this.view!==null&&this.view.enabled){var lb=k9.fullWidth,la=k9.fullHeight;k6+=k9.offsetX*k5/lb;k8-=k9.offsetY*lc/la;k5*=k9.width/lb;lc*=k9.height/la}var ld=this.filmOffset;if(ld!==0){k6+=k7*ld/this.getFilmWidth()}this.projectionMatrix.makePerspective(k6,k6+k5,k8,k8-lc,k7,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(k6){var k5=fg.prototype.toJSON.call(this,k6);k5.object.fov=this.fov;k5.object.zoom=this.zoom;k5.object.near=this.near;k5.object.far=this.far;k5.object.focus=this.focus;k5.object.aspect=this.aspect;if(this.view!==null){k5.object.view=Object.assign({},this.view)}k5.object.filmGauge=this.filmGauge;k5.object.filmOffset=this.filmOffset;return k5}});function jk(k5){kR.call(this);this.cameras=k5||[]}jk.prototype=Object.assign(Object.create(kR.prototype),{constructor:jk,isArrayCamera:true});var bv=new bf();var hT=new bf();function dw(ll,lj,lh){bv.setFromMatrixPosition(lj.matrixWorld);hT.setFromMatrixPosition(lh.matrixWorld);var k9=bv.distanceTo(hT);var lp=lj.projectionMatrix.elements;var lm=lh.projectionMatrix.elements;var ln=lp[14]/(lp[10]-1);var k5=lp[14]/(lp[10]+1);var le=(lp[9]+1)/lp[5];var lg=(lp[9]-1)/lp[5];var k7=(lp[8]-1)/lp[0];var la=(lm[8]+1)/lm[0];var lb=ln*k7;var lo=ln*la;var ld=k9/(-k7+la);var lq=ld*-k7;lj.matrixWorld.decompose(ll.position,ll.quaternion,ll.scale);ll.translateX(lq);ll.translateZ(ld);ll.matrixWorld.compose(ll.position,ll.quaternion,ll.scale);ll.matrixWorldInverse.getInverse(ll.matrixWorld);var lc=ln+ld;var li=k5+ld;var lf=lb-lq;var k8=lo+(k9-lq);var lk=le*k5/li*lc;var k6=lg*k5/li*lc;ll.projectionMatrix.makePerspective(lf,k8,lk,k6,lc,li)}function fM(lj){var k8=this;var lm=null;var k9=null;var lf=null;var k5=[];var lr=new fv();var lb=new fv();var lg=1;var lc="stage";if(typeof window!=="undefined"&&"VRFrameData" in window){k9=new window.VRFrameData();window.addEventListener("vrdisplaypresentchange",ln,false)}var le=new fv();var lo=new hd();var lp=new bf();var lk=new kR();lk.bounds=new bd(0,0,0.5,1);lk.layers.enable(1);var li=new kR();li.bounds=new bd(0.5,0,0.5,1);li.layers.enable(2);var lh=new jk([lk,li]);lh.layers.enable(1);lh.layers.enable(2);function ls(){return lm!==null&&lm.isPresenting===true}var k7=new bg(),la;function ln(){if(ls()){var lu=lm.getEyeParameters("left");var lt=lu.renderWidth*lg;var lv=lu.renderHeight*lg;la=lj.getPixelRatio();lj.getSize(k7);lj.setDrawingBufferSize(lt*2,lv,1);lq.start()}else{if(k8.enabled){lj.setDrawingBufferSize(k7.width,k7.height,la)}lq.stop()}}var k6=[];function ld(ly){var lx=navigator.getGamepads&&navigator.getGamepads();for(var lw=0,lu=0,lt=lx.length;lw<lt;lw++){var lv=lx[lw];if(lv&&(lv.id==="Daydream Controller"||lv.id==="Gear VR Controller"||lv.id==="Oculus Go Controller"||lv.id==="OpenVR Gamepad"||lv.id.startsWith("Oculus Touch")||lv.id.startsWith("Spatial Controller"))){if(lu===ly){return lv}lu++}}}function ll(){for(var lv=0;lv<k5.length;lv++){var lt=k5[lv];var lu=ld(lv);if(lu!==undefined&&lu.pose!==undefined){if(lu.pose===null){return}var lx=lu.pose;if(lx.hasPosition===false){lt.position.set(0.2,-0.6,-0.05)}if(lx.position!==null){lt.position.fromArray(lx.position)}if(lx.orientation!==null){lt.quaternion.fromArray(lx.orientation)}lt.matrix.compose(lt.position,lt.quaternion,lt.scale);lt.matrix.premultiply(lr);lt.matrix.decompose(lt.position,lt.quaternion,lt.scale);lt.matrixWorldNeedsUpdate=true;lt.visible=true;var lw=lu.id==="Daydream Controller"?0:1;if(k6[lv]!==lu.buttons[lw].pressed){k6[lv]=lu.buttons[lw].pressed;if(k6[lv]===true){lt.dispatchEvent({type:"selectstart"})}else{lt.dispatchEvent({type:"selectend"});lt.dispatchEvent({type:"select"})}}}else{lt.visible=false}}}this.enabled=false;this.getController=function(lu){var lt=k5[lu];if(lt===undefined){lt=new kG();lt.matrixAutoUpdate=false;lt.visible=false;k5[lu]=lt}return lt};this.getDevice=function(){return lm};this.setDevice=function(lt){if(lt!==undefined){lm=lt}lq.setContext(lt)};this.setFramebufferScaleFactor=function(lt){lg=lt};this.setFrameOfReferenceType=function(lt){lc=lt};this.setPoseTarget=function(lt){if(lt!==undefined){lf=lt}};this.getCamera=function(lw){var lt=lc==="stage"?1.6:0;if(ls()===false){lw.position.set(0,lt,0);lw.rotation.set(0,0,0);return lw}lm.depthNear=lw.near;lm.depthFar=lw.far;lm.getFrameData(k9);if(lc==="stage"){var lA=lm.stageParameters;if(lA){lr.fromArray(lA.sittingToStandingTransform)}else{lr.makeTranslation(0,lt,0)}}var lz=k9.pose;var lx=lf!==null?lf:lw;lx.matrix.copy(lr);lx.matrix.decompose(lx.position,lx.quaternion,lx.scale);if(lz.orientation!==null){lo.fromArray(lz.orientation);lx.quaternion.multiply(lo)}if(lz.position!==null){lo.setFromRotationMatrix(lr);lp.fromArray(lz.position);lp.applyQuaternion(lo);lx.position.add(lp)}lx.updateMatrixWorld();lk.near=lw.near;li.near=lw.near;lk.far=lw.far;li.far=lw.far;lk.matrixWorldInverse.fromArray(k9.leftViewMatrix);li.matrixWorldInverse.fromArray(k9.rightViewMatrix);lb.getInverse(lr);if(lc==="stage"){lk.matrixWorldInverse.multiply(lb);li.matrixWorldInverse.multiply(lb)}var lv=lx.parent;if(lv!==null){le.getInverse(lv.matrixWorld);lk.matrixWorldInverse.multiply(le);li.matrixWorldInverse.multiply(le)}lk.matrixWorld.getInverse(lk.matrixWorldInverse);li.matrixWorld.getInverse(li.matrixWorldInverse);lk.projectionMatrix.fromArray(k9.leftProjectionMatrix);li.projectionMatrix.fromArray(k9.rightProjectionMatrix);dw(lh,lk,li);var ly=lm.getLayers();if(ly.length){var lu=ly[0];if(lu.leftBounds!==null&&lu.leftBounds.length===4){lk.bounds.fromArray(lu.leftBounds)}if(lu.rightBounds!==null&&lu.rightBounds.length===4){li.bounds.fromArray(lu.rightBounds)}}ll();return lh};this.getStandingMatrix=function(){return lr};this.isPresenting=ls;var lq=new cV();this.setAnimationLoop=function(lt){lq.setAnimationLoop(lt)};this.submitFrame=function(){if(ls()){lm.submitFrame()}};this.dispose=function(){if(typeof window!=="undefined"){window.removeEventListener("vrdisplaypresentchange",ln)}}}function iJ(lg){var lj=lg.context;var li=null;var k6=null;var lc=1;var lk=null;var k9="stage";var k7=null;var k5=[];var la=[];function ln(){return k6!==null&&lk!==null}var lh=new kR();lh.layers.enable(1);lh.viewport=new bd();var le=new kR();le.layers.enable(2);le.viewport=new bd();var ld=new jk([lh,le]);ld.layers.enable(1);ld.layers.enable(2);this.enabled=false;this.getController=function(lq){var lp=k5[lq];if(lp===undefined){lp=new kG();lp.matrixAutoUpdate=false;lp.visible=false;k5[lq]=lp}return lp};this.getDevice=function(){return li};this.setDevice=function(lp){if(lp!==undefined){li=lp}if(lp instanceof XRDevice){lj.setCompatibleXRDevice(lp)}};function lf(lq){var lp=k5[la.indexOf(lq.inputSource)];if(lp){lp.dispatchEvent({type:lq.type})}}function lm(){lg.setFramebuffer(null);lg.setRenderTarget(lg.getRenderTarget());ll.stop()}this.setFramebufferScaleFactor=function(lp){lc=lp};this.setFrameOfReferenceType=function(lp){k9=lp};this.setSession=function(lp){k6=lp;if(k6!==null){k6.addEventListener("select",lf);k6.addEventListener("selectstart",lf);k6.addEventListener("selectend",lf);k6.addEventListener("end",lm);k6.baseLayer=new XRWebGLLayer(k6,lj,{framebufferScaleFactor:lc});k6.requestFrameOfReference(k9).then(function(lq){lk=lq;lg.setFramebuffer(k6.baseLayer.framebuffer);ll.setContext(k6);ll.start()});la=k6.getInputSources();k6.addEventListener("inputsourceschange",function(){la=k6.getInputSources();a.Logger.log(a.Logger.WARNING,la);for(var lr=0;lr<k5.length;lr++){var lq=k5[lr];lq.userData.inputSource=la[lr]}})}};function k8(lq,lp){if(lp===null){lq.matrixWorld.copy(lq.matrix)}else{lq.matrixWorld.multiplyMatrices(lp.matrixWorld,lq.matrix)}lq.matrixWorldInverse.getInverse(lq.matrixWorld)}this.getCamera=function(lu){if(ln()){var lt=lu.parent;var ls=ld.cameras;k8(ld,lt);for(var lr=0;lr<ls.length;lr++){k8(ls[lr],lt)}lu.matrixWorld.copy(ld.matrixWorld);var lq=lu.children;for(var lr=0,lp=lq.length;lr<lp;lr++){lq[lr].updateMatrixWorld(true)}dw(ld,lh,le);return ld}return lu};this.isPresenting=ln;var lo=null;function lb(ls,lq){k7=lq.getDevicePose(lk);if(k7!==null){var lw=k6.baseLayer;var lA=lq.views;for(var lu=0;lu<lA.length;lu++){var lz=lA[lu];var ly=lw.getViewport(lz);var lt=k7.getViewMatrix(lz);var lx=ld.cameras[lu];lx.matrix.fromArray(lt).getInverse(lx.matrix);lx.projectionMatrix.fromArray(lz.projectionMatrix);lx.viewport.set(ly.x,ly.y,ly.width,ly.height);if(lu===0){ld.matrix.copy(lx.matrix)}}}for(var lu=0;lu<k5.length;lu++){var lv=k5[lu];var lr=la[lu];if(lr){var lp=lq.getInputPose(lr,lk);if(lp!==null){if("targetRay" in lp){lv.matrix.elements=lp.targetRay.transformMatrix}else{if("pointerMatrix" in lp){lv.matrix.elements=lp.pointerMatrix}}lv.matrix.decompose(lv.position,lv.rotation,lv.scale);lv.visible=true;continue}}lv.visible=false}if(lo){lo(ls)}}var ll=new cV();ll.setAnimationLoop(lb);this.setAnimationLoop=function(lp){lo=lp};this.dispose=function(){};this.getStandingMatrix=function(){a.Logger.log(a.Logger.WARNING,"THREE.WebXRManager: getStandingMatrix() is no longer needed.");return new fv()};this.submitFrame=function(){}}function hy(ls){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer",he);ls=ls||{};var k8=ls.canvas!==undefined?ls.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),k6=ls.context!==undefined?ls.context:null,lE=ls.alpha!==undefined?ls.alpha:false,l6=ls.depth!==undefined?ls.depth:true,mz=ls.stencil!==undefined?ls.stencil:true,lV=ls.antialias!==undefined?ls.antialias:false,mu=ls.premultipliedAlpha!==undefined?ls.premultipliedAlpha:true,lX=ls.preserveDrawingBuffer!==undefined?ls.preserveDrawingBuffer:false,l1=ls.powerPreference!==undefined?ls.powerPreference:"default";var mr=null;var lr=null;this.domElement=k8;this.context=null;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.clippingPlanes=[];this.localClippingEnabled=false;this.gammaFactor=2;this.gammaInput=false;this.gammaOutput=false;this.physicallyCorrectLights=false;this.toneMapping=ku;this.toneMappingExposure=1;this.toneMappingWhitePoint=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var ln=this,lb=false,lx=null,l2=null,mm=null,lP=-1,lu={geometry:null,program:null,wireframe:false},lo=null,mh=null,mp=new bd(),lC=new bd(),mt=null,mn=0,lW=k8.width,lt=k8.height,lU=1,lO=new bd(0,0,lW,lt),lw=new bd(0,0,lW,lt),lA=false,l5=new hA(),mx=new E(),la=false,ml=false,lS=new fv(),li=new bf();function mk(){return l2===null?lU:1}var l8;try{var mg={alpha:lE,depth:l6,stencil:mz,antialias:lV,premultipliedAlpha:mu,preserveDrawingBuffer:lX,powerPreference:l1};k8.addEventListener("webglcontextlost",le,false);k8.addEventListener("webglcontextrestored",lZ,false);l8=k6||k8.getContext("webgl",mg)||k8.getContext("experimental-webgl",mg);if(l8===null){if(k8.getContext("webgl")!==null){throw new Error("Error creating WebGL context with your selected attributes.")}else{throw new Error("Error creating WebGL context.")}}if(l8.getShaderPrecisionFormat===undefined){l8.getShaderPrecisionFormat=function(){return{"rangeMin":1,"rangeMax":1,"precision":1}}}}catch(mc){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLRenderer: "+mc.message);throw mc}var k5,lF,mw,lj;var lL,lH,md,l3,lR;var lc,me,mv;var mf,lq,lk,lf;var lQ;function mb(){k5=new cc(l8);lF=new ew(l8,k5,ls);if(!lF.isWebGL2){k5.get("WEBGL_depth_texture");k5.get("OES_texture_float");k5.get("OES_texture_half_float");k5.get("OES_texture_half_float_linear");k5.get("OES_standard_derivatives");k5.get("OES_element_index_uint");k5.get("ANGLE_instanced_arrays")}k5.get("OES_texture_float_linear");lQ=new eK(l8,k5,lF);mw=new gx(l8,k5,lQ,lF);mw.scissor(lC.copy(lw).multiplyScalar(lU));mw.viewport(mp.copy(lO).multiplyScalar(lU));lj=new i5(l8);lL=new bM();lH=new d3(l8,k5,mw,lL,lF,lQ,lj);md=new z(l8);l3=new hL(l8,md,lj);lR=new jB(l3,lj);lq=new b6(l8);lc=new eL(ln,k5,lF);me=new gl();mv=new k();mf=new k1(ln,mw,lR,mu);lk=new f3(l8,k5,lj,lF);lf=new bi(l8,k5,lj,lF);lj.programs=lc.programs;ln.context=l8;ln.capabilities=lF;ln.extensions=k5;ln.properties=lL;ln.renderLists=me;ln.state=mw;ln.info=lj}mb();var lp=null;if(typeof navigator!=="undefined"){lp=("xr" in navigator)?new iJ(ln):new fM(ln)}this.vr=lp;var lh=new iy(ln,lR,lF.maxTextureSize);this.shadowMap=lh;this.getContext=function(){return l8};this.getContextAttributes=function(){return l8.getContextAttributes()};this.forceContextLoss=function(){var mA=k5.get("WEBGL_lose_context");if(mA){mA.loseContext()}};this.forceContextRestore=function(){var mA=k5.get("WEBGL_lose_context");if(mA){mA.restoreContext()}};this.getPixelRatio=function(){return lU};this.setPixelRatio=function(mA){if(mA===undefined){return}lU=mA;this.setSize(lW,lt,false)};this.getSize=function(mA){if(mA===undefined){a.Logger.log(a.Logger.WARNING,"WebGLRenderer: .getsize() now requires a Vector2 as an argument");mA=new bg()}return mA.set(lW,lt)};this.setSize=function(mB,mA,mC){if(lp.isPresenting()){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}lW=mB;lt=mA;k8.width=mB*lU;k8.height=mA*lU;if(mC!==false){k8.style.width=mB+"px";k8.style.height=mA+"px"}this.setViewport(0,0,mB,mA)};this.getDrawingBufferSize=function(mA){if(mA===undefined){a.Logger.log(a.Logger.WARNING,"WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument");mA=new bg()}return mA.set(lW*lU,lt*lU)};this.setDrawingBufferSize=function(mB,mA,mC){lW=mB;lt=mA;lU=mC;k8.width=mB*mC;k8.height=mA*mC;this.setViewport(0,0,mB,mA)};this.getCurrentViewport=function(mA){if(mA===undefined){a.Logger.log(a.Logger.WARNING,"WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument");mA=new bd()}return mA.copy(mp)};this.getViewport=function(mA){return mA.copy(lO)};this.setViewport=function(mB,mD,mC,mA){if(mB.isVector4){lO.set(mB.x,mB.y,mB.z,mB.w)}else{lO.set(mB,mD,mC,mA)}mw.viewport(mp.copy(lO).multiplyScalar(lU))};this.getScissor=function(mA){return mA.copy(lw)};this.setScissor=function(mB,mD,mC,mA){if(mB.isVector4){lw.set(mB.x,mB.y,mB.z,mB.w)}else{lw.set(mB,mD,mC,mA)}mw.scissor(lC.copy(lw).multiplyScalar(lU))};this.getScissorTest=function(){return lA};this.setScissorTest=function(mA){mw.setScissorTest(lA=mA)};this.getClearColor=function(){return mf.getClearColor()};this.setClearColor=function(){mf.setClearColor.apply(mf,arguments)};this.getClearAlpha=function(){return mf.getClearAlpha()};this.setClearAlpha=function(){mf.setClearAlpha.apply(mf,arguments)};this.clear=function(mA,mD,mB){var mC=0;if(mA===undefined||mA){mC|=16384}if(mD===undefined||mD){mC|=256}if(mB===undefined||mB){mC|=1024}l8.clear(mC)};this.clearColor=function(){this.clear(true,false,false)};this.clearDepth=function(){this.clear(false,true,false)};this.clearStencil=function(){this.clear(false,false,true)};this.dispose=function(){k8.removeEventListener("webglcontextlost",le,false);k8.removeEventListener("webglcontextrestored",lZ,false);me.dispose();mv.dispose();lL.dispose();lR.dispose();lp.dispose();ms.stop()};function le(mA){mA.preventDefault();a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Context Lost.");lb=true}function lZ(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Context Restored.");lb=false;mb()}function mq(mB){var mA=mB.target;mA.removeEventListener("dispose",mq);k9(mA)}function k9(mA){ll(mA);lL.remove(mA)}function ll(mB){var mA=lL.get(mB).program;mB.program=undefined;if(mA!==undefined){lc.releaseProgram(mA)}}function my(mB,mA){mB.render(function(mC){ln.renderBufferImmediate(mC,mA)})}this.renderBufferImmediate=function(mD,mC){mw.initAttributes();var mB=lL.get(mD);if(mD.hasPositions&&!mB.position){mB.position=l8.createBuffer()}if(mD.hasNormals&&!mB.normal){mB.normal=l8.createBuffer()}if(mD.hasUvs&&!mB.uv){mB.uv=l8.createBuffer()}if(mD.hasColors&&!mB.color){mB.color=l8.createBuffer()}var mA=mC.getAttributes();if(mD.hasPositions){l8.bindBuffer(34962,mB.position);l8.bufferData(34962,mD.positionArray,35048);mw.enableAttribute(mA.position);l8.vertexAttribPointer(mA.position,3,5126,false,0,0)}if(mD.hasNormals){l8.bindBuffer(34962,mB.normal);l8.bufferData(34962,mD.normalArray,35048);mw.enableAttribute(mA.normal);l8.vertexAttribPointer(mA.normal,3,5126,false,0,0)}if(mD.hasUvs){l8.bindBuffer(34962,mB.uv);l8.bufferData(34962,mD.uvArray,35048);mw.enableAttribute(mA.uv);l8.vertexAttribPointer(mA.uv,2,5126,false,0,0)}if(mD.hasColors){l8.bindBuffer(34962,mB.color);l8.bufferData(34962,mD.colorArray,35048);mw.enableAttribute(mA.color);l8.vertexAttribPointer(mA.color,3,5126,false,0,0)}mw.disableUnusedAttributes();l8.drawArrays(4,0,mD.count);mD.count=0};this.renderBufferDirect=function(mQ,mB,mF,mM,mU,mI){var mW=(mU.isMesh&&mU.matrixWorld.determinant()<0);mw.setMaterial(mM,mW);var mK=lY(mQ,mB,mM,mU);var mO=false;if(lu.geometry!==mF.id||lu.program!==mK.id||lu.wireframe!==(mM.wireframe===true)){lu.geometry=mF.id;lu.program=mK.id;lu.wireframe=mM.wireframe===true;mO=true}if(mU.morphTargetInfluences){lq.update(mU,mF,mM,mK);mO=true}var mG=mF.index;var mT=mF.attributes.position;var mJ=1;if(mM.wireframe===true){mG=l3.getWireframeAttribute(mF);mJ=2}var mN;var mP=lk;if(mG!==null){mN=md.get(mG);mP=lf;mP.setIndex(mN)}if(mO){lg(mM,mK,mF);if(mG!==null){l8.bindBuffer(34963,mN.buffer)}}var mS=Infinity;if(mG!==null){mS=mG.count}else{if(mT!==undefined){mS=mT.count}}var mR=mF.drawRange.start*mJ;var mV=mF.drawRange.count*mJ;var mC=mI!==null?mI.start*mJ:0;var mE=mI!==null?mI.count*mJ:Infinity;var mH=Math.max(mR,mC);var mD=Math.min(mS,mR+mV,mC+mE)-1;var mL=Math.max(0,mD-mH+1);if(mL===0){return}if(mU.isMesh){if(mM.wireframe===true){mw.setLineWidth(mM.wireframeLinewidth*mk());mP.setMode(1)}else{switch(mU.drawMode){case cZ:mP.setMode(4);break;case bh:mP.setMode(5);break;case fI:mP.setMode(6);break}}}else{if(mU.isLine){var mA=mM.linewidth;if(mA===undefined){mA=1}mw.setLineWidth(mA*mk());if(mU.isLineSegments){mP.setMode(1)}else{if(mU.isLineLoop){mP.setMode(2)}else{mP.setMode(3)}}}else{if(mU.isPoints){mP.setMode(0)}else{if(mU.isSprite){mP.setMode(4)}}}}if(mF&&mF.isInstancedBufferGeometry){if(mF.maxInstancedCount>0){mP.renderInstances(mF,mH,mL)}}else{mP.render(mH,mL)}};function lg(mH,mG,mC){if(mC&&mC.isInstancedBufferGeometry&&!lF.isWebGL2){if(k5.get("ANGLE_instanced_arrays")===null){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}mw.initAttributes();var mE=mC.attributes;var mP=mG.getAttributes();var mA=mH.defaultAttributeValues;for(var mS in mP){var mQ=mP[mS];if(mQ>=0){var mF=mE[mS];if(mF!==undefined){var mK=mF.normalized;var mJ=mF.itemSize;var mI=md.get(mF);if(mI===undefined){continue}var mN=mI.buffer;var mB=mI.type;var mO=mI.bytesPerElement;if(mF.isInterleavedBufferAttribute){var mR=mF.data;var mL=mR.stride;var mD=mF.offset;if(mR&&mR.isInstancedInterleavedBuffer){mw.enableAttributeAndDivisor(mQ,mR.meshPerAttribute);if(mC.maxInstancedCount===undefined){mC.maxInstancedCount=mR.meshPerAttribute*mR.count}}else{mw.enableAttribute(mQ)}l8.bindBuffer(34962,mN);l8.vertexAttribPointer(mQ,mJ,mB,mK,mL*mO,mD*mO)}else{if(mF.isInstancedBufferAttribute){mw.enableAttributeAndDivisor(mQ,mF.meshPerAttribute);if(mC.maxInstancedCount===undefined){mC.maxInstancedCount=mF.meshPerAttribute*mF.count}}else{mw.enableAttribute(mQ)}l8.bindBuffer(34962,mN);l8.vertexAttribPointer(mQ,mJ,mB,mK,0,0)}}else{if(mA!==undefined){var mM=mA[mS];if(mM!==undefined){switch(mM.length){case 2:l8.vertexAttrib2fv(mQ,mM);break;case 3:l8.vertexAttrib3fv(mQ,mM);break;case 4:l8.vertexAttrib4fv(mQ,mM);break;default:l8.vertexAttrib1fv(mQ,mM)}}}}}}mw.disableUnusedAttributes()}this.compile=function(mB,mA){lr=mv.get(mB,mA);lr.init();mB.traverse(function(mC){if(mC.isLight){lr.pushLight(mC);if(mC.castShadow){lr.pushShadow(mC)}}});lr.setupLights(mA);mB.traverse(function(mC){if(mC.material){if(Array.isArray(mC.material)){for(var mD=0;mD<mC.material.length;mD++){lI(mC.material[mD],mB.fog,mC)}}else{lI(mC.material,mB.fog,mC)}}})};var k7=null;function lB(mA){if(lp.isPresenting()){return}if(k7){k7(mA)}}var ms=new cV();ms.setAnimationLoop(lB);if(typeof window!=="undefined"){ms.setContext(window)}this.setAnimationLoop=function(mA){k7=mA;lp.setAnimationLoop(mA);ms.start()};this.render=function(mG,mD){var mE,mH;if(arguments[2]!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");mE=arguments[2]}if(arguments[3]!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");mH=arguments[3]}if(!(mD&&mD.isCamera)){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(lb){return}lu.geometry=null;lu.program=null;lu.wireframe=false;lP=-1;lo=null;if(mG.autoUpdate===true){mG.updateMatrixWorld()}if(mD.parent===null){mD.updateMatrixWorld()}if(lp.enabled){mD=lp.getCamera(mD)}lr=mv.get(mG,mD);lr.init();mG.onBeforeRender(ln,mG,mD,mE||l2);lS.multiplyMatrices(mD.projectionMatrix,mD.matrixWorldInverse);l5.setFromMatrix(lS);ml=this.localClippingEnabled;la=mx.init(this.clippingPlanes,ml,mD);mr=me.get(mG,mD);mr.init();ld(mG,mD,0,ln.sortObjects);if(ln.sortObjects===true){mr.sort()}if(la){mx.beginShadows()}var mC=lr.state.shadowsArray;lh.render(mC,mG,mD);lr.setupLights(mD);if(la){mx.endShadows()}if(this.info.autoReset){this.info.reset()}if(mE!==undefined){this.setRenderTarget(mE)}mf.render(mr,mG,mD,mH);var mB=mr.opaque;var mF=mr.transparent;if(mG.overrideMaterial){var mA=mG.overrideMaterial;if(mB.length){lN(mB,mG,mD,mA)}if(mF.length){lN(mF,mG,mD,mA)}}else{if(mB.length){lN(mB,mG,mD)}if(mF.length){lN(mF,mG,mD)}}if(l2!==null){lH.updateRenderTargetMipmap(l2);lH.updateMultisampleRenderTarget(l2)}mw.buffers.depth.setTest(true);mw.buffers.depth.setMask(true);mw.buffers.color.setMask(true);mw.setPolygonOffset(false);mG.onAfterRender(ln,mG,mD);if(lp.enabled){lp.submitFrame()}mr=null;lr=null};function ld(mF,mJ,mI,mH){if(mF.visible===false){return}var mC=mF.layers.test(mJ.layers);if(mC){if(mF.isGroup){mI=mF.renderOrder}else{if(mF.isLight){lr.pushLight(mF);if(mF.castShadow){lr.pushShadow(mF)}}else{if(mF.isSprite){if(!mF.frustumCulled||l5.intersectsSprite(mF)){if(mH){li.setFromMatrixPosition(mF.matrixWorld).applyMatrix4(lS)}var mL=lR.update(mF);var mK=mF.material;mr.push(mF,mL,mK,mI,li.z,null)}}else{if(mF.isImmediateRenderObject){if(mH){li.setFromMatrixPosition(mF.matrixWorld).applyMatrix4(lS)}mr.push(mF,null,mF.material,mI,li.z,null)}else{if(mF.isMesh||mF.isLine||mF.isPoints){if(mF.isSkinnedMesh){mF.skeleton.update()}if(!mF.frustumCulled||l5.intersectsObject(mF)){if(mH){li.setFromMatrixPosition(mF.matrixWorld).applyMatrix4(lS)}var mL=lR.update(mF);var mK=mF.material;if(Array.isArray(mK)){var mB=mL.groups;for(var mG=0,mD=mB.length;mG<mD;mG++){var mM=mB[mG];var mE=mK[mM.materialIndex];if(mE&&mE.visible){mr.push(mF,mL,mE,mI,li.z,mM)}}}else{if(mK.visible){mr.push(mF,mL,mK,mI,li.z,null)}}}}}}}}}var mA=mF.children;for(var mG=0,mD=mA.length;mG<mD;mG++){ld(mA[mG],mJ,mI,mH)}}function lN(mG,mS,mP,mJ){for(var mO=0,mM=mG.length;mO<mM;mO++){var mH=mG[mO];var mT=mH.object;var mA=mH.geometry;var mI=mJ===undefined?mH.material:mJ;var mD=mH.group;if(mP.isArrayCamera){mh=mP;var mR=mP.cameras;for(var mN=0,mQ=mR.length;mN<mQ;mN++){var mB=mR[mN];if(mT.layers.test(mB.layers)){if("viewport" in mB){mw.viewport(mp.copy(mB.viewport))}else{var mC=mB.bounds;var mF=mC.x*lW;var mE=mC.y*lt;var mL=mC.z*lW;var mK=mC.w*lt;mw.viewport(mp.set(mF,mE,mL,mK).multiplyScalar(lU))}lr.setupLights(mB);ma(mT,mS,mB,mA,mI,mD)}}}else{mh=null;ma(mT,mS,mP,mA,mI,mD)}}}function ma(mB,mF,mD,mG,mC,mE){mB.onBeforeRender(ln,mF,mD,mG,mC,mE);lr=mv.get(mF,mh||mD);mB.modelViewMatrix.multiplyMatrices(mD.matrixWorldInverse,mB.matrixWorld);mB.normalMatrix.getNormalMatrix(mB.modelViewMatrix);if(mB.isImmediateRenderObject){mw.setMaterial(mC);var mA=lY(mD,mF.fog,mC,mB);lu.geometry=null;lu.program=null;lu.wireframe=false;my(mB,mA)}else{ln.renderBufferDirect(mD,mF.fog,mG,mC,mB,mE)}mB.onAfterRender(ln,mF,mD,mG,mC,mE);lr=mv.get(mF,mh||mD)}function lI(mJ,mB,mR){var mE=lL.get(mJ);var mO=lr.state.lights;var mQ=lr.state.shadowsArray;var mP=mE.lightsHash;var mN=mO.state.hash;var mF=lc.getParameters(mJ,mO.state,mQ,mB,mx.numPlanes,mx.numIntersection,mR);var mC=lc.getProgramCode(mJ,mF);var mG=mE.program;var mI=true;if(mG===undefined){mJ.addEventListener("dispose",mq)}else{if(mG.code!==mC){ll(mJ)}else{if(mP.stateID!==mN.stateID||mP.directionalLength!==mN.directionalLength||mP.pointLength!==mN.pointLength||mP.spotLength!==mN.spotLength||mP.rectAreaLength!==mN.rectAreaLength||mP.hemiLength!==mN.hemiLength||mP.shadowsLength!==mN.shadowsLength){mP.stateID=mN.stateID;mP.directionalLength=mN.directionalLength;mP.pointLength=mN.pointLength;mP.spotLength=mN.spotLength;mP.rectAreaLength=mN.rectAreaLength;mP.hemiLength=mN.hemiLength;mP.shadowsLength=mN.shadowsLength;mI=false}else{if(mF.shaderID!==undefined){return}else{mI=false}}}}if(mI){if(mF.shaderID){var mA=kx[mF.shaderID];mE.shader={name:mJ.type,uniforms:ke(mA.uniforms),vertexShader:mA.vertexShader,fragmentShader:mA.fragmentShader}}else{mE.shader={name:mJ.type,uniforms:mJ.uniforms,vertexShader:mJ.vertexShader,fragmentShader:mJ.fragmentShader}}mJ.onBeforeCompile(mE.shader,ln);mC=lc.getProgramCode(mJ,mF);mG=lc.acquireProgram(mJ,mE.shader,mF,mC);mE.program=mG;mJ.program=mG}var mL=mG.getAttributes();if(mJ.morphTargets){mJ.numSupportedMorphTargets=0;for(var mK=0;mK<ln.maxMorphTargets;mK++){if(mL["morphTarget"+mK]>=0){mJ.numSupportedMorphTargets++}}}if(mJ.morphNormals){mJ.numSupportedMorphNormals=0;for(var mK=0;mK<ln.maxMorphNormals;mK++){if(mL["morphNormal"+mK]>=0){mJ.numSupportedMorphNormals++}}}var mM=mE.shader.uniforms;if(!mJ.isShaderMaterial&&!mJ.isRawShaderMaterial||mJ.clipping===true){mE.numClippingPlanes=mx.numPlanes;mE.numIntersection=mx.numIntersection;mM.clippingPlanes=mx.uniform}mE.fog=mB;if(mP===undefined){mE.lightsHash=mP={}}mP.stateID=mN.stateID;mP.directionalLength=mN.directionalLength;mP.pointLength=mN.pointLength;mP.spotLength=mN.spotLength;mP.rectAreaLength=mN.rectAreaLength;mP.hemiLength=mN.hemiLength;mP.shadowsLength=mN.shadowsLength;if(mJ.lights){mM.ambientLightColor.value=mO.state.ambient;mM.directionalLights.value=mO.state.directional;mM.spotLights.value=mO.state.spot;mM.rectAreaLights.value=mO.state.rectArea;mM.pointLights.value=mO.state.point;mM.hemisphereLights.value=mO.state.hemi;mM.directionalShadowMap.value=mO.state.directionalShadowMap;mM.directionalShadowMatrix.value=mO.state.directionalShadowMatrix;mM.spotShadowMap.value=mO.state.spotShadowMap;mM.spotShadowMatrix.value=mO.state.spotShadowMatrix;mM.pointShadowMap.value=mO.state.pointShadowMap;mM.pointShadowMatrix.value=mO.state.pointShadowMatrix}var mH=mE.program.getUniforms(),mD=x.seqWithValue(mH.seq,mM);mE.uniformsList=mD}function lY(mP,mA,mI,mU){mn=0;var mC=lL.get(mI);var mS=lr.state.lights;var mT=mC.lightsHash;var mR=mS.state.hash;if(la){if(ml||mP!==lo){var mM=mP===lo&&mI.id===lP;mx.setState(mI.clippingPlanes,mI.clipIntersection,mI.clipShadows,mP,mC,mM)}}if(mI.needsUpdate===false){if(mC.program===undefined){mI.needsUpdate=true}else{if(mI.fog&&mC.fog!==mA){mI.needsUpdate=true}else{if(mI.lights&&(mT.stateID!==mR.stateID||mT.directionalLength!==mR.directionalLength||mT.pointLength!==mR.pointLength||mT.spotLength!==mR.spotLength||mT.rectAreaLength!==mR.rectAreaLength||mT.hemiLength!==mR.hemiLength||mT.shadowsLength!==mR.shadowsLength)){mI.needsUpdate=true}else{if(mC.numClippingPlanes!==undefined&&(mC.numClippingPlanes!==mx.numPlanes||mC.numIntersection!==mx.numIntersection)){mI.needsUpdate=true}}}}}if(mI.needsUpdate){lI(mI,mA,mU);mI.needsUpdate=false}var mH=false;var mB=false;var mJ=false;var mG=mC.program,mQ=mG.getUniforms(),mL=mC.shader.uniforms;if(mw.useProgram(mG.program)){mH=true;mB=true;mJ=true}if(mI.id!==lP){lP=mI.id;mB=true}if(mH||lo!==mP){mQ.setValue(l8,"projectionMatrix",mP.projectionMatrix);if(lF.logarithmicDepthBuffer){mQ.setValue(l8,"logDepthBufFC",2/(Math.log(mP.far+1)/Math.LN2))}if(lo!==mP){lo=mP;mB=true;mJ=true}if(mI.isShaderMaterial||mI.isMeshPhongMaterial||mI.isMeshStandardMaterial||mI.envMap){var mD=mQ.map.cameraPosition;if(mD!==undefined){mD.setValue(l8,li.setFromMatrixPosition(mP.matrixWorld))}}if(mI.isMeshPhongMaterial||mI.isMeshLambertMaterial||mI.isMeshBasicMaterial||mI.isMeshStandardMaterial||mI.isShaderMaterial||mI.skinning){mQ.setValue(l8,"viewMatrix",mP.matrixWorldInverse)}}if(mI.skinning){mQ.setOptional(l8,mU,"bindMatrix");mQ.setOptional(l8,mU,"bindMatrixInverse");var mE=mU.skeleton;if(mE){var mO=mE.bones;if(lF.floatVertexTextures){if(mE.boneTexture===undefined){var mK=Math.sqrt(mO.length*4);mK=dY.ceilPowerOfTwo(mK);mK=Math.max(mK,4);var mF=new Float32Array(mK*mK*4);mF.set(mE.boneMatrices);var mN=new t(mF,mK,mK,gt,ee);mN.needsUpdate=true;mE.boneMatrices=mF;mE.boneTexture=mN;mE.boneTextureSize=mK}mQ.setValue(l8,"boneTexture",mE.boneTexture);mQ.setValue(l8,"boneTextureSize",mE.boneTextureSize)}else{mQ.setOptional(l8,mE,"boneMatrices")}}}if(mB){mQ.setValue(l8,"toneMappingExposure",ln.toneMappingExposure);mQ.setValue(l8,"toneMappingWhitePoint",ln.toneMappingWhitePoint);if(mI.lights){mj(mL,mJ)}if(mA&&mI.fog){l9(mL,mA)}if(mI.isMeshBasicMaterial){lD(mL,mI)}else{if(mI.isMeshLambertMaterial){lD(mL,mI);mi(mL,mI)}else{if(mI.isMeshPhongMaterial){lD(mL,mI);if(mI.isMeshToonMaterial){lv(mL,mI)}else{lJ(mL,mI)}}else{if(mI.isMeshStandardMaterial){lD(mL,mI);if(mI.isMeshPhysicalMaterial){lm(mL,mI)}else{mo(mL,mI)}}else{if(mI.isMeshMatcapMaterial){lD(mL,mI);lz(mL,mI)}else{if(mI.isMeshDepthMaterial){lD(mL,mI);l0(mL,mI)}else{if(mI.isMeshDistanceMaterial){lD(mL,mI);ly(mL,mI)}else{if(mI.isMeshNormalMaterial){lD(mL,mI);lT(mL,mI)}else{if(mI.isLineBasicMaterial){lK(mL,mI);if(mI.isLineDashedMaterial){l7(mL,mI)}}else{if(mI.isPointsMaterial){lM(mL,mI)}else{if(mI.isSpriteMaterial){l4(mL,mI)}else{if(mI.isShadowMaterial){mL.color.value=mI.color;mL.opacity.value=mI.opacity}}}}}}}}}}}}if(mL.ltc_1!==undefined){mL.ltc_1.value=f6.LTC_1}if(mL.ltc_2!==undefined){mL.ltc_2.value=f6.LTC_2}x.upload(l8,mC.uniformsList,mL,ln)}if(mI.isShaderMaterial&&mI.uniformsNeedUpdate===true){x.upload(l8,mC.uniformsList,mL,ln);mI.uniformsNeedUpdate=false}if(mI.isSpriteMaterial){mQ.setValue(l8,"center",mU.center)}mQ.setValue(l8,"modelViewMatrix",mU.modelViewMatrix);mQ.setValue(l8,"normalMatrix",mU.normalMatrix);mQ.setValue(l8,"modelMatrix",mU.matrixWorld);return mG}function lD(mB,mC){mB.opacity.value=mC.opacity;if(mC.color){mB.diffuse.value=mC.color}if(mC.emissive){mB.emissive.value.copy(mC.emissive).multiplyScalar(mC.emissiveIntensity)}if(mC.map){mB.map.value=mC.map}if(mC.alphaMap){mB.alphaMap.value=mC.alphaMap}if(mC.specularMap){mB.specularMap.value=mC.specularMap}if(mC.envMap){mB.envMap.value=mC.envMap;mB.flipEnvMap.value=mC.envMap.isCubeTexture?-1:1;mB.reflectivity.value=mC.reflectivity;mB.refractionRatio.value=mC.refractionRatio;mB.maxMipLevel.value=lL.get(mC.envMap).__maxMipLevel}if(mC.lightMap){mB.lightMap.value=mC.lightMap;mB.lightMapIntensity.value=mC.lightMapIntensity}if(mC.aoMap){mB.aoMap.value=mC.aoMap;mB.aoMapIntensity.value=mC.aoMapIntensity}var mA;if(mC.map){mA=mC.map}else{if(mC.specularMap){mA=mC.specularMap}else{if(mC.displacementMap){mA=mC.displacementMap}else{if(mC.normalMap){mA=mC.normalMap}else{if(mC.bumpMap){mA=mC.bumpMap}else{if(mC.roughnessMap){mA=mC.roughnessMap}else{if(mC.metalnessMap){mA=mC.metalnessMap}else{if(mC.alphaMap){mA=mC.alphaMap}else{if(mC.emissiveMap){mA=mC.emissiveMap}}}}}}}}}if(mA!==undefined){if(mA.isWebGLRenderTarget){mA=mA.texture}if(mA.matrixAutoUpdate===true){mA.updateMatrix()}mB.uvTransform.value.copy(mA.matrix)}}function lK(mA,mB){mA.diffuse.value=mB.color;mA.opacity.value=mB.opacity}function l7(mA,mB){mA.dashSize.value=mB.dashSize;mA.totalSize.value=mB.dashSize+mB.gapSize;mA.scale.value=mB.scale}function lM(mA,mB){mA.diffuse.value=mB.color;mA.opacity.value=mB.opacity;mA.size.value=mB.size*lU;mA.scale.value=lt*0.5;mA.map.value=mB.map;if(mB.map!==null){if(mB.map.matrixAutoUpdate===true){mB.map.updateMatrix()}mA.uvTransform.value.copy(mB.map.matrix)}}function l4(mA,mB){mA.diffuse.value=mB.color;mA.opacity.value=mB.opacity;mA.rotation.value=mB.rotation;mA.map.value=mB.map;if(mB.map!==null){if(mB.map.matrixAutoUpdate===true){mB.map.updateMatrix()}mA.uvTransform.value.copy(mB.map.matrix)}}function l9(mA,mB){mA.fogColor.value=mB.color;if(mB.isFog){mA.fogNear.value=mB.near;mA.fogFar.value=mB.far}else{if(mB.isFogExp2){mA.fogDensity.value=mB.density}}}function mi(mA,mB){if(mB.emissiveMap){mA.emissiveMap.value=mB.emissiveMap}}function lJ(mA,mB){mA.specular.value=mB.specular;mA.shininess.value=Math.max(mB.shininess,0.0001);if(mB.emissiveMap){mA.emissiveMap.value=mB.emissiveMap}if(mB.bumpMap){mA.bumpMap.value=mB.bumpMap;mA.bumpScale.value=mB.bumpScale;if(mB.side===c5){mA.bumpScale.value*=-1}}if(mB.normalMap){mA.normalMap.value=mB.normalMap;mA.normalScale.value.copy(mB.normalScale);if(mB.side===c5){mA.normalScale.value.negate()}}if(mB.displacementMap){mA.displacementMap.value=mB.displacementMap;mA.displacementScale.value=mB.displacementScale;mA.displacementBias.value=mB.displacementBias}}function lv(mA,mB){lJ(mA,mB);if(mB.gradientMap){mA.gradientMap.value=mB.gradientMap}}function mo(mA,mB){mA.roughness.value=mB.roughness;mA.metalness.value=mB.metalness;if(mB.roughnessMap){mA.roughnessMap.value=mB.roughnessMap}if(mB.metalnessMap){mA.metalnessMap.value=mB.metalnessMap}if(mB.emissiveMap){mA.emissiveMap.value=mB.emissiveMap}if(mB.bumpMap){mA.bumpMap.value=mB.bumpMap;mA.bumpScale.value=mB.bumpScale;if(mB.side===c5){mA.bumpScale.value*=-1}}if(mB.normalMap){mA.normalMap.value=mB.normalMap;mA.normalScale.value.copy(mB.normalScale);if(mB.side===c5){mA.normalScale.value.negate()}}if(mB.displacementMap){mA.displacementMap.value=mB.displacementMap;mA.displacementScale.value=mB.displacementScale;mA.displacementBias.value=mB.displacementBias}if(mB.envMap){mA.envMapIntensity.value=mB.envMapIntensity}}function lm(mA,mB){mo(mA,mB);mA.reflectivity.value=mB.reflectivity;mA.clearCoat.value=mB.clearCoat;mA.clearCoatRoughness.value=mB.clearCoatRoughness}function lz(mA,mB){if(mB.matcap){mA.matcap.value=mB.matcap}if(mB.bumpMap){mA.bumpMap.value=mB.bumpMap;mA.bumpScale.value=mB.bumpScale;if(mB.side===c5){mA.bumpScale.value*=-1}}if(mB.normalMap){mA.normalMap.value=mB.normalMap;mA.normalScale.value.copy(mB.normalScale);if(mB.side===c5){mA.normalScale.value.negate()}}if(mB.displacementMap){mA.displacementMap.value=mB.displacementMap;mA.displacementScale.value=mB.displacementScale;mA.displacementBias.value=mB.displacementBias}}function l0(mA,mB){if(mB.displacementMap){mA.displacementMap.value=mB.displacementMap;mA.displacementScale.value=mB.displacementScale;mA.displacementBias.value=mB.displacementBias}}function ly(mA,mB){if(mB.displacementMap){mA.displacementMap.value=mB.displacementMap;mA.displacementScale.value=mB.displacementScale;mA.displacementBias.value=mB.displacementBias}mA.referencePosition.value.copy(mB.referencePosition);mA.nearDistance.value=mB.nearDistance;mA.farDistance.value=mB.farDistance}function lT(mA,mB){if(mB.bumpMap){mA.bumpMap.value=mB.bumpMap;mA.bumpScale.value=mB.bumpScale;if(mB.side===c5){mA.bumpScale.value*=-1}}if(mB.normalMap){mA.normalMap.value=mB.normalMap;mA.normalScale.value.copy(mB.normalScale);if(mB.side===c5){mA.normalScale.value.negate()}}if(mB.displacementMap){mA.displacementMap.value=mB.displacementMap;mA.displacementScale.value=mB.displacementScale;mA.displacementBias.value=mB.displacementBias}}function mj(mA,mB){mA.ambientLightColor.needsUpdate=mB;mA.directionalLights.needsUpdate=mB;mA.pointLights.needsUpdate=mB;mA.spotLights.needsUpdate=mB;mA.rectAreaLights.needsUpdate=mB;mA.hemisphereLights.needsUpdate=mB}function lG(){var mA=mn;if(mA>=lF.maxTextures){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: Trying to use "+mA+" texture units while this GPU supports only "+lF.maxTextures)}mn+=1;return mA}this.allocTextureUnit=lG;this.setTexture2D=(function(){var mA=false;return function mB(mC,mD){if(mC&&mC.isWebGLRenderTarget){if(!mA){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.");mA=true}mC=mC.texture}lH.setTexture2D(mC,mD)}}());this.setTexture3D=(function(){return function mA(mB,mC){lH.setTexture3D(mB,mC)}}());this.setTexture=(function(){var mA=false;return function mB(mC,mD){if(!mA){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.");mA=true}lH.setTexture2D(mC,mD)}}());this.setTextureCube=(function(){var mA=false;return function mB(mC,mD){if(mC&&mC.isWebGLRenderTargetCube){if(!mA){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.");mA=true}mC=mC.texture}if((mC&&mC.isCubeTexture)||(Array.isArray(mC.image)&&mC.image.length===6)){lH.setTextureCube(mC,mD)}else{lH.setTextureCubeDynamic(mC,mD)}}}());this.setFramebuffer=function(mA){lx=mA};this.getRenderTarget=function(){return l2};this.setRenderTarget=function(mF,mE,mG){l2=mF;if(mF&&lL.get(mF).__webglFramebuffer===undefined){lH.setupRenderTarget(mF)}var mD=lx;var mA=false;if(mF){var mB=lL.get(mF).__webglFramebuffer;if(mF.isWebGLRenderTargetCube){mD=mB[mE||0];mA=true}else{if(mF.isWebGLMultisampleRenderTarget){mD=lL.get(mF).__webglMultisampledFramebuffer}else{mD=mB}}mp.copy(mF.viewport);lC.copy(mF.scissor);mt=mF.scissorTest}else{mp.copy(lO).multiplyScalar(lU);lC.copy(lw).multiplyScalar(lU);mt=lA}if(mm!==mD){l8.bindFramebuffer(36160,mD);mm=mD}mw.viewport(mp);mw.scissor(lC);mw.setScissorTest(mt);if(mA){var mC=lL.get(mF.texture);l8.framebufferTexture2D(36160,36064,34069+mE||0,mC.__webglTexture,mG||0)}};this.readRenderTargetPixels=function(mC,mI,mF,mA,mK,mB){if(!(mC&&mC.isWebGLRenderTarget)){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var mH=lL.get(mC).__webglFramebuffer;if(mH){var mE=false;if(mH!==mm){l8.bindFramebuffer(36160,mH);mE=true}try{var mD=mC.texture;var mG=mD.format;var mJ=mD.type;if(mG!==gt&&lQ.convert(mG)!==l8.getParameter(35739)){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(mJ!==iv&&lQ.convert(mJ)!==l8.getParameter(35738)&&!(mJ===ee&&(lF.isWebGL2||k5.get("OES_texture_float")||k5.get("WEBGL_color_buffer_float")))&&!(mJ===ex&&(lF.isWebGL2?k5.get("EXT_color_buffer_float"):k5.get("EXT_color_buffer_half_float")))){a.Logger.log(a.Logger.SEVERE,"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(l8.checkFramebufferStatus(36160)===36053){if((mI>=0&&mI<=(mC.width-mA))&&(mF>=0&&mF<=(mC.height-mK))){l8.readPixels(mI,mF,mA,mK,lQ.convert(mG),lQ.convert(mJ),mB)}}else{a.Logger.log(a.Logger.SEVERE,"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}}finally{if(mE){l8.bindFramebuffer(36160,mm)}}}};this.copyFramebufferToTexture=function(mB,mD,mF){var mC=mD.image.width;var mA=mD.image.height;var mE=lQ.convert(mD.format);this.setTexture2D(mD,0);l8.copyTexImage2D(3553,mF||0,mE,mB.x,mB.y,mC,mA,0)};this.copyTextureToTexture=function(mB,mC,mE,mH){var mD=mC.image.width;var mA=mC.image.height;var mF=lQ.convert(mE.format);var mG=lQ.convert(mE.type);this.setTexture2D(mE,0);if(mC.isDataTexture){l8.texSubImage2D(3553,mH||0,mB.x,mB.y,mD,mA,mF,mG,mC.image.data)}else{l8.texSubImage2D(3553,mH||0,mB.x,mB.y,mF,mG,mC.image)}}}function jn(k6,k5){this.name="";this.color=new id(k6);this.density=(k5!==undefined)?k5:0.00025}Object.assign(jn.prototype,{isFogExp2:true,clone:function(){return new jn(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function jq(k6,k7,k5){this.name="";this.color=new id(k6);this.near=(k7!==undefined)?k7:1;this.far=(k5!==undefined)?k5:1000}Object.assign(jq.prototype,{isFog:true,clone:function(){return new jq(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function iG(){fg.call(this);this.type="Scene";this.background=null;this.fog=null;this.overrideMaterial=null;this.autoUpdate=true}iG.prototype=Object.assign(Object.create(fg.prototype),{constructor:iG,isScene:true,copy:function(k6,k5){fg.prototype.copy.call(this,k6,k5);if(k6.background!==null){this.background=k6.background.clone()}if(k6.fog!==null){this.fog=k6.fog.clone()}if(k6.overrideMaterial!==null){this.overrideMaterial=k6.overrideMaterial.clone()}this.autoUpdate=k6.autoUpdate;this.matrixAutoUpdate=k6.matrixAutoUpdate;return this},toJSON:function(k6){var k5=fg.prototype.toJSON.call(this,k6);if(this.background!==null){k5.object.background=this.background.toJSON(k6)}if(this.fog!==null){k5.object.fog=this.fog.toJSON()}return k5},dispose:function(){this.dispatchEvent({type:"dispose"})}});function cQ(k6,k5){this.array=k6;this.stride=k5;this.count=k6!==undefined?k6.length/k5:0;this.dynamic=false;this.updateRange={offset:0,count:-1};this.version=0}Object.defineProperty(cQ.prototype,"needsUpdate",{set:function(k5){if(k5===true){this.version++}}});Object.assign(cQ.prototype,{isInterleavedBuffer:true,onUploadCallback:function(){},setArray:function(k5){if(Array.isArray(k5)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=k5!==undefined?k5.length/this.stride:0;this.array=k5;return this},setDynamic:function(k5){this.dynamic=k5;return this},copy:function(k5){this.array=new k5.array.constructor(k5.array);this.count=k5.count;this.stride=k5.stride;this.dynamic=k5.dynamic;return this},copyAt:function(k9,k7,k8){k9*=this.stride;k8*=k7.stride;for(var k6=0,k5=this.stride;k6<k5;k6++){this.array[k9+k6]=k7.array[k8+k6]}return this},set:function(k5,k6){if(k6===undefined){k6=0}this.array.set(k5,k6);return this},clone:function(){return new this.constructor().copy(this)},onUpload:function(k5){this.onUploadCallback=k5;return this}});function R(k5,k6,k8,k7){this.data=k5;this.itemSize=k6;this.offset=k8;this.normalized=k7===true}Object.defineProperties(R.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(R.prototype,{isInterleavedBufferAttribute:true,setX:function(k6,k5){this.data.array[k6*this.data.stride+this.offset]=k5;return this},setY:function(k5,k6){this.data.array[k5*this.data.stride+this.offset+1]=k6;return this},setZ:function(k5,k6){this.data.array[k5*this.data.stride+this.offset+2]=k6;return this},setW:function(k6,k5){this.data.array[k6*this.data.stride+this.offset+3]=k5;return this},getX:function(k5){return this.data.array[k5*this.data.stride+this.offset]},getY:function(k5){return this.data.array[k5*this.data.stride+this.offset+1]},getZ:function(k5){return this.data.array[k5*this.data.stride+this.offset+2]},getW:function(k5){return this.data.array[k5*this.data.stride+this.offset+3]},setXY:function(k6,k5,k7){k6=k6*this.data.stride+this.offset;this.data.array[k6+0]=k5;this.data.array[k6+1]=k7;return this},setXYZ:function(k6,k5,k8,k7){k6=k6*this.data.stride+this.offset;this.data.array[k6+0]=k5;this.data.array[k6+1]=k8;this.data.array[k6+2]=k7;return this},setXYZW:function(k7,k5,k9,k8,k6){k7=k7*this.data.stride+this.offset;this.data.array[k7+0]=k5;this.data.array[k7+1]=k9;this.data.array[k7+2]=k8;this.data.array[k7+3]=k6;return this}});function el(k5){jo.call(this);this.type="SpriteMaterial";this.color=new id(16777215);this.map=null;this.rotation=0;this.sizeAttenuation=true;this.lights=false;this.transparent=true;this.setValues(k5)}el.prototype=Object.create(jo.prototype);el.prototype.constructor=el;el.prototype.isSpriteMaterial=true;el.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.color.copy(k5.color);this.map=k5.map;this.rotation=k5.rotation;this.sizeAttenuation=k5.sizeAttenuation;return this};var kC;function iZ(k7){fg.call(this);this.type="Sprite";if(kC===undefined){kC=new cl();var k5=new Float32Array([-0.5,-0.5,0,0,0,0.5,-0.5,0,1,0,0.5,0.5,0,1,1,-0.5,0.5,0,0,1]);var k6=new cQ(k5,5);kC.setIndex([0,1,2,0,2,3]);kC.addAttribute("position",new R(k6,3,0,false));kC.addAttribute("uv",new R(k6,2,3,false))}this.geometry=kC;this.material=(k7!==undefined)?k7:new el();this.center=new bg(0.5,0.5)}iZ.prototype=Object.assign(Object.create(fg.prototype),{constructor:iZ,isSprite:true,raycast:(function(){var li=new bf();var lh=new bf();var k8=new bf();var lb=new bg();var ld=new bg();var lg=new fv();var k9=new bf();var k7=new bf();var k5=new bf();var lf=new bg();var le=new bg();var lc=new bg();function k6(lm,lo,lj,ln,lk,ll){lb.subVectors(lm,lj).addScalar(0.5).multiply(ln);if(lk!==undefined){ld.x=(ll*lb.x)-(lk*lb.y);ld.y=(lk*lb.x)+(ll*lb.y)}else{ld.copy(lb)}lm.copy(lo);lm.x+=ld.x;lm.y+=ld.y;lm.applyMatrix4(lg)}return function la(lm,lo){lh.setFromMatrixScale(this.matrixWorld);lg.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld);k8.setFromMatrixPosition(this.modelViewMatrix);var ln=this.material.rotation;var ll,lp;if(ln!==0){lp=Math.cos(ln);ll=Math.sin(ln)}var lk=this.center;k6(k9.set(-0.5,-0.5,0),k8,lk,lh,ll,lp);k6(k7.set(0.5,-0.5,0),k8,lk,lh,ll,lp);k6(k5.set(0.5,0.5,0),k8,lk,lh,ll,lp);lf.set(0,0);le.set(1,0);lc.set(1,1);var lj=lm.ray.intersectTriangle(k9,k7,k5,false,li);if(lj===null){k6(k7.set(-0.5,0.5,0),k8,lk,lh,ll,lp);le.set(0,1);lj=lm.ray.intersectTriangle(k9,k5,k7,false,li);if(lj===null){return}}var lq=lm.ray.origin.distanceTo(li);if(lq<lm.near||lq>lm.far){return}lo.push({distance:lq,point:li.clone(),uv:gD.getUV(li,k9,k7,k5,lf,le,lc,new bg()),face:null,object:this})}}()),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(k5){fg.prototype.copy.call(this,k5);if(k5.center!==undefined){this.center.copy(k5.center)}return this}});function ix(){fg.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:true,value:[]}})}ix.prototype=Object.assign(Object.create(fg.prototype),{constructor:ix,copy:function(k8){fg.prototype.copy.call(this,k8,false);var k7=k8.levels;for(var k6=0,k5=k7.length;k6<k5;k6++){var k9=k7[k6];this.addLevel(k9.object.clone(),k9.distance)}return this},addLevel:function(k6,k8){if(k8===undefined){k8=0}k8=Math.abs(k8);var k7=this.levels;for(var k5=0;k5<k7.length;k5++){if(k8<k7[k5].distance){break}}k7.splice(k5,0,{distance:k8,object:k6});this.add(k6)},getObjectForDistance:function(k8){var k7=this.levels;for(var k6=1,k5=k7.length;k6<k5;k6++){if(k8<k7[k6].distance){break}}return k7[k6-1].object},raycast:(function(){var k5=new bf();return function k6(k7,k8){k5.setFromMatrixPosition(this.matrixWorld);var k9=k7.ray.origin.distanceTo(k5);this.getObjectForDistance(k9).raycast(k7,k8)}}()),update:function(){var k7=new bf();var k5=new bf();return function k6(la){var lb=this.levels;if(lb.length>1){k7.setFromMatrixPosition(la.matrixWorld);k5.setFromMatrixPosition(this.matrixWorld);var lc=k7.distanceTo(k5);lb[0].object.visible=true;for(var k9=1,k8=lb.length;k9<k8;k9++){if(lc>=lb[k9].distance){lb[k9-1].object.visible=false;lb[k9].object.visible=true}else{break}}for(;k9<k8;k9++){lb[k9].object.visible=false}}}}(),toJSON:function(k9){var k8=fg.prototype.toJSON.call(this,k9);k8.object.levels=[];var k7=this.levels;for(var k6=0,k5=k7.length;k6<k5;k6++){var la=k7[k6];k8.object.levels.push({object:la.object.uuid,distance:la.distance})}return k8}});function fN(k6,k5){if(k6&&k6.isGeometry){a.Logger.log(a.Logger.SEVERE,"THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}kH.call(this,k6,k5);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new fv();this.bindMatrixInverse=new fv()}fN.prototype=Object.assign(Object.create(kH.prototype),{constructor:fN,isSkinnedMesh:true,bind:function(k6,k5){this.skeleton=k6;if(k5===undefined){this.updateMatrixWorld(true);this.skeleton.calculateInverses();k5=this.matrixWorld}this.bindMatrix.copy(k5);this.bindMatrixInverse.getInverse(k5)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var k7=new bd();var k6=this.geometry.attributes.skinWeight;for(var k8=0,k5=k6.count;k8<k5;k8++){k7.x=k6.getX(k8);k7.y=k6.getY(k8);k7.z=k6.getZ(k8);k7.w=k6.getW(k8);var k9=1/k7.manhattanLength();if(k9!==Infinity){k7.multiplyScalar(k9)}else{k7.set(1,0,0,0)}k6.setXYZW(k8,k7.x,k7.y,k7.z,k7.w)}},updateMatrixWorld:function(k5){kH.prototype.updateMatrixWorld.call(this,k5);if(this.bindMode==="attached"){this.bindMatrixInverse.getInverse(this.matrixWorld)}else{if(this.bindMode==="detached"){this.bindMatrixInverse.getInverse(this.bindMatrix)}else{a.Logger.log(a.Logger.WARNING,"THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function es(k5,k8){k5=k5||[];this.bones=k5.slice(0);this.boneMatrices=new Float32Array(this.bones.length*16);if(k8===undefined){this.calculateInverses()}else{if(this.bones.length===k8.length){this.boneInverses=k8.slice(0)}else{a.Logger.log(a.Logger.WARNING,"THREE.Skeleton boneInverses is the wrong length.");this.boneInverses=[];for(var k7=0,k6=this.bones.length;k7<k6;k7++){this.boneInverses.push(new fv())}}}}Object.assign(es.prototype,{calculateInverses:function(){this.boneInverses=[];for(var k7=0,k6=this.bones.length;k7<k6;k7++){var k5=new fv();if(this.bones[k7]){k5.getInverse(this.bones[k7].matrixWorld)}this.boneInverses.push(k5)}},pose:function(){var k7,k6,k5;for(k6=0,k5=this.bones.length;k6<k5;k6++){k7=this.bones[k6];if(k7){k7.matrixWorld.getInverse(this.boneInverses[k6])}}for(k6=0,k5=this.bones.length;k6<k5;k6++){k7=this.bones[k6];if(k7){if(k7.parent&&k7.parent.isBone){k7.matrix.getInverse(k7.parent.matrixWorld);k7.matrix.multiply(k7.matrixWorld)}else{k7.matrix.copy(k7.matrixWorld)}k7.matrix.decompose(k7.position,k7.quaternion,k7.scale)}}},update:(function(){var k5=new fv();var k7=new fv();return function k6(){var k8=this.bones;var lc=this.boneInverses;var ld=this.boneMatrices;var le=this.boneTexture;for(var lb=0,la=k8.length;lb<la;lb++){var k9=k8[lb]?k8[lb].matrixWorld:k7;k5.multiplyMatrices(k9,lc[lb]);k5.toArray(ld,lb*16)}if(le!==undefined){le.needsUpdate=true}}})(),clone:function(){return new es(this.bones,this.boneInverses)},getBoneByName:function(k6){for(var k7=0,k5=this.bones.length;k7<k5;k7++){var k8=this.bones[k7];if(k8.name===k6){return k8}}return undefined}});function cF(){fg.call(this);this.type="Bone"}cF.prototype=Object.assign(Object.create(fg.prototype),{constructor:cF,isBone:true});function ju(k5){jo.call(this);this.type="LineBasicMaterial";this.color=new id(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.lights=false;this.setValues(k5)}ju.prototype=Object.create(jo.prototype);ju.prototype.constructor=ju;ju.prototype.isLineBasicMaterial=true;ju.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.color.copy(k5.color);this.linewidth=k5.linewidth;this.linecap=k5.linecap;this.linejoin=k5.linejoin;return this};function kP(k7,k5,k6){if(k6===1){a.Logger.log(a.Logger.SEVERE,"THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.")}fg.call(this);this.type="Line";this.geometry=k7!==undefined?k7:new cl();this.material=k5!==undefined?k5:new ju({color:Math.random()*16777215})}kP.prototype=Object.assign(Object.create(fg.prototype),{constructor:kP,isLine:true,computeLineDistances:(function(){var k7=new bf();var k5=new bf();return function k6(){var ld=this.geometry;if(ld.isBufferGeometry){if(ld.index===null){var lc=ld.attributes.position;var la=[0];for(var lb=1,k8=lc.count;lb<k8;lb++){k7.fromBufferAttribute(lc,lb-1);k5.fromBufferAttribute(lc,lb);la[lb]=la[lb-1];la[lb]+=k7.distanceTo(k5)}ld.addAttribute("lineDistance",new ei(la,1))}else{a.Logger.log(a.Logger.WARNING,"THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.")}}else{if(ld.isGeometry){var k9=ld.vertices;var la=ld.lineDistances;la[0]=0;for(var lb=1,k8=k9.length;lb<k8;lb++){la[lb]=la[lb-1];la[lb]+=k9[lb-1].distanceTo(k9[lb])}}}return this}}()),raycast:(function(){var k7=new fv();var k5=new gr();var k6=new d0();return function k8(lm,la){var ls=lm.linePrecision;var le=this.geometry;var lp=this.matrixWorld;if(le.boundingSphere===null){le.computeBoundingSphere()}k6.copy(le.boundingSphere);k6.applyMatrix4(lp);k6.radius+=ls;if(lm.ray.intersectsSphere(k6)===false){return}k7.getInverse(lp);k5.copy(lm.ray).applyMatrix4(k7);var lr=ls/((this.scale.x+this.scale.y+this.scale.z)/3);var lb=lr*lr;var lw=new bf();var k9=new bf();var lf=new bf();var ln=new bf();var li=(this&&this.isLineSegments)?2:1;if(le.isBufferGeometry){var lj=le.index;var ll=le.attributes;var lk=ll.position.array;if(lj!==null){var lg=lj.array;for(var lq=0,lo=lg.length-1;lq<lo;lq+=li){var lu=lg[lq];var lt=lg[lq+1];lw.fromArray(lk,lu*3);k9.fromArray(lk,lt*3);var lc=k5.distanceSqToSegment(lw,k9,ln,lf);if(lc>lb){continue}ln.applyMatrix4(this.matrixWorld);var ld=lm.ray.origin.distanceTo(ln);if(ld<lm.near||ld>lm.far){continue}la.push({distance:ld,point:lf.clone().applyMatrix4(this.matrixWorld),index:lq,face:null,faceIndex:null,object:this})}}else{for(var lq=0,lo=lk.length/3-1;lq<lo;lq+=li){lw.fromArray(lk,3*lq);k9.fromArray(lk,3*lq+3);var lc=k5.distanceSqToSegment(lw,k9,ln,lf);if(lc>lb){continue}ln.applyMatrix4(this.matrixWorld);var ld=lm.ray.origin.distanceTo(ln);if(ld<lm.near||ld>lm.far){continue}la.push({distance:ld,point:lf.clone().applyMatrix4(this.matrixWorld),index:lq,face:null,faceIndex:null,object:this})}}}else{if(le.isGeometry){var lh=le.vertices;var lv=lh.length;for(var lq=0;lq<lv-1;lq+=li){var lc=k5.distanceSqToSegment(lh[lq],lh[lq+1],ln,lf);if(lc>lb){continue}ln.applyMatrix4(this.matrixWorld);var ld=lm.ray.origin.distanceTo(ln);if(ld<lm.near||ld>lm.far){continue}la.push({distance:ld,point:lf.clone().applyMatrix4(this.matrixWorld),index:lq,face:null,faceIndex:null,object:this})}}}}}()),copy:function(k5){fg.prototype.copy.call(this,k5);this.geometry.copy(k5.geometry);this.material.copy(k5.material);return this},clone:function(){return new this.constructor().copy(this)}});function fo(k6,k5){kP.call(this,k6,k5);this.type="LineSegments"}fo.prototype=Object.assign(Object.create(kP.prototype),{constructor:fo,isLineSegments:true,computeLineDistances:(function(){var k7=new bf();var k5=new bf();return function k6(){var ld=this.geometry;if(ld.isBufferGeometry){if(ld.index===null){var lc=ld.attributes.position;var la=[];for(var lb=0,k8=lc.count;lb<k8;lb+=2){k7.fromBufferAttribute(lc,lb);k5.fromBufferAttribute(lc,lb+1);la[lb]=(lb===0)?0:la[lb-1];la[lb+1]=la[lb]+k7.distanceTo(k5)}ld.addAttribute("lineDistance",new ei(la,1))}else{a.Logger.log(a.Logger.WARNING,"THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.")}}else{if(ld.isGeometry){var k9=ld.vertices;var la=ld.lineDistances;for(var lb=0,k8=k9.length;lb<k8;lb+=2){k7.copy(k9[lb]);k5.copy(k9[lb+1]);la[lb]=(lb===0)?0:la[lb-1];la[lb+1]=la[lb]+k7.distanceTo(k5)}}}return this}}())});function U(k6,k5){kP.call(this,k6,k5);this.type="LineLoop"}U.prototype=Object.assign(Object.create(kP.prototype),{constructor:U,isLineLoop:true,});function e(k5){jo.call(this);this.type="PointsMaterial";this.color=new id(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.morphTargets=false;this.lights=false;this.setValues(k5)}e.prototype=Object.create(jo.prototype);e.prototype.constructor=e;e.prototype.isPointsMaterial=true;e.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.color.copy(k5.color);this.map=k5.map;this.size=k5.size;this.sizeAttenuation=k5.sizeAttenuation;this.morphTargets=k5.morphTargets;return this};function hx(k6,k5){fg.call(this);this.type="Points";this.geometry=k6!==undefined?k6:new cl();this.material=k5!==undefined?k5:new e({color:Math.random()*16777215})}hx.prototype=Object.assign(Object.create(fg.prototype),{constructor:hx,isPoints:true,raycast:(function(){var k7=new fv();var k5=new gr();var k6=new d0();return function k8(ll,k9){var ls=this;var ld=this.geometry;var ln=this.matrixWorld;var lc=ll.params.Points.threshold;if(ld.boundingSphere===null){ld.computeBoundingSphere()}k6.copy(ld.boundingSphere);k6.applyMatrix4(ln);k6.radius+=lc;if(ll.ray.intersectsSphere(k6)===false){return}k7.getInverse(ln);k5.copy(ll.ray).applyMatrix4(k7);var lb=lc/((this.scale.x+this.scale.y+this.scale.z)/3);var la=lb*lb;var lr=new bf();var lp=new bf();function lk(lt,lu){var lv=k5.distanceSqToPoint(lt);if(lv<la){k5.closestPointToPoint(lt,lp);lp.applyMatrix4(ln);var lw=ll.ray.origin.distanceTo(lp);if(lw<ll.near||lw>ll.far){return}k9.push({distance:lw,distanceToRay:Math.sqrt(lv),point:lp.clone(),index:lu,face:null,object:ls})}}if(ld.isBufferGeometry){var lg=ld.index;var li=ld.attributes;var lh=li.position.array;if(lg!==null){var le=lg.array;for(var lo=0,lj=le.length;lo<lj;lo++){var lq=le[lo];lr.fromArray(lh,lq*3);lk(lr,lq)}}else{for(var lo=0,lm=lh.length/3;lo<lm;lo++){lr.fromArray(lh,lo*3);lk(lr,lo)}}}else{var lf=ld.vertices;for(var lo=0,lm=lf.length;lo<lm;lo++){lk(lf[lo],lo)}}}}()),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function bD(k7,k6,la,k9,ld,k8,lc,lb,k5){eq.call(this,k7,k6,la,k9,ld,k8,lc,lb,k5);this.format=lc!==undefined?lc:fK;this.minFilter=k8!==undefined?k8:j2;this.magFilter=ld!==undefined?ld:j2;this.generateMipmaps=false}bD.prototype=Object.assign(Object.create(eq.prototype),{constructor:bD,isVideoTexture:true,update:function(){var k5=this.image;if(k5.readyState>=k5.HAVE_CURRENT_DATA){this.needsUpdate=true}}});function cT(la,k8,lg,le,ld,k6,lc,lb,lf,k7,k5,k9){eq.call(this,null,k6,lc,lb,lf,k7,le,ld,k5,k9);this.image={width:k8,height:lg};this.mipmaps=la;this.flipY=false;this.generateMipmaps=false}cT.prototype=Object.create(eq.prototype);cT.prototype.constructor=cT;cT.prototype.isCompressedTexture=true;function bm(k8,k6,la,k9,ld,k7,lc,lb,k5){eq.call(this,k8,k6,la,k9,ld,k7,lc,lb,k5);this.needsUpdate=true}bm.prototype=Object.create(eq.prototype);bm.prototype.constructor=bm;bm.prototype.isCanvasTexture=true;function ff(k7,le,lb,k6,la,k9,ld,k8,k5,lc){lc=lc!==undefined?lc:cK;if(lc!==cK&&lc!==fc){throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat")}if(lb===undefined&&lc===cK){lb=gI}if(lb===undefined&&lc===fc){lb=de}eq.call(this,null,k6,la,k9,ld,k8,lc,lb,k5);this.image={width:k7,height:le};this.magFilter=ld!==undefined?ld:da;this.minFilter=k8!==undefined?k8:da;this.flipY=false;this.generateMipmaps=false}ff.prototype=Object.create(eq.prototype);ff.prototype.constructor=ff;ff.prototype.isDepthTexture=true;function f4(k8){cl.call(this);this.type="WireframeGeometry";var ld=[];var lo,ln,lm,ll,lh;var lb=[0,0],k6={},lq,lj,li;var lt,lk=["a","b","c"];var lp;if(k8&&k8.isGeometry){var k5=k8.faces;for(lo=0,lm=k5.length;lo<lm;lo++){var lg=k5[lo];for(ln=0;ln<3;ln++){lj=lg[lk[ln]];li=lg[lk[(ln+1)%3]];lb[0]=Math.min(lj,li);lb[1]=Math.max(lj,li);lt=lb[0]+","+lb[1];if(k6[lt]===undefined){k6[lt]={index1:lb[0],index2:lb[1]}}}}for(lt in k6){lq=k6[lt];lp=k8.vertices[lq.index1];ld.push(lp.x,lp.y,lp.z);lp=k8.vertices[lq.index2];ld.push(lp.x,lp.y,lp.z)}}else{if(k8&&k8.isBufferGeometry){var ls,la,lr;var lf,k7,le;var lc,k9;lp=new bf();if(k8.index!==null){ls=k8.attributes.position;la=k8.index;lr=k8.groups;if(lr.length===0){lr=[{start:0,count:la.count,materialIndex:0}]}for(ll=0,lh=lr.length;ll<lh;++ll){lf=lr[ll];k7=lf.start;le=lf.count;for(lo=k7,lm=(k7+le);lo<lm;lo+=3){for(ln=0;ln<3;ln++){lj=la.getX(lo+ln);li=la.getX(lo+(ln+1)%3);lb[0]=Math.min(lj,li);lb[1]=Math.max(lj,li);lt=lb[0]+","+lb[1];if(k6[lt]===undefined){k6[lt]={index1:lb[0],index2:lb[1]}}}}}for(lt in k6){lq=k6[lt];lp.fromBufferAttribute(ls,lq.index1);ld.push(lp.x,lp.y,lp.z);lp.fromBufferAttribute(ls,lq.index2);ld.push(lp.x,lp.y,lp.z)}}else{ls=k8.attributes.position;for(lo=0,lm=(ls.count/3);lo<lm;lo++){for(ln=0;ln<3;ln++){lc=3*lo+ln;lp.fromBufferAttribute(ls,lc);ld.push(lp.x,lp.y,lp.z);k9=3*lo+((ln+1)%3);lp.fromBufferAttribute(ls,k9);ld.push(lp.x,lp.y,lp.z)}}}}}this.addAttribute("position",new ei(ld,3))}f4.prototype=Object.create(cl.prototype);f4.prototype.constructor=f4;function kg(k6,k7,k5){fm.call(this);this.type="ParametricGeometry";this.parameters={func:k6,slices:k7,stacks:k5};this.fromBufferGeometry(new ho(k6,k7,k5));this.mergeVertices()}kg.prototype=Object.create(fm.prototype);kg.prototype.constructor=kg;function ho(k8,k7,lm){cl.call(this);this.type="ParametricBufferGeometry";this.parameters={func:k8,slices:k7,stacks:lm};var k9=[];var la=[];var le=[];var lb=[];var lh=0.00001;var lq=new bf();var k6=new bf(),k5=new bf();var lg=new bf(),lf=new bf();var lj,li;if(k8.length<3){a.Logger.log(a.Logger.SEVERE,"THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.")}var lp=k7+1;for(lj=0;lj<=lm;lj++){var lc=lj/lm;for(li=0;li<=k7;li++){var ld=li/k7;k8(ld,lc,k6);la.push(k6.x,k6.y,k6.z);if(ld-lh>=0){k8(ld-lh,lc,k5);lg.subVectors(k6,k5)}else{k8(ld+lh,lc,k5);lg.subVectors(k5,k6)}if(lc-lh>=0){k8(ld,lc-lh,k5);lf.subVectors(k6,k5)}else{k8(ld,lc+lh,k5);lf.subVectors(k5,k6)}lq.crossVectors(lg,lf).normalize();le.push(lq.x,lq.y,lq.z);lb.push(ld,lc)}}for(lj=0;lj<lm;lj++){for(li=0;li<k7;li++){var lo=lj*lp+li;var ln=lj*lp+li+1;var ll=(lj+1)*lp+li+1;var lk=(lj+1)*lp+li;k9.push(lo,ln,lk);k9.push(ln,ll,lk)}}this.setIndex(k9);this.addAttribute("position",new ei(la,3));this.addAttribute("normal",new ei(le,3));this.addAttribute("uv",new ei(lb,2))}ho.prototype=Object.create(cl.prototype);ho.prototype.constructor=ho;function b(k6,k8,k5,k7){fm.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:k6,indices:k8,radius:k5,detail:k7};this.fromBufferGeometry(new N(k6,k8,k5,k7));this.mergeVertices()}b.prototype=Object.create(fm.prototype);b.prototype.constructor=b;function N(lf,lk,le,ld){cl.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:lf,indices:lk,radius:le,detail:ld};le=le||1;ld=ld||0;var lh=[];var lc=[];lb(ld);k7(le);lj();this.addAttribute("position",new ei(lh,3));this.addAttribute("normal",new ei(lh.slice(),3));this.addAttribute("uv",new ei(lc,2));if(ld===0){this.computeVertexNormals()}else{this.normalizeNormals()}function lb(lp){var ln=new bf();var lm=new bf();var lq=new bf();for(var lo=0;lo<lk.length;lo+=3){la(lk[lo+0],ln);la(lk[lo+1],lm);la(lk[lo+2],lq);k8(ln,lm,lq,lp)}}function k8(lv,lu,ls,lq){var lt=Math.pow(2,lq);var lw=[];var lp,lo;for(lp=0;lp<=lt;lp++){lw[lp]=[];var lr=lv.clone().lerp(ls,lp/lt);var lm=lu.clone().lerp(ls,lp/lt);var lx=lt-lp;for(lo=0;lo<=lx;lo++){if(lo===0&&lp===lt){lw[lp][lo]=lr}else{lw[lp][lo]=lr.clone().lerp(lm,lo/lx)}}}for(lp=0;lp<lt;lp++){for(lo=0;lo<2*(lt-lp)-1;lo++){var ln=Math.floor(lo/2);if(lo%2===0){k6(lw[lp][ln+1]);k6(lw[lp+1][ln]);k6(lw[lp][ln])}else{k6(lw[lp][ln+1]);k6(lw[lp+1][ln+1]);k6(lw[lp+1][ln])}}}}function k7(lm){var lo=new bf();for(var ln=0;ln<lh.length;ln+=3){lo.x=lh[ln+0];lo.y=lh[ln+1];lo.z=lh[ln+2];lo.normalize().multiplyScalar(lm);lh[ln+0]=lo.x;lh[ln+1]=lo.y;lh[ln+2]=lo.z}}function lj(){var lp=new bf();for(var lo=0;lo<lh.length;lo+=3){lp.x=lh[lo+0];lp.y=lh[lo+1];lp.z=lh[lo+2];var ln=ll(lp)/2/Math.PI+0.5;var lm=lg(lp)/Math.PI+0.5;lc.push(ln,1-lm)}li();k9()}function k9(){for(var lr=0;lr<lc.length;lr+=6){var lq=lc[lr+0];var lo=lc[lr+2];var ln=lc[lr+4];var lm=Math.max(lq,lo,ln);var lp=Math.min(lq,lo,ln);if(lm>0.9&&lp<0.1){if(lq<0.2){lc[lr+0]+=1}if(lo<0.2){lc[lr+2]+=1}if(ln<0.2){lc[lr+4]+=1}}}}function k6(lm){lh.push(lm.x,lm.y,lm.z)}function la(lm,lo){var ln=lm*3;lo.x=lf[ln+0];lo.y=lf[ln+1];lo.z=lf[ln+2]}function li(){var lv=new bf();var lu=new bf();var lt=new bf();var ln=new bf();var ls=new bg();var lr=new bg();var lq=new bg();for(var lp=0,lo=0;lp<lh.length;lp+=9,lo+=6){lv.set(lh[lp+0],lh[lp+1],lh[lp+2]);lu.set(lh[lp+3],lh[lp+4],lh[lp+5]);lt.set(lh[lp+6],lh[lp+7],lh[lp+8]);ls.set(lc[lo+0],lc[lo+1]);lr.set(lc[lo+2],lc[lo+3]);lq.set(lc[lo+4],lc[lo+5]);ln.copy(lv).add(lu).add(lt).divideScalar(3);var lm=ll(ln);k5(ls,lo+0,lv,lm);k5(lr,lo+2,lu,lm);k5(lq,lo+4,lt,lm)}}function k5(ln,lp,lm,lo){if((lo<0)&&(ln.x===1)){lc[lp]=ln.x-1}if((lm.x===0)&&(lm.z===0)){lc[lp]=lo/2/Math.PI+0.5}}function ll(lm){return Math.atan2(lm.z,-lm.x)}function lg(lm){return Math.atan2(-lm.y,Math.sqrt((lm.x*lm.x)+(lm.z*lm.z)))}}N.prototype=Object.create(cl.prototype);N.prototype.constructor=N;function a7(k5,k6){fm.call(this);this.type="TetrahedronGeometry";this.parameters={radius:k5,detail:k6};this.fromBufferGeometry(new dG(k5,k6));this.mergeVertices()}a7.prototype=Object.create(fm.prototype);a7.prototype.constructor=a7;function dG(k5,k7){var k6=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var k8=[2,1,0,0,3,2,1,3,0,2,3,1];N.call(this,k6,k8,k5,k7);this.type="TetrahedronBufferGeometry";this.parameters={radius:k5,detail:k7}}dG.prototype=Object.create(N.prototype);dG.prototype.constructor=dG;function d2(k5,k6){fm.call(this);this.type="OctahedronGeometry";this.parameters={radius:k5,detail:k6};this.fromBufferGeometry(new r(k5,k6));this.mergeVertices()}d2.prototype=Object.create(fm.prototype);d2.prototype.constructor=d2;function r(k5,k7){var k6=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var k8=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];N.call(this,k6,k8,k5,k7);this.type="OctahedronBufferGeometry";this.parameters={radius:k5,detail:k7}}r.prototype=Object.create(N.prototype);r.prototype.constructor=r;function jL(k5,k6){fm.call(this);this.type="IcosahedronGeometry";this.parameters={radius:k5,detail:k6};this.fromBufferGeometry(new dg(k5,k6));this.mergeVertices()}jL.prototype=Object.create(fm.prototype);jL.prototype.constructor=jL;function dg(k5,k8){var k7=(1+Math.sqrt(5))/2;var k6=[-1,k7,0,1,k7,0,-1,-k7,0,1,-k7,0,0,-1,k7,0,1,k7,0,-1,-k7,0,1,-k7,k7,0,-1,k7,0,1,-k7,0,-1,-k7,0,1];var k9=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];N.call(this,k6,k9,k5,k8);this.type="IcosahedronBufferGeometry";this.parameters={radius:k5,detail:k8}}dg.prototype=Object.create(N.prototype);dg.prototype.constructor=dg;function cX(k5,k6){fm.call(this);this.type="DodecahedronGeometry";this.parameters={radius:k5,detail:k6};this.fromBufferGeometry(new bj(k5,k6));this.mergeVertices()}cX.prototype=Object.create(fm.prototype);cX.prototype.constructor=cX;function bj(k5,k8){var k7=(1+Math.sqrt(5))/2;var k9=1/k7;var k6=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-k9,-k7,0,-k9,k7,0,k9,-k7,0,k9,k7,-k9,-k7,0,-k9,k7,0,k9,-k7,0,k9,k7,0,-k7,0,-k9,k7,0,-k9,-k7,0,k9,k7,0,k9];var la=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];N.call(this,k6,la,k5,k8);this.type="DodecahedronBufferGeometry";this.parameters={radius:k5,detail:k8}}bj.prototype=Object.create(N.prototype);bj.prototype.constructor=bj;function bQ(k9,lb,k6,k8,k7,k5){fm.call(this);this.type="TubeGeometry";this.parameters={path:k9,tubularSegments:lb,radius:k6,radialSegments:k8,closed:k7};if(k5!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.TubeGeometry: taper has been removed.")}var la=new en(k9,lb,k6,k8,k7);this.tangents=la.tangents;this.normals=la.normals;this.binormals=la.binormals;this.fromBufferGeometry(la);this.mergeVertices()}bQ.prototype=Object.create(fm.prototype);bQ.prototype.constructor=bQ;function en(li,ld,k8,k7,k6){cl.call(this);this.type="TubeBufferGeometry";this.parameters={path:li,tubularSegments:ld,radius:k8,radialSegments:k7,closed:k6};ld=ld||64;k8=k8||1;k7=k7||8;k6=k6||false;var lg=li.computeFrenetFrames(ld,k6);this.tangents=lg.tangents;this.normals=lg.normals;this.binormals=lg.binormals;var lm=new bf();var lo=new bf();var lc=new bg();var lb=new bf();var ll,lk;var la=[];var lh=[];var le=[];var k9=[];k5();this.setIndex(k9);this.addAttribute("position",new ei(la,3));this.addAttribute("normal",new ei(lh,3));this.addAttribute("uv",new ei(le,2));function k5(){for(ll=0;ll<ld;ll++){lf(ll)}lf((k6===false)?ld:0);ln();lj()}function lf(lr){lb=li.getPointAt(lr/ld,lb);var lt=lg.normals[lr];var lu=lg.binormals[lr];for(lk=0;lk<=k7;lk++){var lq=lk/k7*Math.PI*2;var lp=Math.sin(lq);var ls=-Math.cos(lq);lo.x=(ls*lt.x+lp*lu.x);lo.y=(ls*lt.y+lp*lu.y);lo.z=(ls*lt.z+lp*lu.z);lo.normalize();lh.push(lo.x,lo.y,lo.z);lm.x=lb.x+k8*lo.x;lm.y=lb.y+k8*lo.y;lm.z=lb.z+k8*lo.z;la.push(lm.x,lm.y,lm.z)}}function lj(){for(lk=1;lk<=ld;lk++){for(ll=1;ll<=k7;ll++){var lq=(k7+1)*(lk-1)+(ll-1);var lp=(k7+1)*lk+(ll-1);var ls=(k7+1)*lk+ll;var lr=(k7+1)*(lk-1)+ll;k9.push(lq,lp,lr);k9.push(lp,ls,lr)}}}function ln(){for(ll=0;ll<=ld;ll++){for(lk=0;lk<=k7;lk++){lc.x=ll/ld;lc.y=lk/k7;le.push(lc.x,lc.y)}}}}en.prototype=Object.create(cl.prototype);en.prototype.constructor=en;en.prototype.toJSON=function(){var k5=cl.prototype.toJSON.call(this);k5.path=this.parameters.path.toJSON();return k5};function bu(k5,k6,lb,k7,la,k9,k8){fm.call(this);this.type="TorusKnotGeometry";this.parameters={radius:k5,tube:k6,tubularSegments:lb,radialSegments:k7,p:la,q:k9};if(k8!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.")}this.fromBufferGeometry(new e0(k5,k6,lb,k7,la,k9));this.mergeVertices()}bu.prototype=Object.create(fm.prototype);bu.prototype.constructor=bu;function e0(lc,lb,lg,k8,ln,lm){cl.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:lc,tube:lb,tubularSegments:lg,radialSegments:k8,p:ln,q:lm};lc=lc||1;lb=lb||0.4;lg=Math.floor(lg)||64;k8=Math.floor(k8)||8;ln=ln||2;lm=lm||3;var ld=[];var le=[];var lk=[];var lh=[];var lp,lo;var lq=new bf();var lw=new bf();var k9=new bf();var k7=new bf();var ll=new bf();var la=new bf();var lf=new bf();for(lp=0;lp<=lg;++lp){var lj=lp/lg*ln*Math.PI*2;lu(lj,ln,lm,lc,k9);lu(lj+0.01,ln,lm,lc,k7);la.subVectors(k7,k9);lf.addVectors(k7,k9);ll.crossVectors(la,lf);lf.crossVectors(ll,la);ll.normalize();lf.normalize();for(lo=0;lo<=k8;++lo){var li=lo/k8*Math.PI*2;var k6=-lb*Math.cos(li);var k5=lb*Math.sin(li);lq.x=k9.x+(k6*lf.x+k5*ll.x);lq.y=k9.y+(k6*lf.y+k5*ll.y);lq.z=k9.z+(k6*lf.z+k5*ll.z);le.push(lq.x,lq.y,lq.z);lw.subVectors(lq,k9).normalize();lk.push(lw.x,lw.y,lw.z);lh.push(lp/lg);lh.push(lo/k8)}}for(lo=1;lo<=lg;lo++){for(lp=1;lp<=k8;lp++){var lv=(k8+1)*(lo-1)+(lp-1);var lt=(k8+1)*lo+(lp-1);var ls=(k8+1)*lo+lp;var lr=(k8+1)*(lo-1)+lp;ld.push(lv,lt,lr);ld.push(lt,ls,lr)}}this.setIndex(ld);this.addAttribute("position",new ei(le,3));this.addAttribute("normal",new ei(lk,3));this.addAttribute("uv",new ei(lh,2));function lu(lE,ly,lx,lD,lB){var lA=Math.cos(lE);var lF=Math.sin(lE);var lz=lx/ly*lE;var lC=Math.cos(lz);lB.x=lD*(2+lC)*0.5*lA;lB.y=lD*(2+lC)*lF*0.5;lB.z=lD*Math.sin(lz)*0.5}}e0.prototype=Object.create(cl.prototype);e0.prototype.constructor=e0;function aK(k5,k7,k8,k9,k6){fm.call(this);this.type="TorusGeometry";this.parameters={radius:k5,tube:k7,radialSegments:k8,tubularSegments:k9,arc:k6};this.fromBufferGeometry(new eG(k5,k7,k8,k9,k6));this.mergeVertices()}aK.prototype=Object.create(fm.prototype);aK.prototype.constructor=aK;function eG(k7,k6,k5,lb,la){cl.call(this);this.type="TorusBufferGeometry";this.parameters={radius:k7,tube:k6,radialSegments:k5,tubularSegments:lb,arc:la};k7=k7||1;k6=k6||0.4;k5=Math.floor(k5)||8;lb=Math.floor(lb)||6;la=la||Math.PI*2;var k8=[];var k9=[];var lf=[];var lc=[];var lm=new bf();var li=new bf();var lo=new bf();var lg,lh;for(lg=0;lg<=k5;lg++){for(lh=0;lh<=lb;lh++){var le=lh/lb*la;var ld=lg/k5*Math.PI*2;li.x=(k7+k6*Math.cos(ld))*Math.cos(le);li.y=(k7+k6*Math.cos(ld))*Math.sin(le);li.z=k6*Math.sin(ld);k9.push(li.x,li.y,li.z);lm.x=k7*Math.cos(le);lm.y=k7*Math.sin(le);lo.subVectors(li,lm).normalize();lf.push(lo.x,lo.y,lo.z);lc.push(lh/lb);lc.push(lg/k5)}}for(lg=1;lg<=k5;lg++){for(lh=1;lh<=lb;lh++){var ln=(lb+1)*lg+lh-1;var ll=(lb+1)*(lg-1)+lh-1;var lk=(lb+1)*(lg-1)+lh;var lj=(lb+1)*lg+lh;k8.push(ln,ll,lj);k8.push(ll,lk,lj)}}this.setIndex(k8);this.addAttribute("position",new ei(k9,3));this.addAttribute("normal",new ei(lf,3));this.addAttribute("uv",new ei(lc,2))}eG.prototype=Object.create(cl.prototype);eG.prototype.constructor=eG;var iQ={triangulate:function(lc,lg,ld){ld=ld||2;var le=lg&&lg.length,la=le?lg[0]*ld:lc.length,lf=aL(lc,0,la,ld,true),k8=[];if(!lf){return k8}var k9,k7,k6,k5,lj,li,lh;if(le){lf=X(lc,lg,lf,ld)}if(lc.length>80*ld){k9=k6=lc[0];k7=k5=lc[1];for(var lb=ld;lb<la;lb+=ld){lj=lc[lb];li=lc[lb+1];if(lj<k9){k9=lj}if(li<k7){k7=li}if(lj>k6){k6=lj}if(li>k5){k5=li}}lh=Math.max(k6-k9,k5-k7);lh=lh!==0?1/lh:0}hz(lf,k8,ld,k9,k7,lh);return k8}};function aL(k9,lb,k5,la,k6){var k7,k8;if(k6===(hr(k9,lb,k5,la)>0)){for(k7=lb;k7<k5;k7+=la){k8=jQ(k7,k9[k7],k9[k7+1],k8)}}else{for(k7=k5-la;k7>=lb;k7-=la){k8=jQ(k7,k9[k7],k9[k7+1],k8)}}if(k8&&g3(k8,k8.next)){db(k8);k8=k8.next}return k8}function fn(k8,k5){if(!k8){return k8}if(!k5){k5=k8}var k7=k8,k6;do{k6=false;if(!k7.steiner&&(g3(k7,k7.next)||kz(k7.prev,k7,k7.next)===0)){db(k7);k7=k5=k7.prev;if(k7===k7.next){break}k6=true}else{k7=k7.next}}while(k6||k7!==k5);return k5}function hz(k6,k8,lb,k9,k5,lc,le){if(!k6){return}if(!le&&lc){jm(k6,k9,k5,lc)}var ld=k6,k7,la;while(k6.prev!==k6.next){k7=k6.prev;la=k6.next;if(lc?S(k6,k9,k5,lc):dM(k6)){k8.push(k7.i/lb);k8.push(k6.i/lb);k8.push(la.i/lb);db(k6);k6=la.next;ld=la.next;continue}k6=la;if(k6===ld){if(!le){hz(fn(k6),k8,lb,k9,k5,lc,1)}else{if(le===1){k6=jb(k6,k8,lb);hz(k6,k8,lb,k9,k5,lc,2)}else{if(le===2){f9(k6,k8,lb,k9,k5,lc)}}}break}}}function dM(k7){var k6=k7.prev,k5=k7,k9=k7.next;if(kz(k6,k5,k9)>=0){return false}var k8=k7.next.next;while(k8!==k7.prev){if(kv(k6.x,k6.y,k5.x,k5.y,k9.x,k9.y,k8.x,k8.y)&&kz(k8.prev,k8,k8.next)>=0){return false}k8=k8.next}return true}function S(la,lb,k9,ld){var lf=la.prev,le=la,lc=la.next;if(kz(lf,le,lc)>=0){return false}var li=lf.x<le.x?(lf.x<lc.x?lf.x:lc.x):(le.x<lc.x?le.x:lc.x),lg=lf.y<le.y?(lf.y<lc.y?lf.y:lc.y):(le.y<lc.y?le.y:lc.y),k8=lf.x>le.x?(lf.x>lc.x?lf.x:lc.x):(le.x>lc.x?le.x:lc.x),k7=lf.y>le.y?(lf.y>lc.y?lf.y:lc.y):(le.y>lc.y?le.y:lc.y);var k6=jf(li,lg,lb,k9,ld),lh=jf(k8,k7,lb,k9,ld);var k5=la.nextZ;while(k5&&k5.z<=lh){if(k5!==la.prev&&k5!==la.next&&kv(lf.x,lf.y,le.x,le.y,lc.x,lc.y,k5.x,k5.y)&&kz(k5.prev,k5,k5.next)>=0){return false}k5=k5.nextZ}k5=la.prevZ;while(k5&&k5.z>=k6){if(k5!==la.prev&&k5!==la.next&&kv(lf.x,lf.y,le.x,le.y,lc.x,lc.y,k5.x,k5.y)&&kz(k5.prev,k5,k5.next)>=0){return false}k5=k5.prevZ}return true}function jb(la,k7,k9){var k8=la;do{var k6=k8.prev,k5=k8.next.next;if(!g3(k6,k5)&&ba(k6,k8,k8.next,k5)&&aV(k6,k5)&&aV(k5,k6)){k7.push(k6.i/k9);k7.push(k8.i/k9);k7.push(k5.i/k9);db(k8);db(k8.next);k8=la=k5}k8=k8.next}while(k8!==la);return k8}function f9(k5,k7,k9,k8,k6,lb){var ld=k5;do{var lc=ld.next.next;while(lc!==ld.prev){if(ld.i!==lc.i&&cU(ld,lc)){var la=v(ld,lc);ld=fn(ld,ld.next);la=fn(la,la.next);hz(ld,k7,k9,k8,k6,lb);hz(la,k7,k9,k8,k6,lb);return}lc=lc.next}ld=ld.next}while(ld!==k5)}function X(k7,le,la,k9){var lb=[],k8,lc,k5,k6,ld;for(k8=0,lc=le.length;k8<lc;k8++){k5=le[k8]*k9;k6=k8<lc-1?le[k8+1]*k9:k7.length;ld=aL(k7,k5,k6,k9,false);if(ld===ld.next){ld.steiner=true}lb.push(im(ld))}lb.sort(fx);for(k8=0;k8<lb.length;k8++){hp(lb[k8],la);la=fn(la,la.next)}return la}function fx(k6,k5){return k6.x-k5.x}function hp(k7,k6){k6=fQ(k7,k6);if(k6){var k5=v(k6,k7);fn(k5,k5.next)}}function fQ(k5,k9){var k6=k9,lb=k5.x,la=k5.y,k8=-Infinity,k7;do{if(la<=k6.y&&la>=k6.next.y&&k6.next.y!==k6.y){var le=k6.x+(la-k6.y)*(k6.next.x-k6.x)/(k6.next.y-k6.y);if(le<=lb&&le>k8){k8=le;if(le===lb){if(la===k6.y){return k6}if(la===k6.next.y){return k6.next}}k7=k6.x<k6.next.x?k6:k6.next}}k6=k6.next}while(k6!==k9);if(!k7){return null}if(lb===k8){return k7.prev}var ld=k7,lh=k7.x,lf=k7.y,lg=Infinity,lc;k6=k7.next;while(k6!==ld){if(lb>=k6.x&&k6.x>=lh&&lb!==k6.x&&kv(la<lf?lb:k8,la,lh,lf,la<lf?k8:lb,la,k6.x,k6.y)){lc=Math.abs(la-k6.y)/(lb-k6.x);if((lc<lg||(lc===lg&&k6.x>k7.x))&&aV(k6,k5)){k7=k6;lg=lc}}k6=k6.next}return k7}function jm(k9,k5,k8,k6){var k7=k9;do{if(k7.z===null){k7.z=jf(k7.x,k7.y,k5,k8,k6)}k7.prevZ=k7.prev;k7.nextZ=k7.next;k7=k7.next}while(k7!==k9);k7.prevZ.nextZ=null;k7.prevZ=null;ez(k7)}function ez(lb){var k8,k7,k6,la,lc,k5,ld,k9,le=1;do{k7=lb;lb=null;lc=null;k5=0;while(k7){k5++;k6=k7;ld=0;for(k8=0;k8<le;k8++){ld++;k6=k6.nextZ;if(!k6){break}}k9=le;while(ld>0||(k9>0&&k6)){if(ld!==0&&(k9===0||!k6||k7.z<=k6.z)){la=k7;k7=k7.nextZ;ld--}else{la=k6;k6=k6.nextZ;k9--}if(lc){lc.nextZ=la}else{lb=la}la.prevZ=lc;lc=la}k7=k6}lc.nextZ=null;le*=2}while(k5>1);return lb}function jf(k6,k9,k5,k8,k7){k6=32767*(k6-k5)*k7;k9=32767*(k9-k8)*k7;k6=(k6|(k6<<8))&16711935;k6=(k6|(k6<<4))&252645135;k6=(k6|(k6<<2))&858993459;k6=(k6|(k6<<1))&1431655765;k9=(k9|(k9<<8))&16711935;k9=(k9|(k9<<4))&252645135;k9=(k9|(k9<<2))&858993459;k9=(k9|(k9<<1))&1431655765;return k6|(k9<<1)}function im(k7){var k6=k7,k5=k7;do{if(k6.x<k5.x){k5=k6}k6=k6.next}while(k6!==k7);return k5}function kv(k9,k8,lb,la,k5,lc,k7,k6){return(k5-k7)*(k8-k6)-(k9-k7)*(lc-k6)>=0&&(k9-k7)*(la-k6)-(lb-k7)*(k8-k6)>=0&&(lb-k7)*(lc-k6)-(k5-k7)*(la-k6)>=0}function cU(k6,k5){return k6.next.i!==k5.i&&k6.prev.i!==k5.i&&!eX(k6,k5)&&aV(k6,k5)&&aV(k5,k6)&&w(k6,k5)}function kz(k7,k6,k5){return(k6.y-k7.y)*(k5.x-k6.x)-(k6.x-k7.x)*(k5.y-k6.y)}function g3(k6,k5){return k6.x===k5.x&&k6.y===k5.y}function ba(k7,k5,k6,k8){if((g3(k7,k5)&&g3(k6,k8))||(g3(k7,k8)&&g3(k6,k5))){return true}return kz(k7,k5,k6)>0!==kz(k7,k5,k8)>0&&kz(k6,k8,k7)>0!==kz(k6,k8,k5)>0}function eX(k6,k5){var k7=k6;do{if(k7.i!==k6.i&&k7.next.i!==k6.i&&k7.i!==k5.i&&k7.next.i!==k5.i&&ba(k7,k7.next,k6,k5)){return true}k7=k7.next}while(k7!==k6);return false}function aV(k6,k5){return kz(k6.prev,k6,k6.next)<0?kz(k6,k5,k6.next)>=0&&kz(k6,k6.prev,k5)>=0:kz(k6,k5,k6.prev)<0||kz(k6,k6.next,k5)<0}function w(k7,k6){var la=k7,k5=false,k9=(k7.x+k6.x)/2,k8=(k7.y+k6.y)/2;do{if(((la.y>k8)!==(la.next.y>k8))&&la.next.y!==la.y&&(k9<(la.next.x-la.x)*(k8-la.y)/(la.next.y-la.y)+la.x)){k5=!k5}la=la.next}while(la!==k7);return k5}function v(k7,k6){var k5=new go(k7.i,k7.x,k7.y),k8=new go(k6.i,k6.x,k6.y),la=k7.next,k9=k6.prev;k7.next=k6;k6.prev=k7;k5.next=la;la.prev=k5;k8.next=k5;k5.prev=k8;k9.next=k8;k8.prev=k9;return k8}function jQ(k6,k5,k9,k7){var k8=new go(k6,k5,k9);if(!k7){k8.prev=k8;k8.next=k8}else{k8.next=k7.next;k8.prev=k7;k7.next.prev=k8;k7.next=k8}return k8}function db(k5){k5.next.prev=k5.prev;k5.prev.next=k5.next;if(k5.prevZ){k5.prevZ.nextZ=k5.nextZ}if(k5.nextZ){k5.nextZ.prevZ=k5.prevZ}}function go(k6,k5,k7){this.i=k6;this.x=k5;this.y=k7;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}function hr(k9,lb,k5,la){var k8=0;for(var k7=lb,k6=k5-la;k7<k5;k7+=la){k8+=(k9[k6]-k9[k7])*(k9[k7+1]+k9[k6+1]);k6=k7}return k8}var a9={area:function(k6){var k9=k6.length;var k5=0;for(var k8=k9-1,k7=0;k7<k9;k8=k7++){k5+=k6[k8].x*k6[k7].y-k6[k7].x*k6[k8].y}return k5*0.5},isClockWise:function(k5){return a9.area(k5)<0},triangulateShape:function(lb,k6){var k9=[];var k7=[];var k5=[];d(lb);hG(k9,lb);var k8=lb.length;k6.forEach(d);for(var la=0;la<k6.length;la++){k7.push(k8);k8+=k6[la].length;hG(k9,k6[la])}var lc=iQ.triangulate(k9,k7);for(var la=0;la<lc.length;la+=3){k5.push(lc.slice(la,la+3))}return k5}};function d(k6){var k5=k6.length;if(k5>2&&k6[k5-1].equals(k6[0])){k6.pop()}}function hG(k5,k7){for(var k6=0;k6<k7.length;k6++){k5.push(k7[k6].x);k5.push(k7[k6].y)}}function aD(k5,k6){fm.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:k5,options:k6};this.fromBufferGeometry(new g8(k5,k6));this.mergeVertices()}aD.prototype=Object.create(fm.prototype);aD.prototype.constructor=aD;aD.prototype.toJSON=function(){var k7=fm.prototype.toJSON.call(this);var k5=this.parameters.shapes;var k6=this.parameters.options;return bs(k5,k6,k7)};function g8(k5,ld){cl.call(this);this.type="ExtrudeBufferGeometry";this.parameters={shapes:k5,options:ld};k5=Array.isArray(k5)?k5:[k5];var lc=this;var k9=[];var lb=[];for(var k7=0,k6=k5.length;k7<k6;k7++){var k8=k5[k7];la(k8)}this.addAttribute("position",new ei(k9,3));this.addAttribute("uv",new ei(lb,2));this.computeVertexNormals();function la(lx){var lE=[];var lB=ld.curveSegments!==undefined?ld.curveSegments:12;var lI=ld.steps!==undefined?ld.steps:1;var lk=ld.depth!==undefined?ld.depth:100;var le=ld.bevelEnabled!==undefined?ld.bevelEnabled:true;var lh=ld.bevelThickness!==undefined?ld.bevelThickness:6;var lC=ld.bevelSize!==undefined?ld.bevelSize:lh-2;var lu=ld.bevelSegments!==undefined?ld.bevelSegments:3;var lq=ld.extrudePath;var lw=ld.UVGenerator!==undefined?ld.UVGenerator:c6;if(ld.amount!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.ExtrudeBufferGeometry: amount has been renamed to depth.");lk=ld.amount}var lH,lr=false;var lt,lJ,lN,l1;if(lq){lH=lq.getSpacedPoints(lI);lr=true;le=false;lt=lq.computeFrenetFrames(lI,false);lJ=new bf();lN=new bf();l1=new bf()}if(!le){lu=0;lh=0;lC=0}var l4,lZ,l0;var lv=lx.extractPoints(lB);var lf=lv.shape;var lz=lv.holes;var lQ=!a9.isClockWise(lf);if(lQ){lf=lf.reverse();for(lZ=0,l0=lz.length;lZ<l0;lZ++){l4=lz[lZ];if(a9.isClockWise(l4)){lz[lZ]=l4.reverse()}}}var ln=a9.triangulateShape(lf,lz);var lS=lf;for(lZ=0,l0=lz.length;lZ<l0;lZ++){l4=lz[lZ];lf=lf.concat(l4)}function lD(l7,l6,l5){if(!l6){a.Logger.log(a.Logger.SEVERE,"THREE.ExtrudeGeometry: vec does not exist")}return l6.clone().multiplyScalar(l5).add(l7)}var l3,lR,lO,lK,ls,lT=lf.length,lm,ll=ln.length;function ly(l8,mg,mh){var ml,mk,mm;var me=l8.x-mg.x,md=l8.y-mg.y;var mo=mh.x-l8.x,mn=mh.y-l8.y;var mc=(me*me+md*md);var mf=(me*mn-md*mo);if(Math.abs(mf)>Number.EPSILON){var mi=Math.sqrt(mc);var l5=Math.sqrt(mo*mo+mn*mn);var mb=(mg.x-md/mi);var ma=(mg.y+me/mi);var l7=(mh.x-mn/l5);var l6=(mh.y+mo/l5);var mp=((l7-mb)*mn-(l6-ma)*mo)/(me*mn-md*mo);ml=(mb+me*mp-l8.x);mk=(ma+md*mp-l8.y);var mj=(ml*ml+mk*mk);if(mj<=2){return new bg(ml,mk)}else{mm=Math.sqrt(mj/2)}}else{var l9=false;if(me>Number.EPSILON){if(mo>Number.EPSILON){l9=true}}else{if(me<-Number.EPSILON){if(mo<-Number.EPSILON){l9=true}}else{if(Math.sign(md)===Math.sign(mn)){l9=true}}}if(l9){ml=-md;mk=me;mm=Math.sqrt(mc)}else{ml=me;mk=md;mm=Math.sqrt(mc/2)}}return new bg(ml/mm,mk/mm)}var lW=[];for(var lY=0,lG=lS.length,lV=lG-1,lU=lY+1;lY<lG;lY++,lV++,lU++){if(lV===lG){lV=0}if(lU===lG){lU=0}lW[lY]=ly(lS[lY],lS[lV],lS[lU])}var lF=[],lM,lg=lW.concat();for(lZ=0,l0=lz.length;lZ<l0;lZ++){l4=lz[lZ];lM=[];for(lY=0,lG=l4.length,lV=lG-1,lU=lY+1;lY<lG;lY++,lV++,lU++){if(lV===lG){lV=0}if(lU===lG){lU=0}lM[lY]=ly(l4[lY],l4[lV],l4[lU])}lF.push(lM);lg=lg.concat(lM)}for(l3=0;l3<lu;l3++){lO=l3/lu;lK=lh*Math.cos(lO*Math.PI/2);lR=lC*Math.sin(lO*Math.PI/2);for(lY=0,lG=lS.length;lY<lG;lY++){ls=lD(lS[lY],lW[lY],lR);lL(ls.x,ls.y,-lK)}for(lZ=0,l0=lz.length;lZ<l0;lZ++){l4=lz[lZ];lM=lF[lZ];for(lY=0,lG=l4.length;lY<lG;lY++){ls=lD(l4[lY],lM[lY],lR);lL(ls.x,ls.y,-lK)}}}lR=lC;for(lY=0;lY<lT;lY++){ls=le?lD(lf[lY],lg[lY],lR):lf[lY];if(!lr){lL(ls.x,ls.y,0)}else{lN.copy(lt.normals[0]).multiplyScalar(ls.x);lJ.copy(lt.binormals[0]).multiplyScalar(ls.y);l1.copy(lH[0]).add(lN).add(lJ);lL(l1.x,l1.y,l1.z)}}var lP;for(lP=1;lP<=lI;lP++){for(lY=0;lY<lT;lY++){ls=le?lD(lf[lY],lg[lY],lR):lf[lY];if(!lr){lL(ls.x,ls.y,lk/lI*lP)}else{lN.copy(lt.normals[lP]).multiplyScalar(ls.x);lJ.copy(lt.binormals[lP]).multiplyScalar(ls.y);l1.copy(lH[lP]).add(lN).add(lJ);lL(l1.x,l1.y,l1.z)}}}for(l3=lu-1;l3>=0;l3--){lO=l3/lu;lK=lh*Math.cos(lO*Math.PI/2);lR=lC*Math.sin(lO*Math.PI/2);for(lY=0,lG=lS.length;lY<lG;lY++){ls=lD(lS[lY],lW[lY],lR);lL(ls.x,ls.y,lk+lK)}for(lZ=0,l0=lz.length;lZ<l0;lZ++){l4=lz[lZ];lM=lF[lZ];for(lY=0,lG=l4.length;lY<lG;lY++){ls=lD(l4[lY],lM[lY],lR);if(!lr){lL(ls.x,ls.y,lk+lK)}else{lL(ls.x,ls.y+lH[lI-1].y,lH[lI-1].x+lK)}}}}lA();l2();function lA(){var l7=k9.length/3;if(le){var l5=0;var l6=lT*l5;for(lY=0;lY<ll;lY++){lm=ln[lY];lj(lm[2]+l6,lm[1]+l6,lm[0]+l6)}l5=lI+lu*2;l6=lT*l5;for(lY=0;lY<ll;lY++){lm=ln[lY];lj(lm[0]+l6,lm[1]+l6,lm[2]+l6)}}else{for(lY=0;lY<ll;lY++){lm=ln[lY];lj(lm[2],lm[1],lm[0])}for(lY=0;lY<ll;lY++){lm=ln[lY];lj(lm[0]+lT*lI,lm[1]+lT*lI,lm[2]+lT*lI)}}lc.addGroup(l7,k9.length/3-l7,0)}function l2(){var l6=k9.length/3;var l5=0;lX(lS,l5);l5+=lS.length;for(lZ=0,l0=lz.length;lZ<l0;lZ++){l4=lz[lZ];lX(l4,l5);l5+=l4.length}lc.addGroup(l6,k9.length/3-l6,1)}function lX(mb,l5){var l9,l8;lY=mb.length;while(--lY>=0){l9=lY;l8=lY-1;if(l8<0){l8=mb.length-1}var mg=0,l6=lI+lu*2;for(mg=0;mg<l6;mg++){var ma=lT*mg;var l7=lT*(mg+1);var mf=l5+l9+ma,me=l5+l8+ma,md=l5+l8+l7,mc=l5+l9+l7;li(mf,me,md,mc)}}}function lL(l5,l7,l6){lE.push(l5);lE.push(l7);lE.push(l6)}function lj(l7,l6,l9){lp(l7);lp(l6);lp(l9);var l5=k9.length/3;var l8=lw.generateTopUV(lc,k9,l5-3,l5-2,l5-1);lo(l8[0]);lo(l8[1]);lo(l8[2])}function li(l7,l6,ma,l9){lp(l7);lp(l6);lp(l9);lp(l6);lp(ma);lp(l9);var l5=k9.length/3;var l8=lw.generateSideWallUV(lc,k9,l5-6,l5-3,l5-2,l5-1);lo(l8[0]);lo(l8[1]);lo(l8[3]);lo(l8[1]);lo(l8[2]);lo(l8[3])}function lp(l5){k9.push(lE[l5*3+0]);k9.push(lE[l5*3+1]);k9.push(lE[l5*3+2])}function lo(l5){lb.push(l5.x);lb.push(l5.y)}}}g8.prototype=Object.create(cl.prototype);g8.prototype.constructor=g8;g8.prototype.toJSON=function(){var k7=cl.prototype.toJSON.call(this);var k5=this.parameters.shapes;var k6=this.parameters.options;return bs(k5,k6,k7)};var c6={generateTopUV:function(k9,k8,le,ld,lc){var lb=k8[le*3];var la=k8[le*3+1];var k5=k8[ld*3];var lf=k8[ld*3+1];var k7=k8[lc*3];var k6=k8[lc*3+1];return[new bg(lb,la),new bg(k5,lf),new bg(k7,k6)]},generateSideWallUV:function(k8,k9,lj,li,lh,lg){var lc=k9[lj*3];var lb=k9[lj*3+1];var la=k9[lj*3+2];var lm=k9[li*3];var ll=k9[li*3+1];var lk=k9[li*3+2];var lf=k9[lh*3];var le=k9[lh*3+1];var ld=k9[lh*3+2];var k7=k9[lg*3];var k6=k9[lg*3+1];var k5=k9[lg*3+2];if(Math.abs(lb-ll)<0.01){return[new bg(lc,1-la),new bg(lm,1-lk),new bg(lf,1-ld),new bg(k7,1-k5)]}else{return[new bg(lb,1-la),new bg(ll,1-lk),new bg(le,1-ld),new bg(k6,1-k5)]}}};function bs(k6,k8,la){la.shapes=[];if(Array.isArray(k6)){for(var k9=0,k5=k6.length;k9<k5;k9++){var k7=k6[k9];la.shapes.push(k7.uuid)}}else{la.shapes.push(k6.uuid)}if(k8.extrudePath!==undefined){la.options.extrudePath=k8.extrudePath.toJSON()}return la}function kB(k6,k5){fm.call(this);this.type="TextGeometry";this.parameters={text:k6,parameters:k5};this.fromBufferGeometry(new n(k6,k5));this.mergeVertices()}kB.prototype=Object.create(fm.prototype);kB.prototype.constructor=kB;function n(k8,k7){k7=k7||{};var k6=k7.font;if(!(k6&&k6.isFont)){a.Logger.log(a.Logger.SEVERE,"THREE.TextGeometry: font parameter is not an instance of THREE.Font.");return new fm()}var k5=k6.generateShapes(k8,k7.size);k7.depth=k7.height!==undefined?k7.height:50;if(k7.bevelThickness===undefined){k7.bevelThickness=10}if(k7.bevelSize===undefined){k7.bevelSize=8}if(k7.bevelEnabled===undefined){k7.bevelEnabled=false}g8.call(this,k5,k7);this.type="TextBufferGeometry"}n.prototype=Object.create(g8.prototype);n.prototype.constructor=n;function d5(k6,lb,k8,k5,la,k7,k9){fm.call(this);this.type="SphereGeometry";this.parameters={radius:k6,widthSegments:lb,heightSegments:k8,phiStart:k5,phiLength:la,thetaStart:k7,thetaLength:k9};this.fromBufferGeometry(new ao(k6,lb,k8,k5,la,k7,k9));this.mergeVertices()}d5.prototype=Object.create(fm.prototype);d5.prototype.constructor=d5;function ao(k9,k6,lh,lj,ln,la,lm){cl.call(this);this.type="SphereBufferGeometry";this.parameters={radius:k9,widthSegments:k6,heightSegments:lh,phiStart:lj,phiLength:ln,thetaStart:la,thetaLength:lm};k9=k9||1;k6=Math.max(3,Math.floor(k6)||8);lh=Math.max(2,Math.floor(lh)||6);lj=lj!==undefined?lj:0;ln=ln!==undefined?ln:Math.PI*2;la=la!==undefined?la:0;lm=lm!==undefined?lm:Math.PI;var lk=la+lm;var k8,k7;var ld=0;var k5=[];var lo=new bf();var lt=new bf();var lb=[];var lc=[];var ll=[];var le=[];for(k7=0;k7<=lh;k7++){var li=[];var lf=k7/lh;for(k8=0;k8<=k6;k8++){var lg=k8/k6;lo.x=-k9*Math.cos(lj+lg*ln)*Math.sin(la+lf*lm);lo.y=k9*Math.cos(la+lf*lm);lo.z=k9*Math.sin(lj+lg*ln)*Math.sin(la+lf*lm);lc.push(lo.x,lo.y,lo.z);lt.set(lo.x,lo.y,lo.z).normalize();ll.push(lt.x,lt.y,lt.z);le.push(lg,1-lf);li.push(ld++)}k5.push(li)}for(k7=0;k7<lh;k7++){for(k8=0;k8<k6;k8++){var ls=k5[k7][k8+1];var lr=k5[k7][k8];var lq=k5[k7+1][k8];var lp=k5[k7+1][k8+1];if(k7!==0||la>0){lb.push(ls,lr,lp)}if(k7!==lh-1||lk<Math.PI){lb.push(lr,lq,lp)}}}this.setIndex(lb);this.addAttribute("position",new ei(lc,3));this.addAttribute("normal",new ei(ll,3));this.addAttribute("uv",new ei(le,2))}ao.prototype=Object.create(cl.prototype);ao.prototype.constructor=ao;function ec(k9,k8,k7,k6,k5,la){fm.call(this);this.type="RingGeometry";this.parameters={innerRadius:k9,outerRadius:k8,thetaSegments:k7,phiSegments:k6,thetaStart:k5,thetaLength:la};this.fromBufferGeometry(new iq(k9,k8,k7,k6,k5,la));this.mergeVertices()}ec.prototype=Object.create(fm.prototype);ec.prototype.constructor=ec;function iq(ld,lh,k7,lj,k8,lg){cl.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:ld,outerRadius:lh,thetaSegments:k7,phiSegments:lj,thetaStart:k8,thetaLength:lg};ld=ld||0.5;lh=lh||1;k8=k8!==undefined?k8:0;lg=lg!==undefined?lg:Math.PI*2;k7=k7!==undefined?Math.max(3,k7):8;lj=lj!==undefined?Math.max(1,lj):1;var k9=[];var la=[];var lf=[];var le=[];var k5;var k6=ld;var lb=((lh-ld)/lj);var ll=new bf();var lc=new bg();var li,lk;for(li=0;li<=lj;li++){for(lk=0;lk<=k7;lk++){k5=k8+lk/k7*lg;ll.x=k6*Math.cos(k5);ll.y=k6*Math.sin(k5);la.push(ll.x,ll.y,ll.z);lf.push(0,0,1);lc.x=(ll.x/lh+1)/2;lc.y=(ll.y/lh+1)/2;le.push(lc.x,lc.y)}k6+=lb}for(li=0;li<lj;li++){var lq=li*(k7+1);for(lk=0;lk<k7;lk++){k5=lk+lq;var lp=k5;var lo=k5+k7+1;var ln=k5+k7+2;var lm=k5+1;k9.push(lp,lo,lm);k9.push(lo,ln,lm)}}this.setIndex(k9);this.addAttribute("position",new ei(la,3));this.addAttribute("normal",new ei(lf,3));this.addAttribute("uv",new ei(le,2))}iq.prototype=Object.create(cl.prototype);iq.prototype.constructor=iq;function eE(k7,k6,k5,k8){fm.call(this);this.type="LatheGeometry";this.parameters={points:k7,segments:k6,phiStart:k5,phiLength:k8};this.fromBufferGeometry(new cj(k7,k6,k5,k8));this.mergeVertices()}eE.prototype=Object.create(fm.prototype);eE.prototype.constructor=eE;function cj(ll,lj,lf,li){cl.call(this);this.type="LatheBufferGeometry";this.parameters={points:ll,segments:lj,phiStart:lf,phiLength:li};lj=Math.floor(lj)||12;lf=lf||0;li=li||Math.PI*2;li=dY.clamp(li,0,Math.PI*2);var k9=[];var la=[];var le=[];var k8;var lo=1/lj;var ln=new bf();var lb=new bg();var lm,lk;for(lm=0;lm<=lj;lm++){var k7=lf+lm*lo*li;var k5=Math.sin(k7);var k6=Math.cos(k7);for(lk=0;lk<=(ll.length-1);lk++){ln.x=ll[lk].x*k5;ln.y=ll[lk].y;ln.z=ll[lk].x*k6;la.push(ln.x,ln.y,ln.z);lb.x=lm/lj;lb.y=lk/(ll.length-1);le.push(lb.x,lb.y)}}for(lm=0;lm<lj;lm++){for(lk=0;lk<(ll.length-1);lk++){k8=lk+lm*ll.length;var ls=k8;var lr=k8+ll.length;var lq=k8+ll.length+1;var lp=k8+1;k9.push(ls,lr,lp);k9.push(lr,lq,lp)}}this.setIndex(k9);this.addAttribute("position",new ei(la,3));this.addAttribute("uv",new ei(le,2));this.computeVertexNormals();if(li===Math.PI*2){var lg=this.attributes.normal.array;var ld=new bf();var lc=new bf();var lh=new bf();k8=lj*ll.length*3;for(lm=0,lk=0;lm<ll.length;lm++,lk+=3){ld.x=lg[lk+0];ld.y=lg[lk+1];ld.z=lg[lk+2];lc.x=lg[k8+lk+0];lc.y=lg[k8+lk+1];lc.z=lg[k8+lk+2];lh.addVectors(ld,lc).normalize();lg[lk+0]=lg[k8+lk+0]=lh.x;lg[lk+1]=lg[k8+lk+1]=lh.y;lg[lk+2]=lg[k8+lk+2]=lh.z}}}cj.prototype=Object.create(cl.prototype);cj.prototype.constructor=cj;function kX(k5,k6){fm.call(this);this.type="ShapeGeometry";if(typeof k6==="object"){a.Logger.log(a.Logger.WARNING,"THREE.ShapeGeometry: Options parameter has been removed.");k6=k6.curveSegments}this.parameters={shapes:k5,curveSegments:k6};this.fromBufferGeometry(new j9(k5,k6));this.mergeVertices()}kX.prototype=Object.create(fm.prototype);kX.prototype.constructor=kX;kX.prototype.toJSON=function(){var k6=fm.prototype.toJSON.call(this);var k5=this.parameters.shapes;return jA(k5,k6)};function j9(k5,lc){cl.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:k5,curveSegments:lc};lc=lc||12;var le=[];var k9=[];var la=[];var k6=[];var k8=0;var lb=0;if(Array.isArray(k5)===false){ld(k5)}else{for(var k7=0;k7<k5.length;k7++){ld(k5[k7]);this.addGroup(k8,lb,k7);k8+=lb;lb=0}}this.setIndex(le);this.addAttribute("position",new ei(k9,3));this.addAttribute("normal",new ei(la,3));this.addAttribute("uv",new ei(k6,2));function ld(lk){var lh,lg,lp;var li=k9.length/3;var ls=lk.extractPoints(lc);var ll=ls.shape;var lq=ls.holes;if(a9.isClockWise(ll)===false){ll=ll.reverse()}for(lh=0,lg=lq.length;lh<lg;lh++){lp=lq[lh];if(a9.isClockWise(lp)===true){lq[lh]=lp.reverse()}}var lf=a9.triangulateShape(ll,lq);for(lh=0,lg=lq.length;lh<lg;lh++){lp=lq[lh];ll=ll.concat(lp)}for(lh=0,lg=ll.length;lh<lg;lh++){var lj=ll[lh];k9.push(lj.x,lj.y,0);la.push(0,0,1);k6.push(lj.x,lj.y)}for(lh=0,lg=lf.length;lh<lg;lh++){var lm=lf[lh];var lr=lm[0]+li;var lo=lm[1]+li;var ln=lm[2]+li;le.push(lr,lo,ln);lb+=3}}}j9.prototype=Object.create(cl.prototype);j9.prototype.constructor=j9;j9.prototype.toJSON=function(){var k6=cl.prototype.toJSON.call(this);var k5=this.parameters.shapes;return jA(k5,k6)};function jA(k6,k9){k9.shapes=[];if(Array.isArray(k6)){for(var k8=0,k5=k6.length;k8<k5;k8++){var k7=k6[k8];k9.shapes.push(k7.uuid)}}else{k9.shapes.push(k6.uuid)}return k9}function br(k8,le){cl.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:le};le=(le!==undefined)?le:1;var la=[];var lm=Math.cos(dY.DEG2RAD*le);var k9=[0,0],k6={},lf,ld;var ln,lg=["a","b","c"];var lc;if(k8.isBufferGeometry){lc=new fm();lc.fromBufferGeometry(k8)}else{lc=k8.clone()}lc.mergeVertices();lc.computeFaceNormals();var k7=lc.vertices;var k5=lc.faces;for(var lj=0,lh=k5.length;lj<lh;lj++){var lb=k5[lj];for(var li=0;li<3;li++){lf=lb[lg[li]];ld=lb[lg[(li+1)%3]];k9[0]=Math.min(lf,ld);k9[1]=Math.max(lf,ld);ln=k9[0]+","+k9[1];if(k6[ln]===undefined){k6[ln]={index1:k9[0],index2:k9[1],face1:lj,face2:undefined}}else{k6[ln].face2=lj}}}for(ln in k6){var ll=k6[ln];if(ll.face2===undefined||k5[ll.face1].normal.dot(k5[ll.face2].normal)<=lm){var lk=k7[ll.index1];la.push(lk.x,lk.y,lk.z);lk=k7[ll.index2];la.push(lk.x,lk.y,lk.z)}}this.addAttribute("position",new ei(la,3))}br.prototype=Object.create(cl.prototype);br.prototype.constructor=br;function jX(la,k8,k5,k7,k9,lc,k6,lb){fm.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:la,radiusBottom:k8,height:k5,radialSegments:k7,heightSegments:k9,openEnded:lc,thetaStart:k6,thetaLength:lb};this.fromBufferGeometry(new iH(la,k8,k5,k7,k9,lc,k6,lb));this.mergeVertices()}jX.prototype=Object.create(fm.prototype);jX.prototype.constructor=jX;function iH(ld,ln,lg,k8,lf,ll,k9,lj){cl.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:ld,radiusBottom:ln,height:lg,radialSegments:k8,heightSegments:lf,openEnded:ll,thetaStart:k9,thetaLength:lj};var k5=this;ld=ld!==undefined?ld:1;ln=ln!==undefined?ln:1;lg=lg||1;k8=Math.floor(k8)||8;lf=Math.floor(lf)||1;ll=ll!==undefined?ll:false;k9=k9!==undefined?k9:0;lj=lj!==undefined?lj:Math.PI*2;var la=[];var lb=[];var lh=[];var le=[];var lc=0;var k7=[];var li=lg/2;var k6=0;lm();if(ll===false){if(ld>0){lk(true)}if(ln>0){lk(false)}}this.setIndex(la);this.addAttribute("position",new ei(lb,3));this.addAttribute("normal",new ei(lh,3));this.addAttribute("uv",new ei(le,2));function lm(){var lB,lz;var lu=new bf();var lq=new bf();var lC=0;var lv=(ln-ld)/lg;for(lz=0;lz<=lf;lz++){var ls=[];var lD=lz/lf;var lr=lD*(ln-ld)+ld;for(lB=0;lB<=k8;lB++){var lE=lB/k8;var lp=lE*lj+k9;var lo=Math.sin(lp);var lt=Math.cos(lp);lq.x=lr*lo;lq.y=-lD*lg+li;lq.z=lr*lt;lb.push(lq.x,lq.y,lq.z);lu.set(lo,lv,lt).normalize();lh.push(lu.x,lu.y,lu.z);le.push(lE,1-lD);ls.push(lc++)}k7.push(ls)}for(lB=0;lB<k8;lB++){for(lz=0;lz<lf;lz++){var lA=k7[lz][lB];var ly=k7[lz+1][lB];var lx=k7[lz+1][lB+1];var lw=k7[lz][lB+1];la.push(lA,ly,lw);la.push(ly,lx,lw);lC+=6}}k5.addGroup(k6,lC,0);k6+=lC}function lk(lz){var lA,ls,lv;var lq=new bg();var lu=new bf();var lB=0;var lw=(lz===true)?ld:ln;var lr=(lz===true)?1:-1;ls=lc;for(lA=1;lA<=k8;lA++){lb.push(0,li*lr,0);lh.push(0,lr,0);le.push(0.5,0.5);lc++}lv=lc;for(lA=0;lA<=k8;lA++){var lC=lA/k8;var lp=lC*lj+k9;var lx=Math.cos(lp);var lo=Math.sin(lp);lu.x=lw*lo;lu.y=li*lr;lu.z=lw*lx;lb.push(lu.x,lu.y,lu.z);lh.push(0,lr,0);lq.x=(lx*0.5)+0.5;lq.y=(lo*0.5*lr)+0.5;le.push(lq.x,lq.y);lc++}for(lA=0;lA<k8;lA++){var ly=ls+lA;var lt=lv+lA;if(lz===true){la.push(lt,lt+1,ly)}else{la.push(lt+1,lt,ly)}lB+=3}k5.addGroup(k6,lB,lz===true?1:2);k6+=lB}}iH.prototype=Object.create(cl.prototype);iH.prototype.constructor=iH;function kh(k6,k5,k8,k9,lb,k7,la){jX.call(this,0,k6,k5,k8,k9,lb,k7,la);this.type="ConeGeometry";this.parameters={radius:k6,height:k5,radialSegments:k8,heightSegments:k9,openEnded:lb,thetaStart:k7,thetaLength:la}}kh.prototype=Object.create(jX.prototype);kh.prototype.constructor=kh;function V(k6,k5,k8,k9,lb,k7,la){iH.call(this,0,k6,k5,k8,k9,lb,k7,la);this.type="ConeBufferGeometry";this.parameters={radius:k6,height:k5,radialSegments:k8,heightSegments:k9,openEnded:lb,thetaStart:k7,thetaLength:la}}V.prototype=Object.create(iH.prototype);V.prototype.constructor=V;function dZ(k5,k6,k7,k8){fm.call(this);this.type="CircleGeometry";this.parameters={radius:k5,segments:k6,thetaStart:k7,thetaLength:k8};this.fromBufferGeometry(new d7(k5,k6,k7,k8));this.mergeVertices()}dZ.prototype=Object.create(fm.prototype);dZ.prototype.constructor=dZ;function d7(ld,la,k7,k5){cl.call(this);this.type="CircleBufferGeometry";this.parameters={radius:ld,segments:la,thetaStart:k7,thetaLength:k5};ld=ld||1;la=la!==undefined?Math.max(3,la):8;k7=k7!==undefined?k7:0;k5=k5!==undefined?k5:Math.PI*2;var lg=[];var le=[];var lf=[];var k8=[];var k9,lh;var lc=new bf();var k6=new bg();le.push(0,0,0);lf.push(0,0,1);k8.push(0.5,0.5);for(lh=0,k9=3;lh<=la;lh++,k9+=3){var lb=k7+lh/la*k5;lc.x=ld*Math.cos(lb);lc.y=ld*Math.sin(lb);le.push(lc.x,lc.y,lc.z);lf.push(0,0,1);k6.x=(le[k9]/ld+1)/2;k6.y=(le[k9+1]/ld+1)/2;k8.push(k6.x,k6.y)}for(k9=1;k9<=la;k9++){lg.push(k9,k9+1,0)}this.setIndex(lg);this.addAttribute("position",new ei(le,3));this.addAttribute("normal",new ei(lf,3));this.addAttribute("uv",new ei(k8,2))}d7.prototype=Object.create(cl.prototype);d7.prototype.constructor=d7;var ds=Object.freeze({WireframeGeometry:f4,ParametricGeometry:kg,ParametricBufferGeometry:ho,TetrahedronGeometry:a7,TetrahedronBufferGeometry:dG,OctahedronGeometry:d2,OctahedronBufferGeometry:r,IcosahedronGeometry:jL,IcosahedronBufferGeometry:dg,DodecahedronGeometry:cX,DodecahedronBufferGeometry:bj,PolyhedronGeometry:b,PolyhedronBufferGeometry:N,TubeGeometry:bQ,TubeBufferGeometry:en,TorusKnotGeometry:bu,TorusKnotBufferGeometry:e0,TorusGeometry:aK,TorusBufferGeometry:eG,TextGeometry:kB,TextBufferGeometry:n,SphereGeometry:d5,SphereBufferGeometry:ao,RingGeometry:ec,RingBufferGeometry:iq,PlaneGeometry:eZ,PlaneBufferGeometry:c0,LatheGeometry:eE,LatheBufferGeometry:cj,ShapeGeometry:kX,ShapeBufferGeometry:j9,ExtrudeGeometry:aD,ExtrudeBufferGeometry:g8,EdgesGeometry:br,ConeGeometry:kh,ConeBufferGeometry:V,CylinderGeometry:jX,CylinderBufferGeometry:iH,CircleGeometry:dZ,CircleBufferGeometry:d7,BoxGeometry:f7,BoxBufferGeometry:jg});function cm(k5){jo.call(this);this.type="ShadowMaterial";this.color=new id(0);this.transparent=true;this.setValues(k5)}cm.prototype=Object.create(jo.prototype);cm.prototype.constructor=cm;cm.prototype.isShadowMaterial=true;cm.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.color.copy(k5.color);return this};function b5(k5){jW.call(this,k5);this.type="RawShaderMaterial"}b5.prototype=Object.create(jW.prototype);b5.prototype.constructor=b5;b5.prototype.isRawShaderMaterial=true;function fS(k5){jo.call(this);this.defines={"STANDARD":""};this.type="MeshStandardMaterial";this.color=new id(16777215);this.roughness=0.5;this.metalness=0.5;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new id(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=iB;this.normalScale=new bg(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.roughnessMap=null;this.metalnessMap=null;this.alphaMap=null;this.envMap=null;this.envMapIntensity=1;this.refractionRatio=0.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(k5)}fS.prototype=Object.create(jo.prototype);fS.prototype.constructor=fS;fS.prototype.isMeshStandardMaterial=true;fS.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.defines={"STANDARD":""};this.color.copy(k5.color);this.roughness=k5.roughness;this.metalness=k5.metalness;this.map=k5.map;this.lightMap=k5.lightMap;this.lightMapIntensity=k5.lightMapIntensity;this.aoMap=k5.aoMap;this.aoMapIntensity=k5.aoMapIntensity;this.emissive.copy(k5.emissive);this.emissiveMap=k5.emissiveMap;this.emissiveIntensity=k5.emissiveIntensity;this.bumpMap=k5.bumpMap;this.bumpScale=k5.bumpScale;this.normalMap=k5.normalMap;this.normalMapType=k5.normalMapType;this.normalScale.copy(k5.normalScale);this.displacementMap=k5.displacementMap;this.displacementScale=k5.displacementScale;this.displacementBias=k5.displacementBias;this.roughnessMap=k5.roughnessMap;this.metalnessMap=k5.metalnessMap;this.alphaMap=k5.alphaMap;this.envMap=k5.envMap;this.envMapIntensity=k5.envMapIntensity;this.refractionRatio=k5.refractionRatio;this.wireframe=k5.wireframe;this.wireframeLinewidth=k5.wireframeLinewidth;this.wireframeLinecap=k5.wireframeLinecap;this.wireframeLinejoin=k5.wireframeLinejoin;this.skinning=k5.skinning;this.morphTargets=k5.morphTargets;this.morphNormals=k5.morphNormals;return this};function h3(k5){fS.call(this);this.defines={"PHYSICAL":""};this.type="MeshPhysicalMaterial";this.reflectivity=0.5;this.clearCoat=0;this.clearCoatRoughness=0;this.setValues(k5)}h3.prototype=Object.create(fS.prototype);h3.prototype.constructor=h3;h3.prototype.isMeshPhysicalMaterial=true;h3.prototype.copy=function(k5){fS.prototype.copy.call(this,k5);this.defines={"PHYSICAL":""};this.reflectivity=k5.reflectivity;this.clearCoat=k5.clearCoat;this.clearCoatRoughness=k5.clearCoatRoughness;return this};function eW(k5){jo.call(this);this.type="MeshPhongMaterial";this.color=new id(16777215);this.specular=new id(1118481);this.shininess=30;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new id(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=iB;this.normalScale=new bg(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=u;this.reflectivity=1;this.refractionRatio=0.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(k5)}eW.prototype=Object.create(jo.prototype);eW.prototype.constructor=eW;eW.prototype.isMeshPhongMaterial=true;eW.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.color.copy(k5.color);this.specular.copy(k5.specular);this.shininess=k5.shininess;this.map=k5.map;this.lightMap=k5.lightMap;this.lightMapIntensity=k5.lightMapIntensity;this.aoMap=k5.aoMap;this.aoMapIntensity=k5.aoMapIntensity;this.emissive.copy(k5.emissive);this.emissiveMap=k5.emissiveMap;this.emissiveIntensity=k5.emissiveIntensity;this.bumpMap=k5.bumpMap;this.bumpScale=k5.bumpScale;this.normalMap=k5.normalMap;this.normalMapType=k5.normalMapType;this.normalScale.copy(k5.normalScale);this.displacementMap=k5.displacementMap;this.displacementScale=k5.displacementScale;this.displacementBias=k5.displacementBias;this.specularMap=k5.specularMap;this.alphaMap=k5.alphaMap;this.envMap=k5.envMap;this.combine=k5.combine;this.reflectivity=k5.reflectivity;this.refractionRatio=k5.refractionRatio;this.wireframe=k5.wireframe;this.wireframeLinewidth=k5.wireframeLinewidth;this.wireframeLinecap=k5.wireframeLinecap;this.wireframeLinejoin=k5.wireframeLinejoin;this.skinning=k5.skinning;this.morphTargets=k5.morphTargets;this.morphNormals=k5.morphNormals;return this};function aS(k5){eW.call(this);this.defines={"TOON":""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(k5)}aS.prototype=Object.create(eW.prototype);aS.prototype.constructor=aS;aS.prototype.isMeshToonMaterial=true;aS.prototype.copy=function(k5){eW.prototype.copy.call(this,k5);this.gradientMap=k5.gradientMap;return this};function ik(k5){jo.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=iB;this.normalScale=new bg(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(k5)}ik.prototype=Object.create(jo.prototype);ik.prototype.constructor=ik;ik.prototype.isMeshNormalMaterial=true;ik.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.bumpMap=k5.bumpMap;this.bumpScale=k5.bumpScale;this.normalMap=k5.normalMap;this.normalMapType=k5.normalMapType;this.normalScale.copy(k5.normalScale);this.displacementMap=k5.displacementMap;this.displacementScale=k5.displacementScale;this.displacementBias=k5.displacementBias;this.wireframe=k5.wireframe;this.wireframeLinewidth=k5.wireframeLinewidth;this.skinning=k5.skinning;this.morphTargets=k5.morphTargets;this.morphNormals=k5.morphNormals;return this};function ca(k5){jo.call(this);this.type="MeshLambertMaterial";this.color=new id(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new id(0);this.emissiveIntensity=1;this.emissiveMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=u;this.reflectivity=1;this.refractionRatio=0.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(k5)}ca.prototype=Object.create(jo.prototype);ca.prototype.constructor=ca;ca.prototype.isMeshLambertMaterial=true;ca.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.color.copy(k5.color);this.map=k5.map;this.lightMap=k5.lightMap;this.lightMapIntensity=k5.lightMapIntensity;this.aoMap=k5.aoMap;this.aoMapIntensity=k5.aoMapIntensity;this.emissive.copy(k5.emissive);this.emissiveMap=k5.emissiveMap;this.emissiveIntensity=k5.emissiveIntensity;this.specularMap=k5.specularMap;this.alphaMap=k5.alphaMap;this.envMap=k5.envMap;this.combine=k5.combine;this.reflectivity=k5.reflectivity;this.refractionRatio=k5.refractionRatio;this.wireframe=k5.wireframe;this.wireframeLinewidth=k5.wireframeLinewidth;this.wireframeLinecap=k5.wireframeLinecap;this.wireframeLinejoin=k5.wireframeLinejoin;this.skinning=k5.skinning;this.morphTargets=k5.morphTargets;this.morphNormals=k5.morphNormals;return this};function j3(k5){jo.call(this);this.defines={"MATCAP":""};this.type="MeshMatcapMaterial";this.color=new id(16777215);this.matcap=null;this.map=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=iB;this.normalScale=new bg(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.lights=false;this.setValues(k5)}j3.prototype=Object.create(jo.prototype);j3.prototype.constructor=j3;j3.prototype.isMeshMatcapMaterial=true;j3.prototype.copy=function(k5){jo.prototype.copy.call(this,k5);this.defines={"MATCAP":""};this.color.copy(k5.color);this.matcap=k5.matcap;this.map=k5.map;this.bumpMap=k5.bumpMap;this.bumpScale=k5.bumpScale;this.normalMap=k5.normalMap;this.normalMapType=k5.normalMapType;this.normalScale.copy(k5.normalScale);this.displacementMap=k5.displacementMap;this.displacementScale=k5.displacementScale;this.displacementBias=k5.displacementBias;this.alphaMap=k5.alphaMap;this.skinning=k5.skinning;this.morphTargets=k5.morphTargets;this.morphNormals=k5.morphNormals;return this};function kN(k5){ju.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(k5)}kN.prototype=Object.create(ju.prototype);kN.prototype.constructor=kN;kN.prototype.isLineDashedMaterial=true;kN.prototype.copy=function(k5){ju.prototype.copy.call(this,k5);this.scale=k5.scale;this.dashSize=k5.dashSize;this.gapSize=k5.gapSize;return this};var cG=Object.freeze({ShadowMaterial:cm,SpriteMaterial:el,RawShaderMaterial:b5,ShaderMaterial:jW,PointsMaterial:e,MeshPhysicalMaterial:h3,MeshStandardMaterial:fS,MeshPhongMaterial:eW,MeshToonMaterial:aS,MeshNormalMaterial:ik,MeshLambertMaterial:ca,MeshDepthMaterial:aa,MeshDistanceMaterial:jE,MeshBasicMaterial:e2,MeshMatcapMaterial:j3,LineDashedMaterial:kN,LineBasicMaterial:ju,Material:jo});var h5={arraySlice:function(k7,k6,k5){if(h5.isTypedArray(k7)){return new k7.constructor(k7.subarray(k6,k5!==undefined?k5:k7.length))}return k7.slice(k6,k5)},convertArray:function(k7,k5,k6){if(!k7||!k6&&k7.constructor===k5){return k7}if(typeof k5.BYTES_PER_ELEMENT==="number"){return new k5(k7)}return Array.prototype.slice.call(k7)},isTypedArray:function(k5){return ArrayBuffer.isView(k5)&&!(k5 instanceof DataView)},getKeyframeOrder:function(k8){function k7(lb,la){return k8[lb]-k8[la]}var k9=k8.length;var k5=new Array(k9);for(var k6=0;k6!==k9;++k6){k5[k6]=k6}k5.sort(k7);return k5},sortedArray:function(lc,k5,k7){var lb=lc.length;var ld=new lc.constructor(lb);for(var k9=0,k6=0;k6!==lb;++k9){var la=k7[k9]*k5;for(var k8=0;k8!==k5;++k8){ld[k6++]=lc[la+k8]}}return ld},flattenJSON:function(k9,lb,k6,k5){var k8=1,k7=k9[0];while(k7!==undefined&&k7[k5]===undefined){k7=k9[k8++]}if(k7===undefined){return}var la=k7[k5];if(la===undefined){return}if(Array.isArray(la)){do{la=k7[k5];if(la!==undefined){lb.push(k7.time);k6.push.apply(k6,la)}k7=k9[k8++]}while(k7!==undefined)}else{if(la.toArray!==undefined){do{la=k7[k5];if(la!==undefined){lb.push(k7.time);la.toArray(k6,k6.length)}k7=k9[k8++]}while(k7!==undefined)}else{do{la=k7[k5];if(la!==undefined){lb.push(k7.time);k6.push(la)}k7=k9[k8++]}while(k7!==undefined)}}}};function eY(k6,k8,k5,k7){this.parameterPositions=k6;this._cachedIndex=0;this.resultBuffer=k7!==undefined?k7:new k8.constructor(k5);this.sampleValues=k8;this.valueSize=k5}Object.assign(eY.prototype,{evaluate:function(ld){var k5=this.parameterPositions,k6=this._cachedIndex,k8=k5[k6],k9=k5[k6-1];validate_interval:{seek:{var lc;linear_scan:{forward_scan:if(!(ld<k8)){for(var k7=k6+2;;){if(k8===undefined){if(ld<k9){break forward_scan}k6=k5.length;this._cachedIndex=k6;return this.afterEnd_(k6-1,ld,k9)}if(k6===k7){break}k9=k8;k8=k5[++k6];if(ld<k8){break seek}}lc=k5.length;break linear_scan}if(!(ld>=k9)){var la=k5[1];if(ld<la){k6=2;k9=la}for(var k7=k6-2;;){if(k9===undefined){this._cachedIndex=0;return this.beforeStart_(0,ld,k8)}if(k6===k7){break}k8=k9;k9=k5[--k6-1];if(ld>=k9){break seek}}lc=k6;k6=0;break linear_scan}break validate_interval}while(k6<lc){var lb=(k6+lc)>>>1;if(ld<k5[lb]){lc=lb}else{k6=lb+1}}k8=k5[k6];k9=k5[k6-1];if(k9===undefined){this._cachedIndex=0;return this.beforeStart_(0,ld,k8)}if(k8===undefined){k6=k5.length;this._cachedIndex=k6;return this.afterEnd_(k6-1,k9,ld)}}this._cachedIndex=k6;this.intervalChanged_(k6,k9,k8)}return this.interpolate_(k6,k9,ld,k8)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(k7){var k5=this.resultBuffer,k6=this.sampleValues,k9=this.valueSize,la=k7*k9;for(var k8=0;k8!==k9;++k8){k5[k8]=k6[la+k8]}return k5},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(eY.prototype,{beforeStart_:eY.prototype.copySampleValue_,afterEnd_:eY.prototype.copySampleValue_,});function k2(k6,k8,k5,k7){eY.call(this,k6,k8,k5,k7);this._weightPrev=-0;this._offsetPrev=-0;this._weightNext=-0;this._offsetNext=-0}k2.prototype=Object.assign(Object.create(eY.prototype),{constructor:k2,DefaultSettings_:{endingStart:e6,endingEnd:e6},intervalChanged_:function(k7,la,k8){var k6=this.parameterPositions,k9=k7-2,lc=k7+1,lb=k6[k9],ld=k6[lc];if(lb===undefined){switch(this.getSettings_().endingStart){case dt:k9=k7;lb=2*la-k8;break;case dS:k9=k6.length-2;lb=la+k6[k9]-k6[k9+1];break;default:k9=k7;lb=k8}}if(ld===undefined){switch(this.getSettings_().endingEnd){case dt:lc=k7;ld=2*k8-la;break;case dS:lc=1;ld=k8+k6[1]-k6[0];break;default:lc=k7-1;ld=la}}var le=(k8-la)*0.5,k5=this.valueSize;this._weightPrev=le/(la-lb);this._weightNext=le/(ld-k8);this._offsetPrev=k9*k5;this._offsetNext=lc*k5},interpolate_:function(lj,ld,lf,la){var lc=this.resultBuffer,k7=this.sampleValues,lh=this.valueSize,lk=lj*lh,ln=lk-lh,k5=this._offsetPrev,k9=this._offsetNext,lo=this._weightPrev,lp=this._weightNext,lg=(lf-ld)/(la-ld),ll=lg*lg,li=ll*lg;var lb=-lo*li+2*lo*ll-lo*lg;var k8=(1+lo)*li+(-1.5-2*lo)*ll+(-0.5+lo)*lg+1;var k6=(-1-lp)*li+(1.5+lp)*ll+0.5*lg;var le=lp*li-lp*ll;for(var lm=0;lm!==lh;++lm){lc[lm]=lb*k7[k5+lm]+k8*k7[ln+lm]+k6*k7[lk+lm]+le*k7[k9+lm]}return lc}});function dr(k6,k8,k5,k7){eY.call(this,k6,k8,k5,k7)}dr.prototype=Object.assign(Object.create(eY.prototype),{constructor:dr,interpolate_:function(k8,lb,lf,la){var lg=this.resultBuffer,le=this.sampleValues,k5=this.valueSize,k6=k8*k5,k7=k6-k5,lc=(lf-lb)/(la-lb),ld=1-lc;for(var k9=0;k9!==k5;++k9){lg[k9]=le[k7+k9]*ld+le[k6+k9]*lc}return lg}});function ja(k6,k8,k5,k7){eY.call(this,k6,k8,k5,k7)}ja.prototype=Object.assign(Object.create(eY.prototype),{constructor:ja,interpolate_:function(k5){return this.copySampleValue_(k5-1)}});function c3(k7,k8,k6,k5){if(k7===undefined){throw new Error("THREE.KeyframeTrack: track name is undefined")}if(k8===undefined||k8.length===0){throw new Error("THREE.KeyframeTrack: no keyframes in track named "+k7)}this.name=k7;this.times=h5.convertArray(k8,this.TimeBufferType);this.values=h5.convertArray(k6,this.ValueBufferType);this.setInterpolation(k5||this.DefaultInterpolation)}Object.assign(c3,{toJSON:function(k5){var k8=k5.constructor;var k7;if(k8.toJSON!==undefined){k7=k8.toJSON(k5)}else{k7={"name":k5.name,"times":h5.convertArray(k5.times,Array),"values":h5.convertArray(k5.values,Array)};var k6=k5.getInterpolation();if(k6!==k5.DefaultInterpolation){k7.interpolation=k6}}k7.type=k5.ValueTypeName;return k7}});Object.assign(c3.prototype,{constructor:c3,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:an,InterpolantFactoryMethodDiscrete:function(k5){return new ja(this.times,this.values,this.getValueSize(),k5)},InterpolantFactoryMethodLinear:function(k5){return new dr(this.times,this.values,this.getValueSize(),k5)},InterpolantFactoryMethodSmooth:function(k5){return new k2(this.times,this.values,this.getValueSize(),k5)},setInterpolation:function(k5){var k6;switch(k5){case io:k6=this.InterpolantFactoryMethodDiscrete;break;case an:k6=this.InterpolantFactoryMethodLinear;break;case ae:k6=this.InterpolantFactoryMethodSmooth;break}if(k6===undefined){var k7="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===undefined){if(k5!==this.DefaultInterpolation){this.setInterpolation(this.DefaultInterpolation)}else{throw new Error(k7)}}a.Logger.log(a.Logger.WARNING,"THREE.KeyframeTrack:",k7);return this}this.createInterpolant=k6;return this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return io;case this.InterpolantFactoryMethodLinear:return an;case this.InterpolantFactoryMethodSmooth:return ae}},getValueSize:function(){return this.values.length/this.times.length},shift:function(k5){if(k5!==0){var k7=this.times;for(var k6=0,k8=k7.length;k6!==k8;++k6){k7[k6]+=k5}}return this},scale:function(k6){if(k6!==1){var k7=this.times;for(var k5=0,k8=k7.length;k5!==k8;++k5){k7[k5]*=k6}}return this},trim:function(k7,k5){var k9=this.times,k6=k9.length,lb=0,la=k6-1;while(lb!==k6&&k9[lb]<k7){++lb}while(la!==-1&&k9[la]>k5){--la}++la;if(lb!==0||la!==k6){if(lb>=la){la=Math.max(la,1),lb=la-1}var k8=this.getValueSize();this.times=h5.arraySlice(k9,lb,la);this.values=h5.arraySlice(this.values,lb*k8,la*k8)}return this},validate:function(){var k5=true;var lb=this.getValueSize();if(lb-Math.floor(lb)!==0){a.Logger.log(a.Logger.SEVERE,"THREE.KeyframeTrack: Invalid value size in track.",this);k5=false}var k6=this.times,le=this.values,lc=k6.length;if(lc===0){a.Logger.log(a.Logger.SEVERE,"THREE.KeyframeTrack: Track is empty.",this);k5=false}var k7=null;for(var k9=0;k9!==lc;k9++){var la=k6[k9];if(typeof la==="number"&&isNaN(la)){a.Logger.log(a.Logger.SEVERE,"THREE.KeyframeTrack: Time is not a valid number.",this,k9,la);k5=false;break}if(k7!==null&&k7>la){a.Logger.log(a.Logger.SEVERE,"THREE.KeyframeTrack: Out of order keys.",this,k9,la,k7);k5=false;break}k7=la}if(le!==undefined){if(h5.isTypedArray(le)){for(var k9=0,k8=le.length;k9!==k8;++k9){var ld=le[k9];if(isNaN(ld)){a.Logger.log(a.Logger.SEVERE,"THREE.KeyframeTrack: Value is not a valid number.",this,k9,ld);k5=false;break}}}}return k5},optimize:function(){var k6=this.times,lk=this.values,k7=this.getValueSize(),lb=this.getInterpolation()===ae,le=1,ld=k6.length-1;for(var lc=1;lc<ld;++lc){var k5=false;var k8=k6[lc];var lg=k6[lc+1];if(k8!==lg&&(lc!==1||k8!==k8[0])){if(!lb){var la=lc*k7,li=la-k7,ll=la+k7;for(var k9=0;k9!==k7;++k9){var lh=lk[la+k9];if(lh!==lk[li+k9]||lh!==lk[ll+k9]){k5=true;break}}}else{k5=true}}if(k5){if(lc!==le){k6[le]=k6[lc];var lj=lc*k7,lf=le*k7;for(var k9=0;k9!==k7;++k9){lk[lf+k9]=lk[lj+k9]}}++le}}if(ld>0){k6[le]=k6[ld];for(var lj=ld*k7,lf=le*k7,k9=0;k9!==k7;++k9){lk[lf+k9]=lk[lj+k9]}++le}if(le!==k6.length){this.times=h5.arraySlice(k6,0,le);this.values=h5.arraySlice(lk,0,le*k7)}return this},clone:function(){var k8=h5.arraySlice(this.times,0);var k6=h5.arraySlice(this.values,0);var k7=this.constructor;var k5=new k7(this.name,k8,k6);k5.createInterpolant=this.createInterpolant;return k5}});function gG(k6,k7,k5){c3.call(this,k6,k7,k5)}gG.prototype=Object.assign(Object.create(c3.prototype),{constructor:gG,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:io,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function aq(k7,k8,k6,k5){c3.call(this,k7,k8,k6,k5)}aq.prototype=Object.assign(Object.create(c3.prototype),{constructor:aq,ValueTypeName:"color"});function J(k7,k8,k6,k5){c3.call(this,k7,k8,k6,k5)}J.prototype=Object.assign(Object.create(c3.prototype),{constructor:J,ValueTypeName:"number"});function jy(k6,k8,k5,k7){eY.call(this,k6,k8,k5,k7)}jy.prototype=Object.assign(Object.create(eY.prototype),{constructor:jy,interpolate_:function(k8,lb,ld,la){var le=this.resultBuffer,lc=this.sampleValues,k5=this.valueSize,k9=k8*k5,k7=(ld-lb)/(la-lb);for(var k6=k9+k5;k9!==k6;k9+=4){hd.slerpFlat(le,0,lc,k9-k5,lc,k9,k7)}return le}});function gw(k7,k8,k6,k5){c3.call(this,k7,k8,k6,k5)}gw.prototype=Object.assign(Object.create(c3.prototype),{constructor:gw,ValueTypeName:"quaternion",DefaultInterpolation:an,InterpolantFactoryMethodLinear:function(k5){return new jy(this.times,this.values,this.getValueSize(),k5)},InterpolantFactoryMethodSmooth:undefined});function jx(k7,k8,k6,k5){c3.call(this,k7,k8,k6,k5)}jx.prototype=Object.assign(Object.create(c3.prototype),{constructor:jx,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:io,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function c2(k7,k8,k6,k5){c3.call(this,k7,k8,k6,k5)}c2.prototype=Object.assign(Object.create(c3.prototype),{constructor:c2,ValueTypeName:"vector"});function bA(k6,k7,k5){this.name=k6;this.tracks=k5;this.duration=(k7!==undefined)?k7:-1;this.uuid=dY.generateUUID();if(this.duration<0){this.resetDuration()}}function gW(k5){switch(k5.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return J;case"vector":case"vector2":case"vector3":case"vector4":return c2;case"color":return aq;case"quaternion":return gw;case"bool":case"boolean":return gG;case"string":return jx}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+k5)}function i6(k6){if(k6.type===undefined){throw new Error("THREE.KeyframeTrack: track type undefined, can not parse")}var k7=gW(k6.type);if(k6.times===undefined){var k8=[],k5=[];h5.flattenJSON(k6.keys,k8,k5,"value");k6.times=k8;k6.values=k5}if(k7.parse!==undefined){return k7.parse(k6)}else{return new k7(k6.name,k6.times,k6.values,k6.interpolation)}}Object.assign(bA,{parse:function(k8){var k5=[],k7=k8.tracks,k9=1/(k8.fps||1);for(var k6=0,la=k7.length;k6!==la;++k6){k5.push(i6(k7[k6]).scale(k9))}return new bA(k8.name,k8.duration,k5)},toJSON:function(k8){var k5=[],la=k8.tracks;var k7={"name":k8.name,"duration":k8.duration,"tracks":k5,"uuid":k8.uuid};for(var k6=0,k9=la.length;k6!==k9;++k6){k5.push(c3.toJSON(la[k6]))}return k7},CreateFromMorphTargetSequence:function(k6,le,k7,ld){var lb=le.length;var la=[];for(var k9=0;k9<lb;k9++){var k5=[];var lc=[];k5.push((k9+lb-1)%lb,k9,(k9+1)%lb);lc.push(0,1,0);var k8=h5.getKeyframeOrder(k5);k5=h5.sortedArray(k5,1,k8);lc=h5.sortedArray(lc,1,k8);if(!ld&&k5[0]===0){k5.push(lb);lc.push(lc[0])}la.push(new J(".morphTargetInfluences["+le[k9].name+"]",k5,lc).scale(1/k7))}return new bA(k6,-1,la)},findByName:function(k6,k5){var k8=k6;if(!Array.isArray(k6)){var k9=k6;k8=k9.geometry&&k9.geometry.animations||k9.animations}for(var k7=0;k7<k8.length;k7++){if(k8[k7].name===k5){return k8[k7]}}return null},CreateClipsFromMorphTargetSequences:function(k8,k7,lg){var ld={};var le=/^([\w-]*?)([\d]+)$/;for(var lc=0,lf=k8.length;lc<lf;lc++){var lb=k8[lc];var k9=lb.name.match(le);if(k9&&k9.length>1){var k6=k9[1];var la=ld[k6];if(!la){ld[k6]=la=[]}la.push(lb)}}var k5=[];for(var k6 in ld){k5.push(bA.CreateFromMorphTargetSequence(k6,ld[k6],k7,lg))}return k5},parseAnimation:function(ll,lk){if(!ll){a.Logger.log(a.Logger.SEVERE,"THREE.AnimationClip: No animation in JSONLoader data.");return null}var k6=function(ls,lr,lt,lq,lp){if(lt.length!==0){var lu=[];var lo=[];h5.flattenJSON(lt,lu,lo,lq);if(lu.length!==0){lp.push(new ls(lr,lu,lo))}}};var li=[];var le=ll.name||"default";var k5=ll.length||-1;var k8=ll.fps||30;var ld=ll.hierarchy||[];for(var lj=0;lj<ld.length;lj++){var ln=ld[lj].keys;if(!ln||ln.length===0){continue}if(ln[0].morphTargets){var lf={};for(var lh=0;lh<ln.length;lh++){if(ln[lh].morphTargets){for(var lg=0;lg<ln[lh].morphTargets.length;lg++){lf[ln[lh].morphTargets[lg]]=-1}}}for(var lc in lf){var lb=[];var k7=[];for(var lg=0;lg!==ln[lh].morphTargets.length;++lg){var k9=ln[lh];lb.push(k9.time);k7.push((k9.morphTarget===lc)?1:0)}li.push(new J(".morphTargetInfluence["+lc+"]",lb,k7))}k5=lf.length*(k8||1)}else{var la=".bones["+lk[lj].name+"]";k6(c2,la+".position",ln,"pos",li);k6(gw,la+".quaternion",ln,"rot",li);k6(c2,la+".scale",ln,"scl",li)}}if(li.length===0){return null}var lm=new bA(le,k5,li);return lm}});Object.assign(bA.prototype,{resetDuration:function(){var k6=this.tracks,k8=0;for(var k7=0,k9=k6.length;k7!==k9;++k7){var k5=this.tracks[k7];k8=Math.max(k8,k5.times[k5.times.length-1])}this.duration=k8;return this},trim:function(){for(var k5=0;k5<this.tracks.length;k5++){this.tracks[k5].trim(0,this.duration)}return this},validate:function(){var k6=true;for(var k5=0;k5<this.tracks.length;k5++){k6=k6&&this.tracks[k5].validate()}return k6},optimize:function(){for(var k5=0;k5<this.tracks.length;k5++){this.tracks[k5].optimize()}return this},clone:function(){var k5=[];for(var k6=0;k6<this.tracks.length;k6++){k5.push(this.tracks[k6].clone())}return new bA(this.name,this.duration,k5)}});var ch={enabled:false,files:{},add:function(k6,k5){if(this.enabled===false){return}this.files[k6]=k5},get:function(k5){if(this.enabled===false){return}return this.files[k5]},remove:function(k5){delete this.files[k5]},clear:function(){this.files={}}};function hk(la,lc,lb){var k9=this;var k7=false;var k6=0;var k5=0;var k8=undefined;this.onStart=undefined;this.onLoad=la;this.onProgress=lc;this.onError=lb;this.itemStart=function(ld){k5++;if(k7===false){if(k9.onStart!==undefined){k9.onStart(ld,k6,k5)}}k7=true};this.itemEnd=function(ld){k6++;if(k9.onProgress!==undefined){k9.onProgress(ld,k6,k5)}if(k6===k5){k7=false;if(k9.onLoad!==undefined){k9.onLoad()}}};this.itemError=function(ld){if(k9.onError!==undefined){k9.onError(ld)}};this.resolveURL=function(ld){if(k8){return k8(ld)}return ld};this.setURLModifier=function(ld){k8=ld;return this}}var jh=new hk();var gY={};function fC(k5){this.manager=(k5!==undefined)?k5:jh}Object.assign(fC.prototype,{load:function(lc,k7,k9,le){if(lc===undefined){lc=""}if(this.path!==undefined){lc=this.path+lc}lc=this.manager.resolveURL(lc);var k6=this;var lf=ch.get(lc);if(lf!==undefined){k6.manager.itemStart(lc);setTimeout(function(){if(k7){k7(lf)}k6.manager.itemEnd(lc)},0);return lf}if(gY[lc]!==undefined){gY[lc].push({onLoad:k7,onProgress:k9,onError:le});return}var lm=/^data:(.*?)(;base64)?,(.*)$/;var lh=lc.match(lm);if(lh){var ld=lh[1];var li=!!lh[2];var ln=lh[3];ln=decodeURIComponent(ln);if(li){ln=atob(ln)}try{var k5;var k8=(this.responseType||"").toLowerCase();switch(k8){case"arraybuffer":case"blob":var lg=new Uint8Array(ln.length);for(var ll=0;ll<ln.length;ll++){lg[ll]=ln.charCodeAt(ll)}if(k8==="blob"){k5=new Blob([lg.buffer],{type:ld})}else{k5=lg.buffer}break;case"document":var la=new DOMParser();k5=la.parseFromString(ln,ld);break;case"json":k5=JSON.parse(ln);break;default:k5=ln;break}setTimeout(function(){if(k7){k7(k5)}k6.manager.itemEnd(lc)},0)}catch(lj){setTimeout(function(){if(le){le(lj)}k6.manager.itemError(lc);k6.manager.itemEnd(lc)},0)}}else{gY[lc]=[];gY[lc].push({onLoad:k7,onProgress:k9,onError:le});var lb=new XMLHttpRequest();lb.open("GET",lc,true);lb.addEventListener("load",function(ls){var lp=this.response;ch.add(lc,lp);var lr=gY[lc];delete gY[lc];if(this.status===200||this.status===0){if(this.status===0){a.Logger.log(a.Logger.WARNING,"THREE.FileLoader: HTTP Status 0 received.")}for(var lq=0,lo=lr.length;lq<lo;lq++){var lt=lr[lq];if(lt.onLoad){lt.onLoad(lp)}}k6.manager.itemEnd(lc)}else{for(var lq=0,lo=lr.length;lq<lo;lq++){var lt=lr[lq];if(lt.onError){lt.onError(ls)}}k6.manager.itemError(lc);k6.manager.itemEnd(lc)}},false);lb.addEventListener("progress",function(lr){var lq=gY[lc];for(var lp=0,lo=lq.length;lp<lo;lp++){var ls=lq[lp];if(ls.onProgress){ls.onProgress(lr)}}},false);lb.addEventListener("error",function(lr){var lq=gY[lc];delete gY[lc];for(var lp=0,lo=lq.length;lp<lo;lp++){var ls=lq[lp];if(ls.onError){ls.onError(lr)}}k6.manager.itemError(lc);k6.manager.itemEnd(lc)},false);lb.addEventListener("abort",function(lr){var lq=gY[lc];delete gY[lc];for(var lp=0,lo=lq.length;lp<lo;lp++){var ls=lq[lp];if(ls.onError){ls.onError(lr)}}k6.manager.itemError(lc);k6.manager.itemEnd(lc)},false);if(this.responseType!==undefined){lb.responseType=this.responseType}if(this.withCredentials!==undefined){lb.withCredentials=this.withCredentials}if(lb.overrideMimeType){lb.overrideMimeType(this.mimeType!==undefined?this.mimeType:"text/plain")}for(var lk in this.requestHeader){lb.setRequestHeader(lk,this.requestHeader[lk])}lb.send(null)}k6.manager.itemStart(lc);return lb},setPath:function(k5){this.path=k5;return this},setResponseType:function(k5){this.responseType=k5;return this},setWithCredentials:function(k5){this.withCredentials=k5;return this},setMimeType:function(k5){this.mimeType=k5;return this},setRequestHeader:function(k5){this.requestHeader=k5;return this}});function cv(k5){this.manager=(k5!==undefined)?k5:jh}Object.assign(cv.prototype,{load:function(k6,k8,la,k9){var k7=this;var k5=new fC(k7.manager);k5.setPath(k7.path);k5.load(k6,function(lb){k8(k7.parse(JSON.parse(lb)))},la,k9)},parse:function(k6,k7){var k9=[];for(var k5=0;k5<k6.length;k5++){var k8=bA.parse(k6[k5]);k9.push(k8)}k7(k9)},setPath:function(k5){this.path=k5;return this}});function p(k5){this.manager=(k5!==undefined)?k5:jh;this._parser=null}Object.assign(p.prototype,{load:function(k5,lb,lf,k8){var lg=this;var lc=[];var k9=new cT();k9.image=lc;var le=new fC(this.manager);le.setPath(this.path);le.setResponseType("arraybuffer");function la(lh){le.load(k5[lh],function(li){var lj=lg._parser(li,true);lc[lh]={width:lj.width,height:lj.height,format:lj.format,mipmaps:lj.mipmaps};k7+=1;if(k7===6){if(lj.mipmapCount===1){k9.minFilter=j2}k9.format=lj.format;k9.needsUpdate=true;if(lb){lb(k9)}}},lf,k8)}if(Array.isArray(k5)){var k7=0;for(var k6=0,ld=k5.length;k6<ld;++k6){la(k6)}}else{le.load(k5,function(li){var ll=lg._parser(li,true);if(ll.isCubemap){var lh=ll.mipmaps.length/ll.mipmapCount;for(var lk=0;lk<lh;lk++){lc[lk]={mipmaps:[]};for(var lj=0;lj<ll.mipmapCount;lj++){lc[lk].mipmaps.push(ll.mipmaps[lk*ll.mipmapCount+lj]);lc[lk].format=ll.format;lc[lk].width=ll.width;lc[lk].height=ll.height}}}else{k9.image.width=ll.width;k9.image.height=ll.height;k9.mipmaps=ll.mipmaps}if(ll.mipmapCount===1){k9.minFilter=j2}k9.format=ll.format;k9.needsUpdate=true;if(lb){lb(k9)}},lf,k8)}return k9},setPath:function(k5){this.path=k5;return this}});function et(k5){this.manager=(k5!==undefined)?k5:jh;this._parser=null}Object.assign(et.prototype,{load:function(k6,k8,lb,la){var k7=this;var k9=new t();var k5=new fC(this.manager);k5.setResponseType("arraybuffer");k5.setPath(this.path);k5.load(k6,function(lc){var ld=k7._parser(lc);if(!ld){return}if(ld.image!==undefined){k9.image=ld.image}else{if(ld.data!==undefined){k9.image.width=ld.width;k9.image.height=ld.height;k9.image.data=ld.data}}k9.wrapS=ld.wrapS!==undefined?ld.wrapS:g7;k9.wrapT=ld.wrapT!==undefined?ld.wrapT:g7;k9.magFilter=ld.magFilter!==undefined?ld.magFilter:j2;k9.minFilter=ld.minFilter!==undefined?ld.minFilter:ap;k9.anisotropy=ld.anisotropy!==undefined?ld.anisotropy:1;if(ld.format!==undefined){k9.format=ld.format}if(ld.type!==undefined){k9.type=ld.type}if(ld.mipmaps!==undefined){k9.mipmaps=ld.mipmaps}if(ld.mipmapCount===1){k9.minFilter=j2}k9.needsUpdate=true;if(k8){k8(k9,ld)}},lb,la);return k9},setPath:function(k5){this.path=k5;return this}});function h7(k5){this.manager=(k5!==undefined)?k5:jh}Object.assign(h7.prototype,{crossOrigin:"anonymous",load:function(k5,la,lc,k9){if(k5===undefined){k5=""}if(this.path!==undefined){k5=this.path+k5}k5=this.manager.resolveURL(k5);var ld=this;var k6=ch.get(k5);if(k6!==undefined){ld.manager.itemStart(k5);setTimeout(function(){if(la){la(k6)}ld.manager.itemEnd(k5)},0);return k6}var k7=document.createElementNS("http://www.w3.org/1999/xhtml","img");function lb(){k7.removeEventListener("load",lb,false);k7.removeEventListener("error",k8,false);ch.add(k5,this);if(la){la(this)}ld.manager.itemEnd(k5)}function k8(le){k7.removeEventListener("load",lb,false);k7.removeEventListener("error",k8,false);if(k9){k9(le)}ld.manager.itemError(k5);ld.manager.itemEnd(k5)}k7.addEventListener("load",lb,false);k7.addEventListener("error",k8,false);if(k5.substr(0,5)!=="data:"){if(this.crossOrigin!==undefined){k7.crossOrigin=this.crossOrigin}}ld.manager.itemStart(k5);k7.src=k5;return k7},setCrossOrigin:function(k5){this.crossOrigin=k5;return this},setPath:function(k5){this.path=k5;return this}});function cN(k5){this.manager=(k5!==undefined)?k5:jh}Object.assign(cN.prototype,{crossOrigin:"anonymous",load:function(la,lb,ld,k7){var k8=new hf();var lc=new h7(this.manager);lc.setCrossOrigin(this.crossOrigin);lc.setPath(this.path);var k6=0;function k9(le){lc.load(la[le],function(lf){k8.images[le]=lf;k6++;if(k6===6){k8.needsUpdate=true;if(lb){lb(k8)}}},undefined,k7)}for(var k5=0;k5<la.length;++k5){k9(k5)}return k8},setCrossOrigin:function(k5){this.crossOrigin=k5;return this},setPath:function(k5){this.path=k5;return this}});function cw(k5){this.manager=(k5!==undefined)?k5:jh}Object.assign(cw.prototype,{crossOrigin:"anonymous",load:function(k6,k7,la,k9){var k8=new eq();var k5=new h7(this.manager);k5.setCrossOrigin(this.crossOrigin);k5.setPath(this.path);k5.load(k6,function(lc){k8.image=lc;var lb=k6.search(/\.jpe?g($|\?)/i)>0||k6.search(/^data\:image\/jpeg/)===0;k8.format=lb?fK:gt;k8.needsUpdate=true;if(k7!==undefined){k7(k8)}},la,k9);return k8},setCrossOrigin:function(k5){this.crossOrigin=k5;return this},setPath:function(k5){this.path=k5;return this}});function dT(){this.type="Curve";this.arcLengthDivisions=200}Object.assign(dT.prototype,{getPoint:function(){a.Logger.log(a.Logger.WARNING,"THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(k5,k7){var k6=this.getUtoTmapping(k5);return this.getPoint(k6,k7)},getPoints:function(k5){if(k5===undefined){k5=5}var k6=[];for(var k7=0;k7<=k5;k7++){k6.push(this.getPoint(k7/k5))}return k6},getSpacedPoints:function(k5){if(k5===undefined){k5=5}var k6=[];for(var k7=0;k7<=k5;k7++){k6.push(this.getPointAt(k7/k5))}return k6},getLength:function(){var k5=this.getLengths();return k5[k5.length-1]},getLengths:function(k6){if(k6===undefined){k6=this.arcLengthDivisions}if(this.cacheArcLengths&&(this.cacheArcLengths.length===k6+1)&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=false;var k5=[];var la,k8=this.getPoint(0);var k9,k7=0;k5.push(0);for(k9=1;k9<=k6;k9++){la=this.getPoint(k9/k6);k7+=la.distanceTo(k8);k5.push(k7);k8=la}this.cacheArcLengths=k5;return k5},updateArcLengths:function(){this.needsUpdate=true;this.getLengths()},getUtoTmapping:function(lg,k5){var k6=this.getLengths();var k9=0,ld=k6.length;var le;if(k5){le=k5}else{le=lg*k6[ld-1]}var lc=0,k8=ld-1,lf;while(lc<=k8){k9=Math.floor(lc+(k8-lc)/2);lf=k6[k9]-le;if(lf<0){lc=k9+1}else{if(lf>0){k8=k9-1}else{k8=k9;break}}}k9=k8;if(k6[k9]===le){return k9/(ld-1)}var la=k6[k9];var li=k6[k9+1];var k7=li-la;var lb=(le-la)/k7;var lh=(k9+lb)/(ld-1);return lh},getTangent:function(k6){var lb=0.0001;var k8=k6-lb;var k7=k6+lb;if(k8<0){k8=0}if(k7>1){k7=1}var la=this.getPoint(k8);var k9=this.getPoint(k7);var k5=k9.clone().sub(la);return k5.normalize()},getTangentAt:function(k5){var k6=this.getUtoTmapping(k5);return this.getTangent(k6)},computeFrenetFrames:function(ld,le){var lf=new bf();var lg=[];var lh=[];var la=[];var k6=new bf();var lj=new fv();var lc,li,k5;for(lc=0;lc<=ld;lc++){li=lc/ld;lg[lc]=this.getTangentAt(li);lg[lc].normalize()}lh[0]=new bf();la[0]=new bf();var k9=Number.MAX_VALUE;var lb=Math.abs(lg[0].x);var k8=Math.abs(lg[0].y);var k7=Math.abs(lg[0].z);if(lb<=k9){k9=lb;lf.set(1,0,0)}if(k8<=k9){k9=k8;lf.set(0,1,0)}if(k7<=k9){lf.set(0,0,1)}k6.crossVectors(lg[0],lf).normalize();lh[0].crossVectors(lg[0],k6);la[0].crossVectors(lg[0],lh[0]);for(lc=1;lc<=ld;lc++){lh[lc]=lh[lc-1].clone();la[lc]=la[lc-1].clone();k6.crossVectors(lg[lc-1],lg[lc]);if(k6.length()>Number.EPSILON){k6.normalize();k5=Math.acos(dY.clamp(lg[lc-1].dot(lg[lc]),-1,1));lh[lc].applyMatrix4(lj.makeRotationAxis(k6,k5))}la[lc].crossVectors(lg[lc],lh[lc])}if(le===true){k5=Math.acos(dY.clamp(lh[0].dot(lh[ld]),-1,1));k5/=ld;if(lg[0].dot(k6.crossVectors(lh[0],lh[ld]))>0){k5=-k5}for(lc=1;lc<=ld;lc++){lh[lc].applyMatrix4(lj.makeRotationAxis(lg[lc],k5*lc));la[lc].crossVectors(lg[lc],lh[lc])}}return{tangents:lg,normals:lh,binormals:la}},clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.arcLengthDivisions=k5.arcLengthDivisions;return this},toJSON:function(){var k5={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};k5.arcLengthDivisions=this.arcLengthDivisions;k5.type=this.type;return k5},fromJSON:function(k5){this.arcLengthDivisions=k5.arcLengthDivisions;return this}});function dQ(lb,k9,lc,k5,k8,k7,k6,la){dT.call(this);this.type="EllipseCurve";this.aX=lb||0;this.aY=k9||0;this.xRadius=lc||1;this.yRadius=k5||1;this.aStartAngle=k8||0;this.aEndAngle=k7||2*Math.PI;this.aClockwise=k6||false;this.aRotation=la||0}dQ.prototype=Object.create(dT.prototype);dQ.prototype.constructor=dQ;dQ.prototype.isEllipseCurve=true;dQ.prototype.getPoint=function(lg,lh){var le=lh||new bg();var la=Math.PI*2;var k5=this.aEndAngle-this.aStartAngle;var k9=Math.abs(k5)<Number.EPSILON;while(k5<0){k5+=la}while(k5>la){k5-=la}if(k5<Number.EPSILON){if(k9){k5=0}else{k5=la}}if(this.aClockwise===true&&!k9){if(k5===la){k5=-la}else{k5=k5-la}}var k6=this.aStartAngle+lg*k5;var ld=this.aX+this.xRadius*Math.cos(k6);var lc=this.aY+this.yRadius*Math.sin(k6);if(this.aRotation!==0){var lf=Math.cos(this.aRotation);var lb=Math.sin(this.aRotation);var k8=ld-this.aX;var k7=lc-this.aY;ld=k8*lf-k7*lb+this.aX;lc=k8*lb+k7*lf+this.aY}return le.set(ld,lc)};dQ.prototype.copy=function(k5){dT.prototype.copy.call(this,k5);this.aX=k5.aX;this.aY=k5.aY;this.xRadius=k5.xRadius;this.yRadius=k5.yRadius;this.aStartAngle=k5.aStartAngle;this.aEndAngle=k5.aEndAngle;this.aClockwise=k5.aClockwise;this.aRotation=k5.aRotation;return this};dQ.prototype.toJSON=function(){var k5=dT.prototype.toJSON.call(this);k5.aX=this.aX;k5.aY=this.aY;k5.xRadius=this.xRadius;k5.yRadius=this.yRadius;k5.aStartAngle=this.aStartAngle;k5.aEndAngle=this.aEndAngle;k5.aClockwise=this.aClockwise;k5.aRotation=this.aRotation;return k5};dQ.prototype.fromJSON=function(k5){dT.prototype.fromJSON.call(this,k5);this.aX=k5.aX;this.aY=k5.aY;this.xRadius=k5.xRadius;this.yRadius=k5.yRadius;this.aStartAngle=k5.aStartAngle;this.aEndAngle=k5.aEndAngle;this.aClockwise=k5.aClockwise;this.aRotation=k5.aRotation;return this};function dy(k9,k8,la,k7,k6,k5){dQ.call(this,k9,k8,la,la,k7,k6,k5);this.type="ArcCurve"}dy.prototype=Object.create(dQ.prototype);dy.prototype.constructor=dy;dy.prototype.isArcCurve=true;function dh(){var k8=0,k7=0,k6=0,k5=0;function k9(lb,la,ld,lc){k8=lb;k7=ld;k6=-3*lb+3*la-2*ld-lc;k5=2*lb-2*la+ld+lc}return{initCatmullRom:function(le,lc,lb,la,ld){k9(lc,lb,ld*(lb-le),ld*(la-lc))},initNonuniformCatmullRom:function(ld,lc,lb,la,lg,lf,le){var li=(lc-ld)/lg-(lb-ld)/(lg+lf)+(lb-lc)/lf;var lh=(lb-lc)/lf-(la-lc)/(lf+le)+(la-lb)/le;li*=lf;lh*=lf;k9(lc,lb,li,lh)},calc:function(lb){var lc=lb*lb;var la=lc*lb;return k8+k7*lb+k6*lc+k5*la}}}var ax=new bf();var gQ=new dh(),gO=new dh(),gN=new dh();function jP(k7,k5,k8,k6){dT.call(this);this.type="CatmullRomCurve3";this.points=k7||[];this.closed=k5||false;this.curveType=k8||"centripetal";this.tension=k6||0.5}jP.prototype=Object.create(dT.prototype);jP.prototype.constructor=jP;jP.prototype.isCatmullRomCurve3=true;jP.prototype.getPoint=function(lj,lk){var le=lk||new bf();var lg=this.points;var la=lg.length;var k6=(la-(this.closed?0:1))*lj;var k5=Math.floor(k6);var lb=k6-k5;if(this.closed){k5+=k5>0?0:(Math.floor(Math.abs(k5)/la)+1)*la}else{if(lb===0&&k5===la-1){k5=la-2;lb=1}}var li,lh,lf,ld;if(this.closed||k5>0){li=lg[(k5-1)%la]}else{ax.subVectors(lg[0],lg[1]).add(lg[0]);li=ax}lh=lg[k5%la];lf=lg[(k5+1)%la];if(this.closed||k5+2<la){ld=lg[(k5+2)%la]}else{ax.subVectors(lg[la-1],lg[la-2]).add(lg[la-1]);ld=ax}if(this.curveType==="centripetal"||this.curveType==="chordal"){var lc=this.curveType==="chordal"?0.5:0.25;var k9=Math.pow(li.distanceToSquared(lh),lc);var k8=Math.pow(lh.distanceToSquared(lf),lc);var k7=Math.pow(lf.distanceToSquared(ld),lc);if(k8<0.0001){k8=1}if(k9<0.0001){k9=k8}if(k7<0.0001){k7=k8}gQ.initNonuniformCatmullRom(li.x,lh.x,lf.x,ld.x,k9,k8,k7);gO.initNonuniformCatmullRom(li.y,lh.y,lf.y,ld.y,k9,k8,k7);gN.initNonuniformCatmullRom(li.z,lh.z,lf.z,ld.z,k9,k8,k7)}else{if(this.curveType==="catmullrom"){gQ.initCatmullRom(li.x,lh.x,lf.x,ld.x,this.tension);gO.initCatmullRom(li.y,lh.y,lf.y,ld.y,this.tension);gN.initCatmullRom(li.z,lh.z,lf.z,ld.z,this.tension)}}le.set(gQ.calc(lb),gO.calc(lb),gN.calc(lb));return le};jP.prototype.copy=function(k8){dT.prototype.copy.call(this,k8);this.points=[];for(var k7=0,k6=k8.points.length;k7<k6;k7++){var k5=k8.points[k7];this.points.push(k5.clone())}this.closed=k8.closed;this.curveType=k8.curveType;this.tension=k8.tension;return this};jP.prototype.toJSON=function(){var k8=dT.prototype.toJSON.call(this);k8.points=[];for(var k7=0,k6=this.points.length;k7<k6;k7++){var k5=this.points[k7];k8.points.push(k5.toArray())}k8.closed=this.closed;k8.curveType=this.curveType;k8.tension=this.tension;return k8};jP.prototype.fromJSON=function(k8){dT.prototype.fromJSON.call(this,k8);this.points=[];for(var k7=0,k6=k8.points.length;k7<k6;k7++){var k5=k8.points[k7];this.points.push(new bf().fromArray(k5))}this.closed=k8.closed;this.curveType=k8.curveType;this.tension=k8.tension;return this};function ie(ld,lc,lb,k9,k8){var la=(k9-lc)*0.5;var k7=(k8-lb)*0.5;var k6=ld*ld;var k5=ld*k6;return(2*lb-2*k9+la+k7)*k5+(-3*lb+3*k9-2*la-k7)*k6+la*ld+lb}function hw(k6,k7){var k5=1-k6;return k5*k5*k7}function hv(k5,k6){return 2*(1-k5)*k5*k6}function hu(k5,k6){return k5*k5*k6}function iX(k5,k8,k7,k6){return hw(k5,k8)+hv(k5,k7)+hu(k5,k6)}function aj(k6,k7){var k5=1-k6;return k5*k5*k5*k7}function ah(k6,k7){var k5=1-k6;return 3*k5*k5*k6*k7}function ag(k5,k6){return 3*(1-k5)*k5*k5*k6}function ad(k5,k6){return k5*k5*k5*k6}function iF(k5,k9,k8,k7,k6){return aj(k5,k9)+ah(k5,k8)+ag(k5,k7)+ad(k5,k6)}function bb(k5,k8,k7,k6){dT.call(this);this.type="CubicBezierCurve";this.v0=k5||new bg();this.v1=k8||new bg();this.v2=k7||new bg();this.v3=k6||new bg()}bb.prototype=Object.create(dT.prototype);bb.prototype.constructor=bb;bb.prototype.isCubicBezierCurve=true;bb.prototype.getPoint=function(k8,k7){var k6=k7||new bg();var k5=this.v0,lb=this.v1,la=this.v2,k9=this.v3;k6.set(iF(k8,k5.x,lb.x,la.x,k9.x),iF(k8,k5.y,lb.y,la.y,k9.y));return k6};bb.prototype.copy=function(k5){dT.prototype.copy.call(this,k5);this.v0.copy(k5.v0);this.v1.copy(k5.v1);this.v2.copy(k5.v2);this.v3.copy(k5.v3);return this};bb.prototype.toJSON=function(){var k5=dT.prototype.toJSON.call(this);k5.v0=this.v0.toArray();k5.v1=this.v1.toArray();k5.v2=this.v2.toArray();k5.v3=this.v3.toArray();return k5};bb.prototype.fromJSON=function(k5){dT.prototype.fromJSON.call(this,k5);this.v0.fromArray(k5.v0);this.v1.fromArray(k5.v1);this.v2.fromArray(k5.v2);this.v3.fromArray(k5.v3);return this};function dW(k5,k8,k7,k6){dT.call(this);this.type="CubicBezierCurve3";this.v0=k5||new bf();this.v1=k8||new bf();this.v2=k7||new bf();this.v3=k6||new bf()}dW.prototype=Object.create(dT.prototype);dW.prototype.constructor=dW;dW.prototype.isCubicBezierCurve3=true;dW.prototype.getPoint=function(k8,k7){var k6=k7||new bf();var k5=this.v0,lb=this.v1,la=this.v2,k9=this.v3;k6.set(iF(k8,k5.x,lb.x,la.x,k9.x),iF(k8,k5.y,lb.y,la.y,k9.y),iF(k8,k5.z,lb.z,la.z,k9.z));return k6};dW.prototype.copy=function(k5){dT.prototype.copy.call(this,k5);this.v0.copy(k5.v0);this.v1.copy(k5.v1);this.v2.copy(k5.v2);this.v3.copy(k5.v3);return this};dW.prototype.toJSON=function(){var k5=dT.prototype.toJSON.call(this);k5.v0=this.v0.toArray();k5.v1=this.v1.toArray();k5.v2=this.v2.toArray();k5.v3=this.v3.toArray();return k5};dW.prototype.fromJSON=function(k5){dT.prototype.fromJSON.call(this,k5);this.v0.fromArray(k5.v0);this.v1.fromArray(k5.v1);this.v2.fromArray(k5.v2);this.v3.fromArray(k5.v3);return this};function jR(k6,k5){dT.call(this);this.type="LineCurve";this.v1=k6||new bg();this.v2=k5||new bg()}jR.prototype=Object.create(dT.prototype);jR.prototype.constructor=jR;jR.prototype.isLineCurve=true;jR.prototype.getPoint=function(k7,k6){var k5=k6||new bg();if(k7===1){k5.copy(this.v2)}else{k5.copy(this.v2).sub(this.v1);k5.multiplyScalar(k7).add(this.v1)}return k5};jR.prototype.getPointAt=function(k5,k6){return this.getPoint(k5,k6)};jR.prototype.getTangent=function(){var k5=this.v2.clone().sub(this.v1);return k5.normalize()};jR.prototype.copy=function(k5){dT.prototype.copy.call(this,k5);this.v1.copy(k5.v1);this.v2.copy(k5.v2);return this};jR.prototype.toJSON=function(){var k5=dT.prototype.toJSON.call(this);k5.v1=this.v1.toArray();k5.v2=this.v2.toArray();return k5};jR.prototype.fromJSON=function(k5){dT.prototype.fromJSON.call(this,k5);this.v1.fromArray(k5.v1);this.v2.fromArray(k5.v2);return this};function bJ(k6,k5){dT.call(this);this.type="LineCurve3";this.v1=k6||new bf();this.v2=k5||new bf()}bJ.prototype=Object.create(dT.prototype);bJ.prototype.constructor=bJ;bJ.prototype.isLineCurve3=true;bJ.prototype.getPoint=function(k7,k6){var k5=k6||new bf();if(k7===1){k5.copy(this.v2)}else{k5.copy(this.v2).sub(this.v1);k5.multiplyScalar(k7).add(this.v1)}return k5};bJ.prototype.getPointAt=function(k5,k6){return this.getPoint(k5,k6)};bJ.prototype.copy=function(k5){dT.prototype.copy.call(this,k5);this.v1.copy(k5.v1);this.v2.copy(k5.v2);return this};bJ.prototype.toJSON=function(){var k5=dT.prototype.toJSON.call(this);k5.v1=this.v1.toArray();k5.v2=this.v2.toArray();return k5};bJ.prototype.fromJSON=function(k5){dT.prototype.fromJSON.call(this,k5);this.v1.fromArray(k5.v1);this.v2.fromArray(k5.v2);return this};function bo(k5,k7,k6){dT.call(this);this.type="QuadraticBezierCurve";this.v0=k5||new bg();this.v1=k7||new bg();this.v2=k6||new bg()}bo.prototype=Object.create(dT.prototype);bo.prototype.constructor=bo;bo.prototype.isQuadraticBezierCurve=true;bo.prototype.getPoint=function(k8,k7){var k6=k7||new bg();var k5=this.v0,la=this.v1,k9=this.v2;k6.set(iX(k8,k5.x,la.x,k9.x),iX(k8,k5.y,la.y,k9.y));return k6};bo.prototype.copy=function(k5){dT.prototype.copy.call(this,k5);this.v0.copy(k5.v0);this.v1.copy(k5.v1);this.v2.copy(k5.v2);return this};bo.prototype.toJSON=function(){var k5=dT.prototype.toJSON.call(this);k5.v0=this.v0.toArray();k5.v1=this.v1.toArray();k5.v2=this.v2.toArray();return k5};bo.prototype.fromJSON=function(k5){dT.prototype.fromJSON.call(this,k5);this.v0.fromArray(k5.v0);this.v1.fromArray(k5.v1);this.v2.fromArray(k5.v2);return this};function ga(k5,k7,k6){dT.call(this);this.type="QuadraticBezierCurve3";this.v0=k5||new bf();this.v1=k7||new bf();this.v2=k6||new bf()}ga.prototype=Object.create(dT.prototype);ga.prototype.constructor=ga;ga.prototype.isQuadraticBezierCurve3=true;ga.prototype.getPoint=function(k8,k7){var k6=k7||new bf();var k5=this.v0,la=this.v1,k9=this.v2;k6.set(iX(k8,k5.x,la.x,k9.x),iX(k8,k5.y,la.y,k9.y),iX(k8,k5.z,la.z,k9.z));return k6};ga.prototype.copy=function(k5){dT.prototype.copy.call(this,k5);this.v0.copy(k5.v0);this.v1.copy(k5.v1);this.v2.copy(k5.v2);return this};ga.prototype.toJSON=function(){var k5=dT.prototype.toJSON.call(this);k5.v0=this.v0.toArray();k5.v1=this.v1.toArray();k5.v2=this.v2.toArray();return k5};ga.prototype.fromJSON=function(k5){dT.prototype.fromJSON.call(this,k5);this.v0.fromArray(k5.v0);this.v1.fromArray(k5.v1);this.v2.fromArray(k5.v2);return this};function cq(k5){dT.call(this);this.type="SplineCurve";this.points=k5||[]}cq.prototype=Object.create(dT.prototype);cq.prototype.constructor=cq;cq.prototype.isSplineCurve=true;cq.prototype.getPoint=function(le,lf){var k9=lf||new bg();var lb=this.points;var k6=(lb.length-1)*le;var k5=Math.floor(k6);var k7=k6-k5;var ld=lb[k5===0?k5:k5-1];var lc=lb[k5];var la=lb[k5>lb.length-2?lb.length-1:k5+1];var k8=lb[k5>lb.length-3?lb.length-1:k5+2];k9.set(ie(k7,ld.x,lc.x,la.x,k8.x),ie(k7,ld.y,lc.y,la.y,k8.y));return k9};cq.prototype.copy=function(k8){dT.prototype.copy.call(this,k8);this.points=[];for(var k7=0,k6=k8.points.length;k7<k6;k7++){var k5=k8.points[k7];this.points.push(k5.clone())}return this};cq.prototype.toJSON=function(){var k8=dT.prototype.toJSON.call(this);k8.points=[];for(var k7=0,k6=this.points.length;k7<k6;k7++){var k5=this.points[k7];k8.points.push(k5.toArray())}return k8};cq.prototype.fromJSON=function(k8){dT.prototype.fromJSON.call(this,k8);this.points=[];for(var k7=0,k6=k8.points.length;k7<k6;k7++){var k5=k8.points[k7];this.points.push(new bg().fromArray(k5))}return this};var bI=Object.freeze({ArcCurve:dy,CatmullRomCurve3:jP,CubicBezierCurve:bb,CubicBezierCurve3:dW,EllipseCurve:dQ,LineCurve:jR,LineCurve3:bJ,QuadraticBezierCurve:bo,QuadraticBezierCurve3:ga,SplineCurve:cq});function bl(){dT.call(this);this.type="CurvePath";this.curves=[];this.autoClose=false}bl.prototype=Object.assign(Object.create(dT.prototype),{constructor:bl,add:function(k5){this.curves.push(k5)},closePath:function(){var k6=this.curves[0].getPoint(0);var k5=this.curves[this.curves.length-1].getPoint(1);if(!k6.equals(k5)){this.curves.push(new jR(k5,k6))}},getPoint:function(k7){var lc=k7*this.getLength();var lb=this.getCurveLengths();var k6=0;while(k6<lb.length){if(lb[k6]>=lc){var k9=lb[k6]-lc;var la=this.curves[k6];var k8=la.getLength();var k5=k8===0?0:1-k9/k8;return la.getPointAt(k5)}k6++}return null},getLength:function(){var k5=this.getCurveLengths();return k5[k5.length-1]},updateArcLengths:function(){this.needsUpdate=true;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length){return this.cacheLengths}var k8=[],k7=0;for(var k6=0,k5=this.curves.length;k6<k5;k6++){k7+=this.curves[k6].getLength();k8.push(k7)}this.cacheLengths=k8;return k8},getSpacedPoints:function(k6){if(k6===undefined){k6=40}var k7=[];for(var k5=0;k5<=k6;k5++){k7.push(this.getPoint(k5/k6))}if(this.autoClose){k7.push(k7[0])}return k7},getPoints:function(k5){k5=k5||12;var lc=[],lb;for(var k9=0,ld=this.curves;k9<ld.length;k9++){var k6=ld[k9];var k7=(k6&&k6.isEllipseCurve)?k5*2:(k6&&(k6.isLineCurve||k6.isLineCurve3))?1:(k6&&k6.isSplineCurve)?k5*k6.points.length:k5;var le=k6.getPoints(k7);for(var k8=0;k8<le.length;k8++){var la=le[k8];if(lb&&lb.equals(la)){continue}lc.push(la);lb=la}}if(this.autoClose&&lc.length>1&&!lc[lc.length-1].equals(lc[0])){lc.push(lc[0])}return lc},copy:function(k7){dT.prototype.copy.call(this,k7);this.curves=[];for(var k6=0,k5=k7.curves.length;k6<k5;k6++){var k8=k7.curves[k6];this.curves.push(k8.clone())}this.autoClose=k7.autoClose;return this},toJSON:function(){var k7=dT.prototype.toJSON.call(this);k7.autoClose=this.autoClose;k7.curves=[];for(var k6=0,k5=this.curves.length;k6<k5;k6++){var k8=this.curves[k6];k7.curves.push(k8.toJSON())}return k7},fromJSON:function(k7){dT.prototype.fromJSON.call(this,k7);this.autoClose=k7.autoClose;this.curves=[];for(var k6=0,k5=k7.curves.length;k6<k5;k6++){var k8=k7.curves[k6];this.curves.push(new bI[k8.type]().fromJSON(k8))}return this}});function b1(k5){bl.call(this);this.type="Path";this.currentPoint=new bg();if(k5){this.setFromPoints(k5)}}b1.prototype=Object.assign(Object.create(bl.prototype),{constructor:b1,setFromPoints:function(k7){this.moveTo(k7[0].x,k7[0].y);for(var k6=1,k5=k7.length;k6<k5;k6++){this.lineTo(k7[k6].x,k7[k6].y)}},moveTo:function(k5,k6){this.currentPoint.set(k5,k6)},lineTo:function(k5,k7){var k6=new jR(this.currentPoint.clone(),new bg(k5,k7));this.curves.push(k6);this.currentPoint.set(k5,k7)},quadraticCurveTo:function(k8,k7,k6,k5){var k9=new bo(this.currentPoint.clone(),new bg(k8,k7),new bg(k6,k5));this.curves.push(k9);this.currentPoint.set(k6,k5)},bezierCurveTo:function(k7,k5,la,k9,k8,k6){var lb=new bb(this.currentPoint.clone(),new bg(k7,k5),new bg(la,k9),new bg(k8,k6));this.curves.push(lb);this.currentPoint.set(k8,k6)},splineThru:function(k7){var k6=[this.currentPoint.clone()].concat(k7);var k5=new cq(k6);this.curves.push(k5);this.currentPoint.copy(k7[k7.length-1])},arc:function(lb,k9,lc,k8,k7,k6){var k5=this.currentPoint.x;var la=this.currentPoint.y;this.absarc(lb+k5,k9+la,lc,k8,k7,k6)},absarc:function(k9,k8,la,k7,k6,k5){this.absellipse(k9,k8,la,la,k7,k6,k5)},ellipse:function(la,k9,lc,lb,k7,k5,k6,le){var k8=this.currentPoint.x;var ld=this.currentPoint.y;this.absellipse(la+k8,k9+ld,lc,lb,k7,k5,k6,le)},absellipse:function(lb,la,le,lc,k7,k5,k6,lf){var k8=new dQ(lb,la,le,lc,k7,k5,k6,lf);if(this.curves.length>0){var k9=k8.getPoint(0);if(!k9.equals(this.currentPoint)){this.lineTo(k9.x,k9.y)}}this.curves.push(k8);var ld=k8.getPoint(1);this.currentPoint.copy(ld)},copy:function(k5){bl.prototype.copy.call(this,k5);this.currentPoint.copy(k5.currentPoint);return this},toJSON:function(){var k5=bl.prototype.toJSON.call(this);k5.currentPoint=this.currentPoint.toArray();return k5},fromJSON:function(k5){bl.prototype.fromJSON.call(this,k5);this.currentPoint.fromArray(k5.currentPoint);return this}});function bL(k5){b1.call(this,k5);this.uuid=dY.generateUUID();this.type="Shape";this.holes=[]}bL.prototype=Object.assign(Object.create(b1.prototype),{constructor:bL,getPointsHoles:function(k7){var k8=[];for(var k6=0,k5=this.holes.length;k6<k5;k6++){k8[k6]=this.holes[k6].getPoints(k7)}return k8},extractPoints:function(k5){return{shape:this.getPoints(k5),holes:this.getPointsHoles(k5)}},copy:function(k8){b1.prototype.copy.call(this,k8);this.holes=[];for(var k6=0,k5=k8.holes.length;k6<k5;k6++){var k7=k8.holes[k6];this.holes.push(k7.clone())}return this},toJSON:function(){var k8=b1.prototype.toJSON.call(this);k8.uuid=this.uuid;k8.holes=[];for(var k6=0,k5=this.holes.length;k6<k5;k6++){var k7=this.holes[k6];k8.holes.push(k7.toJSON())}return k8},fromJSON:function(k7){b1.prototype.fromJSON.call(this,k7);this.uuid=k7.uuid;this.holes=[];for(var k6=0,k5=k7.holes.length;k6<k5;k6++){var k8=k7.holes[k6];this.holes.push(new b1().fromJSON(k8))}return this}});function hj(k6,k5){fg.call(this);this.type="Light";this.color=new id(k6);this.intensity=k5!==undefined?k5:1;this.receiveShadow=undefined}hj.prototype=Object.assign(Object.create(fg.prototype),{constructor:hj,isLight:true,copy:function(k5){fg.prototype.copy.call(this,k5);this.color.copy(k5.color);this.intensity=k5.intensity;return this},toJSON:function(k6){var k5=fg.prototype.toJSON.call(this,k6);k5.object.color=this.color.getHex();k5.object.intensity=this.intensity;if(this.groundColor!==undefined){k5.object.groundColor=this.groundColor.getHex()}if(this.distance!==undefined){k5.object.distance=this.distance}if(this.angle!==undefined){k5.object.angle=this.angle}if(this.decay!==undefined){k5.object.decay=this.decay}if(this.penumbra!==undefined){k5.object.penumbra=this.penumbra}if(this.shadow!==undefined){k5.object.shadow=this.shadow.toJSON()}return k5}});function e4(k6,k7,k5){hj.call(this,k6,k5);this.type="HemisphereLight";this.castShadow=undefined;this.position.copy(fg.DefaultUp);this.updateMatrix();this.groundColor=new id(k7)}e4.prototype=Object.assign(Object.create(hj.prototype),{constructor:e4,isHemisphereLight:true,copy:function(k5){hj.prototype.copy.call(this,k5);this.groundColor.copy(k5.groundColor);return this}});function cg(k5){this.camera=k5;this.bias=0;this.radius=1;this.mapSize=new bg(512,512);this.map=null;this.matrix=new fv()}Object.assign(cg.prototype,{copy:function(k5){this.camera=k5.camera.clone();this.bias=k5.bias;this.radius=k5.radius;this.mapSize.copy(k5.mapSize);return this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var k5={};if(this.bias!==0){k5.bias=this.bias}if(this.radius!==1){k5.radius=this.radius}if(this.mapSize.x!==512||this.mapSize.y!==512){k5.mapSize=this.mapSize.toArray()}k5.camera=this.camera.toJSON(false).object;delete k5.camera.matrix;return k5}});function gJ(){cg.call(this,new kR(50,1,0.5,500))}gJ.prototype=Object.assign(Object.create(cg.prototype),{constructor:gJ,isSpotLightShadow:true,update:function(k6){var k9=this.camera;var k8=dY.RAD2DEG*2*k6.angle;var k7=this.mapSize.width/this.mapSize.height;var k5=k6.distance||k9.far;if(k8!==k9.fov||k7!==k9.aspect||k5!==k9.far){k9.fov=k8;k9.aspect=k7;k9.far=k5;k9.updateProjectionMatrix()}}});function cf(k6,k5,la,k9,k8,k7){hj.call(this,k6,k5);this.type="SpotLight";this.position.copy(fg.DefaultUp);this.updateMatrix();this.target=new fg();Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(lb){this.intensity=lb/Math.PI}});this.distance=(la!==undefined)?la:0;this.angle=(k9!==undefined)?k9:Math.PI/3;this.penumbra=(k8!==undefined)?k8:0;this.decay=(k7!==undefined)?k7:1;this.shadow=new gJ()}cf.prototype=Object.assign(Object.create(hj.prototype),{constructor:cf,isSpotLight:true,copy:function(k5){hj.prototype.copy.call(this,k5);this.distance=k5.distance;this.angle=k5.angle;this.penumbra=k5.penumbra;this.decay=k5.decay;this.target=k5.target.clone();this.shadow=k5.shadow.clone();return this}});function j6(k6,k5,k8,k7){hj.call(this,k6,k5);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(k9){this.intensity=k9/(4*Math.PI)}});this.distance=(k8!==undefined)?k8:0;this.decay=(k7!==undefined)?k7:1;this.shadow=new cg(new kR(90,1,0.5,500))}j6.prototype=Object.assign(Object.create(hj.prototype),{constructor:j6,isPointLight:true,copy:function(k5){hj.prototype.copy.call(this,k5);this.distance=k5.distance;this.decay=k5.decay;this.shadow=k5.shadow.clone();return this}});function gs(la,k7,k9,k6,k8,k5){eI.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=(la!==undefined)?la:-1;this.right=(k7!==undefined)?k7:1;this.top=(k9!==undefined)?k9:1;this.bottom=(k6!==undefined)?k6:-1;this.near=(k8!==undefined)?k8:0.1;this.far=(k5!==undefined)?k5:2000;this.updateProjectionMatrix()}gs.prototype=Object.assign(Object.create(eI.prototype),{constructor:gs,isOrthographicCamera:true,copy:function(k6,k5){eI.prototype.copy.call(this,k6,k5);this.left=k6.left;this.right=k6.right;this.top=k6.top;this.bottom=k6.bottom;this.near=k6.near;this.far=k6.far;this.zoom=k6.zoom;this.view=k6.view===null?null:Object.assign({},k6.view);return this},setViewOffset:function(k9,k7,k6,la,k8,k5){if(this.view===null){this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}}this.view.enabled=true;this.view.fullWidth=k9;this.view.fullHeight=k7;this.view.offsetX=k6;this.view.offsetY=la;this.view.width=k8;this.view.height=k5;this.updateProjectionMatrix()},clearViewOffset:function(){if(this.view!==null){this.view.enabled=false}this.updateProjectionMatrix()},updateProjectionMatrix:function(){var lg=(this.right-this.left)/(2*this.zoom);var lf=(this.top-this.bottom)/(2*this.zoom);var k8=(this.right+this.left)/2;var k7=(this.top+this.bottom)/2;var k6=k8-lg;var ld=k8+lg;var lb=k7+lf;var k5=k7-lf;if(this.view!==null&&this.view.enabled){var lc=this.zoom/(this.view.width/this.view.fullWidth);var k9=this.zoom/(this.view.height/this.view.fullHeight);var le=(this.right-this.left)/this.view.width;var la=(this.top-this.bottom)/this.view.height;k6+=le*(this.view.offsetX/lc);ld=k6+le*(this.view.width/lc);lb-=la*(this.view.offsetY/k9);k5=lb-la*(this.view.height/k9)}this.projectionMatrix.makeOrthographic(k6,ld,lb,k5,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(k6){var k5=fg.prototype.toJSON.call(this,k6);k5.object.zoom=this.zoom;k5.object.left=this.left;k5.object.right=this.right;k5.object.top=this.top;k5.object.bottom=this.bottom;k5.object.near=this.near;k5.object.far=this.far;if(this.view!==null){k5.object.view=Object.assign({},this.view)}return k5}});function af(){cg.call(this,new gs(-5,5,5,-5,0.5,500))}af.prototype=Object.assign(Object.create(cg.prototype),{constructor:af});function hY(k6,k5){hj.call(this,k6,k5);this.type="DirectionalLight";this.position.copy(fg.DefaultUp);this.updateMatrix();this.target=new fg();this.shadow=new af()}hY.prototype=Object.assign(Object.create(hj.prototype),{constructor:hY,isDirectionalLight:true,copy:function(k5){hj.prototype.copy.call(this,k5);this.target=k5.target.clone();this.shadow=k5.shadow.clone();return this}});function dz(k6,k5){hj.call(this,k6,k5);this.type="AmbientLight";this.castShadow=undefined}dz.prototype=Object.assign(Object.create(hj.prototype),{constructor:dz,isAmbientLight:true});function d1(k7,k6,k8,k5){hj.call(this,k7,k6);this.type="RectAreaLight";this.width=(k8!==undefined)?k8:10;this.height=(k5!==undefined)?k5:10}d1.prototype=Object.assign(Object.create(hj.prototype),{constructor:d1,isRectAreaLight:true,copy:function(k5){hj.prototype.copy.call(this,k5);this.width=k5.width;this.height=k5.height;return this},toJSON:function(k6){var k5=hj.prototype.toJSON.call(this,k6);k5.object.width=this.width;k5.object.height=this.height;return k5}});function aH(k5){this.manager=(k5!==undefined)?k5:jh;this.textures={}}Object.assign(aH.prototype,{load:function(k6,k8,la,k9){var k7=this;var k5=new fC(k7.manager);k5.setPath(k7.path);k5.load(k6,function(lb){k8(k7.parse(JSON.parse(lb)))},la,k9)},parse:function(la){var k6=this.textures;function lc(ld){if(k6[ld]===undefined){a.Logger.log(a.Logger.WARNING,"THREE.MaterialLoader: Undefined texture",ld)}return k6[ld]}var lb=new cG[la.type]();if(la.uuid!==undefined){lb.uuid=la.uuid}if(la.name!==undefined){lb.name=la.name}if(la.color!==undefined){lb.color.setHex(la.color)}if(la.roughness!==undefined){lb.roughness=la.roughness}if(la.metalness!==undefined){lb.metalness=la.metalness}if(la.emissive!==undefined){lb.emissive.setHex(la.emissive)}if(la.specular!==undefined){lb.specular.setHex(la.specular)}if(la.shininess!==undefined){lb.shininess=la.shininess}if(la.clearCoat!==undefined){lb.clearCoat=la.clearCoat}if(la.clearCoatRoughness!==undefined){lb.clearCoatRoughness=la.clearCoatRoughness}if(la.vertexColors!==undefined){lb.vertexColors=la.vertexColors}if(la.fog!==undefined){lb.fog=la.fog}if(la.flatShading!==undefined){lb.flatShading=la.flatShading}if(la.blending!==undefined){lb.blending=la.blending}if(la.combine!==undefined){lb.combine=la.combine}if(la.side!==undefined){lb.side=la.side}if(la.opacity!==undefined){lb.opacity=la.opacity}if(la.transparent!==undefined){lb.transparent=la.transparent}if(la.alphaTest!==undefined){lb.alphaTest=la.alphaTest}if(la.depthTest!==undefined){lb.depthTest=la.depthTest}if(la.depthWrite!==undefined){lb.depthWrite=la.depthWrite}if(la.colorWrite!==undefined){lb.colorWrite=la.colorWrite}if(la.wireframe!==undefined){lb.wireframe=la.wireframe}if(la.wireframeLinewidth!==undefined){lb.wireframeLinewidth=la.wireframeLinewidth}if(la.wireframeLinecap!==undefined){lb.wireframeLinecap=la.wireframeLinecap}if(la.wireframeLinejoin!==undefined){lb.wireframeLinejoin=la.wireframeLinejoin}if(la.rotation!==undefined){lb.rotation=la.rotation}if(la.linewidth!==1){lb.linewidth=la.linewidth}if(la.dashSize!==undefined){lb.dashSize=la.dashSize}if(la.gapSize!==undefined){lb.gapSize=la.gapSize}if(la.scale!==undefined){lb.scale=la.scale}if(la.polygonOffset!==undefined){lb.polygonOffset=la.polygonOffset}if(la.polygonOffsetFactor!==undefined){lb.polygonOffsetFactor=la.polygonOffsetFactor}if(la.polygonOffsetUnits!==undefined){lb.polygonOffsetUnits=la.polygonOffsetUnits}if(la.skinning!==undefined){lb.skinning=la.skinning}if(la.morphTargets!==undefined){lb.morphTargets=la.morphTargets}if(la.dithering!==undefined){lb.dithering=la.dithering}if(la.visible!==undefined){lb.visible=la.visible}if(la.userData!==undefined){lb.userData=la.userData}if(la.uniforms!==undefined){for(var k8 in la.uniforms){var k5=la.uniforms[k8];lb.uniforms[k8]={};switch(k5.type){case"t":lb.uniforms[k8].value=lc(k5.value);break;case"c":lb.uniforms[k8].value=new id().setHex(k5.value);break;case"v2":lb.uniforms[k8].value=new bg().fromArray(k5.value);break;case"v3":lb.uniforms[k8].value=new bf().fromArray(k5.value);break;case"v4":lb.uniforms[k8].value=new bd().fromArray(k5.value);break;case"m3":lb.uniforms[k8].value=new fw().fromArray(k5.value);case"m4":lb.uniforms[k8].value=new fv().fromArray(k5.value);break;default:lb.uniforms[k8].value=k5.value}}}if(la.defines!==undefined){lb.defines=la.defines}if(la.vertexShader!==undefined){lb.vertexShader=la.vertexShader}if(la.fragmentShader!==undefined){lb.fragmentShader=la.fragmentShader}if(la.extensions!==undefined){for(var k9 in la.extensions){lb.extensions[k9]=la.extensions[k9]}}if(la.shading!==undefined){lb.flatShading=la.shading===1}if(la.size!==undefined){lb.size=la.size}if(la.sizeAttenuation!==undefined){lb.sizeAttenuation=la.sizeAttenuation}if(la.map!==undefined){lb.map=lc(la.map)}if(la.alphaMap!==undefined){lb.alphaMap=lc(la.alphaMap);lb.transparent=true}if(la.bumpMap!==undefined){lb.bumpMap=lc(la.bumpMap)}if(la.bumpScale!==undefined){lb.bumpScale=la.bumpScale}if(la.normalMap!==undefined){lb.normalMap=lc(la.normalMap)}if(la.normalMapType!==undefined){lb.normalMapType=la.normalMapType}if(la.normalScale!==undefined){var k7=la.normalScale;if(Array.isArray(k7)===false){k7=[k7,k7]}lb.normalScale=new bg().fromArray(k7)}if(la.displacementMap!==undefined){lb.displacementMap=lc(la.displacementMap)}if(la.displacementScale!==undefined){lb.displacementScale=la.displacementScale}if(la.displacementBias!==undefined){lb.displacementBias=la.displacementBias}if(la.roughnessMap!==undefined){lb.roughnessMap=lc(la.roughnessMap)}if(la.metalnessMap!==undefined){lb.metalnessMap=lc(la.metalnessMap)}if(la.emissiveMap!==undefined){lb.emissiveMap=lc(la.emissiveMap)}if(la.emissiveIntensity!==undefined){lb.emissiveIntensity=la.emissiveIntensity}if(la.specularMap!==undefined){lb.specularMap=lc(la.specularMap)}if(la.envMap!==undefined){lb.envMap=lc(la.envMap)}if(la.envMapIntensity!==undefined){lb.envMapIntensity=la.envMapIntensity}if(la.reflectivity!==undefined){lb.reflectivity=la.reflectivity}if(la.lightMap!==undefined){lb.lightMap=lc(la.lightMap)}if(la.lightMapIntensity!==undefined){lb.lightMapIntensity=la.lightMapIntensity}if(la.aoMap!==undefined){lb.aoMap=lc(la.aoMap)}if(la.aoMapIntensity!==undefined){lb.aoMapIntensity=la.aoMapIntensity}if(la.gradientMap!==undefined){lb.gradientMap=lc(la.gradientMap)}return lb},setPath:function(k5){this.path=k5;return this},setTextures:function(k5){this.textures=k5;return this}});var ji={decodeText:function(k8){if(typeof TextDecoder!=="undefined"){return new TextDecoder().decode(k8)}var k7="";for(var k6=0,k5=k8.length;k6<k5;k6++){k7+=String.fromCharCode(k8[k6])}return decodeURIComponent(escape(k7))},extractUrlBase:function(k6){var k5=k6.lastIndexOf("/");if(k5===-1){return"./"}return k6.substr(0,k5+1)}};function ir(k5){this.manager=(k5!==undefined)?k5:jh}Object.assign(ir.prototype,{load:function(k6,k8,la,k9){var k7=this;var k5=new fC(k7.manager);k5.setPath(k7.path);k5.load(k6,function(lb){k8(k7.parse(JSON.parse(lb)))},la,k9)},parse:function(li){var k5=new cl();var k6=li.data.index;if(k6!==undefined){var la=new a0[k6.type](k6.array);k5.setIndex(new gy(la,1))}var lb=li.data.attributes;for(var lm in lb){var le=lb[lm];var la=new a0[le.type](le.array);var lh=new gy(la,le.itemSize,le.normalized);if(le.name!==undefined){lh.name=le.name}k5.addAttribute(lm,lh)}var k8=li.data.morphAttributes;if(k8){for(var lm in k8){var ll=k8[lm];var k7=[];for(var lg=0,ld=ll.length;lg<ld;lg++){var le=ll[lg];var la=new a0[le.type](le.array);var lh=new gy(la,le.itemSize,le.normalized);if(le.name!==undefined){lh.name=le.name}k7.push(lh)}k5.morphAttributes[lm]=k7}}var lj=li.data.groups||li.data.drawcalls||li.data.offsets;if(lj!==undefined){for(var lg=0,lf=lj.length;lg!==lf;++lg){var k9=lj[lg];k5.addGroup(k9.start,k9.count,k9.materialIndex)}}var lc=li.data.boundingSphere;if(lc!==undefined){var lk=new bf();if(lc.center!==undefined){lk.fromArray(lc.center)}k5.boundingSphere=new d0(lk,lc.radius)}if(li.name){k5.name=li.name}if(li.userData){k5.userData=li.userData}return k5},setPath:function(k5){this.path=k5;return this}});var a0={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!=="undefined"?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function eC(k5){this.manager=(k5!==undefined)?k5:jh;this.resourcePath=""}Object.assign(eC.prototype,{crossOrigin:"anonymous",load:function(k6,k8,lb,k9){var k7=this;var la=(this.path===undefined)?ji.extractUrlBase(k6):this.path;this.resourcePath=this.resourcePath||la;var k5=new fC(k7.manager);k5.setPath(this.path);k5.load(k6,function(lf){var le=null;try{le=JSON.parse(lf)}catch(lc){if(k9!==undefined){k9(lc)}a.Logger.log(a.Logger.SEVERE,"THREE:ObjectLoader: Can't parse "+k6+".",lc.message);return}var ld=le.metadata;if(ld===undefined||ld.type===undefined||ld.type.toLowerCase()==="geometry"){a.Logger.log(a.Logger.SEVERE,"THREE.ObjectLoader: Can't load "+k6);return}k7.parse(le,k8)},lb,k9)},setPath:function(k5){this.path=k5;return this},setResourcePath:function(k5){this.resourcePath=k5;return this},setCrossOrigin:function(k5){this.crossOrigin=k5;return this},parse:function(la,lc){var k8=this.parseShape(la.shapes);var lb=this.parseGeometries(la.geometries,k8);var k6=this.parseImages(la.images,function(){if(lc!==undefined){lc(k9)}});var k5=this.parseTextures(la.textures,k6);var k7=this.parseMaterials(la.materials,k5);var k9=this.parseObject(la.object,lb,k7);if(la.animations){k9.animations=this.parseAnimations(la.animations)}if(la.images===undefined||la.images.length===0){if(lc!==undefined){lc(k9)}}return k9},parseShape:function(k9){var k6={};if(k9!==undefined){for(var k8=0,k5=k9.length;k8<k5;k8++){var k7=new bL().fromJSON(k9[k8]);k6[k7.uuid]=k7}}return k6},parseGeometries:function(li,k5){var k6={};if(li!==undefined){var k7=new ir();for(var ld=0,k8=li.length;ld<k8;ld++){var lg;var lc=li[ld];switch(lc.type){case"PlaneGeometry":case"PlaneBufferGeometry":lg=new ds[lc.type](lc.width,lc.height,lc.widthSegments,lc.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":lg=new ds[lc.type](lc.width,lc.height,lc.depth,lc.widthSegments,lc.heightSegments,lc.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":lg=new ds[lc.type](lc.radius,lc.segments,lc.thetaStart,lc.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":lg=new ds[lc.type](lc.radiusTop,lc.radiusBottom,lc.height,lc.radialSegments,lc.heightSegments,lc.openEnded,lc.thetaStart,lc.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":lg=new ds[lc.type](lc.radius,lc.height,lc.radialSegments,lc.heightSegments,lc.openEnded,lc.thetaStart,lc.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":lg=new ds[lc.type](lc.radius,lc.widthSegments,lc.heightSegments,lc.phiStart,lc.phiLength,lc.thetaStart,lc.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":lg=new ds[lc.type](lc.radius,lc.detail);break;case"RingGeometry":case"RingBufferGeometry":lg=new ds[lc.type](lc.innerRadius,lc.outerRadius,lc.thetaSegments,lc.phiSegments,lc.thetaStart,lc.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":lg=new ds[lc.type](lc.radius,lc.tube,lc.radialSegments,lc.tubularSegments,lc.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":lg=new ds[lc.type](lc.radius,lc.tube,lc.tubularSegments,lc.radialSegments,lc.p,lc.q);break;case"TubeGeometry":case"TubeBufferGeometry":lg=new ds[lc.type](new bI[lc.path.type]().fromJSON(lc.path),lc.tubularSegments,lc.radius,lc.radialSegments,lc.closed);break;case"LatheGeometry":case"LatheBufferGeometry":lg=new ds[lc.type](lc.points,lc.segments,lc.phiStart,lc.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":lg=new ds[lc.type](lc.vertices,lc.indices,lc.radius,lc.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":var lh=[];for(var la=0,lb=lc.shapes.length;la<lb;la++){var le=k5[lc.shapes[la]];lh.push(le)}lg=new ds[lc.type](lh,lc.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":var lh=[];for(var la=0,lb=lc.shapes.length;la<lb;la++){var le=k5[lc.shapes[la]];lh.push(le)}var k9=lc.options.extrudePath;if(k9!==undefined){lc.options.extrudePath=new bI[k9.type]().fromJSON(k9)}lg=new ds[lc.type](lh,lc.options);break;case"BufferGeometry":lg=k7.parse(lc);break;case"Geometry":if("THREE" in window&&"LegacyJSONLoader" in THREE){var lf=new THREE.LegacyJSONLoader();lg=lf.parse(lc,this.resourcePath).geometry}else{a.Logger.log(a.Logger.SEVERE,'THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".')}break;default:a.Logger.log(a.Logger.WARNING,'THREE.ObjectLoader: Unsupported geometry type "'+lc.type+'"');continue}lg.uuid=lc.uuid;if(lc.name!==undefined){lg.name=lc.name}if(lg.isBufferGeometry===true&&lc.userData!==undefined){lg.userData=lc.userData}k6[lc.uuid]=lg}}return k6},parseMaterials:function(lf,lc){var k5={};var le={};if(lf!==undefined){var ld=new aH();ld.setTextures(lc);for(var k9=0,k6=lf.length;k9<k6;k9++){var k8=lf[k9];if(k8.type==="MultiMaterial"){var lb=[];for(var k7=0;k7<k8.materials.length;k7++){var la=k8.materials[k7];if(k5[la.uuid]===undefined){k5[la.uuid]=ld.parse(la)}lb.push(k5[la.uuid])}le[k8.uuid]=lb}else{if(k5[k8.uuid]===undefined){k5[k8.uuid]=ld.parse(k8)}le[k8.uuid]=k5[k8.uuid]}}}return le},parseAnimations:function(k6){var k9=[];for(var k5=0;k5<k6.length;k5++){var k8=k6[k5];var k7=bA.parse(k8);if(k8.uuid!==undefined){k7.uuid=k8.uuid}k9.push(k7)}return k9},parseImages:function(li,lc){var lh=this;var ld={};function k6(lk){lh.manager.itemStart(lk);return lf.load(lk,function(){lh.manager.itemEnd(lk)},undefined,function(){lh.manager.itemError(lk);lh.manager.itemEnd(lk)})}if(li!==undefined&&li.length>0){var k8=new hk(lc);var lf=new h7(k8);lf.setCrossOrigin(this.crossOrigin);for(var lb=0,le=li.length;lb<le;lb++){var k7=li[lb];var k5=k7.url;if(Array.isArray(k5)){ld[k7.uuid]=[];for(var k9=0,la=k5.length;k9<la;k9++){var lg=k5[k9];var lj=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(lg)?lg:lh.resourcePath+lg;ld[k7.uuid].push(k6(lj))}}else{var lj=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(k7.url)?k7.url:lh.resourcePath+k7.url;ld[k7.uuid]=k6(lj)}}}return ld},parseTextures:function(la,k6){function k8(le,ld){if(typeof le==="number"){return le}a.Logger.log(a.Logger.WARNING,"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",le);return ld[le]}var k5={};if(la!==undefined){for(var k9=0,k7=la.length;k9<k7;k9++){var lc=la[k9];if(lc.image===undefined){a.Logger.log(a.Logger.WARNING,'THREE.ObjectLoader: No "image" specified for',lc.uuid)}if(k6[lc.image]===undefined){a.Logger.log(a.Logger.WARNING,"THREE.ObjectLoader: Undefined image",lc.image)}var lb;if(Array.isArray(k6[lc.image])){lb=new hf(k6[lc.image])}else{lb=new eq(k6[lc.image])}lb.needsUpdate=true;lb.uuid=lc.uuid;if(lc.name!==undefined){lb.name=lc.name}if(lc.mapping!==undefined){lb.mapping=k8(lc.mapping,jv)}if(lc.offset!==undefined){lb.offset.fromArray(lc.offset)}if(lc.repeat!==undefined){lb.repeat.fromArray(lc.repeat)}if(lc.center!==undefined){lb.center.fromArray(lc.center)}if(lc.rotation!==undefined){lb.rotation=lc.rotation}if(lc.wrap!==undefined){lb.wrapS=k8(lc.wrap[0],hg);lb.wrapT=k8(lc.wrap[1],hg)}if(lc.format!==undefined){lb.format=lc.format}if(lc.type!==undefined){lb.type=lc.type}if(lc.encoding!==undefined){lb.encoding=lc.encoding}if(lc.minFilter!==undefined){lb.minFilter=k8(lc.minFilter,hC)}if(lc.magFilter!==undefined){lb.magFilter=k8(lc.magFilter,hC)}if(lc.anisotropy!==undefined){lb.anisotropy=lc.anisotropy}if(lc.flipY!==undefined){lb.flipY=lc.flipY}if(lc.premultiplyAlpha!==undefined){lb.premultiplyAlpha=lc.premultiplyAlpha}if(lc.unpackAlignment!==undefined){lb.unpackAlignment=lc.unpackAlignment}k5[lc.uuid]=lb}}return k5},parseObject:function(le,k9,lh){var lc;function la(lj){if(k9[lj]===undefined){a.Logger.log(a.Logger.WARNING,"THREE.ObjectLoader: Undefined geometry",lj)}return k9[lj]}function k6(lk){if(lk===undefined){return undefined}if(Array.isArray(lk)){var ln=[];for(var ll=0,lj=lk.length;ll<lj;ll++){var lm=lk[ll];if(lh[lm]===undefined){a.Logger.log(a.Logger.WARNING,"THREE.ObjectLoader: Undefined material",lm)}ln.push(lh[lm])}return ln}if(lh[lk]===undefined){a.Logger.log(a.Logger.WARNING,"THREE.ObjectLoader: Undefined material",lk)}return lh[lk]}switch(le.type){case"Scene":lc=new iG();if(le.background!==undefined){if(Number.isInteger(le.background)){lc.background=new id(le.background)}}if(le.fog!==undefined){if(le.fog.type==="Fog"){lc.fog=new jq(le.fog.color,le.fog.near,le.fog.far)}else{if(le.fog.type==="FogExp2"){lc.fog=new jn(le.fog.color,le.fog.density)}}}break;case"PerspectiveCamera":lc=new kR(le.fov,le.aspect,le.near,le.far);if(le.focus!==undefined){lc.focus=le.focus}if(le.zoom!==undefined){lc.zoom=le.zoom}if(le.filmGauge!==undefined){lc.filmGauge=le.filmGauge}if(le.filmOffset!==undefined){lc.filmOffset=le.filmOffset}if(le.view!==undefined){lc.view=Object.assign({},le.view)}break;case"OrthographicCamera":lc=new gs(le.left,le.right,le.top,le.bottom,le.near,le.far);if(le.zoom!==undefined){lc.zoom=le.zoom}if(le.view!==undefined){lc.view=Object.assign({},le.view)}break;case"AmbientLight":lc=new dz(le.color,le.intensity);break;case"DirectionalLight":lc=new hY(le.color,le.intensity);break;case"PointLight":lc=new j6(le.color,le.intensity,le.distance,le.decay);break;case"RectAreaLight":lc=new d1(le.color,le.intensity,le.width,le.height);break;case"SpotLight":lc=new cf(le.color,le.intensity,le.distance,le.angle,le.penumbra,le.decay);break;case"HemisphereLight":lc=new e4(le.color,le.groundColor,le.intensity);break;case"SkinnedMesh":a.Logger.log(a.Logger.WARNING,"THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var lg=la(le.geometry);var lf=k6(le.material);if(lg.bones&&lg.bones.length>0){lc=new fN(lg,lf)}else{lc=new kH(lg,lf)}if(le.drawMode!==undefined){lc.setDrawMode(le.drawMode)}break;case"LOD":lc=new ix();break;case"Line":lc=new kP(la(le.geometry),k6(le.material),le.mode);break;case"LineLoop":lc=new U(la(le.geometry),k6(le.material));break;case"LineSegments":lc=new fo(la(le.geometry),k6(le.material));break;case"PointCloud":case"Points":lc=new hx(la(le.geometry),k6(le.material));break;case"Sprite":lc=new iZ(k6(le.material));break;case"Group":lc=new kG();break;default:lc=new fg()}lc.uuid=le.uuid;if(le.name!==undefined){lc.name=le.name}if(le.matrix!==undefined){lc.matrix.fromArray(le.matrix);if(le.matrixAutoUpdate!==undefined){lc.matrixAutoUpdate=le.matrixAutoUpdate}if(lc.matrixAutoUpdate){lc.matrix.decompose(lc.position,lc.quaternion,lc.scale)}}else{if(le.position!==undefined){lc.position.fromArray(le.position)}if(le.rotation!==undefined){lc.rotation.fromArray(le.rotation)}if(le.quaternion!==undefined){lc.quaternion.fromArray(le.quaternion)}if(le.scale!==undefined){lc.scale.fromArray(le.scale)}}if(le.castShadow!==undefined){lc.castShadow=le.castShadow}if(le.receiveShadow!==undefined){lc.receiveShadow=le.receiveShadow}if(le.shadow){if(le.shadow.bias!==undefined){lc.shadow.bias=le.shadow.bias}if(le.shadow.radius!==undefined){lc.shadow.radius=le.shadow.radius}if(le.shadow.mapSize!==undefined){lc.shadow.mapSize.fromArray(le.shadow.mapSize)}if(le.shadow.camera!==undefined){lc.shadow.camera=this.parseObject(le.shadow.camera)}}if(le.visible!==undefined){lc.visible=le.visible}if(le.frustumCulled!==undefined){lc.frustumCulled=le.frustumCulled}if(le.renderOrder!==undefined){lc.renderOrder=le.renderOrder}if(le.userData!==undefined){lc.userData=le.userData}if(le.layers!==undefined){lc.layers.mask=le.layers}if(le.children!==undefined){var k8=le.children;for(var ld=0;ld<k8.length;ld++){lc.add(this.parseObject(k8[ld],k9,lh))}}if(le.type==="LOD"){var li=le.levels;for(var lb=0;lb<li.length;lb++){var k5=li[lb];var k7=lc.getObjectByProperty("uuid",k5.object);if(k7!==undefined){lc.addLevel(k7,k5.distance)}}}return lc}});var jv={UVMapping:hU,CubeReflectionMapping:b3,CubeRefractionMapping:j1,EquirectangularReflectionMapping:eT,EquirectangularRefractionMapping:bn,SphericalReflectionMapping:ge,CubeUVReflectionMapping:L,CubeUVRefractionMapping:hH};var hg={RepeatWrapping:co,ClampToEdgeWrapping:g7,MirroredRepeatWrapping:jV};var hC={NearestFilter:da,NearestMipMapNearestFilter:gK,NearestMipMapLinearFilter:ia,LinearFilter:j2,LinearMipMapNearestFilter:B,LinearMipMapLinearFilter:ap};function hE(k5){if(typeof createImageBitmap==="undefined"){a.Logger.log(a.Logger.WARNING,"THREE.ImageBitmapLoader: createImageBitmap() not supported.")}if(typeof fetch==="undefined"){a.Logger.log(a.Logger.WARNING,"THREE.ImageBitmapLoader: fetch() not supported.")}this.manager=k5!==undefined?k5:jh;this.options=undefined}hE.prototype={constructor:hE,setOptions:function hP(k5){this.options=k5;return this},load:function(k5,k8,la,k9){if(k5===undefined){k5=""}if(this.path!==undefined){k5=this.path+k5}k5=this.manager.resolveURL(k5);var k7=this;var k6=ch.get(k5);if(k6!==undefined){k7.manager.itemStart(k5);setTimeout(function(){if(k8){k8(k6)}k7.manager.itemEnd(k5)},0);return k6}fetch(k5).then(function(lb){return lb.blob()}).then(function(lb){return createImageBitmap(lb,k7.options)}).then(function(lb){ch.add(k5,lb);if(k8){k8(lb)}k7.manager.itemEnd(k5)})["catch"](function(lb){if(k9){k9(lb)}k7.manager.itemError(k5);k7.manager.itemEnd(k5)});k7.manager.itemStart(k5)},setCrossOrigin:function(){return this},setPath:function(k5){this.path=k5;return this}};function eS(){this.type="ShapePath";this.color=new id();this.subPaths=[];this.currentPath=null}Object.assign(eS.prototype,{moveTo:function(k5,k6){this.currentPath=new b1();this.subPaths.push(this.currentPath);this.currentPath.moveTo(k5,k6)},lineTo:function(k5,k6){this.currentPath.lineTo(k5,k6)},quadraticCurveTo:function(k8,k7,k6,k5){this.currentPath.quadraticCurveTo(k8,k7,k6,k5)},bezierCurveTo:function(k7,k5,la,k9,k8,k6){this.currentPath.bezierCurveTo(k7,k5,la,k9,k8,k6)},splineThru:function(k5){this.currentPath.splineThru(k5)},toShapes:function(ly,lk){function ld(lC){var lB=[];for(var lD=0,lA=lC.length;lD<lA;lD++){var lE=lC[lD];var lF=new bL();lF.curves=lE.curves;lB.push(lF)}return lB}function lh(lJ,lD){var lF=lD.length;var lE=false;for(var lB=lF-1,lA=0;lA<lF;lB=lA++){var lC=lD[lB];var lK=lD[lA];var lI=lK.x-lC.x;var lG=lK.y-lC.y;if(Math.abs(lG)>Number.EPSILON){if(lG<0){lC=lD[lA];lI=-lI;lK=lD[lB];lG=-lG}if((lJ.y<lC.y)||(lJ.y>lK.y)){continue}if(lJ.y===lC.y){if(lJ.x===lC.x){return true}}else{var lH=lG*(lJ.x-lC.x)-lI*(lJ.y-lC.y);if(lH===0){return true}if(lH<0){continue}lE=!lE}}else{if(lJ.y!==lC.y){continue}if(((lK.x<=lJ.x)&&(lJ.x<=lC.x))||((lC.x<=lJ.x)&&(lJ.x<=lK.x))){return true}}}return lE}var lw=a9.isClockWise;var k8=this.subPaths;if(k8.length===0){return[]}if(lk===true){return ld(k8)}var lv,lt,lf,li=[];if(k8.length===1){lt=k8[0];lf=new bL();lf.curves=lt.curves;li.push(lf);return li}var k5=!lw(k8[0].getPoints());k5=ly?!k5:k5;var lg=[];var lp=[];var lu=[];var lb=0;var ll;lp[lb]=undefined;lu[lb]=[];for(var lq=0,ln=k8.length;lq<ln;lq++){lt=k8[lq];ll=lt.getPoints();lv=lw(ll);lv=ly?!lv:lv;if(lv){if((!k5)&&(lp[lb])){lb++}lp[lb]={s:new bL(),p:ll};lp[lb].s.curves=lt.curves;if(k5){lb++}lu[lb]=[]}else{lu[lb].push({h:lt,p:ll[0]})}}if(!lp[0]){return ld(k8)}if(lp.length>1){var lx=false;var lm=[];for(var lz=0,k7=lp.length;lz<k7;lz++){lg[lz]=[]}for(var lz=0,k7=lp.length;lz<k7;lz++){var lj=lu[lz];for(var lc=0;lc<lj.length;lc++){var k6=lj[lc];var la=true;for(var k9=0;k9<lp.length;k9++){if(lh(k6.p,lp[k9].p)){if(lz!==k9){lm.push({froms:lz,tos:k9,hole:lc})}if(la){la=false;lg[k9].push(k6)}else{lx=true}}}if(la){lg[lz].push(k6)}}}if(lm.length>0){if(!lx){lu=lg}}}var ls;for(var lq=0,le=lp.length;lq<le;lq++){lf=lp[lq].s;li.push(lf);ls=lu[lq];for(var lo=0,lr=ls.length;lo<lr;lo++){lf.holes.push(ls[lo].h)}}return li}});function gS(k5){this.type="Font";this.data=k5}Object.assign(gS.prototype,{isFont:true,generateShapes:function(la,k6){if(k6===undefined){k6=100}var k5=[];var k9=ac(la,k6,this.data);for(var k8=0,k7=k9.length;k8<k7;k8++){Array.prototype.push.apply(k5,k9[k8].toShapes())}return k5}});function ac(le,lg,k8){var lb=Array.from?Array.from(le):String(le).split("");var k5=lg/k8.resolution;var ld=(k8.boundingBox.yMax-k8.boundingBox.yMin+k8.underlineThickness)*k5;var lf=[];var k9=0,k7=0;for(var k6=0;k6<lb.length;k6++){var lc=lb[k6];if(lc==="\n"){k9=0;k7-=ld}else{var la=iE(lc,k5,k9,k7,k8);k9+=la.offsetX;lf.push(la.path)}}return lf}function iE(la,ln,lk,li,lm){var lb=lm.glyphs[la]||lm.glyphs["?"];if(!lb){return}var le=new eS();var k9,k8,k7,k6,ld,ll,lc,lj;if(lb.o){var k5=lb._cachedOutline||(lb._cachedOutline=lb.o.split(" "));for(var lh=0,lf=k5.length;lh<lf;){var lg=k5[lh++];switch(lg){case"m":k9=k5[lh++]*ln+lk;k8=k5[lh++]*ln+li;le.moveTo(k9,k8);break;case"l":k9=k5[lh++]*ln+lk;k8=k5[lh++]*ln+li;le.lineTo(k9,k8);break;case"q":k7=k5[lh++]*ln+lk;k6=k5[lh++]*ln+li;ld=k5[lh++]*ln+lk;ll=k5[lh++]*ln+li;le.quadraticCurveTo(ld,ll,k7,k6);break;case"b":k7=k5[lh++]*ln+lk;k6=k5[lh++]*ln+li;ld=k5[lh++]*ln+lk;ll=k5[lh++]*ln+li;lc=k5[lh++]*ln+lk;lj=k5[lh++]*ln+li;le.bezierCurveTo(ld,ll,lc,lj,k7,k6);break}}}return{offsetX:lb.ha*ln,path:le}}function fi(k5){this.manager=(k5!==undefined)?k5:jh}Object.assign(fi.prototype,{load:function(k6,k8,la,k9){var k7=this;var k5=new fC(this.manager);k5.setPath(this.path);k5.load(k6,function(le){var lc;try{lc=JSON.parse(le)}catch(ld){a.Logger.log(a.Logger.WARNING,"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.");lc=JSON.parse(le.substring(65,le.length-2))}var lb=k7.parse(lc);if(k8){k8(lb)}},la,k9)},parse:function(k5){return new gS(k5)},setPath:function(k5){this.path=k5;return this}});function bE(){}bE.Handlers={handlers:[],add:function(k6,k5){this.handlers.push(k6,k5)},get:function(k9){var k7=this.handlers;for(var k8=0,k6=k7.length;k8<k6;k8+=2){var la=k7[k8];var k5=k7[k8+1];if(la.test(k9)){return k5}}return null}};Object.assign(bE.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(k5,k8,k6){var k9=[];for(var k7=0;k7<k5.length;++k7){k9[k7]=this.createMaterial(k5[k7],k8,k6)}return k9},createMaterial:(function(){var k8={NoBlending:cW,NormalBlending:iK,AdditiveBlending:aX,SubtractiveBlending:b7,MultiplyBlending:gk,CustomBlending:bw};var k5=new id();var k6=new cw();var k9=new aH();return function k7(lb,lf,lc){var la={};function lh(lq,lk,ln,ll,lj){var lm=lf+lq;var lp=bE.Handlers.get(lm);var lo;if(lp!==null){lo=lp.load(lm)}else{k6.setCrossOrigin(lc);lo=k6.load(lm)}if(lk!==undefined){lo.repeat.fromArray(lk);if(lk[0]!==1){lo.wrapS=co}if(lk[1]!==1){lo.wrapT=co}}if(ln!==undefined){lo.offset.fromArray(ln)}if(ll!==undefined){if(ll[0]==="repeat"){lo.wrapS=co}if(ll[0]==="mirror"){lo.wrapS=jV}if(ll[1]==="repeat"){lo.wrapT=co}if(ll[1]==="mirror"){lo.wrapT=jV}}if(lj!==undefined){lo.anisotropy=lj}var li=dY.generateUUID();la[li]=lo;return li}var le={uuid:dY.generateUUID(),type:"MeshLambertMaterial"};for(var ld in lb){var lg=lb[ld];switch(ld){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":le.name=lg;break;case"blending":le.blending=k8[lg];break;case"colorAmbient":case"mapAmbient":a.Logger.log(a.Logger.WARNING,"THREE.Loader.createMaterial:",ld,"is no longer supported.");break;case"colorDiffuse":le.color=k5.fromArray(lg).getHex();break;case"colorSpecular":le.specular=k5.fromArray(lg).getHex();break;case"colorEmissive":le.emissive=k5.fromArray(lg).getHex();break;case"specularCoef":le.shininess=lg;break;case"shading":if(lg.toLowerCase()==="basic"){le.type="MeshBasicMaterial"}if(lg.toLowerCase()==="phong"){le.type="MeshPhongMaterial"}if(lg.toLowerCase()==="standard"){le.type="MeshStandardMaterial"}break;case"mapDiffuse":le.map=lh(lg,lb.mapDiffuseRepeat,lb.mapDiffuseOffset,lb.mapDiffuseWrap,lb.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":le.emissiveMap=lh(lg,lb.mapEmissiveRepeat,lb.mapEmissiveOffset,lb.mapEmissiveWrap,lb.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":le.lightMap=lh(lg,lb.mapLightRepeat,lb.mapLightOffset,lb.mapLightWrap,lb.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":le.aoMap=lh(lg,lb.mapAORepeat,lb.mapAOOffset,lb.mapAOWrap,lb.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":le.bumpMap=lh(lg,lb.mapBumpRepeat,lb.mapBumpOffset,lb.mapBumpWrap,lb.mapBumpAnisotropy);break;case"mapBumpScale":le.bumpScale=lg;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":le.normalMap=lh(lg,lb.mapNormalRepeat,lb.mapNormalOffset,lb.mapNormalWrap,lb.mapNormalAnisotropy);break;case"mapNormalFactor":le.normalScale=lg;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":le.specularMap=lh(lg,lb.mapSpecularRepeat,lb.mapSpecularOffset,lb.mapSpecularWrap,lb.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":le.metalnessMap=lh(lg,lb.mapMetalnessRepeat,lb.mapMetalnessOffset,lb.mapMetalnessWrap,lb.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":le.roughnessMap=lh(lg,lb.mapRoughnessRepeat,lb.mapRoughnessOffset,lb.mapRoughnessWrap,lb.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":le.alphaMap=lh(lg,lb.mapAlphaRepeat,lb.mapAlphaOffset,lb.mapAlphaWrap,lb.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":le.side=c5;break;case"doubleSided":le.side=fE;break;case"transparency":a.Logger.log(a.Logger.WARNING,"THREE.Loader.createMaterial: transparency has been renamed to opacity");le.opacity=lg;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":le[ld]=lg;break;case"vertexColors":if(lg===true){le.vertexColors=h2}if(lg==="face"){le.vertexColors=iO}break;default:a.Logger.log(a.Logger.SEVERE,"THREE.Loader.createMaterial: Unsupported",ld,lg);break}}if(le.type==="MeshBasicMaterial"){delete le.emissive}if(le.type!=="MeshPhongMaterial"){delete le.specular}if(le.opacity<1){le.transparent=true}k9.setTextures(la);return k9.parse(le)}})()});var aU;var jJ={getContext:function(){if(aU===undefined){aU=new (window.AudioContext||window.webkitAudioContext)()}return aU},setContext:function(k5){aU=k5}};function gj(k5){this.manager=(k5!==undefined)?k5:jh}Object.assign(gj.prototype,{load:function(k6,k7,k9,k8){var k5=new fC(this.manager);k5.setResponseType("arraybuffer");k5.setPath(this.path);k5.load(k6,function(la){var lc=la.slice(0);var lb=jJ.getContext();lb.decodeAudioData(lc,function(ld){k7(ld)})},k9,k8)},setPath:function(k5){this.path=k5;return this}});function ai(){this.type="StereoCamera";this.aspect=1;this.eyeSep=0.064;this.cameraL=new kR();this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=false;this.cameraR=new kR();this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=false}Object.assign(ai.prototype,{update:(function(){var ld,lf,k9,k5,lb,la,le,k7;var k6=new fv();var lc=new fv();return function k8(lk){var lj=ld!==this||lf!==lk.focus||k9!==lk.fov||k5!==lk.aspect*this.aspect||lb!==lk.near||la!==lk.far||le!==lk.zoom||k7!==this.eyeSep;if(lj){ld=this;lf=lk.focus;k9=lk.fov;k5=lk.aspect*this.aspect;lb=lk.near;la=lk.far;le=lk.zoom;var lh=lk.projectionMatrix.clone();k7=this.eyeSep/2;var lm=k7*lb/lf;var lg=(lb*Math.tan(dY.DEG2RAD*k9*0.5))/le;var ll,li;lc.elements[12]=-k7;k6.elements[12]=k7;ll=-lg*k5+lm;li=lg*k5+lm;lh.elements[0]=2*lb/(li-ll);lh.elements[8]=(li+ll)/(li-ll);this.cameraL.projectionMatrix.copy(lh);ll=-lg*k5-lm;li=lg*k5-lm;lh.elements[0]=2*lb/(li-ll);lh.elements[8]=(li+ll)/(li-ll);this.cameraR.projectionMatrix.copy(lh)}this.cameraL.matrixWorld.copy(lk.matrixWorld).multiply(lc);this.cameraR.matrixWorld.copy(lk.matrixWorld).multiply(k6)}})()});function cn(la,k9,lb,lg){fg.call(this);this.type="CubeCamera";var k8=90,k6=1;var k7=new kR(k8,k6,la,k9);k7.up.set(0,-1,0);k7.lookAt(new bf(1,0,0));this.add(k7);var le=new kR(k8,k6,la,k9);le.up.set(0,-1,0);le.lookAt(new bf(-1,0,0));this.add(le);var k5=new kR(k8,k6,la,k9);k5.up.set(0,0,1);k5.lookAt(new bf(0,1,0));this.add(k5);var ld=new kR(k8,k6,la,k9);ld.up.set(0,0,-1);ld.lookAt(new bf(0,-1,0));this.add(ld);var lf=new kR(k8,k6,la,k9);lf.up.set(0,-1,0);lf.lookAt(new bf(0,0,1));this.add(lf);var lc=new kR(k8,k6,la,k9);lc.up.set(0,-1,0);lc.lookAt(new bf(0,0,-1));this.add(lc);lg=lg||{format:fK,magFilter:j2,minFilter:j2};this.renderTarget=new hq(lb,lb,lg);this.renderTarget.texture.name="CubeCamera";this.update=function(lj,lk){if(this.parent===null){this.updateMatrixWorld()}var ll=lj.getRenderTarget();var li=this.renderTarget;var lh=li.texture.generateMipmaps;li.texture.generateMipmaps=false;lj.setRenderTarget(li,0);lj.render(lk,k7);lj.setRenderTarget(li,1);lj.render(lk,le);lj.setRenderTarget(li,2);lj.render(lk,k5);lj.setRenderTarget(li,3);lj.render(lk,ld);lj.setRenderTarget(li,4);lj.render(lk,lf);li.texture.generateMipmaps=lh;lj.setRenderTarget(li,5);lj.render(lk,lc);lj.setRenderTarget(ll)};this.clear=function(ll,lh,lm,lj){var ln=ll.getRenderTarget();var lk=this.renderTarget;for(var li=0;li<6;li++){ll.setRenderTarget(lk,li);ll.clear(lh,lm,lj)}ll.setRenderTarget(ln)}}cn.prototype=Object.create(fg.prototype);cn.prototype.constructor=cn;function c7(k5){this.autoStart=(k5!==undefined)?k5:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false}Object.assign(c7.prototype,{start:function(){this.startTime=(typeof performance==="undefined"?Date:performance).now();this.oldTime=this.startTime;this.elapsedTime=0;this.running=true},stop:function(){this.getElapsedTime();this.running=false;this.autoStart=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var k6=0;if(this.autoStart&&!this.running){this.start();return 0}if(this.running){var k5=(typeof performance==="undefined"?Date:performance).now();k6=(k5-this.oldTime)/1000;this.oldTime=k5;this.elapsedTime+=k6}return k6}});function g9(){fg.call(this);this.type="AudioListener";this.context=jJ.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null;this.timeDelta=0}g9.prototype=Object.assign(Object.create(fg.prototype),{constructor:g9,getInput:function(){return this.gain},removeFilter:function(){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination);this.gain.connect(this.context.destination);this.filter=null}return this},getFilter:function(){return this.filter},setFilter:function(k5){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination)}else{this.gain.disconnect(this.context.destination)}this.filter=k5;this.gain.connect(this.filter);this.filter.connect(this.context.destination);return this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(k5){this.gain.gain.setTargetAtTime(k5,this.context.currentTime,0.01);return this},updateMatrixWorld:(function(){var k5=new bf();var k9=new hd();var la=new bf();var k6=new bf();var k8=new c7();return function k7(le){fg.prototype.updateMatrixWorld.call(this,le);var ld=this.context.listener;var lb=this.up;this.timeDelta=k8.getDelta();this.matrixWorld.decompose(k5,k9,la);k6.set(0,0,-1).applyQuaternion(k9);if(ld.positionX){var lc=this.context.currentTime+this.timeDelta;ld.positionX.linearRampToValueAtTime(k5.x,lc);ld.positionY.linearRampToValueAtTime(k5.y,lc);ld.positionZ.linearRampToValueAtTime(k5.z,lc);ld.forwardX.linearRampToValueAtTime(k6.x,lc);ld.forwardY.linearRampToValueAtTime(k6.y,lc);ld.forwardZ.linearRampToValueAtTime(k6.z,lc);ld.upX.linearRampToValueAtTime(lb.x,lc);ld.upY.linearRampToValueAtTime(lb.y,lc);ld.upZ.linearRampToValueAtTime(lb.z,lc)}else{ld.setPosition(k5.x,k5.y,k5.z);ld.setOrientation(k6.x,k6.y,k6.z,lb.x,lb.y,lb.z)}}})()});function hK(k5){fg.call(this);this.type="Audio";this.listener=k5;this.context=k5.context;this.gain=this.context.createGain();this.gain.connect(k5.getInput());this.autoplay=false;this.buffer=null;this.detune=0;this.loop=false;this.startTime=0;this.offset=0;this.playbackRate=1;this.isPlaying=false;this.hasPlaybackControl=true;this.sourceType="empty";this.filters=[]}hK.prototype=Object.assign(Object.create(fg.prototype),{constructor:hK,getOutput:function(){return this.gain},setNodeSource:function(k5){this.hasPlaybackControl=false;this.sourceType="audioNode";this.source=k5;this.connect();return this},setMediaElementSource:function(k5){this.hasPlaybackControl=false;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(k5);this.connect();return this},setBuffer:function(k5){this.buffer=k5;this.sourceType="buffer";if(this.autoplay){this.play()}return this},play:function(){if(this.isPlaying===true){a.Logger.log(a.Logger.WARNING,"THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===false){a.Logger.log(a.Logger.WARNING,"THREE.Audio: this Audio has no playback control.");return}var k5=this.context.createBufferSource();k5.buffer=this.buffer;k5.loop=this.loop;k5.onended=this.onEnded.bind(this);this.startTime=this.context.currentTime;k5.start(this.startTime,this.offset);this.isPlaying=true;this.source=k5;this.setDetune(this.detune);this.setPlaybackRate(this.playbackRate);return this.connect()},pause:function(){if(this.hasPlaybackControl===false){a.Logger.log(a.Logger.WARNING,"THREE.Audio: this Audio has no playback control.");return}if(this.isPlaying===true){this.source.stop();this.source.onended=null;this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate;this.isPlaying=false}return this},stop:function(){if(this.hasPlaybackControl===false){a.Logger.log(a.Logger.WARNING,"THREE.Audio: this Audio has no playback control.");return}this.source.stop();this.source.onended=null;this.offset=0;this.isPlaying=false;return this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var k6=1,k5=this.filters.length;k6<k5;k6++){this.filters[k6-1].connect(this.filters[k6])}this.filters[this.filters.length-1].connect(this.getOutput())}else{this.source.connect(this.getOutput())}return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var k6=1,k5=this.filters.length;k6<k5;k6++){this.filters[k6-1].disconnect(this.filters[k6])}this.filters[this.filters.length-1].disconnect(this.getOutput())}else{this.source.disconnect(this.getOutput())}return this},getFilters:function(){return this.filters},setFilters:function(k5){if(!k5){k5=[]}if(this.isPlaying===true){this.disconnect();this.filters=k5;this.connect()}else{this.filters=k5}return this},setDetune:function(k5){this.detune=k5;if(this.source.detune===undefined){return}if(this.isPlaying===true){this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,0.01)}return this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(k5){return this.setFilters(k5?[k5]:[])},setPlaybackRate:function(k5){if(this.hasPlaybackControl===false){a.Logger.log(a.Logger.WARNING,"THREE.Audio: this Audio has no playback control.");return}this.playbackRate=k5;if(this.isPlaying===true){this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,0.01)}return this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=false},getLoop:function(){if(this.hasPlaybackControl===false){a.Logger.log(a.Logger.WARNING,"THREE.Audio: this Audio has no playback control.");return false}return this.loop},setLoop:function(k5){if(this.hasPlaybackControl===false){a.Logger.log(a.Logger.WARNING,"THREE.Audio: this Audio has no playback control.");return}this.loop=k5;if(this.isPlaying===true){this.source.loop=this.loop}return this},getVolume:function(){return this.gain.gain.value},setVolume:function(k5){this.gain.gain.setTargetAtTime(k5,this.context.currentTime,0.01);return this}});function i1(k5){hK.call(this,k5);this.panner=this.context.createPanner();this.panner.connect(this.gain)}i1.prototype=Object.assign(Object.create(hK.prototype),{constructor:i1,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(k5){this.panner.refDistance=k5;return this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(k5){this.panner.rolloffFactor=k5;return this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(k5){this.panner.distanceModel=k5;return this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(k5){this.panner.maxDistance=k5;return this},setDirectionalCone:function(k7,k5,k6){this.panner.coneInnerAngle=k7;this.panner.coneOuterAngle=k5;this.panner.coneOuterGain=k6;return this},updateMatrixWorld:(function(){var k5=new bf();var k8=new hd();var k9=new bf();var k6=new bf();return function k7(lb){fg.prototype.updateMatrixWorld.call(this,lb);if(this.hasPlaybackControl===true&&this.isPlaying===false){return}this.matrixWorld.decompose(k5,k8,k9);k6.set(0,0,1).applyQuaternion(k8);var lc=this.panner;if(lc.positionX){var la=this.context.currentTime+this.listener.timeDelta;lc.positionX.linearRampToValueAtTime(k5.x,la);lc.positionY.linearRampToValueAtTime(k5.y,la);lc.positionZ.linearRampToValueAtTime(k5.z,la);lc.orientationX.linearRampToValueAtTime(k6.x,la);lc.orientationY.linearRampToValueAtTime(k6.y,la);lc.orientationZ.linearRampToValueAtTime(k6.z,la)}else{lc.setPosition(k5.x,k5.y,k5.z);lc.setOrientation(k6.x,k6.y,k6.z)}}})()});function jO(k6,k5){this.analyser=k6.context.createAnalyser();this.analyser.fftSize=k5!==undefined?k5:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);k6.getOutput().connect(this.analyser)}Object.assign(jO.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){var k7=0,k6=this.getFrequencyData();for(var k5=0;k5<k6.length;k5++){k7+=k6[k5]}return k7/k6.length}});function gV(k9,k6,k8){this.binding=k9;this.valueSize=k8;var k5=Float64Array,k7;switch(k6){case"quaternion":k7=this._slerp;break;case"string":case"bool":k5=Array;k7=this._select;break;default:k7=this._lerp}this.buffer=new k5(k8*4);this._mixBufferRegion=k7;this.cumulativeWeight=0;this.useCount=0;this.referenceCount=0}Object.assign(gV.prototype,{accumulate:function(k8,lb){var k5=this.buffer,la=this.valueSize,lc=k8*la+la,k9=this.cumulativeWeight;if(k9===0){for(var k6=0;k6!==la;++k6){k5[lc+k6]=k5[k6]}k9=lb}else{k9+=lb;var k7=lb/k9;this._mixBufferRegion(k5,lc,0,k7,la)}this.cumulativeWeight=k9},apply:function(k6){var k5=this.valueSize,k9=this.buffer,k8=k6*k5+k5,lb=this.cumulativeWeight,ld=this.binding;this.cumulativeWeight=0;if(lb<1){var k7=k5*3;this._mixBufferRegion(k9,k8,k7,1-lb,k5)}for(var la=k5,lc=k5+k5;la!==lc;++la){if(k9[la]!==k9[la+k5]){ld.setValue(k9,k8);break}}},saveOriginalState:function(){var la=this.binding;var k5=this.buffer,k7=this.valueSize,k9=k7*3;la.getValue(k5,k9);for(var k6=k7,k8=k9;k6!==k8;++k6){k5[k6]=k5[k9+(k6%k7)]}this.cumulativeWeight=0},restoreOriginalState:function(){var k5=this.valueSize*3;this.binding.setValue(this.buffer,k5)},_select:function(k6,k9,k5,k8,la){if(k8>=0.5){for(var k7=0;k7!==la;++k7){k6[k9+k7]=k6[k5+k7]}}},_slerp:function(k6,k8,k5,k7){hd.slerpFlat(k6,k8,k6,k8,k6,k5,k7)},_lerp:function(k6,la,k5,k9,lc){var lb=1-k9;for(var k8=0;k8!==lc;++k8){var k7=la+k8;k6[k7]=k6[k7]*lb+k6[k5+k8]*k9}}});var eP="\\[\\]\\.:\\/";function cY(k6,k7,k5){var k8=k5||g.parseTrackName(k7);this._targetGroup=k6;this._bindings=k6.subscribe_(k7,k8)}Object.assign(cY.prototype,{getValue:function(k8,k7){this.bind();var k5=this._targetGroup.nCachedObjects_,k6=this._bindings[k5];if(k6!==undefined){k6.getValue(k8,k7)}},setValue:function(k9,k6){var k8=this._bindings;for(var k5=this._targetGroup.nCachedObjects_,k7=k8.length;k5!==k7;++k5){k8[k5].setValue(k9,k6)}},bind:function(){var k7=this._bindings;for(var k5=this._targetGroup.nCachedObjects_,k6=k7.length;k5!==k6;++k5){k7[k5].bind()}},unbind:function(){var k7=this._bindings;for(var k5=this._targetGroup.nCachedObjects_,k6=k7.length;k5!==k6;++k5){k7[k5].unbind()}}});function g(k5,k6,k7){this.path=k6;this.parsedPath=k7||g.parseTrackName(k6);this.node=g.findNode(k5,this.parsedPath.nodeName)||k5;this.rootNode=k5}Object.assign(g,{Composite:cY,create:function(k5,k6,k7){if(!(k5&&k5.isAnimationObjectGroup)){return new g(k5,k6,k7)}else{return new g.Composite(k5,k6,k7)}},sanitizeNodeName:(function(){var k5=new RegExp("["+eP+"]","g");return function k6(k7){return k7.replace(/\s/g,"_").replace(k5,"")}}()),parseTrackName:function(){var lc="[^"+eP+"]";var lb="[^"+eP.replace("\\.","")+"]";var k8=/((?:WC+[\/:])*)/.source.replace("WC",lc);var k5=/(WCOD+)?/.source.replace("WCOD",lb);var k9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lc);var k7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lc);var ld=new RegExp(""+"^"+k8+k5+k9+k7+"$");var la=["material","materials","bones"];return function k6(lf){var lg=ld.exec(lf);if(!lg){throw new Error("PropertyBinding: Cannot parse trackName: "+lf)}var le={nodeName:lg[2],objectName:lg[3],objectIndex:lg[4],propertyName:lg[5],propertyIndex:lg[6]};var li=le.nodeName&&le.nodeName.lastIndexOf(".");if(li!==undefined&&li!==-1){var lh=le.nodeName.substring(li+1);if(la.indexOf(lh)!==-1){le.nodeName=le.nodeName.substring(0,li);le.objectName=lh}}if(le.propertyName===null||le.propertyName.length===0){throw new Error("PropertyBinding: can not parse propertyName from trackName: "+lf)}return le}}(),findNode:function(k5,k9){if(!k9||k9===""||k9==="root"||k9==="."||k9===-1||k9===k5.name||k9===k5.uuid){return k5}if(k5.skeleton){var k8=k5.skeleton.getBoneByName(k9);if(k8!==undefined){return k8}}if(k5.children){var k7=function(ld){for(var lc=0;lc<ld.length;lc++){var lb=ld[lc];if(lb.name===k9||lb.uuid===k9){return lb}var la=k7(lb.children);if(la){return la}}return null};var k6=k7(k5.children);if(k6){return k6}}return null}});Object.assign(g.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function h4(k5,k6){k5[k6]=this.node[this.propertyName]},function fy(k5,k8){var k7=this.resolvedProperty;for(var k6=0,k9=k7.length;k6!==k9;++k6){k5[k8++]=k7[k6]}},function c9(k5,k6){k5[k6]=this.resolvedProperty[this.propertyIndex]},function fp(k5,k6){this.resolvedProperty.toArray(k5,k6)}],SetterByBindingTypeAndVersioning:[[function iD(k5,k6){this.targetObject[this.propertyName]=k5[k6]},function gA(k5,k6){this.targetObject[this.propertyName]=k5[k6];this.targetObject.needsUpdate=true},function m(k5,k6){this.targetObject[this.propertyName]=k5[k6];this.targetObject.matrixWorldNeedsUpdate=true}],[function kk(k5,k8){var k6=this.resolvedProperty;for(var k7=0,k9=k6.length;k7!==k9;++k7){k6[k7]=k5[k8++]}},function fD(k5,k8){var k6=this.resolvedProperty;for(var k7=0,k9=k6.length;k7!==k9;++k7){k6[k7]=k5[k8++]}this.targetObject.needsUpdate=true},function aB(k5,k8){var k6=this.resolvedProperty;for(var k7=0,k9=k6.length;k7!==k9;++k7){k6[k7]=k5[k8++]}this.targetObject.matrixWorldNeedsUpdate=true}],[function iW(k5,k6){this.resolvedProperty[this.propertyIndex]=k5[k6]},function fW(k5,k6){this.resolvedProperty[this.propertyIndex]=k5[k6];this.targetObject.needsUpdate=true},function a4(k5,k6){this.resolvedProperty[this.propertyIndex]=k5[k6];this.targetObject.matrixWorldNeedsUpdate=true}],[function a6(k5,k6){this.resolvedProperty.fromArray(k5,k6)},function gL(k5,k6){this.resolvedProperty.fromArray(k5,k6);this.targetObject.needsUpdate=true},function ht(k5,k6){this.resolvedProperty.fromArray(k5,k6);this.targetObject.matrixWorldNeedsUpdate=true}]],getValue:function bB(k6,k5){this.bind();this.getValue(k6,k5)},setValue:function bB(k5,k6){this.bind();this.setValue(k5,k6)},bind:function(){var le=this.node,k8=this.parsedPath,k7=k8.objectName,k9=k8.propertyName,k5=k8.propertyIndex;if(!le){le=g.findNode(this.rootNode,k8.nodeName)||this.rootNode;this.node=le}this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(!le){a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(k7){var la=k8.objectIndex;switch(k7){case"materials":if(!le.material){a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!le.material.materials){a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}le=le.material.materials;break;case"bones":if(!le.skeleton){a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}le=le.skeleton.bones;for(var k6=0;k6<le.length;k6++){if(le[k6].name===la){la=k6;break}}break;default:if(le[k7]===undefined){a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}le=le[k7]}if(la!==undefined){if(le[la]===undefined){a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,le);return}le=le[la]}}var ld=le[k9];if(ld===undefined){var lb=k8.nodeName;a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Trying to update property for track: "+lb+"."+k9+" but it wasn't found.",le);return}var lf=this.Versioning.None;this.targetObject=le;if(le.needsUpdate!==undefined){lf=this.Versioning.NeedsUpdate}else{if(le.matrixWorldNeedsUpdate!==undefined){lf=this.Versioning.MatrixWorldNeedsUpdate}}var lc=this.BindingType.Direct;if(k5!==undefined){if(k9==="morphTargetInfluences"){if(!le.geometry){a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(le.geometry.isBufferGeometry){if(!le.geometry.morphAttributes){a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var k6=0;k6<this.node.geometry.morphAttributes.position.length;k6++){if(le.geometry.morphAttributes.position[k6].name===k5){k5=k6;break}}}else{if(!le.geometry.morphTargets){a.Logger.log(a.Logger.SEVERE,"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var k6=0;k6<this.node.geometry.morphTargets.length;k6++){if(le.geometry.morphTargets[k6].name===k5){k5=k6;break}}}}lc=this.BindingType.ArrayElement;this.resolvedProperty=ld;this.propertyIndex=k5}else{if(ld.fromArray!==undefined&&ld.toArray!==undefined){lc=this.BindingType.HasFromToArray;this.resolvedProperty=ld}else{if(Array.isArray(ld)){lc=this.BindingType.EntireArray;this.resolvedProperty=ld}else{this.propertyName=k9}}}this.getValue=this.GetterByBindingType[lc];this.setValue=this.SetterByBindingTypeAndVersioning[lc][lf]},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(g.prototype,{_getValue_unbound:g.prototype.getValue,_setValue_unbound:g.prototype.setValue,});function I(){this.uuid=dY.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var k7={};this._indicesByUUID=k7;for(var k5=0,k8=arguments.length;k5!==k8;++k5){k7[arguments[k5].uuid]=k5}this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var k6=this;this.stats={objects:{get totalfunction(){return k6._objects.length},get inUsefunction(){return this.total-k6.nCachedObjects_}},get bindingsPerObjectfunction(){return k6._bindings.length}}}Object.assign(I.prototype,{isAnimationObjectGroup:true,add:function(){var k5=this._objects,k6=k5.length,k8=this.nCachedObjects_,lp=this._indicesByUUID,lf=this._paths,lc=this._parsedPaths,ln=this._bindings,lb=ln.length,k9=undefined;for(var lk=0,le=arguments.length;lk!==le;++lk){var lo=arguments[lk],ll=lo.uuid,la=lp[ll];if(la===undefined){la=k6++;lp[ll]=la;k5.push(lo);for(var lj=0,lg=lb;lj!==lg;++lj){ln[lj].push(new g(lo,lf[lj],lc[lj]))}}else{if(la<k8){k9=k5[la];var li=--k8,lm=k5[li];lp[lm.uuid]=la;k5[la]=lm;lp[ll]=li;k5[li]=lo;for(var lj=0,lg=lb;lj!==lg;++lj){var k7=ln[lj],lh=k7[li],ld=k7[la];k7[la]=lh;if(ld===undefined){ld=new g(lo,lf[lj],lc[lj])}k7[li]=ld}}else{if(k5[la]!==k9){a.Logger.log(a.Logger.SEVERE,"THREE.AnimationObjectGroup: Different objects with the same UUID "+"detected. Clean the caches or recreate your infrastructure when reloading scenes.")}}}}this.nCachedObjects_=k8},remove:function(){var ll=this._objects,lk=this.nCachedObjects_,li=this._indicesByUUID,k7=this._bindings,lb=k7.length;for(var lf=0,k8=arguments.length;lf!==k8;++lf){var la=arguments[lf],k5=la.uuid,lh=li[k5];if(lh!==undefined&&lh>=lk){var ld=lk++,le=ll[ld];li[le.uuid]=lh;ll[lh]=le;li[k5]=ld;ll[ld]=la;for(var lc=0,k9=lb;lc!==k9;++lc){var k6=k7[lc],lg=k6[ld],lj=k6[lh];k6[lh]=lg;k6[ld]=lj}}}this.nCachedObjects_=lk},uncache:function(){var k5=this._objects,k6=k5.length,k8=this.nCachedObjects_,lo=this._indicesByUUID,lm=this._bindings,lb=lm.length;for(var li=0,ld=arguments.length;li!==ld;++li){var ln=arguments[li],lj=ln.uuid,la=lo[lj];if(la!==undefined){delete lo[lj];if(la<k8){var lg=--k8,ll=k5[lg],lk=--k6,k9=k5[lk];lo[ll.uuid]=la;k5[la]=ll;lo[k9.uuid]=lg;k5[lg]=k9;k5.pop();for(var lh=0,le=lb;lh!==le;++lh){var k7=lm[lh],lf=k7[lg],lc=k7[lk];k7[la]=lf;k7[lg]=lc;k7.pop()}}else{var lk=--k6,k9=k5[lk];lo[k9.uuid]=la;k5[la]=k9;k5.pop();for(var lh=0,le=lb;lh!==le;++lh){var k7=lm[lh];k7[la]=k7[lk];k7.pop()}}}}this.nCachedObjects_=k8},subscribe_:function(li,lc){var k5=this._bindingsIndicesByPath,ld=k5[li],k7=this._bindings;if(ld!==undefined){return k7[ld]}var lh=this._paths,la=this._parsedPaths,lg=this._objects,le=lg.length,lf=this.nCachedObjects_,k6=new Array(le);ld=k7.length;k5[li]=ld;lh.push(li);la.push(lc);k7.push(k6);for(var lb=lf,k8=lg.length;lb!==k8;++lb){var k9=lg[lb];k6[lb]=new g(k9,li,lc)}return k6},unsubscribe_:function(ld){var k6=this._bindingsIndicesByPath,lb=k6[ld];if(lb!==undefined){var lc=this._paths,k8=this._parsedPaths,k7=this._bindings,k5=k7.length-1,la=k7[k5],k9=ld[k5];k6[k9]=lb;k7[lb]=la;k7.pop();k8[lb]=k8[k5];k8.pop();lc[lb]=lc[k5];lc.pop()}}});function ko(k6,k7,ld){this._mixer=k6;this._clip=k7;this._localRoot=ld||null;var lb=k7.tracks,k9=lb.length,la=new Array(k9);var lc={endingStart:e6,endingEnd:e6};for(var k8=0;k8!==k9;++k8){var k5=lb[k8].createInterpolant(null);la[k8]=k5;k5.settings=lc}this._interpolantSettings=lc;this._interpolants=la;this._propertyBindings=new Array(k9);this._cacheIndex=null;this._byClipCacheIndex=null;this._timeScaleInterpolant=null;this._weightInterpolant=null;this.loop=ek;this._loopCount=-1;this._startTime=null;this.time=0;this.timeScale=1;this._effectiveTimeScale=1;this.weight=1;this._effectiveWeight=1;this.repetitions=Infinity;this.paused=false;this.enabled=true;this.clampWhenFinished=false;this.zeroSlopeAtStart=true;this.zeroSlopeAtEnd=true}Object.assign(ko.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=false;this.enabled=true;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(k5){this._startTime=k5;return this},setLoop:function(k6,k5){this.loop=k6;this.repetitions=k5;return this},setEffectiveWeight:function(k5){this.weight=k5;this._effectiveWeight=this.enabled?k5:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(k5){return this._scheduleFading(k5,0,1)},fadeOut:function(k5){return this._scheduleFading(k5,1,0)},crossFadeFrom:function(lb,k9,k8){lb.fadeOut(k9);this.fadeIn(k9);if(k8){var k6=this._clip.duration,k7=lb._clip.duration,k5=k7/k6,la=k6/k7;lb.warp(1,k5,k9);this.warp(la,1,k9)}return this},crossFadeTo:function(k7,k6,k5){return k7.crossFadeFrom(this,k6,k5)},stopFading:function(){var k5=this._weightInterpolant;if(k5!==null){this._weightInterpolant=null;this._mixer._takeBackControlInterpolant(k5)}return this},setEffectiveTimeScale:function(k5){this.timeScale=k5;this._effectiveTimeScale=this.paused?0:k5;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(k5){this.timeScale=this._clip.duration/k5;return this.stopWarping()},syncWith:function(k5){this.time=k5.time;this.timeScale=k5.timeScale;return this.stopWarping()},halt:function(k5){return this.warp(this._effectiveTimeScale,0,k5)},warp:function(lb,k9,la){var k8=this._mixer,k7=k8.time,k5=this._timeScaleInterpolant,lc=this.timeScale;if(k5===null){k5=k8._lendControlInterpolant();this._timeScaleInterpolant=k5}var k6=k5.parameterPositions,ld=k5.sampleValues;k6[0]=k7;k6[1]=k7+la;ld[0]=lb/lc;ld[1]=k9/lc;return this},stopWarping:function(){var k5=this._timeScaleInterpolant;if(k5!==null){this._timeScaleInterpolant=null;this._mixer._takeBackControlInterpolant(k5)}return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(la,lf,k7,k8){if(!this.enabled){this._updateWeight(la);return}var k6=this._startTime;if(k6!==null){var k5=(la-k6)*k7;if(k5<0||k7===0){return}this._startTime=null;lf=k7*k5}lf*=this._updateTimeScale(la);var lg=this._updateTime(lf);var ld=this._updateWeight(la);if(ld>0){var le=this._interpolants;var lc=this._propertyBindings;for(var lb=0,k9=le.length;lb!==k9;++lb){le[lb].evaluate(lg);lc[lb].accumulate(k8,ld)}}},_updateWeight:function(k7){var k6=0;if(this.enabled){k6=this.weight;var k8=this._weightInterpolant;if(k8!==null){var k5=k8.evaluate(k7)[0];k6*=k5;if(k7>k8.parameterPositions[1]){this.stopFading();if(k5===0){this.enabled=false}}}}this._effectiveWeight=k6;return k6},_updateTimeScale:function(k7){var k6=0;if(!this.paused){k6=this.timeScale;var k8=this._timeScaleInterpolant;if(k8!==null){var k5=k8.evaluate(k7)[0];k6*=k5;if(k7>k8.parameterPositions[1]){this.stopWarping();if(k6===0){this.paused=true}else{this.timeScale=k6}}}}this._effectiveTimeScale=k6;return k6},_updateTime:function(lb){var k8=this.time+lb;var k9=this._clip.duration;var la=this.loop;var lc=this._loopCount;var k6=(la===kM);if(lb===0){if(lc===-1){return k8}return(k6&&(lc&1)===1)?k9-k8:k8}if(la===dI){if(lc===-1){this._loopCount=0;this._setEndings(true,true,false)}handle_stop:{if(k8>=k9){k8=k9}else{if(k8<0){k8=0}else{break handle_stop}}if(this.clampWhenFinished){this.paused=true}else{this.enabled=false}this._mixer.dispatchEvent({type:"finished",action:this,direction:lb<0?-1:1})}}else{if(lc===-1){if(lb>=0){lc=0;this._setEndings(true,this.repetitions===0,k6)}else{this._setEndings(this.repetitions===0,true,k6)}}if(k8>=k9||k8<0){var ld=Math.floor(k8/k9);k8-=k9*ld;lc+=Math.abs(ld);var k7=this.repetitions-lc;if(k7<=0){if(this.clampWhenFinished){this.paused=true}else{this.enabled=false}k8=lb>0?k9:0;this._mixer.dispatchEvent({type:"finished",action:this,direction:lb>0?1:-1})}else{if(k7===1){var k5=lb<0;this._setEndings(k5,!k5,k6)}else{this._setEndings(false,false,k6)}this._loopCount=lc;this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:ld})}}if(k6&&(lc&1)===1){this.time=k8;return k9-k8}}this.time=k8;return k8},_setEndings:function(k6,k5,k8){var k7=this._interpolantSettings;if(k8){k7.endingStart=dt;k7.endingEnd=dt}else{if(k6){k7.endingStart=this.zeroSlopeAtStart?dt:e6}else{k7.endingStart=dS}if(k5){k7.endingEnd=this.zeroSlopeAtEnd?dt:e6}else{k7.endingEnd=dS}}},_scheduleFading:function(k9,lc,k5){var k6=this._mixer,k8=k6.time,lb=this._weightInterpolant;if(lb===null){lb=k6._lendControlInterpolant();this._weightInterpolant=lb}var la=lb.parameterPositions,k7=lb.sampleValues;la[0]=k8;k7[0]=lc;la[1]=k8+k9;k7[1]=k5;return this}});function aN(k5){this._root=k5;this._initMemoryManager();this._accuIndex=0;this.time=0;this.timeScale=1}aN.prototype=Object.assign(Object.create(aQ.prototype),{constructor:aN,_bindAction:function(k9,k5){var lf=k9._localRoot||this._root,ld=k9._clip.tracks,lb=ld.length,k7=k9._propertyBindings,lc=k9._interpolants,lj=lf.uuid,lg=this._bindingsByRootAndName,k6=lg[lj];if(k6===undefined){k6={};lg[lj]=k6}for(var la=0;la!==lb;++la){var k8=ld[la],lh=k8.name,le=k6[lh];if(le!==undefined){k7[la]=le}else{le=k7[la];if(le!==undefined){if(le._cacheIndex===null){++le.referenceCount;this._addInactiveBinding(le,lj,lh)}continue}var li=k5&&k5._propertyBindings[la].binding.parsedPath;le=new gV(g.create(lf,lh,li),k8.ValueTypeName,k8.getValueSize());++le.referenceCount;this._addInactiveBinding(le,lj,lh);k7[la]=le}lc[la].resultBuffer=le.buffer}},_activateAction:function(k9){if(!this._isActiveAction(k9)){if(k9._cacheIndex===null){var k5=(k9._localRoot||this._root).uuid,k6=k9._clip.uuid,k8=this._actionsByClip[k6];this._bindAction(k9,k8&&k8.knownActions[0]);this._addInactiveAction(k9,k6,k5)}var lc=k9._propertyBindings;for(var k7=0,lb=lc.length;k7!==lb;++k7){var la=lc[k7];if(la.useCount++===0){this._lendBinding(la);la.saveOriginalState()}}this._lendAction(k9)}},_deactivateAction:function(k6){if(this._isActiveAction(k6)){var k9=k6._propertyBindings;for(var k5=0,k8=k9.length;k5!==k8;++k5){var k7=k9[k5];if(--k7.useCount===0){k7.restoreOriginalState();this._takeBackBinding(k7)}}this._takeBackAction(k6)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var k5=this;this.stats={actions:{get totalfunction(){return k5._actions.length},get inUsefunction(){return k5._nActiveActions}},bindings:{get totalfunction(){return k5._bindings.length},get inUsefunction(){return k5._nActiveBindings}},controlInterpolants:{get totalfunction(){return k5._controlInterpolants.length},get inUsefunction(){return k5._nActiveControlInterpolants}}}},_isActiveAction:function(k6){var k5=k6._cacheIndex;return k5!==null&&k5<this._nActiveActions},_addInactiveAction:function(la,k7,k6){var lb=this._actions,k9=this._actionsByClip,k8=k9[k7];if(k8===undefined){k8={knownActions:[la],actionByRoot:{}};la._byClipCacheIndex=0;k9[k7]=k8}else{var k5=k8.knownActions;la._byClipCacheIndex=k5.length;k5.push(la)}la._cacheIndex=lb.length;lb.push(la);k8.actionByRoot[k6]=la},_removeInactiveAction:function(la){var lc=this._actions,k9=lc[lc.length-1],lf=la._cacheIndex;k9._cacheIndex=lf;lc[lf]=k9;lc.pop();la._cacheIndex=null;var le=la._clip.uuid,lb=this._actionsByClip,k7=lb[le],k5=k7.knownActions,k8=k5[k5.length-1],k6=la._byClipCacheIndex;k8._byClipCacheIndex=k6;k5[k6]=k8;k5.pop();la._byClipCacheIndex=null;var ld=k7.actionByRoot,lg=(la._localRoot||this._root).uuid;delete ld[lg];if(k5.length===0){delete lb[le]}this._removeInactiveBindingsForAction(la)},_removeInactiveBindingsForAction:function(k6){var k9=k6._propertyBindings;for(var k5=0,k8=k9.length;k5!==k8;++k5){var k7=k9[k5];if(--k7.referenceCount===0){this._removeInactiveBinding(k7)}}},_lendAction:function(k7){var k9=this._actions,k5=k7._cacheIndex,k6=this._nActiveActions++,k8=k9[k6];k7._cacheIndex=k6;k9[k6]=k7;k8._cacheIndex=k5;k9[k5]=k8},_takeBackAction:function(k8){var k9=this._actions,k6=k8._cacheIndex,k5=--this._nActiveActions,k7=k9[k5];k8._cacheIndex=k5;k9[k5]=k8;k7._cacheIndex=k6;k9[k6]=k7},_addInactiveBinding:function(k9,k5,k8){var k7=this._bindingsByRootAndName,k6=k7[k5],la=this._bindings;if(k6===undefined){k6={};k7[k5]=k6}k6[k8]=k9;k9._cacheIndex=la.length;la.push(k9)},_removeInactiveBinding:function(k8){var k5=this._bindings,ld=k8.binding,le=ld.rootNode.uuid,lc=ld.path,la=this._bindingsByRootAndName,k6=la[le],k7=k5[k5.length-1],k9=k8._cacheIndex;k7._cacheIndex=k9;k5[k9]=k7;k5.pop();delete k6[lc];remove_empty_map:{for(var lb in k6){break remove_empty_map}delete la[le]}},_lendBinding:function(k8){var k9=this._bindings,k5=k8._cacheIndex,k7=this._nActiveBindings++,k6=k9[k7];k8._cacheIndex=k7;k9[k7]=k8;k6._cacheIndex=k5;k9[k5]=k6},_takeBackBinding:function(k8){var k9=this._bindings,k7=k8._cacheIndex,k6=--this._nActiveBindings,k5=k9[k6];k8._cacheIndex=k6;k9[k6]=k8;k5._cacheIndex=k7;k9[k7]=k5},_lendControlInterpolant:function(){var k7=this._controlInterpolants,k5=this._nActiveControlInterpolants++,k6=k7[k5];if(k6===undefined){k6=new dr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer);k6.__cacheIndex=k5;k7[k5]=k6}return k6},_takeBackControlInterpolant:function(k9){var k8=this._controlInterpolants,k6=k9.__cacheIndex,k5=--this._nActiveControlInterpolants,k7=k8[k5];k9.__cacheIndex=k5;k8[k5]=k9;k7.__cacheIndex=k6;k8[k6]=k7},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(k8,k6){var lc=k6||this._root,le=lc.uuid,ld=typeof k8==="string"?bA.findByName(lc,k8):k8,lb=ld!==null?ld.uuid:k8,k7=this._actionsByClip[lb],k5=null;if(k7!==undefined){var k9=k7.actionByRoot[le];if(k9!==undefined){return k9}k5=k7.knownActions[0];if(ld===null){ld=k5._clip}}if(ld===null){return null}var la=new ko(this,ld,k6);this._bindAction(la,k5);this._addInactiveAction(la,lb,le);return la},existingAction:function(la,k5){var k7=k5||this._root,k6=k7.uuid,lb=typeof la==="string"?bA.findByName(k7,la):la,k8=lb?lb.uuid:la,k9=this._actionsByClip[k8];if(k9!==undefined){return k9.actionByRoot[k6]||null}return null},stopAllAction:function(){var k8=this._actions,k7=this._nActiveActions,k9=this._bindings,k5=this._nActiveBindings;this._nActiveActions=0;this._nActiveBindings=0;for(var k6=0;k6!==k7;++k6){k8[k6].reset()}for(var k6=0;k6!==k5;++k6){k9[k6].useCount=0}return this},update:function(le){le*=this.timeScale;var lc=this._actions,k8=this._nActiveActions,k9=this.time+=le,k6=Math.sign(le),k7=this._accuIndex^=1;for(var ld=0;ld!==k8;++ld){var lb=lc[ld];lb._update(k9,le,k6,k7)}var k5=this._bindings,la=this._nActiveBindings;for(var ld=0;ld!==la;++ld){k5[ld].apply(k7)}return this},getRoot:function(){return this._root},uncacheClip:function(k7){var lb=this._actions,ld=k7.uuid,la=this._actionsByClip,k5=la[ld];if(k5!==undefined){var lf=k5.knownActions;for(var lc=0,k6=lf.length;lc!==k6;++lc){var k9=lf[lc];this._deactivateAction(k9);var le=k9._cacheIndex,k8=lb[lb.length-1];k9._cacheIndex=null;k9._byClipCacheIndex=null;k8._cacheIndex=le;lb[le]=k8;lb.pop();this._removeInactiveBindingsForAction(k9)}delete la[ld]}},uncacheRoot:function(lb){var le=lb.uuid,k6=this._actionsByClip;for(var la in k6){var k8=k6[la].actionByRoot,k5=k8[le];if(k5!==undefined){this._deactivateAction(k5);this._removeInactiveAction(k5)}}var lc=this._bindingsByRootAndName,k7=lc[le];if(k7!==undefined){for(var ld in k7){var k9=k7[ld];k9.restoreOriginalState();this._removeInactiveBinding(k9)}}},uncacheAction:function(k6,k5){var k7=this.existingAction(k6,k5);if(k7!==null){this._deactivateAction(k7);this._removeInactiveAction(k7)}}});function W(k5){if(typeof k5==="string"){a.Logger.log(a.Logger.WARNING,"THREE.Uniform: Type parameter is no longer needed.");k5=arguments[1]}this.value=k5}W.prototype.clone=function(){return new W(this.value.clone===undefined?this.value:this.value.clone())};function jG(){cl.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=undefined}jG.prototype=Object.assign(Object.create(cl.prototype),{constructor:jG,isInstancedBufferGeometry:true,copy:function(k5){cl.prototype.copy.call(this,k5);this.maxInstancedCount=k5.maxInstancedCount;return this},clone:function(){return new this.constructor().copy(this)}});function h6(k7,k6,k5){cQ.call(this,k7,k6);this.meshPerAttribute=k5||1}h6.prototype=Object.assign(Object.create(cQ.prototype),{constructor:h6,isInstancedInterleavedBuffer:true,copy:function(k5){cQ.prototype.copy.call(this,k5);this.meshPerAttribute=k5.meshPerAttribute;return this}});function jt(k8,k6,k7,k5){if(typeof(k7)==="number"){k5=k7;k7=false;a.Logger.log(a.Logger.SEVERE,"THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")}gy.call(this,k8,k6,k7);this.meshPerAttribute=k5||1}jt.prototype=Object.assign(Object.create(gy.prototype),{constructor:jt,isInstancedBufferAttribute:true,copy:function(k5){gy.prototype.copy.call(this,k5);this.meshPerAttribute=k5.meshPerAttribute;return this}});function cu(k6,k8,k7,k5){this.ray=new gr(k6,k8);this.near=k7||0;this.far=k5||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function cP(k6,k5){return k6.distance-k5.distance}function dU(k8,k6,lb,k7){if(k8.visible===false){return}k8.raycast(k6,lb);if(k7===true){var la=k8.children;for(var k9=0,k5=la.length;k9<k5;k9++){dU(la[k9],k6,lb,true)}}}Object.assign(cu.prototype,{linePrecision:1,set:function(k5,k6){this.ray.set(k5,k6)},setFromCamera:function(k6,k5){if((k5&&k5.isPerspectiveCamera)){this.ray.origin.setFromMatrixPosition(k5.matrixWorld);this.ray.direction.set(k6.x,k6.y,0.5).unproject(k5).sub(this.ray.origin).normalize()}else{if((k5&&k5.isOrthographicCamera)){this.ray.origin.set(k6.x,k6.y,(k5.near+k5.far)/(k5.near-k5.far)).unproject(k5);this.ray.direction.set(0,0,-1).transformDirection(k5.matrixWorld)}else{a.Logger.log(a.Logger.SEVERE,"THREE.Raycaster: Unsupported camera type.")}}},intersectObject:function(k6,k5,k7){var k8=k7||[];dU(k6,this,k8,k5);k8.sort(cP);return k8},intersectObjects:function(la,k6,k8){var k9=k8||[];if(Array.isArray(la)===false){a.Logger.log(a.Logger.WARNING,"THREE.Raycaster.intersectObjects: objects is not an Array.");return k9}for(var k7=0,k5=la.length;k7<k5;k7++){dU(la[k7],this,k9,k6)}k9.sort(cP);return k9}});function iN(k5,k7,k6){this.radius=(k5!==undefined)?k5:1;this.phi=(k7!==undefined)?k7:0;this.theta=(k6!==undefined)?k6:0;return this}Object.assign(iN.prototype,{set:function(k5,k7,k6){this.radius=k5;this.phi=k7;this.theta=k6;return this},clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.radius=k5.radius;this.phi=k5.phi;this.theta=k5.theta;return this},makeSafe:function(){var k5=0.000001;this.phi=Math.max(k5,Math.min(Math.PI-k5,this.phi));return this},setFromVector3:function(k5){return this.setFromCartesianCoords(k5.x,k5.y,k5.z)},setFromCartesianCoords:function(k5,k7,k6){this.radius=Math.sqrt(k5*k5+k7*k7+k6*k6);if(this.radius===0){this.theta=0;this.phi=0}else{this.theta=Math.atan2(k5,k6);this.phi=Math.acos(dY.clamp(k7/this.radius,-1,1))}return this}});function eb(k5,k6,k7){this.radius=(k5!==undefined)?k5:1;this.theta=(k6!==undefined)?k6:0;this.y=(k7!==undefined)?k7:0;return this}Object.assign(eb.prototype,{set:function(k5,k6,k7){this.radius=k5;this.theta=k6;this.y=k7;return this},clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.radius=k5.radius;this.theta=k5.theta;this.y=k5.y;return this},setFromVector3:function(k5){return this.setFromCartesianCoords(k5.x,k5.y,k5.z)},setFromCartesianCoords:function(k5,k7,k6){this.radius=Math.sqrt(k5*k5+k6*k6);this.theta=Math.atan2(k5,k6);this.y=k7;return this}});function aP(k6,k5){this.min=(k6!==undefined)?k6:new bg(+Infinity,+Infinity);this.max=(k5!==undefined)?k5:new bg(-Infinity,-Infinity)}Object.assign(aP.prototype,{set:function(k6,k5){this.min.copy(k6);this.max.copy(k5);return this},setFromPoints:function(k7){this.makeEmpty();for(var k6=0,k5=k7.length;k6<k5;k6++){this.expandByPoint(k7[k6])}return this},setFromCenterAndSize:function(){var k6=new bg();return function k5(k7,k9){var k8=k6.copy(k9).multiplyScalar(0.5);this.min.copy(k7).sub(k8);this.max.copy(k7).add(k8);return this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.min.copy(k5.min);this.max.copy(k5.max);return this},makeEmpty:function(){this.min.x=this.min.y=+Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return(this.max.x<this.min.x)||(this.max.y<this.min.y)},getCenter:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Box2: .getCenter() target is now required");k5=new bg()}return this.isEmpty()?k5.set(0,0):k5.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Box2: .getSize() target is now required");k5=new bg()}return this.isEmpty()?k5.set(0,0):k5.subVectors(this.max,this.min)},expandByPoint:function(k5){this.min.min(k5);this.max.max(k5);return this},expandByVector:function(k5){this.min.sub(k5);this.max.add(k5);return this},expandByScalar:function(k5){this.min.addScalar(-k5);this.max.addScalar(k5);return this},containsPoint:function(k5){return k5.x<this.min.x||k5.x>this.max.x||k5.y<this.min.y||k5.y>this.max.y?false:true},containsBox:function(k5){return this.min.x<=k5.min.x&&k5.max.x<=this.max.x&&this.min.y<=k5.min.y&&k5.max.y<=this.max.y},getParameter:function(k5,k6){if(k6===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Box2: .getParameter() target is now required");k6=new bg()}return k6.set((k5.x-this.min.x)/(this.max.x-this.min.x),(k5.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(k5){return k5.max.x<this.min.x||k5.min.x>this.max.x||k5.max.y<this.min.y||k5.min.y>this.max.y?false:true},clampPoint:function(k5,k6){if(k6===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Box2: .clampPoint() target is now required");k6=new bg()}return k6.copy(k5).clamp(this.min,this.max)},distanceToPoint:function(){var k6=new bg();return function k5(k7){var k8=k6.copy(k7).clamp(this.min,this.max);return k8.sub(k7).length()}}(),intersect:function(k5){this.min.max(k5.min);this.max.min(k5.max);return this},union:function(k5){this.min.min(k5.min);this.max.max(k5.max);return this},translate:function(k5){this.min.add(k5);this.max.add(k5);return this},equals:function(k5){return k5.min.equals(this.min)&&k5.max.equals(this.max)}});function dK(k6,k5){this.start=(k6!==undefined)?k6:new bf();this.end=(k5!==undefined)?k5:new bf()}Object.assign(dK.prototype,{set:function(k6,k5){this.start.copy(k6);this.end.copy(k5);return this},clone:function(){return new this.constructor().copy(this)},copy:function(k5){this.start.copy(k5.start);this.end.copy(k5.end);return this},getCenter:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Line3: .getCenter() target is now required");k5=new bf()}return k5.addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(k5){if(k5===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Line3: .delta() target is now required");k5=new bf()}return k5.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(k5,k6){if(k6===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Line3: .at() target is now required");k6=new bf()}return this.delta(k6).multiplyScalar(k5).add(this.start)},closestPointToPointParameter:function(){var k7=new bf();var k5=new bf();return function k6(k8,lc){k7.subVectors(k8,this.start);k5.subVectors(this.end,this.start);var lb=k5.dot(k5);var la=k5.dot(k7);var k9=la/lb;if(lc){k9=dY.clamp(k9,0,1)}return k9}}(),closestPointToPoint:function(k5,k8,k7){var k6=this.closestPointToPointParameter(k5,k8);if(k7===undefined){a.Logger.log(a.Logger.WARNING,"THREE.Line3: .closestPointToPoint() target is now required");k7=new bf()}return this.delta(k7).multiplyScalar(k6).add(this.start)},applyMatrix4:function(k5){this.start.applyMatrix4(k5);this.end.applyMatrix4(k5);return this},equals:function(k5){return k5.start.equals(this.start)&&k5.end.equals(this.end)}});function aW(k5){fg.call(this);this.material=k5;this.render=function(){}}aW.prototype=Object.create(fg.prototype);aW.prototype.constructor=aW;aW.prototype.isImmediateRenderObject=true;function fV(k7,le,k6,lc){this.object=k7;this.size=(le!==undefined)?le:1;var k8=(k6!==undefined)?k6:16711680;var k5=(lc!==undefined)?lc:1;var ld=0;var la=this.object.geometry;if(la&&la.isGeometry){ld=la.faces.length*3}else{if(la&&la.isBufferGeometry){ld=la.attributes.normal.count}}var lb=new cl();var k9=new ei(ld*2*3,3);lb.addAttribute("position",k9);fo.call(this,lb,new ju({color:k8,linewidth:k5}));this.matrixAutoUpdate=false;this.update()}fV.prototype=Object.create(fo.prototype);fV.prototype.constructor=fV;fV.prototype.update=(function(){var k8=new bf();var k6=new bf();var k5=new fw();return function k7(){var lo=["a","b","c"];this.object.updateMatrixWorld(true);k5.getNormalMatrix(this.object.matrixWorld);var k9=this.object.matrixWorld;var lf=this.geometry.attributes.position;var li=this.object.geometry;if(li&&li.isGeometry){var lk=li.vertices;var la=li.faces;var ln=0;for(var le=0,lb=la.length;le<lb;le++){var lm=la[le];for(var lc=0,ld=lm.vertexNormals.length;lc<ld;lc++){var lh=lk[lm[lo[lc]]];var lj=lm.vertexNormals[lc];k8.copy(lh).applyMatrix4(k9);k6.copy(lj).applyMatrix3(k5).normalize().multiplyScalar(this.size).add(k8);lf.setXYZ(ln,k8.x,k8.y,k8.z);ln=ln+1;lf.setXYZ(ln,k6.x,k6.y,k6.z);ln=ln+1}}}else{if(li&&li.isBufferGeometry){var ll=li.attributes.position;var lg=li.attributes.normal;var ln=0;for(var lc=0,ld=ll.count;lc<ld;lc++){k8.set(ll.getX(lc),ll.getY(lc),ll.getZ(lc)).applyMatrix4(k9);k6.set(lg.getX(lc),lg.getY(lc),lg.getZ(lc));k6.applyMatrix3(k5).normalize().multiplyScalar(this.size).add(k8);lf.setXYZ(ln,k8.x,k8.y,k8.z);ln=ln+1;lf.setXYZ(ln,k6.x,k6.y,k6.z);ln=ln+1}}}lf.needsUpdate=true}}());function i3(k8,k6){fg.call(this);this.light=k8;this.light.updateMatrixWorld();this.matrix=k8.matrixWorld;this.matrixAutoUpdate=false;this.color=k6;var lc=new cl();var la=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var k9=0,k7=1,k5=32;k9<k5;k9++,k7++){var le=(k9/k5)*Math.PI*2;var ld=(k7/k5)*Math.PI*2;la.push(Math.cos(le),Math.sin(le),1,Math.cos(ld),Math.sin(ld),1)}lc.addAttribute("position",new ei(la,3));var lb=new ju({fog:false});this.cone=new fo(lc,lb);this.add(this.cone);this.update()}i3.prototype=Object.create(fg.prototype);i3.prototype.constructor=i3;i3.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};i3.prototype.update=function(){var k5=new bf();return function k6(){this.light.updateMatrixWorld();var k7=this.light.distance?this.light.distance:1000;var k8=k7*Math.tan(this.light.angle);this.cone.scale.set(k8,k8,k7);k5.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(k5);if(this.color!==undefined){this.cone.material.color.set(this.color)}else{this.cone.material.color.copy(this.light.color)}}}();function C(k5){var k7=[];if(k5&&k5.isBone){k7.push(k5)}for(var k6=0;k6<k5.children.length;k6++){k7.push.apply(k7,C(k5.children[k6]))}return k7}function bR(k7){var k6=C(k7);var lb=new cl();var la=[];var k5=[];var le=new id(0,0,1);var lc=new id(0,1,0);for(var k8=0;k8<k6.length;k8++){var ld=k6[k8];if(ld.parent&&ld.parent.isBone){la.push(0,0,0);la.push(0,0,0);k5.push(le.r,le.g,le.b);k5.push(lc.r,lc.g,lc.b)}}lb.addAttribute("position",new ei(la,3));lb.addAttribute("color",new ei(k5,3));var k9=new ju({vertexColors:h2,depthTest:false,depthWrite:false,transparent:true});fo.call(this,lb,k9);this.root=k7;this.bones=k6;this.matrix=k7.matrixWorld;this.matrixAutoUpdate=false}bR.prototype=Object.create(fo.prototype);bR.prototype.constructor=bR;bR.prototype.updateMatrixWorld=function(){var k5=new bf();var k7=new fv();var k8=new fv();return function k6(le){var la=this.bones;var lf=this.geometry;var k9=lf.getAttribute("position");k8.getInverse(this.root.matrixWorld);for(var lc=0,lb=0;lc<la.length;lc++){var ld=la[lc];if(ld.parent&&ld.parent.isBone){k7.multiplyMatrices(k8,ld.matrixWorld);k5.setFromMatrixPosition(k7);k9.setXYZ(lb,k5.x,k5.y,k5.z);k7.multiplyMatrices(k8,ld.parent.matrixWorld);k5.setFromMatrixPosition(k7);k9.setXYZ(lb+1,k5.x,k5.y,k5.z);lb+=2}}lf.getAttribute("position").needsUpdate=true;fg.prototype.updateMatrixWorld.call(this,le)}}();function y(k5,k9,k6){this.light=k5;this.light.updateMatrixWorld();this.color=k6;var k8=new ao(k9,4,2);var k7=new e2({wireframe:true,fog:false});kH.call(this,k8,k7);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=false;this.update()}y.prototype=Object.create(kH.prototype);y.prototype.constructor=y;y.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};y.prototype.update=function(){if(this.color!==undefined){this.material.color.set(this.color)}else{this.material.color.copy(this.light.color)}};function fk(k6,k7){this.type="RectAreaLightHelper";this.light=k6;this.color=k7;var k5=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0];var lb=new cl();lb.addAttribute("position",new ei(k5,3));lb.computeBoundingSphere();var la=new ju({fog:false});kP.call(this,lb,la);var k9=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0];var k8=new cl();k8.addAttribute("position",new ei(k9,3));k8.computeBoundingSphere();this.add(new kH(k8,new e2({side:c5,fog:false})));this.update()}fk.prototype=Object.create(kP.prototype);fk.prototype.constructor=fk;fk.prototype.update=function(){this.scale.set(0.5*this.light.width,0.5*this.light.height,1);if(this.color!==undefined){this.material.color.set(this.color);this.children[0].material.color.set(this.color)}else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var k6=this.material.color;var k5=Math.max(k6.r,k6.g,k6.b);if(k5>1){k6.multiplyScalar(1/k5)}this.children[0].material.color.copy(this.material.color)}};fk.prototype.dispose=function(){this.geometry.dispose();this.material.dispose();this.children[0].geometry.dispose();this.children[0].material.dispose()};function hM(k7,k9,k8){fg.call(this);this.light=k7;this.light.updateMatrixWorld();this.matrix=k7.matrixWorld;this.matrixAutoUpdate=false;this.color=k8;var la=new r(k9);la.rotateY(Math.PI*0.5);this.material=new e2({wireframe:true,fog:false});if(this.color===undefined){this.material.vertexColors=h2}var k5=la.getAttribute("position");var k6=new Float32Array(k5.count*3);la.addAttribute("color",new gy(k6,3));this.add(new kH(la,this.material));this.update()}hM.prototype=Object.create(fg.prototype);hM.prototype.constructor=hM;hM.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};hM.prototype.update=function(){var k7=new bf();var k6=new id();var k5=new id();return function k8(){var ld=this.children[0];if(this.color!==undefined){this.material.color.set(this.color)}else{var la=ld.geometry.getAttribute("color");k6.copy(this.light.color);k5.copy(this.light.groundColor);for(var lc=0,k9=la.count;lc<k9;lc++){var lb=(lc<(k9/2))?k6:k5;la.setXYZ(lc,lb.r,lb.g,lb.b)}la.needsUpdate=true}ld.lookAt(k7.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function aF(lj,k7,li,lh){lj=lj||10;k7=k7||10;li=new id(li!==undefined?li:4473924);lh=new id(lh!==undefined?lh:8947848);var k6=k7/2;var k8=lj/k7;var ld=lj/2;var lf=[],k5=[];for(var lc=0,lb=0,la=-ld;lc<=k7;lc++,la+=k8){lf.push(-ld,0,la,ld,0,la);lf.push(la,0,-ld,la,0,ld);var k9=lc===k6?li:lh;k9.toArray(k5,lb);lb+=3;k9.toArray(k5,lb);lb+=3;k9.toArray(k5,lb);lb+=3;k9.toArray(k5,lb);lb+=3}var lg=new cl();lg.addAttribute("position",new ei(lf,3));lg.addAttribute("color",new ei(k5,3));var le=new ju({vertexColors:h2});fo.call(this,lg,le)}aF.prototype=Object.create(fo.prototype);aF.prototype.constructor=aF;function eM(ld,k6,lc,k8,ll,lk){ld=ld||10;k6=k6||16;lc=lc||8;k8=k8||64;ll=new id(ll!==undefined?ll:4473924);lk=new id(lk!==undefined?lk:8947848);var lf=[];var k7=[];var li,lg;var lj,lb,la,k5,k9;for(lb=0;lb<=k6;lb++){lj=(lb/k6)*(Math.PI*2);li=Math.sin(lj)*ld;lg=Math.cos(lj)*ld;lf.push(0,0,0);lf.push(li,0,lg);k9=(lb&1)?ll:lk;k7.push(k9.r,k9.g,k9.b);k7.push(k9.r,k9.g,k9.b)}for(lb=0;lb<=lc;lb++){k9=(lb&1)?ll:lk;k5=ld-(ld/lc*lb);for(la=0;la<k8;la++){lj=(la/k8)*(Math.PI*2);li=Math.sin(lj)*k5;lg=Math.cos(lj)*k5;lf.push(li,0,lg);k7.push(k9.r,k9.g,k9.b);lj=((la+1)/k8)*(Math.PI*2);li=Math.sin(lj)*k5;lg=Math.cos(lj)*k5;lf.push(li,0,lg);k7.push(k9.r,k9.g,k9.b)}}var lh=new cl();lh.addAttribute("position",new ei(lf,3));lh.addAttribute("color",new ei(k7,3));var le=new ju({vertexColors:h2});fo.call(this,lh,le)}eM.prototype=Object.create(fo.prototype);eM.prototype.constructor=eM;function l(k7,k9,ld,la){this.audio=k7;this.range=k9||1;this.divisionsInnerAngle=ld||16;this.divisionsOuterAngle=la||2;var lc=new cl();var k5=this.divisionsInnerAngle+this.divisionsOuterAngle*2;var k8=new Float32Array((k5*3+3)*3);lc.addAttribute("position",new gy(k8,3));var k6=new ju({color:65280});var lb=new ju({color:16776960});kP.call(this,lc,[lb,k6]);this.update()}l.prototype=Object.create(kP.prototype);l.prototype.constructor=l;l.prototype.update=function(){var la=this.audio;var lb=this.range;var lj=this.divisionsInnerAngle;var lf=this.divisionsOuterAngle;var k5=dY.degToRad(la.panner.coneInnerAngle);var lg=dY.degToRad(la.panner.coneOuterAngle);var ld=k5/2;var li=lg/2;var k8=0;var le=0;var k9,k7;var lh=this.geometry;var lc=lh.attributes.position;lh.clearGroups();function k6(lo,ln,ll,lk){var lm=(ln-lo)/ll;lc.setXYZ(k8,0,0,0);le++;for(k9=lo;k9<ln;k9+=lm){k7=k8+le;lc.setXYZ(k7,Math.sin(k9)*lb,0,Math.cos(k9)*lb);lc.setXYZ(k7+1,Math.sin(Math.min(k9+lm,ln))*lb,0,Math.cos(Math.min(k9+lm,ln))*lb);lc.setXYZ(k7+2,0,0,0);le+=3}lh.addGroup(k8,le,lk);k8+=le;le=0}k6(-li,-ld,lf,0);k6(-ld,ld,lj,1);k6(ld,li,lf,0);lc.needsUpdate=true;if(k5===lg){this.material[0].visible=false}};l.prototype.dispose=function(){this.geometry.dispose();this.material[0].dispose();this.material[1].dispose()};function dx(k7,le,k6,lc){this.object=k7;this.size=(le!==undefined)?le:1;var k8=(k6!==undefined)?k6:16776960;var k5=(lc!==undefined)?lc:1;var ld=0;var la=this.object.geometry;if(la&&la.isGeometry){ld=la.faces.length}else{a.Logger.log(a.Logger.WARNING,"THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.")}var lb=new cl();var k9=new ei(ld*2*3,3);lb.addAttribute("position",k9);fo.call(this,lb,new ju({color:k8,linewidth:k5}));this.matrixAutoUpdate=false;this.update()}dx.prototype=Object.create(fo.prototype);dx.prototype.constructor=dx;dx.prototype.update=(function(){var k8=new bf();var k6=new bf();var k5=new fw();return function k7(){this.object.updateMatrixWorld(true);k5.getNormalMatrix(this.object.matrixWorld);var k9=this.object.matrixWorld;var ld=this.geometry.attributes.position;var le=this.object.geometry;var lg=le.vertices;var la=le.faces;var li=0;for(var lc=0,lb=la.length;lc<lb;lc++){var lh=la[lc];var lf=lh.normal;k8.copy(lg[lh.a]).add(lg[lh.b]).add(lg[lh.c]).divideScalar(3).applyMatrix4(k9);k6.copy(lf).applyMatrix3(k5).normalize().multiplyScalar(this.size).add(k8);ld.setXYZ(li,k8.x,k8.y,k8.z);li=li+1;ld.setXYZ(li,k6.x,k6.y,k6.z);li=li+1}ld.needsUpdate=true}}());function ck(k5,k7,k6){fg.call(this);this.light=k5;this.light.updateMatrixWorld();this.matrix=k5.matrixWorld;this.matrixAutoUpdate=false;this.color=k6;if(k7===undefined){k7=1}var k9=new cl();k9.addAttribute("position",new ei([-k7,k7,0,k7,k7,0,k7,-k7,0,-k7,-k7,0,-k7,k7,0],3));var k8=new ju({fog:false});this.lightPlane=new kP(k9,k8);this.add(this.lightPlane);k9=new cl();k9.addAttribute("position",new ei([0,0,0,0,0,1],3));this.targetLine=new kP(k9,k8);this.add(this.targetLine);this.update()}ck.prototype=Object.create(fg.prototype);ck.prototype.constructor=ck;ck.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};ck.prototype.update=function(){var k8=new bf();var k6=new bf();var k5=new bf();return function k7(){k8.setFromMatrixPosition(this.light.matrixWorld);k6.setFromMatrixPosition(this.light.target.matrixWorld);k5.subVectors(k6,k8);this.lightPlane.lookAt(k6);if(this.color!==undefined){this.lightPlane.material.color.set(this.color);this.targetLine.material.color.set(this.color)}else{this.lightPlane.material.color.copy(this.light.color);this.targetLine.material.color.copy(this.light.color)}this.targetLine.lookAt(k6);this.targetLine.scale.z=k5.length()}}();function hi(la){var le=new cl();var lb=new ju({color:16777215,vertexColors:iO});var lc=[];var k6=[];var ld={};var lh=new id(16755200);var k9=new id(16711680);var lf=new id(43775);var k8=new id(16777215);var k5=new id(3355443);lg("n1","n2",lh);lg("n2","n4",lh);lg("n4","n3",lh);lg("n3","n1",lh);lg("f1","f2",lh);lg("f2","f4",lh);lg("f4","f3",lh);lg("f3","f1",lh);lg("n1","f1",lh);lg("n2","f2",lh);lg("n3","f3",lh);lg("n4","f4",lh);lg("p","n1",k9);lg("p","n2",k9);lg("p","n3",k9);lg("p","n4",k9);lg("u1","u2",lf);lg("u2","u3",lf);lg("u3","u1",lf);lg("c","t",k8);lg("p","c",k5);lg("cn1","cn2",k5);lg("cn3","cn4",k5);lg("cf1","cf2",k5);lg("cf3","cf4",k5);function lg(lj,li,lk){k7(lj,lk);k7(li,lk)}function k7(lj,li){lc.push(0,0,0);k6.push(li.r,li.g,li.b);if(ld[lj]===undefined){ld[lj]=[]}ld[lj].push((lc.length/3)-1)}le.addAttribute("position",new ei(lc,3));le.addAttribute("color",new ei(k6,3));fo.call(this,le,lb);this.camera=la;if(this.camera.updateProjectionMatrix){this.camera.updateProjectionMatrix()}this.matrix=la.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=ld;this.update()}hi.prototype=Object.create(fo.prototype);hi.prototype.constructor=hi;hi.prototype.update=function(){var k9,k6;var k5=new bf();var k8=new eI();function k7(ld,lc,li,lh){k5.set(lc,li,lh).unproject(k8);var lg=k6[ld];if(lg!==undefined){var lb=k9.getAttribute("position");for(var lf=0,le=lg.length;lf<le;lf++){lb.setXYZ(lg[lf],k5.x,k5.y,k5.z)}}}return function la(){k9=this.geometry;k6=this.pointMap;var lb=1,lc=1;k8.projectionMatrix.copy(this.camera.projectionMatrix);k7("c",0,0,-1);k7("t",0,0,1);k7("n1",-lb,-lc,-1);k7("n2",lb,-lc,-1);k7("n3",-lb,lc,-1);k7("n4",lb,lc,-1);k7("f1",-lb,-lc,1);k7("f2",lb,-lc,1);k7("f3",-lb,lc,1);k7("f4",lb,lc,1);k7("u1",lb*0.7,lc*1.1,-1);k7("u2",-lb*0.7,lc*1.1,-1);k7("u3",0,lc*2,-1);k7("cf1",-lb,0,1);k7("cf2",lb,0,1);k7("cf3",0,-lc,1);k7("cf4",0,lc,1);k7("cn1",-lb,0,-1);k7("cn2",lb,0,-1);k7("cn3",0,-lc,-1);k7("cn4",0,lc,-1);k9.getAttribute("position").needsUpdate=true}}();function iu(k7,k6){this.object=k7;if(k6===undefined){k6=16776960}var k9=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var k5=new Float32Array(8*3);var k8=new cl();k8.setIndex(new gy(k9,1));k8.addAttribute("position",new gy(k5,3));fo.call(this,k8,new ju({color:k6}));this.matrixAutoUpdate=false;this.update()}iu.prototype=Object.create(fo.prototype);iu.prototype.constructor=iu;iu.prototype.update=(function(){var k5=new aO();return function k6(k9){if(k9!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.BoxHelper: .update() has no longer arguments.")}if(this.object!==undefined){k5.setFromObject(this.object)}if(k5.isEmpty()){return}var la=k5.min;var k8=k5.max;var k7=this.geometry.attributes.position;var lb=k7.array;lb[0]=k8.x;lb[1]=k8.y;lb[2]=k8.z;lb[3]=la.x;lb[4]=k8.y;lb[5]=k8.z;lb[6]=la.x;lb[7]=la.y;lb[8]=k8.z;lb[9]=k8.x;lb[10]=la.y;lb[11]=k8.z;lb[12]=k8.x;lb[13]=k8.y;lb[14]=la.z;lb[15]=la.x;lb[16]=k8.y;lb[17]=la.z;lb[18]=la.x;lb[19]=la.y;lb[20]=la.z;lb[21]=k8.x;lb[22]=la.y;lb[23]=la.z;k7.needsUpdate=true;this.geometry.computeBoundingSphere()}})();iu.prototype.setFromObject=function(k5){this.object=k5;this.update();return this};iu.prototype.copy=function(k5){fo.prototype.copy.call(this,k5);this.object=k5.object;return this};iu.prototype.clone=function(){return new this.constructor().copy(this)};function ef(k8,k7){this.type="Box3Helper";this.box=k8;var k6=(k7!==undefined)?k7:16776960;var la=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var k5=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1];var k9=new cl();k9.setIndex(new gy(la,1));k9.addAttribute("position",new ei(k5,3));fo.call(this,k9,new ju({color:k6}));this.geometry.computeBoundingSphere()}ef.prototype=Object.create(fo.prototype);ef.prototype.constructor=ef;ef.prototype.updateMatrixWorld=function(k6){var k5=this.box;if(k5.isEmpty()){return}k5.getCenter(this.position);k5.getSize(this.scale);this.scale.multiplyScalar(0.5);fg.prototype.updateMatrixWorld.call(this,k6)};function bp(k6,la,lb){this.type="PlaneHelper";this.plane=k6;this.size=(la===undefined)?1:la;var k7=(lb!==undefined)?lb:16776960;var k5=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0];var lc=new cl();lc.addAttribute("position",new ei(k5,3));lc.computeBoundingSphere();kP.call(this,lc,new ju({color:k7}));var k9=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1];var k8=new cl();k8.addAttribute("position",new ei(k9,3));k8.computeBoundingSphere();this.add(new kH(k8,new e2({color:k7,opacity:0.2,transparent:true,depthWrite:false})))}bp.prototype=Object.create(kP.prototype);bp.prototype.constructor=bp;bp.prototype.updateMatrixWorld=function(k5){var k6=-this.plane.constant;if(Math.abs(k6)<1e-8){k6=1e-8}this.scale.set(0.5*this.size,0.5*this.size,k6);this.children[0].material.side=(k6<0)?c5:D;this.lookAt(this.plane.normal);fg.prototype.updateMatrixWorld.call(this,k5)};var kS,kU;function a1(k9,k8,la,k7,k6,k5){fg.call(this);if(k9===undefined){k9=new bf(0,0,1)}if(k8===undefined){k8=new bf(0,0,0)}if(la===undefined){la=1}if(k7===undefined){k7=16776960}if(k6===undefined){k6=0.2*la}if(k5===undefined){k5=0.2*k6}if(kS===undefined){kS=new cl();kS.addAttribute("position",new ei([0,0,0,0,1,0],3));kU=new iH(0,0.5,1,5,1);kU.translate(0,-0.5,0)}this.position.copy(k8);this.line=new kP(kS,new ju({color:k7}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new kH(kU,new e2({color:k7}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(k9);this.setLength(la,k6,k5)}a1.prototype=Object.create(fg.prototype);a1.prototype.constructor=a1;a1.prototype.setDirection=(function(){var k6=new bf();var k7;return function k5(k8){if(k8.y>0.99999){this.quaternion.set(0,0,0,1)}else{if(k8.y<-0.99999){this.quaternion.set(1,0,0,0)}else{k6.set(k8.z,0,-k8.x).normalize();k7=Math.acos(k8.y);this.quaternion.setFromAxisAngle(k6,k7)}}}}());a1.prototype.setLength=function(k7,k6,k5){if(k6===undefined){k6=0.2*k7}if(k5===undefined){k5=0.2*k6}this.line.scale.set(1,Math.max(0,k7-k6),1);this.line.updateMatrix();this.cone.scale.set(k5,k6,k5);this.cone.position.y=k7;this.cone.updateMatrix()};a1.prototype.setColor=function(k5){this.line.material.color.copy(k5);this.cone.material.color.copy(k5)};a1.prototype.copy=function(k5){fg.prototype.copy.call(this,k5,false);this.line.copy(k5.line);this.cone.copy(k5.cone);return this};a1.prototype.clone=function(){return new this.constructor().copy(this)};function c1(k7){k7=k7||1;var k6=[0,0,0,k7,0,0,0,0,0,0,k7,0,0,0,0,0,0,k7];var k5=[1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1];var k9=new cl();k9.addAttribute("position",new ei(k6,3));k9.addAttribute("color",new ei(k5,3));var k8=new ju({vertexColors:h2});fo.call(this,k9,k8)}c1.prototype=Object.create(fo.prototype);c1.prototype.constructor=c1;function dN(k7,k6,lb,la,k9,k8,k5){a.Logger.log(a.Logger.WARNING,"THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new dO(k7,k6,lb,k9,k8,k5)}var cy=0;var bH=1;function P(k5){a.Logger.log(a.Logger.WARNING,"THREE.MeshFaceMaterial has been removed. Use an Array instead.");return k5}function kb(k5){if(k5===undefined){k5=[]}a.Logger.log(a.Logger.WARNING,"THREE.MultiMaterial has been removed. Use an Array instead.");k5.isMultiMaterial=true;k5.materials=k5;k5.clone=function(){return k5.slice()};return k5}function bO(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.PointCloud has been renamed to THREE.Points.");return new hx(k6,k5)}function fZ(k5){a.Logger.log(a.Logger.WARNING,"THREE.Particle has been renamed to THREE.Sprite.");return new iZ(k5)}function ka(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.ParticleSystem has been renamed to THREE.Points.");return new hx(k6,k5)}function hS(k5){a.Logger.log(a.Logger.WARNING,"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new e(k5)}function F(k5){a.Logger.log(a.Logger.WARNING,"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new e(k5)}function kI(k5){a.Logger.log(a.Logger.WARNING,"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new e(k5)}function ft(k5,k7,k6){a.Logger.log(a.Logger.WARNING,"THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new bf(k5,k7,k6)}function g0(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return new gy(k6,k5).setDynamic(true)}function fL(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new c8(k6,k5)}function iC(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new fe(k6,k5)}function kW(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new d6(k6,k5)}function gE(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new f0(k6,k5)}function gT(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new aI(k6,k5)}function jD(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new ha(k6,k5)}function jZ(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new b2(k6,k5)}function bx(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new ei(k6,k5)}function ed(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new it(k6,k5)}dT.create=function(k5,k6){a.Logger.log(a.Logger.WARNING,"THREE.Curve.create() has been deprecated");k5.prototype=Object.create(dT.prototype);k5.prototype.constructor=k5;k5.prototype.getPoint=k6;return k5};Object.assign(bl.prototype,{createPointsGeometry:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var k6=this.getPoints(k5);return this.createGeometry(k6)},createSpacedPointsGeometry:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var k6=this.getSpacedPoints(k5);return this.createGeometry(k6)},createGeometry:function(k8){a.Logger.log(a.Logger.WARNING,"THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var k9=new fm();for(var k7=0,k6=k8.length;k7<k6;k7++){var k5=k8[k7];k9.vertices.push(new bf(k5.x,k5.y,k5.z||0))}return k9}});Object.assign(b1.prototype,{fromPoints:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(k5)}});function i4(k5){a.Logger.log(a.Logger.WARNING,"THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");jP.call(this,k5);this.type="catmullrom";this.closed=true}i4.prototype=Object.create(jP.prototype);function cD(k5){a.Logger.log(a.Logger.WARNING,"THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");jP.call(this,k5);this.type="catmullrom"}cD.prototype=Object.create(jP.prototype);function dm(k5){a.Logger.log(a.Logger.WARNING,"THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");jP.call(this,k5);this.type="catmullrom"}dm.prototype=Object.create(jP.prototype);Object.assign(dm.prototype,{initFromArray:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function ev(k5){a.Logger.log(a.Logger.WARNING,"THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new c1(k5)}function hX(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new iu(k6,k5)}function fB(k5,k6){a.Logger.log(a.Logger.WARNING,"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new fo(new br(k5.geometry),new ju({color:k6!==undefined?k6:16777215}))}aF.prototype.setColors=function(){a.Logger.log(a.Logger.SEVERE,"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};bR.prototype.update=function(){a.Logger.log(a.Logger.SEVERE,"THREE.SkeletonHelper: update() no longer needs to be called.")};function kp(k5,k6){a.Logger.log(a.Logger.WARNING,"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new fo(new f4(k5.geometry),new ju({color:k6!==undefined?k6:16777215}))}Object.assign(bE.prototype,{extractUrlBase:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return ji.extractUrlBase(k5)}});function f1(k5){a.Logger.log(a.Logger.WARNING,"THREE.XHRLoader has been renamed to THREE.FileLoader.");return new fC(k5)}function gR(k5){a.Logger.log(a.Logger.WARNING,"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new et(k5)}Object.assign(eC.prototype,{setTexturePath:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(k5)}});Object.assign(aP.prototype,{center:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(k5)},empty:function(){a.Logger.log(a.Logger.WARNING,"THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(k5)},size:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(k5)}});Object.assign(aO.prototype,{center:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(k5)},empty:function(){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(k5)},isIntersectionSphere:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(k5)},size:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(k5)}});dK.prototype.center=function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(k5)};Object.assign(dY,{random16:function(){a.Logger.log(a.Logger.WARNING,"THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return dY.floorPowerOfTwo(k5)},nextPowerOfTwo:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return dY.ceilPowerOfTwo(k5)}});Object.assign(fw.prototype,{flattenToArrayOffset:function(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(k6,k5)},multiplyVector3:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return k5.applyMatrix3(this)},multiplyVector3Array:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(k5)},applyToVector3Array:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(fv.prototype,{extractPosition:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(k5)},flattenToArrayOffset:function(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(k6,k5)},getPosition:function(){var k6;return function k5(){if(k6===undefined){k6=new bf()}a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return k6.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(k5)},multiplyToArray:function(){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return k5.applyMatrix4(this)},multiplyVector4:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return k5.applyMatrix4(this)},multiplyVector3Array:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");k5.transformDirection(this)},crossVector:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return k5.applyMatrix4(this)},translate:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix4: .translate() has been removed.")},rotateX:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(k5)},applyToVector3Array:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(la,k7,k6,k9,k8,k5){a.Logger.log(a.Logger.WARNING,"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(la,k7,k9,k6,k8,k5)}});fA.prototype.isIntersectionLine=function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(k5)};hd.prototype.multiplyVector3=function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return k5.applyQuaternion(this)};Object.assign(gr.prototype,{isIntersectionBox:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(k5)},isIntersectionPlane:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(k5)},isIntersectionSphere:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(k5)}});Object.assign(gD.prototype,{area:function(){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(k5,k6){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(k5,k6)},midpoint:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(k5)},normal:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(k5)},plane:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(k5)}});Object.assign(gD,{barycoordFromPoint:function(k6,k7,k5,k9,k8){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return gD.getBarycoord(k6,k7,k5,k9,k8)},normal:function(k6,k5,k8,k7){a.Logger.log(a.Logger.WARNING,"THREE.Triangle: .normal() has been renamed to .getNormal().");return gD.getNormal(k6,k5,k8,k7)}});Object.assign(bL.prototype,{extractAllPoints:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(k5)},extrude:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new aD(this,k5)},makeGeometry:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new kX(this,k5)}});Object.assign(bg.prototype,{fromAttribute:function(k6,k5,k7){a.Logger.log(a.Logger.WARNING,"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(k6,k5,k7)},distanceToManhattan:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(k5)},lengthManhattan:function(){a.Logger.log(a.Logger.WARNING,"THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(bf.prototype,{setEulerFromRotationMatrix:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(k5)},getScaleFromMatrix:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(k5)},getColumnFromMatrix:function(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(k5,k6)},applyProjection:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(k5)},fromAttribute:function(k6,k5,k7){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(k6,k5,k7)},distanceToManhattan:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(k5)},lengthManhattan:function(){a.Logger.log(a.Logger.WARNING,"THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(bd.prototype,{fromAttribute:function(k6,k5,k7){a.Logger.log(a.Logger.WARNING,"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(k6,k5,k7)},lengthManhattan:function(){a.Logger.log(a.Logger.WARNING,"THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(fm.prototype,{computeTangents:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});Object.assign(fg.prototype,{getChildByName:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(k5)},renderDepth:function(){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(k5,k6)},getWorldRotation:function(){a.Logger.log(a.Logger.SEVERE,"THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}});Object.defineProperties(fg.prototype,{eulerOrder:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=k5}},useQuaternion:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){a.Logger.log(a.Logger.WARNING,"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(ix.prototype,{objects:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(es.prototype,"useVertexTexture",{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.Skeleton: useVertexTexture has been removed.")},set:function(){a.Logger.log(a.Logger.WARNING,"THREE.Skeleton: useVertexTexture has been removed.")}});fN.prototype.initBones=function(){a.Logger.log(a.Logger.SEVERE,"THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(dT.prototype,"__arcLengthDivisions",{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=k5}});kR.prototype.setLens=function(k6,k5){a.Logger.log(a.Logger.WARNING,"THREE.PerspectiveCamera.setLens is deprecated. "+"Use .setFocalLength and .filmGauge for a photographic setup.");if(k5!==undefined){this.filmGauge=k5}this.setFocalLength(k6)};Object.defineProperties(hj.prototype,{onlyShadow:{set:function(){a.Logger.log(a.Logger.WARNING,"THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=k5}},shadowCameraLeft:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=k5}},shadowCameraRight:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=k5}},shadowCameraTop:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=k5}},shadowCameraBottom:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=k5}},shadowCameraNear:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=k5}},shadowCameraFar:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=k5}},shadowCameraVisible:{set:function(){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=k5}},shadowDarkness:{set:function(){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=k5}},shadowMapHeight:{set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=k5}}});Object.defineProperties(gy.prototype,{length:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}},copyIndicesArray:function(){a.Logger.log(a.Logger.SEVERE,"THREE.BufferAttribute: .copyIndicesArray() has been removed.")}});Object.assign(cl.prototype,{addIndex:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(k5)},addDrawCall:function(k7,k5,k6){if(k6!==undefined){a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.")}a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(k7,k5)},clearDrawCalls:function(){a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(cl.prototype,{drawcalls:{get:function(){a.Logger.log(a.Logger.SEVERE,"THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.assign(g8.prototype,{getArrays:function(){a.Logger.log(a.Logger.SEVERE,"THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){a.Logger.log(a.Logger.SEVERE,"THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){a.Logger.log(a.Logger.SEVERE,"THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(W.prototype,{dynamic:{set:function(){a.Logger.log(a.Logger.WARNING,"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){a.Logger.log(a.Logger.WARNING,"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(jo.prototype,{wrapAround:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.Material: .wrapAround has been removed.")},set:function(){a.Logger.log(a.Logger.WARNING,"THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.Material: .overdraw has been removed.")},set:function(){a.Logger.log(a.Logger.WARNING,"THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.Material: .wrapRGB has been removed.");return new id()}},shading:{get:function(){a.Logger.log(a.Logger.SEVERE,"THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=(k5===hJ)}}});Object.defineProperties(eW.prototype,{metal:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return false},set:function(){a.Logger.log(a.Logger.WARNING,"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(jW.prototype,{derivatives:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=k5}}});Object.assign(hy.prototype,{clearTarget:function(k7,k5,k8,k6){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(k7);this.clear(k5,k8,k6)},animate:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(k5)},getCurrentRenderTarget:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(k5)},initMaterial:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .setFaceCulling() has been removed.")}});Object.defineProperties(hy.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=k5}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=k5}},shadowMapCullFace:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.");return undefined},set:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(iy.prototype,{cullFace:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.");return undefined},set:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.");return undefined},set:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.");return undefined},set:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(hq.prototype,{activeCubeFace:{set:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}});Object.defineProperties(e3.prototype,{wrapS:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=k5}},wrapT:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=k5}},magFilter:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=k5}},minFilter:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=k5}},anisotropy:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=k5}},offset:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=k5}},repeat:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=k5}},format:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=k5}},type:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=k5}},generateMipmaps:{get:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=k5}}});Object.defineProperties(fM.prototype,{standing:{set:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){a.Logger.log(a.Logger.WARNING,"THREE.WebVRManager: .userHeight has been removed.")}}});hK.prototype.load=function(k5){a.Logger.log(a.Logger.WARNING,"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var k6=this;var k7=new gj();k7.load(k5,function(k8){k6.setBuffer(k8)});return this};jO.prototype.getData=function(){a.Logger.log(a.Logger.WARNING,"THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};cn.prototype.updateCubeMap=function(k5,k6){a.Logger.log(a.Logger.WARNING,"THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(k5,k6)};var fj={merge:function(k7,k6,k8){a.Logger.log(a.Logger.WARNING,"THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var k5;if(k6.isMesh){k6.matrixAutoUpdate&&k6.updateMatrix();k5=k6.matrix;k6=k6.geometry}k7.merge(k6,k5,k8)},center:function(k5){a.Logger.log(a.Logger.WARNING,"THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return k5.center()}};cO.crossOrigin=undefined;cO.loadTexture=function(k7,k6,k8,la){a.Logger.log(a.Logger.WARNING,"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var k5=new cw();k5.setCrossOrigin(this.crossOrigin);var k9=k5.load(k7,k8,undefined,la);if(k6){k9.mapping=k6}return k9};cO.loadTextureCube=function(la,k6,k7,k9){a.Logger.log(a.Logger.WARNING,"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var k5=new cN();k5.setCrossOrigin(this.crossOrigin);var k8=k5.load(la,k7,undefined,k9);if(k6){k8.mapping=k6}return k8};cO.loadCompressedTexture=function(){a.Logger.log(a.Logger.SEVERE,"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};cO.loadCompressedTextureCube=function(){a.Logger.log(a.Logger.SEVERE,"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function aT(){a.Logger.log(a.Logger.SEVERE,"THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(k5,k6){a.Logger.log(a.Logger.WARNING,"THREE.Projector: .projectVector() is now vector.project().");k5.project(k6)};this.unprojectVector=function(k5,k6){a.Logger.log(a.Logger.WARNING,"THREE.Projector: .unprojectVector() is now vector.unproject().");k5.unproject(k6)};this.pickingRay=function(){a.Logger.log(a.Logger.SEVERE,"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function fh(){a.Logger.log(a.Logger.SEVERE,"THREE.CanvasRenderer has been removed")}function q(){a.Logger.log(a.Logger.SEVERE,"THREE.JSONLoader has been removed.")}var e9={createMultiMaterialObject:function(){a.Logger.log(a.Logger.SEVERE,"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){a.Logger.log(a.Logger.SEVERE,"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){a.Logger.log(a.Logger.SEVERE,"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function d4(){a.Logger.log(a.Logger.SEVERE,"THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}bt.WebGLMultisampleRenderTarget=jr;bt.WebGLRenderTargetCube=hq;bt.WebGLRenderTarget=e3;bt.WebGLRenderer=hy;bt.ShaderLib=kx;bt.UniformsLib=f6;bt.UniformsUtils=bU;bt.ShaderChunk=fl;bt.FogExp2=jn;bt.Fog=jq;bt.Scene=iG;bt.Sprite=iZ;bt.LOD=ix;bt.SkinnedMesh=fN;bt.Skeleton=es;bt.Bone=cF;bt.Mesh=kH;bt.LineSegments=fo;bt.LineLoop=U;bt.Line=kP;bt.Points=hx;bt.Group=kG;bt.VideoTexture=bD;bt.DataTexture=t;bt.DataTexture3D=aM;bt.CompressedTexture=cT;bt.CubeTexture=hf;bt.CanvasTexture=bm;bt.DepthTexture=ff;bt.Texture=eq;bt.AnimationLoader=cv;bt.CompressedTextureLoader=p;bt.DataTextureLoader=et;bt.CubeTextureLoader=cN;bt.TextureLoader=cw;bt.ObjectLoader=eC;bt.MaterialLoader=aH;bt.BufferGeometryLoader=ir;bt.DefaultLoadingManager=jh;bt.LoadingManager=hk;bt.ImageLoader=h7;bt.ImageBitmapLoader=hE;bt.FontLoader=fi;bt.FileLoader=fC;bt.Loader=bE;bt.LoaderUtils=ji;bt.Cache=ch;bt.AudioLoader=gj;bt.SpotLightShadow=gJ;bt.SpotLight=cf;bt.PointLight=j6;bt.RectAreaLight=d1;bt.HemisphereLight=e4;bt.DirectionalLightShadow=af;bt.DirectionalLight=hY;bt.AmbientLight=dz;bt.LightShadow=cg;bt.Light=hj;bt.StereoCamera=ai;bt.PerspectiveCamera=kR;bt.OrthographicCamera=gs;bt.CubeCamera=cn;bt.ArrayCamera=jk;bt.Camera=eI;bt.AudioListener=g9;bt.PositionalAudio=i1;bt.AudioContext=jJ;bt.AudioAnalyser=jO;bt.Audio=hK;bt.VectorKeyframeTrack=c2;bt.StringKeyframeTrack=jx;bt.QuaternionKeyframeTrack=gw;bt.NumberKeyframeTrack=J;bt.ColorKeyframeTrack=aq;bt.BooleanKeyframeTrack=gG;bt.PropertyMixer=gV;bt.PropertyBinding=g;bt.KeyframeTrack=c3;bt.AnimationUtils=h5;bt.AnimationObjectGroup=I;bt.AnimationMixer=aN;bt.AnimationClip=bA;bt.Uniform=W;bt.InstancedBufferGeometry=jG;bt.BufferGeometry=cl;bt.Geometry=fm;bt.InterleavedBufferAttribute=R;bt.InstancedInterleavedBuffer=h6;bt.InterleavedBuffer=cQ;bt.InstancedBufferAttribute=jt;bt.Face3=dO;bt.Object3D=fg;bt.Raycaster=cu;bt.Layers=fa;bt.EventDispatcher=aQ;bt.Clock=c7;bt.QuaternionLinearInterpolant=jy;bt.LinearInterpolant=dr;bt.DiscreteInterpolant=ja;bt.CubicInterpolant=k2;bt.Interpolant=eY;bt.Triangle=gD;bt.Math=dY;bt.Spherical=iN;bt.Cylindrical=eb;bt.Plane=fA;bt.Frustum=hA;bt.Sphere=d0;bt.Ray=gr;bt.Matrix4=fv;bt.Matrix3=fw;bt.Box3=aO;bt.Box2=aP;bt.Line3=dK;bt.Euler=b0;bt.Vector4=bd;bt.Vector3=bf;bt.Vector2=bg;bt.Quaternion=hd;bt.Color=id;bt.ImmediateRenderObject=aW;bt.VertexNormalsHelper=fV;bt.SpotLightHelper=i3;bt.SkeletonHelper=bR;bt.PointLightHelper=y;bt.RectAreaLightHelper=fk;bt.HemisphereLightHelper=hM;bt.GridHelper=aF;bt.PolarGridHelper=eM;bt.PositionalAudioHelper=l;bt.FaceNormalsHelper=dx;bt.DirectionalLightHelper=ck;bt.CameraHelper=hi;bt.BoxHelper=iu;bt.Box3Helper=ef;bt.PlaneHelper=bp;bt.ArrowHelper=a1;bt.AxesHelper=c1;bt.Shape=bL;bt.Path=b1;bt.ShapePath=eS;bt.Font=gS;bt.CurvePath=bl;bt.Curve=dT;bt.ImageUtils=cO;bt.ShapeUtils=a9;bt.WebGLUtils=eK;bt.WireframeGeometry=f4;bt.ParametricGeometry=kg;bt.ParametricBufferGeometry=ho;bt.TetrahedronGeometry=a7;bt.TetrahedronBufferGeometry=dG;bt.OctahedronGeometry=d2;bt.OctahedronBufferGeometry=r;bt.IcosahedronGeometry=jL;bt.IcosahedronBufferGeometry=dg;bt.DodecahedronGeometry=cX;bt.DodecahedronBufferGeometry=bj;bt.PolyhedronGeometry=b;bt.PolyhedronBufferGeometry=N;bt.TubeGeometry=bQ;bt.TubeBufferGeometry=en;bt.TorusKnotGeometry=bu;bt.TorusKnotBufferGeometry=e0;bt.TorusGeometry=aK;bt.TorusBufferGeometry=eG;bt.TextGeometry=kB;bt.TextBufferGeometry=n;bt.SphereGeometry=d5;bt.SphereBufferGeometry=ao;bt.RingGeometry=ec;bt.RingBufferGeometry=iq;bt.PlaneGeometry=eZ;bt.PlaneBufferGeometry=c0;bt.LatheGeometry=eE;bt.LatheBufferGeometry=cj;bt.ShapeGeometry=kX;bt.ShapeBufferGeometry=j9;bt.ExtrudeGeometry=aD;bt.ExtrudeBufferGeometry=g8;bt.EdgesGeometry=br;bt.ConeGeometry=kh;bt.ConeBufferGeometry=V;bt.CylinderGeometry=jX;bt.CylinderBufferGeometry=iH;bt.CircleGeometry=dZ;bt.CircleBufferGeometry=d7;bt.BoxGeometry=f7;bt.CubeGeometry=f7;bt.BoxBufferGeometry=jg;bt.ShadowMaterial=cm;bt.SpriteMaterial=el;bt.RawShaderMaterial=b5;bt.ShaderMaterial=jW;bt.PointsMaterial=e;bt.MeshPhysicalMaterial=h3;bt.MeshStandardMaterial=fS;bt.MeshPhongMaterial=eW;bt.MeshToonMaterial=aS;bt.MeshNormalMaterial=ik;bt.MeshLambertMaterial=ca;bt.MeshDepthMaterial=aa;bt.MeshDistanceMaterial=jE;bt.MeshBasicMaterial=e2;bt.MeshMatcapMaterial=j3;bt.LineDashedMaterial=kN;bt.LineBasicMaterial=ju;bt.Material=jo;bt.Float64BufferAttribute=it;bt.Float32BufferAttribute=ei;bt.Uint32BufferAttribute=b2;bt.Int32BufferAttribute=ha;bt.Uint16BufferAttribute=aI;bt.Int16BufferAttribute=f0;bt.Uint8ClampedBufferAttribute=d6;bt.Uint8BufferAttribute=fe;bt.Int8BufferAttribute=c8;bt.BufferAttribute=gy;bt.ArcCurve=dy;bt.CatmullRomCurve3=jP;bt.CubicBezierCurve=bb;bt.CubicBezierCurve3=dW;bt.EllipseCurve=dQ;bt.LineCurve=jR;bt.LineCurve3=bJ;bt.QuadraticBezierCurve=bo;bt.QuadraticBezierCurve3=ga;bt.SplineCurve=cq;bt.REVISION=he;bt.MOUSE=dq;bt.CullFaceNone=f;bt.CullFaceBack=jC;bt.CullFaceFront=kc;bt.CullFaceFrontBack=gp;bt.FrontFaceDirectionCW=bG;bt.FrontFaceDirectionCCW=kd;bt.BasicShadowMap=cs;bt.PCFShadowMap=hB;bt.PCFSoftShadowMap=fr;bt.FrontSide=D;bt.BackSide=c5;bt.DoubleSide=fE;bt.FlatShading=hJ;bt.SmoothShading=kj;bt.NoColors=kr;bt.FaceColors=iO;bt.VertexColors=h2;bt.NoBlending=cW;bt.NormalBlending=iK;bt.AdditiveBlending=aX;bt.SubtractiveBlending=b7;bt.MultiplyBlending=gk;bt.CustomBlending=bw;bt.AddEquation=cM;bt.SubtractEquation=cd;bt.ReverseSubtractEquation=hD;bt.MinEquation=eD;bt.MaxEquation=cR;bt.ZeroFactor=bP;bt.OneFactor=i;bt.SrcColorFactor=bX;bt.OneMinusSrcColorFactor=hb;bt.SrcAlphaFactor=cE;bt.OneMinusSrcAlphaFactor=h9;bt.DstAlphaFactor=be;bt.OneMinusDstAlphaFactor=gu;bt.DstColorFactor=av;bt.OneMinusDstColorFactor=fH;bt.SrcAlphaSaturateFactor=j0;bt.NeverDepth=kV;bt.AlwaysDepth=dB;bt.LessDepth=kQ;bt.LessEqualDepth=bY;bt.EqualDepth=K;bt.GreaterEqualDepth=H;bt.GreaterDepth=iI;bt.NotEqualDepth=cr;bt.MultiplyOperation=u;bt.MixOperation=d9;bt.AddOperation=gi;bt.NoToneMapping=kA;bt.LinearToneMapping=ku;bt.ReinhardToneMapping=g2;bt.Uncharted2ToneMapping=gB;bt.CineonToneMapping=jj;bt.ACESFilmicToneMapping=fu;bt.UVMapping=hU;bt.CubeReflectionMapping=b3;bt.CubeRefractionMapping=j1;bt.EquirectangularReflectionMapping=eT;bt.EquirectangularRefractionMapping=bn;bt.SphericalReflectionMapping=ge;bt.CubeUVReflectionMapping=L;bt.CubeUVRefractionMapping=hH;bt.RepeatWrapping=co;bt.ClampToEdgeWrapping=g7;bt.MirroredRepeatWrapping=jV;bt.NearestFilter=da;bt.NearestMipMapNearestFilter=gK;bt.NearestMipMapLinearFilter=ia;bt.LinearFilter=j2;bt.LinearMipMapNearestFilter=B;bt.LinearMipMapLinearFilter=ap;bt.UnsignedByteType=iv;bt.ByteType=eg;bt.ShortType=au;bt.UnsignedShortType=gI;bt.IntType=jY;bt.UnsignedIntType=jz;bt.FloatType=ee;bt.HalfFloatType=ex;bt.UnsignedShort4444Type=aG;bt.UnsignedShort5551Type=iT;bt.UnsignedShort565Type=gh;bt.UnsignedInt248Type=de;bt.AlphaFormat=dp;bt.RGBFormat=fK;bt.RGBAFormat=gt;bt.LuminanceFormat=dL;bt.LuminanceAlphaFormat=em;bt.RGBEFormat=gg;bt.DepthFormat=cK;bt.DepthStencilFormat=fc;bt.RedFormat=gd;bt.RGB_S3TC_DXT1_Format=bW;bt.RGBA_S3TC_DXT1_Format=jd;bt.RGBA_S3TC_DXT3_Format=eA;bt.RGBA_S3TC_DXT5_Format=kO;bt.RGB_PVRTC_4BPPV1_Format=h;bt.RGB_PVRTC_2BPPV1_Format=aC;bt.RGBA_PVRTC_4BPPV1_Format=gM;bt.RGBA_PVRTC_2BPPV1_Format=gm;bt.RGB_ETC1_Format=ij;bt.RGBA_ASTC_4x4_Format=ii;bt.RGBA_ASTC_5x4_Format=d8;bt.RGBA_ASTC_5x5_Format=ct;bt.RGBA_ASTC_6x5_Format=ar;bt.RGBA_ASTC_6x6_Format=j5;bt.RGBA_ASTC_8x5_Format=h1;bt.RGBA_ASTC_8x6_Format=fX;bt.RGBA_ASTC_8x8_Format=Z;bt.RGBA_ASTC_10x5_Format=ks;bt.RGBA_ASTC_10x6_Format=iw;bt.RGBA_ASTC_10x8_Format=dP;bt.RGBA_ASTC_10x10_Format=dc;bt.RGBA_ASTC_12x10_Format=ig;bt.RGBA_ASTC_12x12_Format=dD;bt.LoopOnce=dI;bt.LoopRepeat=ek;bt.LoopPingPong=kM;bt.InterpolateDiscrete=io;bt.InterpolateLinear=an;bt.InterpolateSmooth=ae;bt.ZeroCurvatureEnding=e6;bt.ZeroSlopeEnding=dt;bt.WrapAroundEnding=dS;bt.TrianglesDrawMode=cZ;bt.TriangleStripDrawMode=bh;bt.TriangleFanDrawMode=fI;bt.LinearEncoding=fq;bt.sRGBEncoding=cB;bt.GammaEncoding=i9;bt.RGBEEncoding=fz;bt.LogLuvEncoding=fT;bt.RGBM7Encoding=dd;bt.RGBM16Encoding=jS;bt.RGBDEncoding=kf;bt.BasicDepthPacking=eO;bt.RGBADepthPacking=ej;bt.TangentSpaceNormalMap=iB;bt.ObjectSpaceNormalMap=iM;bt.Face4=dN;bt.LineStrip=cy;bt.LinePieces=bH;bt.MeshFaceMaterial=P;bt.MultiMaterial=kb;bt.PointCloud=bO;bt.Particle=fZ;bt.ParticleSystem=ka;bt.PointCloudMaterial=hS;bt.ParticleBasicMaterial=F;bt.ParticleSystemMaterial=kI;bt.Vertex=ft;bt.DynamicBufferAttribute=g0;bt.Int8Attribute=fL;bt.Uint8Attribute=iC;bt.Uint8ClampedAttribute=kW;bt.Int16Attribute=gE;bt.Uint16Attribute=gT;bt.Int32Attribute=jD;bt.Uint32Attribute=jZ;bt.Float32Attribute=bx;bt.Float64Attribute=ed;bt.ClosedSplineCurve3=i4;bt.SplineCurve3=cD;bt.Spline=dm;bt.AxisHelper=ev;bt.BoundingBoxHelper=hX;bt.EdgesHelper=fB;bt.WireframeHelper=kp;bt.XHRLoader=f1;bt.BinaryTextureLoader=gR;bt.GeometryUtils=fj;bt.Projector=aT;bt.CanvasRenderer=fh;bt.JSONLoader=q;bt.SceneUtils=e9;bt.LensFlare=d4;Object.defineProperty(bt,"__esModule",{value:true})})));(function(b){b.DeviceOrientationControls=function(d){var e=this;this.object=d;this.object.rotation.reorder("YXZ");this.enabled=true;this.deviceOrientation={};this.screenOrientation=0;this.alpha=0;this.alphaOffsetAngle=0;var c=function(h){e.deviceOrientation=h};var g=function(){e.screenOrientation=window.orientation||0};var f=function(){var j=new b.Vector3(0,0,1);var k=new b.Euler();var i=new b.Quaternion();var h=new b.Quaternion(-Math.sqrt(0.5),0,0,Math.sqrt(0.5));return function(p,o,n,l,m){k.set(n,o,-l,"YXZ");p.setFromEuler(k);p.multiply(h);p.multiply(i.setFromAxisAngle(j,-m))}}();this.connect=function(){g();if(window.DeviceOrientationEvent!==undefined&&typeof window.DeviceOrientationEvent.requestPermission==="function"){window.DeviceOrientationEvent.requestPermission()["then"](function(h){if(h=="granted"){window.addEventListener("orientationchange",g,false);window.addEventListener("deviceorientation",c,false)}})["catch"](function(h){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",h)})}else{window.addEventListener("orientationchange",g,false);window.addEventListener("deviceorientation",c,false)}e.enabled=true};this.disconnect=function(){window.removeEventListener("orientationchange",g,false);window.removeEventListener("deviceorientation",c,false);e.enabled=false};this.update=function(){if(e.enabled===false){return}var k=e.deviceOrientation.alpha?b.Math.degToRad(e.deviceOrientation.alpha)+this.alphaOffsetAngle:0;var j=e.deviceOrientation.beta?b.Math.degToRad(e.deviceOrientation.beta):0;var h=e.deviceOrientation.gamma?b.Math.degToRad(e.deviceOrientation.gamma):0;var i=e.screenOrientation?b.Math.degToRad(e.screenOrientation):0;f(e.object.quaternion,k,j,h,i);this.alpha=k};this.updateAlphaOffsetAngle=function(h){this.alphaOffsetAngle=h;this.update()};this.dispose=function(){this.disconnect()};this.connect()};b.StereoEffect=function(d){var c=new b.StereoCamera();c.aspect=0.5;this.setEyeSeparation=function(e){c.eyeSep=e};this.setSize=function(f,e){d.setSize(f,e)};this.render=function(g,f){g.updateMatrixWorld();if(f.parent===null){f.updateMatrixWorld()}c.update(f);var e=d.getSize();if(d.autoClear){d.clear()}d.setScissorTest(true);d.setScissor(0,0,e.width/2,e.height);d.setViewport(0,0,e.width/2,e.height);d.render(g,c.cameraL);d.setScissor(e.width/2,0,e.width/2,e.height);d.setViewport(e.width/2,0,e.width/2,e.height);d.render(g,c.cameraR);d.setScissorTest(false)}};b.WEBVR={currentSession:null,createButton:function(h,e){if(e&&e.frameOfReferenceType){h.vr.setFrameOfReferenceType(e.frameOfReferenceType)}function j(k){f.style.display="";f.style.cursor="pointer";f.style.left="calc(50% - 50px)";f.style.width="100px";f.textContent="VR";f.onmouseenter=function(){f.style.opacity="1.0"};f.onmouseleave=function(){f.style.opacity="0.5"};f.onclick=function(l){l.preventDefault();l.stopPropagation();k.isPresenting?k.exitPresent():k.requestPresent([{source:h.domElement}])};h.vr.setDevice(k)}function d(m){currentSession=null;function l(n){n.addEventListener("end",k);h.vr.setSession(n);f.style.display="none";currentSession=n}function k(n){currentSession.removeEventListener("end",k);h.vr.setSession(null);f.textContent="XR";currentSession=null}f.style.display="";f.style.cursor="pointer";f.style.left="calc(50% - 50px)";f.style.width="100px";f.textContent="XR";f.onmouseenter=function(){f.style.opacity="1.0"};f.onmouseleave=function(){f.style.opacity="0.5"};f.onclick=function(n){n.preventDefault();n.stopPropagation();if(currentSession===null){m.requestSession({immersive:true,exclusive:true}).then(l)}else{currentSession.end()}};h.vr.setDevice(m)}function c(){f.style.display="none";f.onmouseenter=null;f.onmouseleave=null;f.onclick=null;h.vr.setDevice(null)}function i(k){k.style.position="absolute";k.style.bottom="40px";k.style.padding="12px 6px";k.style.border="1px solid #fff";k.style.background="rgba(0,0,0,0.1)";k.style.color="#fff";k.style.font="normal 13px sans-serif";k.style.textAlign="center";k.style.outline="none";k.style.zIndex="999"}if("xr" in navigator&&"requestDevice" in navigator.xr){var f=document.createElement("button");f.style.display="none";i(f);navigator.xr.requestDevice().then(function(k){k.supportsSession({immersive:true,exclusive:true}).then(function(){d(k)})["catch"](c)})["catch"](c);return f}else{if("getVRDisplays" in navigator){var f=document.createElement("button");f.style.display="none";i(f);window.addEventListener("vrdisplayconnect",function(k){j(k.display)},false);window.addEventListener("vrdisplaydisconnect",function(k){c()},false);window.addEventListener("vrdisplaypresentchange",function(k){f.textContent=k.display.isPresenting?"EXIT VR":"VR";if(k.display.isPresenting){f.style.display="none"}else{f.style.display="block"}},false);window.addEventListener("vrdisplayactivate",function(k){k.display.requestPresent([{source:h.domElement}])},false);navigator.getVRDisplays().then(function(k){if(k.length>0){j(k[0])}else{c()}})["catch"](c);return f}else{var g=document.createElement("a");return g}}},getSession:function(){return this.currentSession},checkAvailability:function(){a.Logger.log(a.Logger.WARNING,"WEBVR.checkAvailability has been deprecated.");return new Promise(function(){})},getMessageContainer:function(){a.Logger.log(a.Logger.WARNING,"WEBVR.getMessageContainer has been deprecated.");return document.createElement("div")},getButton:function(){a.Logger.log(a.Logger.WARNING,"WEBVR.getButton has been deprecated.");return document.createElement("div")},getVRDisplay:function(){a.Logger.log(a.Logger.WARNING,"WEBVR.getVRDisplay has been deprecated.")}}})(a.libs.three.THREE)})(s7getCurrentNameSpace());