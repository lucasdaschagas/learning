/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.pkg("s7sdk.common");b.Util.require("s7sdk.event.Event");if(!b.common.ContainerControl){b.common.ContainerControl=function(c){arguments.callee.superclass.apply(this,[c,b.common.ContainerControl.NS,c.constructor,b.common.Container.RESTRICTED_STYLES])};b.common.ContainerControl.NS="s7sdk.common.ContainerControl";b.common.ContainerControl.prototype.setCSS=function(f,e,d){if(this.component){if(e=="width"||e=="height"){this.component.wid=-1;this.component.hei=-1;var h=b.Util.objByClassName(f,this.getParent());var g=b.Util.cssPropToJSProp(e);for(var c=0;c<h.length;c++){if(h[c]!=this.component.innerContainer){h[c].style[g]=d}}}else{this.component.setCSS(f,e,d)}this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{classname:f,property:e,value:d},false))}};b.common.ContainerControl.prototype.setModifier=function(e){var f="";var p=false;var s=this.component.getModifiers();var u=this.component.settings;for(var l in s){var g=l.toLowerCase();var q;if(e[g]){q=e[g];if(g=="stagesize"){if(q){var o,m;f=this.getWidth()+","+this.getHeight();var s=q.split(",");if(s&&s.length>1){o=parseInt(s[0]);m=parseInt(s[1]);this.component.resize(o,m);this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{id:this.component.getId(),oldvalue:f,newvalue:o+","+m,property:g},false));p=true;continue}}}else{if(g=="aspect"&&!p){if(q){f=this.component.aspect;if(q){this.component.setAspect(q);this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{id:this.component.getId(),oldvalue:f,newvalue:q,property:g},false));continue}}}}b.Logger.log(b.Logger.WARNING,"s7sdk.common.Container.setModifier ignored - %0: %1",g,q)}if((g=="sizemarkers")&&e["sizeMarkers"]){var r,j,t,d,v,c,n;v={};n="";c=this.component["sizeMarkers"];j=s.sizeMarkers;d=b.Modifier.parse(e["sizeMarkers"],s.sizeMarkers.defaults,s.sizeMarkers.ranges);if(d.values.length>0){for(var l=0;l<d.values.length;l++){v[j.params[l]]=d.values[l];n+=d.values[l]+" "}this.component["sizeMarkers"]=v}if(JSON.stringify(c)!=JSON.stringify(this.component["sizeMarkers"])){this.component.sizeMarker=this.component.sizeSwitch(this.getWidth(),this.getHeight());this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{id:this.component.getId(),oldvalue:JSON.stringify(c),newvalue:JSON.stringify(v),property:g},false))}}}};b.common.ContainerControl.prototype.unload=function(){};b.common.ContainerControl.prototype.rebuild=function(){}}b.Class.inherits(b.common.ContainerControl.NS,"s7sdk.ControlComponent");if(!b.common.Container){b.common.Container=function Container(k,f,m){var j=!!arguments[3];b.Logger.log(b.Logger.CONFIG,"s7sdk.common.Container constructor - containerId: %0, settings: %1 , compId: %2",k,f,m);arguments.callee.superclass.apply(this,[m,k,"div","s7container",f,!j]);this.settings=f;this.container=b.Util.byId(k);this.isPopup_=false;function l(o){var i=new RegExp("^\\s*$","gi").test(o);return !i}this.responsive={};this.responsive.availableApects=[];if(!this.container||this.container.parentNode==document.body){var d=document.body.childNodes;var n=false;for(var g=0;g<d.length;g++){if(this.container&&this.container==d[g]){continue}switch(d[g].nodeType){case 1:if(d[g].tagName&&d[g].getAttribute&&(d[g].tagName.toLowerCase()=="script"||d[g].tagName.toLowerCase()=="style"||(d[g].getAttribute("data-description")=="Scene7ComponentHolder"&&d[g].tagName.toLowerCase()=="span"))){continue}else{n=true}break;case 3:if(l(d[g].nodeValue)){n=true}break}if(n){break}}this.isPopup_=!n}var c=(window===window.parent)?false:true;var e=(b.browser.device.name=="ipad"||b.browser.device.name=="iphone");this.over=null;if(c&&e){this.over=this.getParent().style.overflow;this.getParent().style.overflow="scroll"}this.wid=this.stagesize.width;this.hei=this.stagesize.height;this.storedPosition=null;if(this.wid==0||this.hei==0){this.wid=this.size.width;this.hei=this.size.height}this.ie11NativeIsFullscreen=document.msFullscreenElement?true:false;this.isFixedSize_=false;this.storedWidth=this.wid;this.storedHeight=this.hei;this.inFullScreen=false;this.fullScreenRequested=false;this.sizeMarker=b.common.Container.SIZE_MARKER_NONE;this.init();this.isRemoved=this.getLayoutState();var h=this;if(this.isRemoved){setTimeout(function(){h.waitDisplay()},0)}else{this.completeInit();this.checkTimer=setInterval(function(){h.onCheckSize()},50)}if(!j){return new b.common.ContainerControl(this)}else{return this}};b.common.Container.prototype.completeInit=function(){this.responsive_wh=this.checkRelativeCssWH("s7container s7supressminsize",this.id,null,this.container,{"mode":"normal"});this.responsive.availableApects=this.parseAspectModifier(this.aspect);this.responsive.freeRatio=this.aspect=="0";this.responsive.fixedSize=false;if(this.wid!=0||this.hei!=0){this.responsive.fixedSize=true;this.responsive.freeRatio=true}if((this.wid!=0&&this.hei!=0)||(!this.responsive_wh.w&&!this.responsive_wh.h)){this.isFixedSize_=true}if(!this.responsive.freeRatio&&!this.responsive_wh.w){this.isFixedSize_=true}b.Logger.log(b.Logger.FINE,"s7sdk.common.Container responsive enabled: %0, freeRatio: %1",this.responsive.enabled,this.responsive.freeRatio);if(this.responsive.fixedSize){this.obj.style.width=this.wid+"px";this.obj.style.height=this.hei+"px"}this.obj.style.boxSizing="content-box";this.onCheckSize(true);this.restoreSizeFlags();this.prewW=this.resH=this.resW=-1;this.onCheckSize();this.obj.style.boxSizing=""};b.common.Container.prototype.waitDisplay=function(){var c=this;if(this.getLayoutState()){setTimeout(function(){c.waitDisplay()},100);return}this.completeInit();this.checkTimer=setInterval(function(){c.onCheckSize()},50)};b.Class.inherits("s7sdk.common.Container","s7sdk.UIComponent");b.common.Container.prototype.getComponent=function(){return this};b.common.Container.prototype.dispose=function(){if(this.innerContainer.hasChildNodes()){}else{if(this.obj){if(this.checkTimer){clearInterval(this.checkTimer);this.checkTimer=null}b.Window.detach(this,"resizeByWindow");b.Util.removeTags(this.obj);if(this.over!=null){this.getParent().style.overflow=this.over}if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}}};b.common.Container.prototype.setCSS=function(e,d,c){this.superproto.setCSS.apply(this,[e,d,c])};b.common.Container.prototype.setModifier=function(c){throw new Error("Trying to use setModifier on the Core class (Container) is unsupported! Please refer to SDK documentation on using setModifier.")};b.common.Container.prototype.modifiers={stagesize:{params:["width","height"],defaults:[0,0],ranges:["0:","0:"]},aspect:{params:["ratio"],defaults:["0"],ranges:[""]},size:{params:["width","height"],defaults:[0,0],ranges:["0:","0:"],deprecated:true},sizeMarkers:{params:["measurementType","smallMediumSize","mediumLargeSize"],defaults:["area",310000,920000],ranges:[["area","width"],"0:","0:"]}};b.common.Container.SIZE_MARKER_LARGE="size_large";b.common.Container.SIZE_MARKER_MEDIUM="size_medium";b.common.Container.SIZE_MARKER_SMALL="size_small";b.common.Container.SIZE_MARKER_NONE="size_none";b.common.Container.prototype.sizeSwitch=function(f,c){var e=0;var d=b.common.Container.SIZE_MARKER_LARGE;if(this.isRemoved){return d=b.common.Container.SIZE_MARKER_NONE}if(arguments.length>1&&this.sizeMarkers.measurementType=="area"){e=f*c}else{e=f}if(e<=this.sizeMarkers.smallMediumSize){d=b.common.Container.SIZE_MARKER_SMALL}else{if((e>this.sizeMarkers.smallMediumSize)&&(e<=this.sizeMarkers.mediumLargeSize)){d=b.common.Container.SIZE_MARKER_MEDIUM}else{d=b.common.Container.SIZE_MARKER_LARGE}}return d};b.common.Container.prototype.getSizeMarker=function(){this.onCheckSize(true);var c=this.sizeMarker;this.restoreSizeFlags();return c};b.common.Container.prototype.getWH=function(e,c){var d=b.Util.getStyle(e,c);if(d.indexOf("%")!=-1||d=="auto"){var g,f;if(c=="height"){g=e.offsetHeight;e.style.height=g+"px";f=e.offsetHeight;e.style.height=""}else{g=e.offsetWidth;e.style.width=g+"px";f=e.offsetWidth;e.style.width=""}d=2*g-f}return d.toString().indexOf("px")!=-1?d:d+"px"};b.common.Container.prototype.checkRelativeCssWH=function(k,f,d,e,i){var m,j;var g={};var l=b.Util.createElement("div",i);e=(e&&b.Util.isElement(e))?e:document.body;l.className=k;if(f&&f.length>0){l.setAttribute("id",f)}var c=document.createElement("div");c.style.position="absolute";g.origW=this.getWH(e,"width");g.origH=this.getWH(e,"height");c.style.width="100px";c.style.height="100px";c.style.backgroundColor="#ff6060";e.appendChild(c);c.appendChild(l);m=this.getWH(l,"width");c.style.width="200px";g.w=m!=this.getWH(l,"width");m=this.getWH(l,"height");c.style.height="200px";g.h=m!=this.getWH(l,"height");c.removeChild(l);e.removeChild(c);return g};b.common.Container.prototype.isInLayout=function(){this.onCheckSize(true);var c=!this.isRemoved;this.restoreSizeFlags();return c};b.common.Container.prototype.invalidate=function(c){this.ssb=null;this.prewW=this.resH=this.resW=-1;this.onCheckSize(c);if(c){this.restoreSizeFlags()}};b.common.Container.prototype.getLayoutState=function(){return this.obj.offsetParent==null};b.common.Container.prototype.restoreSizeFlags=function(){this.sizeMarker=this.prevSizeMarker;this.isRemoved=this.prevIsRemoved;this.resW=this.prevResW;this.resH=this.prevResH};b.common.Container.prototype.parseAspectModifier=function(f){var e=f.toString().split(";");var d=[];for(var c=0;c<e.length;c++){d.push(parseFloat(e[c]))}d.sort();return d};b.common.Container.prototype.getAspect=function(){var c=window.outerWidth/window.outerHeight;if(this.responsive.availableApects.length==1){return this.responsive.availableApects[0]}for(var d=0;d<this.responsive.availableApects.length;d++){if((d+1)>=this.responsive.availableApects.length){return this.responsive.availableApects[d]}else{var f=c-this.responsive.availableApects[d];if(f<=0){return this.responsive.availableApects[d]}var e=this.responsive.availableApects[d+1]-c;if(e<=0){continue}return e>=f?this.responsive.availableApects[d]:this.responsive.availableApects[d+1]}}};b.common.Container.prototype.onCheckSize=function(k){this.prevSizeMarker=this.sizeMarker;this.prevIsRemoved=this.isRemoved;this.prevResW=this.resW;this.prevResH=this.resH;var m=this.obj.clientWidth;var i=this.obj.clientHeight;var j=this.getLayoutState();if(!j&&!this.responsive.freeRatio){var e=this.getAspect();if(this.responsive.currentAspect!=e){this.responsive.currentAspect=e;this.prewW=-1}}var f=null;var d;if(this.isFullScreen()&&!j){m=b.browser.detectScreen().w;i=b.browser.detectScreen().h;f=this.sizeSwitch(m,i);d=this.sizeMarker!=f;this.sizeMarker=f;if(!k&&d){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,m,i,false))}return}if(this.isRemoved!=j){this.isRemoved=j;this.resW=this.resH=-1;f=this.sizeSwitch(m,i);d=this.sizeMarker!=f;this.sizeMarker=f;if(!k){this.dispatchEvent(new b.event.ResizeEvent(this.isRemoved?b.event.ResizeEvent.REMOVED_FROM_LAYOUT:b.event.ResizeEvent.ADDED_TO_LAYOUT,m,i,false));if(d){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,m,i,false))}}}if(this.prewW!=m&&!this.isRemoved){if(!this.responsive.freeRatio){var o=this.hasVerticalScroll().vScrollbar;if(this.ssb&&this.ssb.min){if(this.ssb.min<=m&&m<=this.ssb.max&&Math.abs(this.prewW-m)<=this.ssb.w){if(this.resW!=m||this.resH!=i){this.resW=m;this.resH=i;if(!k&&!this.isFullScreen()){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.COMPONENT_RESIZE,m,i,false))}}f=this.sizeSwitch(m,i);d=this.sizeMarker!=f;this.sizeMarker=f;if(!k&&d){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,m,i,false))}return}}i=Math.round(m/this.responsive.currentAspect);this.obj.style.height=i+"px";var p=this.obj.offsetHeight;this.obj.style.maxHeight="none";var g=this.obj.offsetHeight;this.obj.style.maxHeight="";if(p!=g){m=Math.round(p*this.responsive.currentAspect);this.obj.style.maxWidth=m+"px";m=this.obj.clientWidth}var n=this.hasVerticalScroll().vScrollbar;if(!this.ssb&&n){this.ssb={};var l=document.documentElement;var c=l.offsetWidth;l.style.overflow="hidden";this.ssb.w=l.offsetWidth-c+2;l.style.overflow=""}if(this.ssb&&o!=n){this.ssb.max=m+this.ssb.w;this.ssb.min=m-this.ssb.w}}this.prewW=m=this.obj.clientWidth;i=this.obj.clientHeight}if(this.resW!=m||this.resH!=i){this.resW=m;this.resH=i;f=this.sizeSwitch(m,i);d=this.sizeMarker!=f;this.sizeMarker=f;if(!k&&d){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,m,i,false))}if(this.isFullScreen()){k=true}if(!k){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.COMPONENT_RESIZE,m,i,false))}}};b.common.Container.prototype.hasVerticalScroll=function(){var c={vScrollbar:true,hScrollbar:true};try{var d=document.compatMode=="BackCompat"?document.body:document.documentElement;c.vScrollbar=d.scrollHeight>d.clientHeight;c.hScrollbar=d.scrollWidth>d.clientWidth}catch(f){}return c};b.common.Container.prototype.getInnerContainerId=function(){return this.innerContainer.id};b.common.Container.prototype.init=function(){var c=this.getParent();this.createElement();this.obj.setAttribute("mode","normal");this.obj.setAttribute("role","region");this.obj.setAttribute("aria-label",this.getLocalizedText("LABEL"));if(typeof this.obj!="undefined"){this.obj.style.position="relative";c.appendChild(this.obj);this.resize(this.wid,this.hei);b.Window.attach(this,"resizeByWindow")}this.innerContainer=document.createElement("div");this.innerContainer.setAttribute("mode","normal");this.innerContainer.className="s7container s7innercontainer";var d=this.obj.id;this.innerContainer.id=this.obj.id+"_inner";this.obj.appendChild(this.innerContainer)};b.common.Container.prototype.getFocusableElements=function(){var f=[];var d=this.innerContainer.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]),[tabindex]:not([tabindex='-1']):not([notfocusable='true'])");var e=Array.prototype.slice.call(d);for(var c=0;c<e.length;c++){if((b.Util.getStyle(e[c],"visibility")!="hidden")&&((b.Util.getStyle(e[c],"display")!="none")&&(b.Util.getStyle(e[c].parentNode,"display")!="none"))){f.push(e[c])}}return f};b.common.Container.prototype.resizeByWindow=function(c,d){if(this.inFullScreen){b.Util.css.setCSSAttributeSelector(this.obj,"mode","fullscreen");this.innerContainer.style.width=c+"px";this.innerContainer.style.height=d+"px";this.moveToTopLeft(this.innerContainer);this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.COMPONENT_RESIZE,c,d,false));return}this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.WINDOW_RESIZE,c,d,false))};b.common.Container.prototype.resize=function(c,d){if(this.wid!=c||this.hei!=d){this.responsive.fixedSize=true;this.responsive.freeRatio=true;this.wid=c;this.hei=d;this.obj.style.width=this.wid+"px";this.obj.style.height=this.hei+"px";this.commonresize(c,d)}};b.common.Container.prototype.commonresize=function(c,e,d){b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.commonresize - w: %0, h: %1",c,e);if(b.Util.isNumber(c)&&b.Util.isNumber(e)){this.storedWidth=c;this.storedHeight=e;this.wid=c;this.hei=e;if(d){this.obj.style.width="";this.obj.style.height=""}else{this.obj.style.width=c+"px";this.obj.style.height=e+"px"}this.ssb=null;this.prewW=this.resH=this.resW=-1;if(!d){this.onCheckSize()}}b.UIComponent.prototype.resize.apply(this,[c,e])};b.common.Container.prototype.supportsNativeFullScreen=function(){var d=false;var c=(b.browser.device.name=="ipad"||b.browser.device.name=="iphone");if((!c)&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)){d=true}return d};b.common.Container.prototype.requestFullScreen=function(){if(!this.fullScreenRequested&&!this.isFullScreen()){b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.requestFullScreen");var c,g;this.fullScreenRequested=true;this.storedPosition=new Object();this.lastFocus=document.activeElement;if(this.supportsNativeFullScreen()){var e=this;function f(q){var o=(b.browser.name==="ie"&&b.browser.version.major>=11)?!e.ie11NativeIsFullscreen:e.isFullScreen();if(o){e.ie11NativeIsFullscreen=true;e.inFullScreen=true;l=b.browser.detectScreen().w;n=b.browser.detectScreen().h;b.Util.css.setCSSAttributeSelector(e.innerContainer,"mode","fullscreen");b.Util.css.setCSSAttributeSelector(e.obj,"mode","fullscreen");e.innerContainer.style.width=l+"px";e.innerContainer.style.height=n+"px";e.moveToTopLeft(e.innerContainer);var m=e.sizeSwitch(l,n);if(e.sizeMarker!=m){e.sizeMarker=m;e.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,l,n,false))}e.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.FULLSCREEN_RESIZE,l,n,false));var p=new b.UserEvent(b.UserEvent.FULLSCREEN,[l,n],true);e.dispatchEvent(p)}else{e.inFullScreen=false;e.ie11NativeIsFullscreen=false;e.fullScreenRequested=false;if(e.innerContainer.requestFullscreen){b.Event.removeDOMListener(document,"fullscreenchange",f,{capture:true})}else{if(e.innerContainer.webkitRequestFullscreen){b.Event.removeDOMListener(document,"webkitfullscreenchange",f,{capture:true})}else{if(e.innerContainer.mozRequestFullScreen){b.Event.removeDOMListener(document,"mozfullscreenchange",f,{capture:true})}else{if(e.innerContainer.msRequestFullscreen){b.Event.removeDOMListener(document,"MSFullscreenChange",f,{capture:true})}}}}e.innerContainer.style.left="0px";e.innerContainer.style.top="0px";e.innerContainer.style.width="";e.innerContainer.style.height="";e.invalidate(false);b.Util.css.setCSSAttributeSelector(e.obj,"mode","normal");b.Util.css.setCSSAttributeSelector(e.innerContainer,"mode","normal");var l=e.getWidth();var n=e.getHeight();var m=e.sizeSwitch(l,n);if(e.sizeMarker!=m){e.sizeMarker=m;e.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,l,n,false))}e.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.FULLSCREEN_RESIZE,e.getWidth(),e.getHeight(),false));if((e.innerContainer.requestFullscreen)||(e.innerContainer.webkitRequestFullscreen)||(e.innerContainer.mozRequestFullScreen)||(e.innerContainer.msRequestFullscreen)){b.Event.removeDOMListener(window,"focus",e.focusHandler,{capture:true})}}}if(this.innerContainer.requestFullscreen){b.Event.addDOMListener(document,"fullscreenchange",f,{capture:true});this.innerContainer.requestFullscreen()}else{if(this.innerContainer.webkitRequestFullscreen){b.Event.addDOMListener(document,"webkitfullscreenchange",f,{capture:true});this.innerContainer.webkitRequestFullscreen()}else{if(this.innerContainer.mozRequestFullScreen){b.Event.addDOMListener(document,"mozfullscreenchange",f,{capture:true});this.innerContainer.mozRequestFullScreen()}else{if(this.innerContainer.msRequestFullscreen){b.Event.addDOMListener(document,"MSFullscreenChange",f,{capture:true});this.innerContainer.msRequestFullscreen()}}}}if((this.innerContainer.requestFullscreen)||(this.innerContainer.webkitRequestFullscreen)||(this.innerContainer.mozRequestFullScreen)||(this.innerContainer.msRequestFullscreen)){var j=this;j.firstFocusEnter=true;this.focusHandler=function(h){j.focusableElements=j.getFocusableElements();j.firstFocusableElement=j.focusableElements[0];j.lastFocusableElement=j.focusableElements[j.focusableElements.length-1];if((j.focusableElements.indexOf(j.lastFocus)!=-1)&&j.firstFocusEnter){b.Event.stopPropagation(h);j.lastFocus.focus();j.firstFocusEnter=null}else{if(j.inFullScreen&&((h.target===h.target.window)||!j.obj.contains(h.target))){b.Event.stopPropagation(h);j.firstFocusableElement.focus()}}};b.Event.addDOMListener(window,"focus",this.focusHandler,{capture:true})}}else{this.inFullScreen=true;if(b.browser.supportsTouch()){b.Event.addDOMListener(document,"touchmove",this.preventScroll,{passive:false})}this.storedPosition.scrollBody=document.body.style.overflow;this.storedPosition.scrollBodyX=document.body.style.overflowX;this.storedPosition.scrollBodyY=document.body.style.overflowY;var i=b.browser.device;c=b.browser.detectScreen().w;g=b.browser.detectScreen().h;if(!((i.name=="ipad"||i.name=="iphone")&&b.browser.device.version<9.2)){document.body.style.overflow="hidden"}this.moveToTopLeft(this.innerContainer);if((i.name=="ipad"||i.name=="iphone")&&b.browser.detectScreen().w==981){c-=1}this.resizeByWindow(c,g);var d=this.sizeSwitch(c,g);if(this.sizeMarker!=d){this.sizeMarker=d;this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,c,g,false))}this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.FULLSCREEN_RESIZE,c,g,false));var j=this;j.firstFocusEnter=true;this.focusHandler=function(h){j.focusableElements=j.getFocusableElements();j.firstFocusableElement=j.focusableElements[0];j.lastFocusableElement=j.focusableElements[j.focusableElements.length-1];if((j.focusableElements.indexOf(j.lastFocus)!=-1)&&j.firstFocusEnter){b.Event.stopPropagation(h);j.lastFocus.focus();j.firstFocusEnter=null}else{if(j.inFullScreen&&((h.target===h.target.window)||!j.obj.contains(h.target))){h.stopPropagation();j.firstFocusableElement.focus()}}};b.Event.addDOMListener(window,"focus",this.focusHandler,{capture:true});var k=new b.UserEvent(b.UserEvent.FULLSCREEN,[c,g],true);this.dispatchEvent(k)}}};b.common.Container.prototype.preventScroll=function(c){b.Event.preventDefault(c)};b.common.Container.prototype.isMobile=function(){var c=navigator.userAgent.toLowerCase();return(c.match(/(iphone|ipod|ipad|android)/))};b.common.Container.prototype.moveToTopLeft=function(h){b.Util.css.setCSSAttributeSelector(h,"mode","fullscreen");var d=parseInt(b.Util.getStyle(h,"left"));var g=parseInt(b.Util.getStyle(h,"top"));d=b.Util.isNumber(d)?d:-parseInt(b.Util.getStyle(h,"right"));g=b.Util.isNumber(g)?g:-parseInt(b.Util.getStyle(h,"bottom"));d=b.Util.isNumber(d)?d:0;g=b.Util.isNumber(g)?g:0;var e=h.getBoundingClientRect();var c=e.left-d;var f=e.top-g;h.style.left=-c+"px";h.style.top=-f+"px"};b.common.Container.prototype.cancelFullScreen=function(){this.fullScreenRequested=false;if(this.isFullScreen()){this.innerContainer.style.width="";this.innerContainer.style.height="";b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.cancelFullScreen");this.inFullScreen=false;if(this.supportsNativeFullScreen()){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}}else{if(b.browser.supportsTouch()){b.Event.removeDOMListener(document,"touchmove",this.preventScroll,{passive:false})}document.body.style.overflow=this.storedPosition.scrollBody;document.body.style.overflowX=this.storedPosition.scrollBodyX;document.body.style.overflowY=this.storedPosition.scrollBodyY;b.Util.css.setCSSAttributeSelector(this.obj,"mode","normal");b.Util.css.setCSSAttributeSelector(this.innerContainer,"mode","normal");this.innerContainer.style.left="";this.innerContainer.style.top="";this.invalidate(false);this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.FULLSCREEN_RESIZE,this.getWidth(),this.getHeight(),false));b.Event.removeDOMListener(window,"focus",self.focusHandler,{capture:true});this.lastFocus.focus()}var c=new b.UserEvent(b.UserEvent.UN_FULLSCREEN,[this.getWidth(),this.getHeight()],true);this.dispatchEvent(c)}};b.common.Container.prototype.isFullScreen=function(){b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.isFullScreen");var d=(b.browser.device.name=="ipad"||b.browser.device.name=="iphone");var c;if(!d){c=typeof(document.webkitIsFullScreen)!="undefined"?document.webkitIsFullScreen:document.mozFullScreen;if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement){c=true}}return(typeof c!="undefined"?c:this.inFullScreen)};b.common.Container.prototype.addEventListener=function(e,d,c){b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.addEventListener - type: %0, handler: %1, useCapture: %2",e,d.toString().substring(0,d.toString().indexOf("(")),c);b.Base.prototype.addEventListener.apply(this,[e,d,c])};b.common.Container.prototype.getWidth=function(){var c=this.resW;if(typeof(c)=="undefined"||c<=0||this.obj.clientWidth!=c){this.onCheckSize(true);c=this.resW;this.restoreSizeFlags()}return c};b.common.Container.prototype.getHeight=function(){var c=this.resH;if(typeof(c)=="undefined"||c<=0||this.obj.clientHeight!=c){this.onCheckSize(true);c=this.resH;this.restoreSizeFlags()}return c};b.common.Container.prototype.isFixedSize=function(){return this.isFixedSize_};b.common.Container.prototype.isPopup=function(){return this.isPopup_};b.common.Container.prototype.setAspect=function(c){this.aspect=c;this.responsive.availableApects=this.parseAspectModifier(this.aspect);this.responsive.freeRatio=c=="0";this.invalidate(false)};b.common.Container.prototype.symbols={LABEL:""};b.Container=b.common.Container;(function a(){var d=b.browser&&b.browser.name=="ie"&&b.browser.version.major>=10;var c=b.Util.css.createCssRuleText(".s7container",{"width":"100%","height":"100%","touch-action":d?"none":""})+b.Util.css.createCssRuleText(".s7container .s7innercontainer",{"position":"relative","left":"0px","top":"0px","width":"100%","height":"100%","border":"0px !important","margin":"0px !important","padding":"0px !important","max-width":"none !important","max-height":"none !important"})+b.Util.css.createCssRuleText(".s7container[mode='fullscreen']",{"z-index":"9900","overflow":"visible !important"})+b.Util.css.createCssRuleText(".s7container .s7innercontainer[mode='fullscreen']",{"position":"absolute"})+(b.browser.device.name=="android"&&b.browser.raw.ua.match(/Android 4.0./i)?b.Util.css.createCssRuleText(".s7container .s7innercontainer[mode='normal']",{"z-index":"0"}):"")+b.Util.css.createCssRuleText(".s7supressminsize",{"padding":"0px !important","border":"0px !important","min-width":"0px !important","min-height":"0px !important"});b.Util.css.addDefaultCSS(c,"Container")})()}})(s7getCurrentNameSpace());