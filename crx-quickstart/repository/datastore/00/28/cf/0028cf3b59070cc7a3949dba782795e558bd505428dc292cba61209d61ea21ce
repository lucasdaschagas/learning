Handlebars.registerHelper("appendck",function(a){if(!_.isString(a))throw new Error("Handlebars#appendck expects string as image source.");return a+"?ch_ck="+moment().unix()}),Handlebars.registerHelper("subtract",function(a,b){if(arguments.length<3)throw new Error("Handlebars#subtract needs 2 parameters");return parseFloat(a)-parseFloat(b)}),Handlebars.registerHelper("divide",function(a,b){if(arguments.length<3)throw new Error("Handlebars#divide needs 2 parameters");return parseFloat(a)/parseFloat(b)}),Handlebars.registerHelper("equals",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#equals needs 2 parameters");return a!=b?c.inverse(this):c.fn(this)}),Handlebars.registerHelper("and",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#and needs 2 parameters");return a&&b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("gt",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#gt needs 2 parameters");return a>b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("lt",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#lt needs 2 parameters");return a<b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("gte",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#gte needs 2 parameters");return a>=b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("lte",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#lte needs 2 parameters");return a<=b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("inRange",function(a,b,c,d){if(arguments.length<4)throw new Error("Handlebars#inRange needs 3 parameters");return parseFloat(b)<=a&&a<=parseFloat(c)?d.fn(this):d.inverse(this)}),Handlebars.registerHelper("notInRange",function(a,b,c,d){if(arguments.length<4)throw new Error("Handlebars#notInRange needs 3 parameters");return a<parseFloat(b)||a>parseFloat(c)?d.fn(this):d.inverse(this)}),Handlebars.registerHelper("eachString",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#eachString needs 2 parameters.");if("string"==typeof a)return Handlebars.helpers.each.call(this,a.split(b),c)}),Handlebars.registerHelper("number",function(a,b){var c=TSDK.I18n.getLocale(),d=",",e=["de","es","fr","it","pt"],f=["de","es","it","pt"],g=["fr"];for(a.fn&&"function"==typeof a.fn&&(a=a.fn(this)),_.isNumber(a)&&_.isNumber(b)&&(a=a.toFixed(b)),-1!=f.indexOf(c)?d=".":-1!=g.indexOf(c)&&(d=" "),a=a.toString(),-1!=e.indexOf(c)&&(a=a.split(".").join(","));/(\d+)(\d{3})/.test(a);)a=a.replace(/(\d+)(\d{3})/,"$1"+d+"$2");return a||"---"}),Handlebars.registerHelper("formatPercent",function(a,b){return(100*a).toFixed(b.hash.fixed||2)+"%"}),Handlebars.registerHelper("getDate",function(a,b){var c=b.hash.format,d=b.hash.comment,e=TSDK.I18n.get("YYYY-MM-DD",null,"Date format pattern for moment.js. e.g. 2013-11-13 (http://momentjs.com/docs)");return c&&(e=TSDK.I18n.getVar(c,d)),a?moment(a).format(e):moment().format(e)}),Handlebars.registerHelper("getTime",function(a,b){var c=b.hash.format,d=b.hash.comment,e=TSDK.I18n.get("HH:mm",null,"Time format pattern for moment.js. e.g. 12:48 (http://momentjs.com/docs)");return c&&(e=TSDK.I18n.getVar(c,d)),a?moment(a).format(e):moment().format(e)}),Handlebars.registerHelper("getActivityPriority",function(a){return 0===a?TSDK.I18n.get("Low"):1===a?TSDK.I18n.get("Medium"):2===a?TSDK.I18n.get("High"):a}),Handlebars.registerHelper("toCapitalCase",function(a){return a&&"string"==typeof a?a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase():""}),Handlebars.registerHelper("toLowerCase",function(a){return a&&"string"==typeof a?a.toLowerCase():""}),Handlebars.registerHelper("toUpperCase",function(a){return a&&"string"==typeof a?a.toUpperCase():""}),Handlebars.registerHelper("getDays",function(a){return a&&"number"==typeof a?TSDK.I18n.get("{0} {1}",[a,"day(s)"]):""}),Handlebars.registerHelper("i18n",function(){var a=Array.prototype.slice.call(arguments,0),b=a.pop(),c=Array.prototype.shift.call(a),d=[c];"function"==typeof b.fn&&(a=[b.fn(this)]),d.push(a),"string"==typeof b.hash.comment&&d.push(b.hash.comment);var e=TSDK.I18n.get.apply(this,d)||"";return b.hash.html?new Handlebars.SafeString(e):e}),Handlebars.registerHelper("notEquals",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#notEquals needs 2 parameters");return a==b?c.inverse(this):c.fn(this)}),Handlebars.registerHelper("each_with_index",function(a,b){for(var c="",d=a.length,e=0,f=d;e<f;e++){var g=a[e];g.index=e,c+="object"==typeof b?b.fn(g):b(g)}return c}),Handlebars.registerHelper("each_reverse",function(a,b){var c,d,e,f="";if(a instanceof Array)for(b.data&&(d=Handlebars.createFrame(b.data)),c=a.length,e=c-1;e>=0;e--)d&&(d.index=c-e-1,d.reverseIndex=e),f+=b.fn(a[e],{data:d});return c?f:b.inverse(this)}),Handlebars.registerHelper("getIconById",function(a){a&&a.lastIndexOf("/")>-1&&(a=a.substring(a.lastIndexOf("/")+1));var b={firefox:"icon-devicemobile",internet_explorer:"icon-devicemobile",chrome:"icon-devicemobile",safari:"icon-devicemobile",windows:"icon-windows8",mac:"icon-apple",linux:"icon-linux",mobile:"icon-devicemobile",tablet:"icon-devicetablet",desktop:"icon-devicedesktop",google:"icon-merge",bing:"icon-merge",yahoo:"icon-merge",returning_visitors:"icon-users",new_visitors:"icon-users",all_visitors:"icon-demographic",us_returning_male:"icon-demographic",us_female:"icon-demographic"};return b.hasOwnProperty(a)?b[a]:"icon-users"}),Handlebars.registerHelper("getValueFromObj",function(a,b,c){if(arguments.length<2)throw new Error("Handlebars#getValueFromObj needs 2 parameters");a=a||{};var d=a[b],e=_.isUndefined(d)||_.isNull(d)||_.isNaN(d),f="string"==typeof d&&_.isEmpty(d);return"function"==typeof c.fn?e||f?c.inverse({}):c.fn(d):d||"---"}),Handlebars.registerHelper("hasValue",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#hasValue needs 2 parameters");return a&&-1!=a.indexOf(b)?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("buildMetricsMeasurementDisplayRule",function(a,b){if(arguments.length<2)throw new Error("Handlebars#buildMetricsMeasurementDisplayRule needs 2 parameters");if("elementClick"===a)return TSDK.I18n.get("Clicked an element");if("clickRecommendation"===a)return TSDK.I18n.get("Clicked on recommendation");for(var c=TSDK.I18n.get("or"),d=b.length,e="",f=0;f<d;f++)f&&(e+=" "+c+" "),e+=b[f].term;return"pageView"===a?TSDK.I18n.get("Viewing of page {0}",_.escape(e)):"mboxView"===a?TSDK.I18n.get("Viewing of mbox {0}",_.escape(e)):void 0}),Handlebars.registerHelper("isActivityUpdating",function(a,b,c){if(arguments.length<2)throw new Error("Handlebars#isActivityUpdating needs 2 parameters");var d=[ELM.Activities.status.SYNCING,ELM.Activities.status.ACTIVATING,ELM.Activities.status.DEACTIVATING];return b||_.contains(d,a)?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("activitySyncFailed",function(a,b){if(arguments.length<1)throw new Error("Handlebars#activitySyncFailed needs 1 parameter");return a.targetSyncFailed&&!a.targetSyncPending?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("join",function(a,b){if(arguments.length<2)throw new Error("Handlebars#join needs 1 or 2 parameters.");return"string"!=typeof b&&(b=", "),_.isArray(a)?a.join(b).replace(/(\\r\\n|\\n|\\r)/g,"\n"):""}),Handlebars.registerHelper("in",function(a){var b,c=arguments.length;if(c<3)throw new Error("Handlebars#in needs at least 2 parameters.");b=arguments[c-1];for(var d=1;d<c-1;d++)if(a===arguments[d])return b.fn(this);return b.inverse(this)}),Handlebars.registerHelper("notIn",function(a){var b,c=arguments.length;if(c<3)throw new Error("Handlebars#notIn needs at least 2 parameters.");b=arguments[c-1];for(var d=1;d<c-1;d++)if(a===arguments[d])return b.inverse(this);return b.fn(this)}),Handlebars.registerHelper("formatEstimatedValue",function(a,b){if(_.isNumber(a)){var c=1e6,d=1e3,e=Handlebars.helpers.getCurrencySymbol.call(this);a/c>1?(a/=c,a=Handlebars.helpers.number.call(this,a,b),a=TSDK.I18n.get("{0}{1}M",[e,a],"{0} argument is currency symbol, {1} argument is number and M is symbol for millions")):a/d>1?(a/=d,a=Handlebars.helpers.number.call(this,a,b),a=TSDK.I18n.get("{0}{1}K",[e,a],"{0} argument is currency symbol, {1} argument is number and K is symbol for thousands")):a=TSDK.I18n.get("<{0}1K",e,"Estimated lift is less than one thousand. {0} argument is currency symbol")}return a||"---"}),Handlebars.registerHelper("formatRevenue",function(a){if(_.isNumber(a)){var b=1e18,c=1e15,d=1e12,e=1e9,f=1e6,g="",h=2;return h=a>=1e5?1:2,a>=b?(a/=b,g="E"):a>=c?(g="P",a/=c):a>=d?(g="T",a/=d):a>=e?(g="B",a/=e):a>=f?(g="M",a/=f):a>=1e4&&(g="K",a/=1e3),(a=Handlebars.helpers.RoundNumber.call(null,a,h))+g}return a}),Handlebars.registerHelper("RoundNumber",function(a,b){return _.isNumber(a)&&(a=+(Math.round(a+"e+"+b)+"e-"+b)),a}),Handlebars.registerHelper("getCurrencySymbol",function(){return ELM.CurrencySymbol[ELM.clientLocale]||"$"}),Handlebars.registerHelper("getActivityDisplayType",function(a,b){if(arguments.length<1)throw new Error("Handlebars#getActivityDisplayType needs at least 1 parameter");return"short"===b?ELM.Activities.activityDisplayTypes[a].shortText:ELM.Activities.activityDisplayTypes[a].longText}),Handlebars.registerHelper("ifEither",function(a,b,c,d,e){return a===b||c===d?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("ifNeither",function(a,b,c,d,e){return a!==b&&c!==d?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("ifNotAfter",function(a,b,c){if(arguments.length<2)throw new Error("Handlebars#ifNotAfter needs 2 parameters");return a-b<=1?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("ifNotBefore",function(a,b){if(arguments.length<1)throw new Error("Handlebars#ifNotBefore needs 1 parameters");return a<1?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("getTemplateTestingCriteriaParameter",function(a,b,c){if(arguments.length<2)throw new Error("Handlebars#getTemplateTestingCriteriaParameter needs 2 parameters.");var d;return"MBOX"===b?"mBox Parameter "+a:"string"==typeof a?(d=a.substring(a.lastIndexOf(".")+1),"string"==typeof c&&c&&(d=d+" parameter "+c),d):void 0}),Handlebars.registerHelper("getTemplateTestingCriteriaOperator",function(a){if(arguments.length<1)throw new Error("Handlebars#getTemplateTestingCriteriaOperator needs 1 parameter.");var b={containsIgnoreCase:TSDK.I18n.get("contains"),doesNotContainIgnoreCase:TSDK.I18n.get("does not contain"),equals:TSDK.I18n.get("is (case sensitive)"),doesNotEqualIgnoreCase:TSDK.I18n.get("is not")};return b.hasOwnProperty(a)?b[a]:a}),Handlebars.registerHelper("getExperiencesCount",function(a){var b,c,d=1;if(arguments.length<1)throw new Error("Handlebars#getExperiencesCount needs 1 parameter.");var e=a.locations,f=a.exclusions;return"MVT"===a.activityType?a.experiences.length-f:(_.each(e,function(a){b=a.offers,c=b.length,b&&c&&(b[0].included?d*=c:d*=c-1)}),d-f.length/e.length)}),Handlebars.registerHelper("add",function(a,b){if(arguments.length<3)throw new Error("Handlebars#add needs 2 parameters");return parseFloat(a)+parseFloat(b)}),Handlebars.registerHelper("getControlExperienceType",function(a){if(arguments.length<1)throw new Error("Handlebars#getControlExperienceType needs 1 parameter.");return{random:TSDK.I18n.get("Random Experiences"),default_content:TSDK.I18n.get("Default Experience"),custom:TSDK.I18n.get("Selected Experience")}[a]}),Handlebars.registerHelper("getOneToOneOffer",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#getOneToOneOffer needs 3 parameters.");return a[b].offers[c]["jcr:title"]}),Handlebars.registerHelper("getOneToOneLocation",function(a,b){if(arguments.length<2)throw new Error("Handlebars#getOneToOneLocation needs 2 parameters.");return a[b]["jcr:title"]}),Handlebars.registerHelper("getOneToOneOffer",function(a,b,c){if(arguments.length<3)throw new Error("Handlebars#getOneToOneOffer needs 3 parameters.");return a[b].offers[c]["jcr:title"]}),Handlebars.registerHelper("getOneToOneAlgorithmPercentage",function(a,b,c){var d,e=100-a;if(arguments.length<2)throw new Error("Handlebars#getOneToOneAlgorithmPercentage needs 2 parameters.");return d=Math.floor(e/b),c===b-1&&(d=e-(b-1)*d),d}),Handlebars.registerHelper("getItemTitleFromList",function(a,b,c,d){var e;if(arguments.length<3)throw new Error("Handlebars#getItemTitleFromList needs 3 parameters.");return(e=_.filter(a,function(a){return a[b]===c})[0])&&e["jcr:title"]||d||""}),Handlebars.registerHelper("getValue",function(){var a,b=window;if(arguments.length<2)throw new Error("Handlebars#getValue needs at least 1 parameter.");return a=Array.prototype.slice.call(arguments,0,arguments.length-1),a=a.join(".").split("."),_.each(a,function(a){b=b&&b[a]}),b}),Handlebars.registerHelper("ifAllEqual",function(){var a,b=Array.prototype.slice.call(arguments,0),c=b.pop(),d=b.length,e=!1;if(d%2!=0)throw new Error("Handlebars#ifAllEqual needs even number of arguments");for(a=0;a<d;a+=2){if(b[a]!==b[a+1]){e=!1;break}e=!0}return e?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("confidenceIcon",function(a){var b;if(a>=0&&a<60)b="icon-confidenceone";else if(a>=60&&a<75)b="icon-confidencetwo";else if(a>=75&&a<90)b="icon-confidencethree";else{if(!(a>=90&&a<=100))return"";b="icon-confidencefour"}return b}),Handlebars.registerHelper("getOSValue",function(a){var b={osAndroid:"Android",osOsx:"iOS",osWindows:"Windows",osLinux:"Linux",osProprietary:"Proprietary",osSymbian:"Symbian",osRim:"Blackberry"};return TSDK.I18n.get(b[a]||"")}),Handlebars.registerHelper("getStringWithLineBreaks",function(a){var b=Handlebars.Utils.escapeExpression(a);return new Handlebars.SafeString(b.replace(/\r?\n/g,"<br>"))}),Handlebars.registerHelper("isBrowser",function(a,b){var c;switch(a){case"IE":c=ELM.BrowserDetector.isIE();break;case"FIREFOX":c=ELM.BrowserDetector.isFirefox();break;case"CHROME":c=ELM.BrowserDetector.isChrome();break;default:throw new Error("Handlebars#isBrowser Invalid browser string:"+a)}return c?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("readGlobalVar",function(a,b){if(arguments.length<1)throw new Error("Handlebars#readGlobalVar needs atleast 1 parameter.");for(var c=a.split("."),d=window[c[0]],e=c.length,f=1;f<e;){if(!d)throw new Error("Data does not exist in global object");d=d[c[f]],f++}return"string"==typeof b?d[b]||"":d}),Handlebars.registerHelper("ifGlobalVar",function(a,b,c){if(arguments.length<2)throw new Error("Handlebars#ifGlobalVar needs atleast 1 parameter.");var d=Handlebars.helpers.readGlobalVar.call(this,a);return"object"==typeof b&&(c=b,b=void 0),void 0===b&&d||void 0!==b&&d===b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("isAnalyticsEnabled",function(a,b){if(2!=arguments.length)throw new Error("Handlebars#isAnalyticsEnabled needs 1 parameter");return ELM.Activities.isAnalyticsEnabled[a]?b.fn(this):b.inverse(this)});var TSDK=TSDK||{};TSDK.UI=TSDK.UI||{},TSDK.UI.Templates=TSDK.UI.Templates||{},TSDK.Enums=TSDK.Enums||{};var Granite=Granite;TSDK.I18n=TSDK.I18n||Granite&&Granite.I18n||{get:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0;c<b.length;c++){var d="[{]"+c+"[}]";a=a.replace(new RegExp(d,"g"),b[c])}return a},getVar:function(a){return a},getLocale:function(){return"en"}},TSDK.UI.Util={PANEL_MESSAGE_POSITION:"pos-l-34-imp pos-t-3-1",clone:function(a){var b,c,d;if(null==a||"object"!=typeof a)return a;if(a instanceof Date)return b=new Date,b.setTime(a.getTime()),b;if(a instanceof Array){for(b=[],d=a.length,c=0;c<d;c+=1)b[c]=this.clone(a[c]);return b}if(a instanceof Object){b={};for(var e in a)a.hasOwnProperty(e)&&(b[e]=this.clone(a[e]));return b}throw new Error("Unable to copy obj! Its type isn't supported.")},addProtocolToUrl:function(a){var b=/^(https?:\/\/)/;return a&&!b.test(a)&&(a="http://"+a),a},isUrlValid:function(a,b){return!(!a.val().trim()||b.length)},UrlValidationRegex:new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))?)(?::\\d{2,5})?(?:/[^\\s]*)?$","i"),UrlValidationWithoutProtocolRegex:new RegExp("^(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))?)(?::\\d{2,5})?(?:/[^\\s]*)?$","i"),getActualCSS:function(a,b){var c,d=a.clone().attr("id",!1);return d.css({visibility:"hidden",display:"block",position:"absolute"}).appendTo("body"),c=d.css(b),d.remove(),c},getCompleteResourcePath:function(a){return"/content/mac/"+ELM.client+"/target"+a},sendGETRequest:function(a){return $.ajax({url:a.url,async:void 0===a.async||a.async,type:"GET"})},isInteger:function(a){return a.match(/^\d+$/)},isFloat:function(a){return a.match(/^\d*.?\d+$/)},showConfirmationDialog:function(a,b){a.set({heading:b.heading,content:b.message,buttons:[{label:TSDK.I18n.get("Cancel"),click:function(a){a.dialog.hide()}.bind(this)},{label:b.label,className:"primary",click:function(a){b.callback(),a.dialog.hide()}.bind(this)}]}).show()},showErrorNotification:function(a){F.trigger("errorNotification",{message:a.message,heading:a.heading||TSDK.I18n.get("ERROR"),className:a.className})},showSuccessNotification:function(a){F.trigger("successNotification",{message:a.message,heading:a.heading,className:a.className})},showNoticeNotification:function(a){F.trigger("noticeNotification",{message:a.message,heading:a.heading,className:a.className})},showInfoNotification:function(a){F.trigger("infoNotification",{message:a.message,heading:a.heading,className:a.className})},hasArrayDuplicates:function(a){return _.unique(a).length!==a.length},trimArrayValues:function(a){var b=[],c=0;return _.isArray(a)?(_.each(a,function(a){a.trim()&&(b[c++]=a)}),b):a},hasStringWhiteSpaces:function(a){return _.isString(a)&&/\s/g.test(a)},getFragment:function(a){var b,c=document.createElement("div"),d=document.createDocumentFragment();for(c.innerHTML=a,b=c.childNodes.length-1;b>=0;b-=1)d.insertBefore(c.childNodes[b],d.firstChild);return d},hasChanged:function(a,b,c){var d,e;return c=c||{},c.ignoreKeys=c.ignoreKeys||[],c.ignoreKeysOfArrayElements=c.ignoreKeysOfArrayElements||{},c.ignoreKeysOfObjectElements=c.ignoreKeysOfObjectElements||{},!_.isObject(b)||(_.each(c.ignoreKeys,function(c){b[c]=a.get(c)}),_.each(c.ignoreKeysOfArrayElements,function(c,e){d=a.get(e)||[],_.each(d,function(a,f){_.each(c,function(c){a.hasOwnProperty(c)&&b[e]&&b[e][f]&&(b[e][f][c]=d[f][c])})})}),_.each(c.ignoreKeysOfObjectElements,function(c,d){e=a.get(d)||{},_.each(c,function(a){e.hasOwnProperty(a)&&b[d]&&(b[d][a]=e[a])})}),!_.isEqual(b,a.toJSON()))},updateSelectWidget:function(a,b){b&&a.find("select").val(b),a.find("ul").remove(),a.removeData("select").select()},escape:function(a){return Handlebars.Utils.escapeExpression(a)},compareURLs:function(a,b,c){var c=c||{},d=function(a){for(var b=a[a.length-1];-1!==["/","#"].indexOf(b);)a=a.substring(0,a.length-1),b=a[a.length-1];return a};return c.strict?a===b:c.similar?d(a)===d(b):a==b},escapeHTMLAttributes:function(a){return a=a||"",a.replace(/(\?|=|#|:|\.|\[|\]|\/)/g,"\\$1")},convertCurrencyStringToInteger:function(a){var b=/[^0-9]+/g;return Number(a.replace(b,""))},getResolutionFromDates:function(a,b){var c=864e5,d=(moment(b)-moment(a))/c;return d<=3?"hour":d<=100?"day":"week"},isActivityImported:function(a){var b=a&&a.split("/");return 3===b.length&&"imported"===b[0]}},F.Component.prototype.propagateEvent=function(a,b){var c={},d=b||{};this.shouldPropagateEvent(a,d)&&(this instanceof TSDK.UI.Component&&(d.name&&d.name===a?d.path=this.toString().toLowerCase()+"/"+d.path:(c.name=a,c.data=TSDK.UI.Util.clone(d),c.path=this.toString().toLowerCase(),c.target=this,d=c)),this.trigger(a,d),this.parent&&this.parent.propagateEvent&&this.parent.propagateEvent(a,d))},F.Component.prototype.shouldPropagateEvent=function(a,b){return!0},F.Component.prototype.destructButKeepEl=function(){this.view&&(this.view.$el&&this.view.$el.unbind().undelegate().empty(),this.view.model&&this.view.model.off&&this.view.stopListening()),this.teardownIfSetup(),this.removeComponents(),this.stopListening(),delete this.components},TSDK.EnumUtil={addEnum:function(a,b){if("string"!=typeof a||""===a)throw new Error("Cannot create enum: Invalid enum type.");if("object"==typeof b)return TSDK.Enums[a]=Object.freeze(b);throw new Error("Cannot create enum: Enum properties should be key-value pairs.")},getProperties:function(a){var b=TSDK.Enums[a];return"object"==typeof b?Object.keys(b):[]},getValues:function(a,b){var c,d=TSDK.Enums[a],e=[],f={};if("object"==typeof d)for(var g in d)c=d[g],b&&f[c]||(e.push(c),f[c]=!0);return e},removeEnum:function(a){delete TSDK.Enums[a]}},TSDK.UI.Component=new PseudoClass({toString:"tsdk-ui-component",extend:F.ModelComponent,construct:function(a){a&&(this.setPreprocessor(a.preprocessor),this.setPostprocessor(a.postprocessor),this.setFetchOptions(a.fetchOptions||{url:a.url}),this.setData(a.data),this.configure(a.config)),this.initialize(a)},initialize:function(){this.throwError("No definition found for initialize.")},configure:function(a){this.config=_.extend({},this.config,a),this.handleConfigChanged()},handleConfigChanged:function(){},setPreprocessor:function(a){"function"==typeof a&&(this.preprocessor=a)},setPostprocessor:function(a){"function"==typeof a&&(this.postprocessor=a)},setFetchOptions:function(a){this.fetchOptions=a},fetch:function(a){var b=this,c=_.extend({},this.fetchOptions,a);if(c||this.throwError("Cannot fetch. Parameters are not set."),!c.url)throw new Error("Cannot fetch. URL is empty.");$.ajax({url:c.url,type:"get",async:!1!==c.async,success:function(a){b.setData(a,c.process),"function"==typeof c.success&&c.success.apply(null,arguments)},error:function(){"function"==typeof c.error&&c.error.apply(null,arguments)}})},loadModel:function(a){this.load(a)},setData:function(a,b){a&&!1!==b&&this.preprocessor&&(a=this.preprocessor(a)),this.setContext(a),this.view&&this.render()},getData:function(a){var b=this.getContext();return!1!==a&&this.postprocessor?this.postprocessor(b):b},setContext:function(a){a&&this.CONTEXT_TYPE_ARRAY&&_.isArray(a)&&(a={items:a}),this.loadModel(a)},getContext:function(){var a=this.model.toJSON();return this.CONTEXT_TYPE_ARRAY?a.items:a},validate:function(a){return!0},throwError:function(a){throw new Error(this.toString()+": "+a)}}),TSDK.UI.ConfigurableComponent=new PseudoClass({toString:"tsdk-ui-configurableComponent",extend:TSDK.UI.Component,getConfigInModel:function(a){var b=this.model&&this.model.get("config");return b&&b[a]},setConfigInModel:function(a,b){var c=this.model&&this.model.get("config");c&&(c[a]=b)},getContext:function(){var a=this.model.toJSON();return this.CONTEXT_TYPE_ARRAY?a.items:_.omit(a,"config")},handleConfigChanged:function(){this.model&&this.model.set("config",this.config)},getData:function(){return _.omit(this._super.apply(this,arguments),["config"])}}),TSDK.EnumUtil.addEnum("SpecialMboxes",{ANY_MBOX_LOCATION:"** any mbox **",DISPLAY_MBOXES:"** display mboxes **",CLICK_FROM_DISPLAY_MBOXES:"** click from display mbox **"}),TSDK.UI.MboxPicker=new PseudoClass({toString:"MboxPicker",extend:TSDK.UI.Component,CONTEXT_TYPE_ARRAY:!0,View:F.View.extend({events:{"change coral-autocomplete":"handleMboxSelected"}}),initialize:function(a){this.initView(a)},initView:function(a){this.view=new this.View({el:a.el,component:this,template:TSDK.UI.Templates.MboxPickerComponent.MboxPicker})},loadModel:function(a){var b={};a&&(_.extend(b,this.config,a),this.updateSpecialMboxes(b)),this.load(b)},updateSpecialMboxes:function(a){var b=a.specialMboxes;"all"===b?a.specialMboxes=TSDK.EnumUtil.getValues("SpecialMboxes"):_.isArray(b)||delete a.specialMboxes},handleRenderComplete:function(){},handleMboxSelected:function(a){var b=a.target,c=$(b),d=b.value,e=c.find("coral-autocomplete-item[selected]").data("special");this.model.set("selected",d),this.trigger("mbox:selected",{value:d,isSpecial:e})},getContext:function(){return this.model.get("selected")},handleConfigChanged:function(){this.model&&this.model.set(this.config)}}),TSDK.UI.MetricsComponent=new PseudoClass({toString:"Metrics",extend:TSDK.UI.Component,CONTEXT_TYPE_ARRAY:!0,View:F.View.extend({events:{"click #addmetrics":"addNewMetric","change .conversion-metric-checkbox":"handleConversionMetric"}}),constants:{REPORTING_SOLUTION_ANALYTICS:"analytics"},initialize:function(a){this.initView(a),this.loadModel({reportingSolution:a.reportingSolution,config:this.config}),this.registerListeners(),this.registerVars(a),this.registerBinders()},loadModel:function(a){this.load(a)},initView:function(a){this.view=new this.View({el:a.el,component:this,template:TSDK.UI.Templates.MetricsComponent.Metrics})},registerListeners:function(){this.listenTo(this.view,"renderComplete",function(){this.renderSubViews()})},registerVars:function(a){this.mboxPickerOptions=a.mboxPicker,this.reportSuite=a.reportSuite,this.analyticsMetrics=a.analyticsMetrics,this.setGoalMetricConfig()},registerBinders:function(){this.bind("updateActiveMetric"),this.bind("triggerMetricChanged"),this.bind("handleConversionMetric")},renderSubViews:function(){this.destructComponents();var a=this.getMetrics();this.metricIndex=0,this.$goalMetricEl=this.view.$(".goal"),this.$conversionMetricEl=this.view.$(".conversion"),this.$adMetricEl=this.view.$(".additional"),a&&a.length?_.each(a,function(a,b){this.metricIndex=b,this.addMetric(a)},this):this.addMetric(),this.setConversion()},addMetric:function(a,b){var c,d,e="metric"+this.metricIndex,f=!a,g=0===this.metricIndex,b=_.isBoolean(b)?b:a;return a=a||{},a.activityType="A-B",a.isGoalMetric=g,g&&this.config&&this.config.goalMetric?a.config=this.config.goalMetric:a.config=this.config||{},f&&(a.title=a.isGoalMetric?TSDK.I18n.get("MY PRIMARY GOAL"):this.generateAdditionalMetricName()),d=a.isGoalMetric?this.$goalMetricEl:a.conversion?this.$conversionMetricEl:this.$adMetricEl,a.conversion&&(this.conversionMetricIndex=this.metricIndex),this.components[e]&&this.components[e].destructButKeepEl(),this.isAnalyticsMetric()?(a.reportSuite=this.reportSuite,a.analyticsMetrics=this.analyticsMetrics,c=this.addComponent(new TSDK.UI.MetricsComponent.MetricsItemA4T({el:$('<div class="metric'+this.metricIndex+'" />').appendTo(d),model:a,analyticsMetrics:this.analyticsMetrics,visible:!0,mboxPickerOptions:this.mboxPickerOptions,collapsed:b}),e).on("expand",this.updateActiveMetric).on("metricsItem:addAudience",this.delegateShowAudiencePickerEvent).on("change",this.triggerMetricChanged)):c=this.addComponent(new TSDK.UI.MetricsComponent.MetricsItem({el:$('<div class="metric'+this.metricIndex+'" />').appendTo(d),model:a,visible:!0,mboxPickerOptions:this.mboxPickerOptions,collapsed:b}),e).on("expand",this.updateActiveMetric).on("metricsItem:addAudience",this.delegateShowAudiencePickerEvent).on("change",this.triggerMetricChanged),this.propagateEvent("metric:added",c.model.toJSON()),c},triggerMetricChanged:function(a){this.propagateEvent("metric:changed",a.toJSON())},delegateShowAudiencePickerEvent:function(a){},addNewMetric:function(){var a;this.metricIndex+=1,a=this.addMetric(),this.updateActiveMetric(a)},removeMetric:function(a){this.removeComponent(a),this.propagateEvent("metric:removed",a)},updateActiveMetric:function(a){this.activeMetric=a.toString(),this.collapseInactiveMetrics()},collapseInactiveMetrics:function(){for(var a in this.components)a!==this.activeMetric&&this.components[a].collapse()},setAnalyticsMetrics:function(a){var b=this.components.metric0;this.analyticsMetrics=a,b&&b.setAnalyticsMetrics(a)},generateAdditionalMetricName:function(){var a,b=this.getComponentsTitle(),c=TSDK.I18n.get("ADDITIONAL GOAL "),d=1;do{a=c+d++}while(-1!==b.indexOf(a));return a},getComponentsTitle:function(){return _.map(this.components,function(a){return a.model.getTitle()})},getIncompleteComponentsCount:function(a){var b=0;return _.each(this.components,function(c){c.isComplete(a)||b++}),b},setGoalMetricConfig:function(){this.config&&(this.config.goalMetric=_.extend({},_.omit(this.config,"goalMetric"),this.config.goalMetric))},handleConversionMetric:function(a){a.target.checked?this.removeConversionMetric():this.addConversionMetric()},addConversionMetric:function(){var a;this.metricIndex+=1,this.components.metric0.setConversion(!1),a=this.addMetric({conversion:!0,title:TSDK.I18n.get("CONVERSION METRIC")},!1),this.updateActiveMetric(a)},removeConversionMetric:function(){this.components["metric"+this.conversionMetricIndex].remove(),this.components.metric0.setConversion(!0)},setConversion:function(){var a=this.view.$(".conversion-metric-checkbox").get(0),b=!1;!this.config.POST_GOAL_METRIC_TRACKING_ENABLED||!this.components.metric0.getConversion()&&this.conversionMetricIndex||(b=!0,this.components.metric0.setConversion(!0)),a&&Coral.commons.ready(a,function(){a.checked=!!b})},hasChanged:function(){return _.some(this.components,function(a){return a.hasChanged()})},partialSave:function(){var a,b,c=Object.keys(this.components),d=this.getMetrics().length;for(a=c.length-1;a>=d;a--){b=this.components[c[a]];{if(b.hasChanged())break;this.removeComponent(c[a])}}return this.saveMetrics(),!0},saveMetrics:function(){var a=[];_.each(this.components,function(b,c){a.push(this.filterUnwantedMetricsAttributes(b.model.toJSON()))},this),this.setMetrics(a),this.metricIndex=a.length},destructComponents:function(){for(var a in this.components)this.components[a].destruct(),delete this[a],delete this.components[a];return this},hasMetricsToBeSaved:function(){return!_.isEmpty(this.components)&&this.hasChanged()},validate:function(a){var b=this.getIncompleteComponentsCount(a),c=this.components.metric0.model.getWorth(),d=this.getComponentsTitle(),e=1===b?TSDK.I18n.get("A definition is incomplete for 1 metric. Review the highlighted fields below."):TSDK.I18n.get("Metric definitions are incomplete for {0} metrics. Review the highlighted fields below.",b);return b?(this.notifyError({message:e}),!1):d.length!==_.uniq(d).length?(this.notifyError({message:TSDK.I18n.get("You have duplicate metric names.")}),!1):!c||!isNaN(c)||(this.notifyError({message:TSDK.I18n.get("Enter a valid number for estimated value.")}),!1)},notifyError:function(a){this.propagateEvent("error",a)},filterUnwantedMetricsAttributes:function(a){var b=["mboxes","isGoalMetric","activityType","config","isAdvancedSettingsVisible","analyticsMetrics"];return _.omit(a,b)},isComplete:function(){return this.validate()},getMetrics:function(){return this.metrics||[]},setMetrics:function(a){this.metrics=a},getContext:function(){return this.saveMetrics(),this.getMetrics()},setContext:function(a){this.setMetrics(a)},isAnalyticsMetric:function(){return this.model.get("reportingSolution")===this.constants.REPORTING_SOLUTION_ANALYTICS},setReportingSolution:function(a,b){this.model.set("reportingSolution",a,b)}}),TSDK.UI.MetricsComponent.MetricModel=Backbone.Model.extend({defaults:{title:"",type:"",action:"",matcher:"exact",worth:"",constraints:[],postGoalSuccessAction:""},defaultAdvancedMetricActionType:{incrementCountKeepUser:"COUNT_ONCE",incrementCountReleaseUserAllowEntry:"RESTART_SAME_EXPERIENCE",incrementCountBarEntry:"EXCLUDE_TO_SAME_EXPERIENCE"},getTitle:function(){return this.get("title")},getType:function(){return this.get("type")},getRevenueType:function(){return this.get("revenueType")},getEngagementType:function(){return this.get("engagementType")},getAnalyticsMetricId:function(){return this.get("analyticsMetricId")},getAction:function(){return this.get("action")},getDisplayMboxes:function(){return this.get("displayMboxes")},getMatcher:function(){return this.get("matcher")},getConstraints:function(){return this.get("constraints")?this.get("constraints"):[]},getConstraintTerms:function(){return _.pluck(this.getConstraints(),"term")},
getCompactConstraintTerms:function(){return _.compact(this.getConstraintTerms())},getClickTrackingTerms:function(){var a=this.getConstraints(),b={};return _.each(a,function(a){var c=a.templateId||"template_Id_1",d=b[c]||[];a.term&&(d.length?d.push(a.term):(d.push(a.term),b[c]=d))}),b},getWorth:function(){return this.get("worth")},getAdvancedMetricActionType:function(){return this.get("advancedMetricActionType")},getPostGoalSuccessAction:function(){return this.get("postGoalSuccessAction")},isAdvancedSettingsVisible:function(){return this.get("isAdvancedSettingsVisible")},setTitle:function(a,b){this.set("title",$.trim(a),b)},setType:function(a,b){this.set("type",a,b)},setRevenueType:function(a,b){this.set("revenueType",a,b)},setEngagementType:function(a){this.set("engagementType",a)},setAnalyticsMetricId:function(a,b){this.set("analyticsMetricId",a,b)},setAnalyticsMetricSource:function(a,b){this.set("analyticsMetricSource",a,b)},setAnalyticsMetricSupport:function(a,b){this.set("analyticsMetricSupport",a,b)},setAnalyticsMetrics:function(a,b){this.set("analyticsMetrics",a,b)},clearAnalyticsMetrics:function(a){this.unset("analyticsMetrics",a),this.unset("analyticsMetricId",a),this.unset("analyticsMetricSource",a),this.unset("analyticsMetricSupport",a)},setAction:function(a,b){this.set("action",a,b)},setMatcher:function(a){this.silentSet("matcher",a)},setConstraints:function(a,b){this.set("constraints",a,b)},setMboxes:function(a){this.silentSet("mboxes",a)},setWorth:function(a,b){a=$.trim(a),a=-1!=["de","es","fr","it","pt"].indexOf(TSDK.I18n.getLocale())?a.split(".").join("").split(",").join("."):a.split(",").join(""),this.set("worth",a,b)},setAdvancedMetricActionType:function(a,b){this.set("advancedMetricActionType",a,b)},setPostGoalSuccessAction:function(a,b){this.set("postGoalSuccessAction",a,b)},setIsAdvancedSettingsVisible:function(a){this.silentSet("isAdvancedSettingsVisible",a)},getConversion:function(){return this.get("conversion")},setConversion:function(a){this.silentSet("conversion",a)},addConstraint:function(a){var b=TSDK.UI.Util.clone(this.getConstraints());b.push({matcher:this.getMatcher(),term:"","ref:targetingAudience":"","elm:references":{}}),this.setConstraints(b,a)},removeConstraint:function(a){var b=TSDK.UI.Util.clone(this.getConstraints());b.splice(a,1),this.setConstraints(b)},updateConstraint:function(a,b,c,d){var e=TSDK.UI.Util.clone(this.getConstraints());e[a][b]=$.trim(c),this.setConstraints(e,d)},updateConstraintMatcher:function(a){var b=this.getMatcher(),c=_.map(TSDK.UI.Util.clone(this.getConstraints()),function(a){return _.extend(a,{matcher:b})});this.setConstraints(c,a)},clearConstraintsSilently:function(){this.unset("constraints",{silent:!0})},clearConstraints:function(){this.unset("constraints")},clearConstraintsExceptFirst:function(a){var b=TSDK.UI.Util.clone(this.getConstraints());b.splice(1),this.setConstraints(b,a)},clearAttributesSilently:function(){var a=Array.prototype.slice.call(arguments);a.length?_.each(a,function(a){this.unset(a,{silent:!0})},this):this.clear({silent:!0})},clearAllAttributesExcept:function(a){var b=_.pick(this.attributes,a);this.clearAttributesSilently(),this.set(b,{silent:!0})},isGoalMetric:function(){return this.get("isGoalMetric")},setDefaultAdvancedMetricActionType:function(a){var b=a?this.defaultAdvancedMetricActionType[a]:"COUNT_ONCE";this.setAdvancedMetricActionType(b)},derivePostGoalSuccessAction:function(a){switch(a){case"ALWAYS_CONVERT":case"COUNT_ONCE":case"COUNT_LANDINGS":return"incrementCountKeepUser";case"RESTART_SAME_EXPERIENCE":case"RESTART_RANDOM_EXPERIENCE":case"RESTART_NEW_EXPERIENCE":return"incrementCountReleaseUserAllowEntry";case"EXCLUDE_TO_SAME_EXPERIENCE":case"BAN_FROM_CAMPAIGN":return"incrementCountBarEntry";default:return"incrementCountKeepUser"}},computePostGoalSuccessAction:function(a){var b=this.derivePostGoalSuccessAction(this.getAdvancedMetricActionType());this.setPostGoalSuccessAction(b,a)},setDefaultAttributes:function(a,b){var c=_.pick(this.defaults,a);this.set(c,b)},removeAttributesSilently:function(a){_.each(a,function(a){this.unset(a,{silent:!0})},this)},getActivityType:function(){return this.get("activityType")||""},setActivityType:function(a){this.silentSet({activityType:a})},getReportSuite:function(){return this.get("reportSuite")||""},setReportSuite:function(a,b){this.set("reportSuite",a,b)},silentSet:function(a,b,c){var d={silent:!0};c&&_.extend(d,c),this.set(a,b,d)}}),TSDK.UI.MetricsComponent.MetricsItem=new PseudoClass({toString:"MetricsItem",extend:F.ModelComponent,Model:TSDK.UI.MetricsComponent.MetricModel,Template:function(){return TSDK.UI.Templates.MetricsComponent.MetricsItem.apply(this,arguments)},View:F.View.extend({commonEvents:{'blur [name="metricname"]':"setTitle",'change [name="metricname"]':"setTitle","coral-selectlist:change .context-menu-option":"handleContextMenuSelection","change .metric-worth-input":"setWorth","change .select-metric-type":"handleMetricTypeSelection","change .select-advanced-metric-action-type":"setAdvancedMetricActionType","change .select-post-goal-success-action":"handlePostGoalSuccessAction","change .select-revenue-type":"setRevenueType","change .select-action":"handleActionSelection","change .select-engagement-type":"setEngagementType","change .terminput":"updateConstraintTermFromInput","change .select-matcher":"updateConstraintMatcher","click .additionalCondition":"addAdditionalCondition","click .appliedCondition":"removeAdditionalCondition","click .addTargetingCondition":"addTargetingAudience","click .add-constraint":"handleConstraintAddition","click .remove-constraint":"removeConstraint","click .select-elements":"triggerShowClickTracking","click .delete-elements":"clearClickTrackElements","click .context-menu li":"hideContextMenu","coral-accordion:change coral-accordion":"triggerCollapsibleExpandEvent"},additionalEvents:{'change [name="revenueType"]':"setRevenueType",'change [name="engagementType"]':"setEngagementType"},events:function(){return _.extend({},this.commonEvents,this.additionalEvents)}}),construct:function(a){this.initView(a.el),this.loadModel(a.model),this.registerVars(a),this.registerBinders(),this.registerListeners()},loadModel:function(a){this.load(a),this.model.getPostGoalSuccessAction()||this.model.computePostGoalSuccessAction({silent:!0})},registerVars:function(a){this.analyticsMetrics=a.analyticsMetrics,this.mboxPickerOptions=a.mboxPickerOptions,this.currentConstraint=null,this.collapsedByDefault=a.collapsed},initView:function(a){this.view=new this.View({el:a,component:this,template:this.Template})},registerBinders:function(){this.bind("saveSelectedAudienceToConstraint"),this.bind("setClickedElements")},registerListeners:function(){this.listenTo(this.view,"renderComplete",function(){this.initializeWidgets()}),this.listenTo(this.model,"change",function(){this.updateSummary(),this.trigger("change",this.model)})},initializeWidgets:function(){this.initialModel=this.initialModel||TSDK.UI.Util.clone(this.model.attributes),this.initCollapsibleWidget(),this.setMetricTypeIfSingle(),this.addFilters(),this.updateSummary()},initCollapsibleWidget:function(){var a=this.view.$("coral-accordion-item").get(0),b=this;a&&Coral.commons.ready(a,function(){b.section=a,b.collapsedByDefault&&(a.selected=!1)})},collapse:function(){this.section&&(this.section.selected=!1)},triggerCollapsibleExpandEvent:function(a){a.originalEvent.detail.selection&&(this.collapsedByDefault=null,this.trigger("expand",this))},addFilters:function(){var a,b=this.model.getConstraints();if(this.isMboxView()||this.isMboxClick())for(a=0;a<b.length;a++)this.$mboxFilter=this.view.$(".mboxLookup"+a),this.initFilter(this.$mboxFilter,a,b[a].term)},initFilter:function(a,b,c){var d,e=this,f=this.model.getConstraintTerms(),g=this.mboxPickerOptions,h=g.config,i=0===b&&h&&h.specialMboxes;f.splice(b,1),d=new TSDK.UI.MboxPicker({el:a,visible:!0,fetchOptions:{url:g.url},preprocessor:g.preprocessor,config:_.extend({},h,{specialMboxes:i,selected:c,exclude:f})}),this.populateMboxList(d,h),d.on("mbox:selected",function(a){e.updateConstraintTermOnMboxSelection(a,b)})},populateMboxList:function(a,b){var c=[];this.isMboxView()?TSDK.UI.mboxes?a.setData(TSDK.UI.mboxes):a.fetch({async:!1,success:function(a){TSDK.UI.mboxes=a}}):this.isMboxClick()&&(_.isFunction(b.fetchDisplayMbox)&&(c=b.fetchDisplayMbox.call()),a.setData({items:c,specialMboxes:[]},!1))},isMboxView:function(){return"mboxView"===this.model.getAction()},isMboxClick:function(){return"mboxClick"===this.model.getAction()},show:function(){return this.addMboxes(),this.view.show(),this},hideContextMenu:function(){this.view.$(".context-options-button").click()},setTitle:function(a){var b=a.target.value;this.toggleTitleEditMode(!1),b!==this.model.getTitle()&&this.model.setTitle(b)},enableTitleEditing:function(){var a=this.view.$(".metric-name-input").get(0);this.toggleTitleEditMode(!0),a&&Coral.commons.nextFrame(function(){$(a).focus(),a.selectionStart=a.selectionEnd=a.value.length})},toggleTitleEditMode:function(a){this.view.$(".metric-item").toggleClass("title-edit-mode",a)},clearAllFields:function(){var a=["title","activityType","isGoalMetric","config","conversion"];this.resetModelWithDefaults(a)},setWorth:function(a){this.model.setWorth(a.target.value,{silent:!0}),this.model.trigger("change",this.model)},handleContextMenuSelection:function(a){if(a.target.selectedItem)switch(a.target.selectedItem.value){case"rename":this.enableTitleEditing(),this.hideContextMenu();break;case"clear":this.clearAllFields();break;case"delete":this.remove();break;case"advancedSettings":this.showAdvancedSettings(),this.disableMenuOption(a.target.selectedItem),this.model.setIsAdvancedSettingsVisible(!0),this.hideContextMenu()}},handleMetricTypeSelection:function(a){this.setMetricType(a.target.value)},setMetricType:function(a){this.resetModelWithDefaults(this.getRenderAttributes(),{silent:!0}),"conversion"===a?this.addMboxes():this.setupByType(a,{silent:!0}),this.model.setType(a)},deriveTitleFromMetricType:function(){var a=this.view.$(".select-metric-type coral-select-item:selected").text();this.model.setTitle(a)},setMetricTypeIfSingle:function(){var a=this.view.$(".select-metric-type").get(0),b=this;this.model.getType()&&!a||Coral.commons.ready(a,function(){var c=a?a.items.getAll():[];1===c.length&&b.model.setType(c[0].value)})},resetModelWithDefaults:function(a,b){var c=a;this.isPostGoalMetric()&&c.push("targetName"),this.clearUnneededAttributes(c),this.model.setDefaultAttributes(["postGoalSuccessAction"],b)},clearUnneededAttributes:function(a){var b=a||this.getRenderAttributes();this.model.clearAllAttributesExcept(b)},getRenderAttributes:function(){return["title","activityType","isGoalMetric","config","isAdvancedSettingsVisible","conversion"]},isPostGoalMetric:function(){return this.model.getConversion()},setupByType:function(a,b){"revenue"===a&&(this.model.setRevenueType("rpv",b),this.addMboxes(),this.setAction("mboxView",b))},setRevenueType:function(a){this.model.setRevenueType(a.target.value)},handleActionSelection:function(a){this.setAction(a.target.value)},setAction:function(a,b){this.model.clearConstraintsSilently(),this.model.setMatcher("exact"),this.model.setWorth("",{silent:!0}),this.view.$(".metric-worth-input").val(""),"clickRecommendation"===a?this.propagateEvent("metric:addClickTrackId"):this.propagateEvent("metric:removeClickTrackId"),"elementClick"!==a&&"clickRecommendation"!==a&&this.addConstraint({silent:!0}),this.model.setAction(a,b)},setEngagementType:function(a){var b=a.target.value;this.model.setWorth("",{silent:!0}),this.model.setEngagementType(b),this.model.clearConstraintsSilently(),"customScoring"!==b&&this.view.$(".metric-worth-input").val("")},getConversion:function(){return this.model.getConversion()},setConversion:function(a){this.model.setConversion(a)},setClickedElements:function(a){var b=[];_.each(a,function(a,c){_.each(a,function(a){b.push({term:a,templateId:c})},this)},this),this.model.setConstraints(b)},updateConstraintTermFromInput:function(a){var b=a.target.value,c=$(a.target).attr("name");this.model.updateConstraint(c,"term",b,{silent:!0}),this.clearIncompleteMark(),this.model.trigger("change")},updateConstraintTermOnMboxSelection:function(a,b){var c=a.value,d=a.isSpecial,e={silent:!0};c&&(this.model.updateConstraint(b,"term",c,e),c&&d?(this.model.clearConstraintsExceptFirst(e),this.model.set("specialmbox",!0,e)):this.model.unset("specialmbox",e),(""===c||b)&&this.model.updateConstraint(b,"ref:targetingAudience","",e),this.clearIncompleteMark(),this.model.trigger("change"))},updateConstraintMatcher:function(a){this.model.setMatcher(a.target.value),this.model.updateConstraintMatcher({silent:!0}),this.model.trigger("change")},addAdditionalCondition:function(a){var b=this.view.$(a.target),c=b.data("condition");this.view.$(".targetingAudience"+c).show(),b.hide(),this.view.$(".appliedCondition").show()},removeAdditionalCondition:function(a){var b=this.view.$(a.target);this.model.updateConstraint(b.data("condition"),"ref:targetingAudience","")},addTargetingAudience:function(a){this.saveSelectedAudienceToConstraint;this.currentConstraint=this.view.$(a.target).data("condition")},saveSelectedAudienceToConstraint:function(a){this.model.updateConstraint(this.currentConstraint,"ref:targetingAudience",a.get("reference")),this.model.updateConstraint(this.currentConstraint,"audienceTitle",a.get("jcr:title")),this.model.trigger("change")},handleConstraintAddition:function(){this.addConstraint()},addConstraint:function(a){this.model.addConstraint(a)},removeConstraint:function(a){var b=parseInt(a.currentTarget.id);_.isNaN(b)||this.model.removeConstraint(b)},addMboxes:function(){this.model.setMboxes([])},remove:function(){this.destruct(),this.parent.removeMetric(this.toString())},clearClickTrackElements:function(){this.model.clearConstraints()},triggerShowClickTracking:function(){this.propagateEvent("metric:showClickTracking",{clickedElements:this.model.getClickTrackingTerms(),successHandler:this.setClickedElements})},updateSummary:function(){var a,b,c=this.model.getTitle(),d=this.view.$(".metric-item").get(0),e=this.model.getConstraints()&&this.view.$(".constraint").data("display-type"),f=this.model.getCompactConstraintTerms(),g=this;d&&Coral.commons.ready(d,function(){a=g.model.getType()&&g.getSelectedItemText(".select-metric-type"),b=g.model.getAction()&&g.getSelectedItemText(".select-action")||g.model.getEngagementType()&&g.getSelectedItemText(".select-engagement-type")||g.model.getAnalyticsMetricId()&&g.getSelectedItemText(".select-analytics-metric"),g.view.$(".metric-summary").html(TSDK.UI.Templates.MetricsComponent.MetricsItemSummary({title:c,type:a,action:b,constraint:e,terms:f}))})},getSelectedItemText:function(a){var b=this.view.$(a).get(0);return b&&b.selectedItem?$(b.selectedItem).text():""},hasChanged:function(){return!_.isEqual(this.model.toJSON(),this.initialModel)},isComplete:function(a){var b=this.model.getTitle(),c=this.verifyCriteria(b);return a&&!c&&this.markIncomplete(),!!c},verifyCriteria:function(a){return"engagement"===this.model.getType()?a&&this.model.getEngagementType():this.getDefaultCriteria()},getDefaultCriteria:function(){var a=this.model.getConstraintTerms(),b=this.model.getTitle();return"clickRecommendation"===this.model.getAction()?b:b&&a.length&&-1===a.indexOf("")},markIncomplete:function(){this.view.$(".metric-item").addClass("incomplete")},clearIncompleteMark:function(){this.view.$(".metric-item").removeClass("incomplete")},updateTitleAttribute:function(a,b){$(a).attr("title",b)},showAdvancedSettings:function(){this.view.$(".advanced-metric-action").removeClass("hidden")},disableMenuOption:function(a){$(a).prop("disabled",!0)},handlePostGoalSuccessAction:function(a){this.model.setPostGoalSuccessAction(a.target.value,{silent:!0}),this.model.setDefaultAdvancedMetricActionType(a.target.value)},setAdvancedMetricActionType:function(a){this.model.setAdvancedMetricActionType(a.target.value,{silent:!0}),this.model.trigger("change")}}),TSDK.UI.MetricsComponent.MetricsItemA4T=new PseudoClass({toString:"MetricsItemA4T",extend:TSDK.UI.MetricsComponent.MetricsItem,Template:function(){return TSDK.UI.Templates.MetricsComponent.MetricsItemA4T.apply(this,arguments)},View:TSDK.UI.MetricsComponent.MetricsItem.prototype.View.extend({additionalEvents:{"change .select-analytics-metric":"setAnalyticsMetric"}}),clearAllFields:function(){this.resetModelWithDefaults(this.getRenderAttributes())},resetModelWithDefaults:function(a,b){this._super(a,{silent:!0}),this.model.setTitle(TSDK.I18n.get("MY PRIMARY GOAL"),b)},getRenderAttributes:function(){return["activityType","reportSuite","analyticsMetrics","config"]},setupByType:function(a,b){"analytics"===a&&this.setAnalyticsMetrics(this.analyticsMetrics,b)},setAnalyticsMetric:function(a){var b=a.target.value,c=$(a.target).find("coral-select-item:selected").data("source"),d=$(a.target).find("coral-select-item:selected").data("support");$(a.target).find("coral-select-item:selected").text();this.model.setTitle(TSDK.I18n.get("ANALYTICS METRIC"),{silent:!0}),this.model.setAnalyticsMetricId(b,{silent:!0}),this.model.setAnalyticsMetricSource(c,{silent:!0}),this.model.setAnalyticsMetricSupport(d,{silent:!0}),this.model.trigger("change")},setAnalyticsMetrics:function(a,b){this.model.setAnalyticsMetrics(a,b)},removeAnalyticsMetrics:function(a){this.model.clearAnalyticsMetrics(a)},showAnalyticsMetricsLoader:function(){this.view.$(".select-analytics-metric").addClass("hidden"),this.view.$(".rs-alert").addClass("hidden"),this.view.$("coral-wait.loading").removeClass("hidden")},verifyCriteria:function(a){return"analytics"===this.model.getType()?a&&this.model.getAnalyticsMetricId():this.getDefaultCriteria()}}),TSDK.UI.MetricsComponent.prototype.config={CONVERSION_ENABLED:!0,REVENUE_ENABLED:!0,ENGAGEMENT_ENABLED:!0,ANALYTICS_METRIC_ENABLED:!0,REVENUE_SALES_ENABLED:!0,REVENUE_ORDERS_ENABLED:!0,PROJECTED_EARNINGS_ENABLED:!1,CURRENCY_SYMBOL:"$",ACTION_VIEWED_MBOX_ENABLED:!0,ACTION_CLICK_MBOX_ENABLED:!1,ADVANCED_SETTINGS_ENABLED:!0,POST_GOAL_METRIC_TRACKING_ENABLED:!1,CONVERSION_METRIC_CHECKBOX_ENABLED:!0,CLICK_TRACKING_ENABLED:!1,CLICK_RECOMMENDATION_ENABLED:!1},TSDK.UI.GoalModel=Backbone.Model.extend({getMetrics:function(){return this.get("metrics")},setMetrics:function(a){this.silentSet("metrics",a)},setAnalyticsMetricId:function(a){this.set("analyticsMetricId",a)},setAnalyticsMetricSource:function(a){this.set("analyticsMetricSource",a)},setAnalyticsMetricSupport:function(a){this.set("analyticsMetricSupport",a)},setAnalyticsSupport:function(a){this.set("isAnalyticsSupported",a)},getReportingSolution:function(){return this.get("reportingSolution")||"target"},setReportingSolution:function(a){this.silentSet("reportingSolution",a)},getAnalyticsCompany:function(){return this.get("analyticsCompany")},setAnalyticsCompany:function(a){this.silentSet("analyticsCompany",a)},removeAnalyticsCompany:function(a){this.unset("analyticsCompany",a)},getReportSuite:function(){return this.get("reportSuite")||""},setReportSuite:function(a){this.silentSet("reportSuite",a)},removeReportSuite:function(a){this.unset("reportSuite",a)},setReportSuiteValidation:function(a){this.silentSet("isReportSuiteValid",a)},getReportSuiteValidation:function(){return this.get("isReportSuiteValid")},removeReportSuiteValidation:function(){this.unset("isReportSuiteValid",{silent:!0})},removeAttributesSilently:function(a){_.each(a,function(a){this.unset(a,{silent:!0})},this)},silentSet:function(a,b,c){var d={silent:!0};c&&_.extend(d,c),this.set(a,b,d)}}),TSDK.UI.Goals=new PseudoClass({toString:"Goals",extend:TSDK.UI.ConfigurableComponent,Model:TSDK.UI.GoalModel,View:F.View.extend({events:{"change .reporting-solution":"updateReportingSolution"}}),initialize:function(a){this.registerVars(a),this.setAnalyticsSupport(),this.initView(a),this.registerListeners(),this.registerBinders()},destruct:function(){},handleConfigChanged:function(){this.model&&(this.model.set("config",this.config),this.config.SHOW_ONLY_ANALYTICS&&this.model.setReportingSolution("analytics"))},setAnalyticsSupport:function(){this.isAnalyticsEnabled()&&this.model.setAnalyticsSupport(!0)},initView:function(a){this.view=new this.View({el:a.el,component:this,template:TSDK.UI.Templates.Goals.Goals,model:this.model})},registerListeners:function(){this.listenTo(this.view,"renderComplete",function(){this.renderSubViews()})},registerVars:function(a){this.analytics=a.analytics,this.metricsOptions=a.metrics},registerBinders:function(){this.bind("delegateShowAudiencePickerEvent"),this.bind("onCompaniesFetched"),this.bind("updateAnalyticsCompany"),this.bind("validateReportSuite"),this.bind("updateReportSuite"),this.bind("fetchMetricsForReportSuite"),this.bind("handleFetchMetricsError"),this.bind("notifyError")},renderSubViews:function(){this.isAnalyticsEnabled()&&"analytics"===this.model.getReportingSolution()&&(this.addAnalyticsCompanyPicker(),this.addReportSuitePicker(),this.hideUnnecessaryAnalyticsElements(this.components.companyPicker.getCompanies()),this.updateCompanyForReportingSuites()),this.addMetrics(),"analytics"!==this.model.getReportingSolution()||this.isAnalyticsEnabled()},isAnalyticsEnabled:function(){var a=this.analytics;return a&&_.isFunction(a.fetchCompanies)&&_.isFunction(a.fetchReportSuites)},addMetrics:function(){var a=this.model.getReportingSolution(),b=this.model.getReportSuite(),c=this.analyticsMetrics,d=this.model.getMetrics();this.metrics&&this.metrics.destructButKeepEl(),this.metrics=this.addComponent(new TSDK.UI.MetricsComponent(_.extend({},this.metricsOptions,{el:this.view.$(".tsdk-metrics"),visible:!0,reportingSolution:a,reportSuite:b,analyticsMetrics:c,data:d})),"metrics").on("metrics:addAudience",this.delegateShowAudiencePickerEvent)},addAnalyticsCompanyPicker:function(){var a=this.model.getAnalyticsCompany(),b=this.analytics.fetchCompanies;this.components.companyPicker&&this.components.companyPicker.destructButKeepEl(),this.addComponent(new TSDK.UI.Goals.SCCompanyPicker({el:this.view.$(".sc-company-picker-placeholder"),selected:a||null,fetchCompanies:b}),"companyPicker").on("scCompany:fetched",this.onCompaniesFetched).on("scCompany:selected",this.updateAnalyticsCompany).on("error",this.notifyError),this.components.companyPicker.show()},addReportSuitePicker:function(){var a=this.model.getAnalyticsCompany(),b=this.model.getReportSuite(),c=this.analytics.fetchReportSuites;this.components.reportSuitePicker&&this.components.reportSuitePicker.destructButKeepEl(),this.addComponent(new TSDK.UI.Goals.ReportSuitePicker({el:this.view.$(".report-suite-picker-placeholder"),company:a,selected:b||null,fetchReportSuites:c}),"reportSuitePicker").on("reportSuite:selected",this.updateReportSuite).on("reportSuite:validate",this.validateReportSuite).on("error",this.notifyError),this.components.reportSuitePicker.show(),b&&this.loadAnalyticsMetrics(b)},onCompaniesFetched:function(a){a&&(this.hideUnnecessaryAnalyticsElements(a),this.updateCompanyForReportingSuites())},hideUnnecessaryAnalyticsElements:function(a){a&&(1===a.length?this.view.$(".sc-company-container").addClass("read-only"):0===a.length&&this.view.$(".report-suite-container").addClass("hidden"))},updateCompanyForReportingSuites:function(){var a=this.components.companyPicker.getSelectedCompany();this.model.setAnalyticsCompany(a),this.components.reportSuitePicker&&this.components.reportSuitePicker.updateCompany(a)},updateAnalyticsCompany:function(a){var b=this.model.getReportSuite();this.model.setAnalyticsCompany(a),this.metrics.components.metric0.removeAnalyticsMetrics({silent:!0}),this.components.reportSuitePicker.updateCompany(a),this.components.reportSuitePicker.updateSelection(b),b&&this.loadAnalyticsMetrics(b),this.propagateEvent("scCompany:selected",a)},loadAnalyticsMetrics:function(a){var b=this.model.getAnalyticsCompany(),c=this.analytics.fetchMetrics;_.isFunction(c)&&c.call(void 0,b,a,this.fetchMetricsForReportSuite,this.handleFetchMetricsError)},fetchMetricsForReportSuite:function(a){var b,c,d;this.metrics&&(d=this.metrics.components.metric0),a.errmsg?(b=a.errmsg||"",this.showErrorNotification(TSDK.I18n.get("Error loading metrics from Analytics. {0}",b))):(c=_.sortBy(_.map(a,function(a,b){return{id:b,name:a.name,frag_id:a.frag_id,type:a.type,source:a.source,support:a.support,data_group:a.data_group}}),function(a){return a.name}),this.analyticsMetrics=c,d&&(d.analyticsMetrics=c,d.setAnalyticsMetrics(c)))},handleFetchMetricsError:function(a,b,c){var d;d=JSON.parse(a.responseText)["error.message"]||c,this.showErrorNotification(TSDK.I18n.get("Error loading metrics from Analytics. {0}",d))},updateReportSuite:function(a){this.metrics.components.metric0.removeAnalyticsMetrics({silent:!0}),this.model.setReportSuite(a),this.metrics.components.metric0.model.setReportSuite(a,{silent:!0}),this.metrics.components.metric0.showAnalyticsMetricsLoader(),this.loadAnalyticsMetrics(a),this.markRSPickerInvalid(!1),this.propagateEvent("reportSuite:selected",a)},validateReportSuite:function(a){this.model.setReportSuiteValidation(!1),a&&a[this.model.getReportSuite()]&&this.model.setReportSuiteValidation(!0)},updateReportingSolution:function(a){var b=this.model.getReportingSolution(),c=a.target.value;c!==b&&(this.model.setReportingSolution(c),this.toggleRSPickerVisibility(),this.switchReportingSolution(c,{silent:"analytics"===c}),this.propagateEvent("reportingSolution:changed",c),"analytics"===c?this.render():(this.removeReportSuite(),this.removeAnalyticsCompany()))},markRSPickerInvalid:function(a){var b=this.view.$(".report-suite-picker").get(0);b&&(b.invalid=a)},toggleRSPickerVisibility:function(){var a=this.components.companyPicker;"analytics"===this.model.getReportingSolution()&&a?(this.view.$(".reporting-company-suite-container").removeClass("hidden"),this.hideUnnecessaryAnalyticsElements(a.getCompanies())):this.view.$(".reporting-company-suite-container").addClass("hidden")},switchReportingSolution:function(a,b){this.resetMetrics(),this.metrics.setReportingSolution(a,b)},resetMetrics:function(){this.model.setMetrics([]),this.metrics.setMetrics([])},removeReportSuite:function(){this.components.reportSuitePicker.updateSelection(""),this.model.removeReportSuite({silent:!0})},removeAnalyticsCompany:function(){this.components.companyPicker.removeSelectedCompany(),this.model.removeAnalyticsCompany({silent:!0})},filterUnwantedGoalsAttributes:function(a){var b=["isAnalyticsSupported","isReportSuiteValid","config"];return _.omit(a,b)},notifyError:function(a){this.propagateEvent("error",a)},isReportSuiteValid:function(){var a=this.model.getReportSuiteValidation();return!(this.model&&"analytics"===this.model.getReportingSolution()&&(!this.model.getReportSuite()||_.isBoolean(a)&&!a))||(this.notifyError({message:TSDK.I18n.get("Please select a report suite.")}),this.markRSPickerInvalid(!0),!1)},validate:function(a){return this.isReportSuiteValid()&&this.metrics.validate(a)},saveGoals:function(){var a=this.metrics.getData();this.model.setMetrics(a)},getGoals:function(){return this.model.toJSON()},getContext:function(){return this.saveGoals(),this.filterUnwantedGoalsAttributes(this.getGoals())},setContext:function(a){a&&a.reportSuite&&(a.reportingSolution="analytics"),this.loadModel(a)}}),TSDK.UI.ItemFactory=function(a){this.items=[],this.itemsFetched=!1,this.disableCache=!1,this.disableFactory=!1,this.url=a.url,this.pageSize=a.pageSize,this.factoryName=a.name,a.parse&&(this.parse=a.parse),void 0!==a.disableCache&&(this.disableCache=a.disableCache),a.disable&&this.disable(),a.fetch&&this.fetchItems()},TSDK.UI.ItemFactory.prototype.toString=function(){return this.factoryName},TSDK.UI.ItemFactory.prototype.isDisabled=function(){return this.disableFactory},TSDK.UI.ItemFactory.prototype.disable=function(){this.disableFactory=!0},TSDK.UI.ItemFactory.prototype.enable=function(){this.disableFactory=!1},_getItemsInDisabledState=function(a){"function"==typeof a&&a.call("undefined",[])},TSDK.UI.ItemFactory.prototype.getItems=function(a){if(this.isDisabled())return _getItemsInDisabledState(a.callback);this.itemsFetched?"function"==typeof a.callback&&a.callback.call(void 0,this.items):this.fetchItems(a)},TSDK.UI.ItemFactory.prototype.buildUrl=function(a,b){return b=b||"",this.pageSize&&(b+=(b?"&":"")+"pageSize="+this.pageSize),b?a+(-1!==a.indexOf("?")?"&":"?")+b:a},TSDK.UI.ItemFactory.prototype.fetchItems=function(a){if(this.isDisabled())return _getItemsInDisabledState(a.callback);var b=this,c=this.url;a=a||{},$.ajax({url:this.buildUrl(c,a.params),async:!a.hasOwnProperty("async")||a.async,contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(c){b.disableCache||(b.itemsFetched=!0),b.items=b.parse(c),"function"==typeof a.callback&&a.callback.call(void 0,b.items)}).fail(function(c){"function"==typeof a.callback&&a.callback.call(void 0,b.items),"function"==typeof a.error&&a.error.call(void 0,c)})},TSDK.UI.ItemFactory.prototype.parse=function(a){return a.items||[]},TSDK.UI.ItemFactory.prototype.setUrl=function(a){this.url=a},TSDK.UI.Goals.ReportSuiteFactory=new TSDK.UI.ItemFactory({name:"reportSuiteFactory",url:"",parse:function(a){return _.isObject(a)&&this.filterTargetEnabledReportSuites(a)},disableCache:!0}),TSDK.UI.Goals.ReportSuiteFactory.filterTargetEnabledReportSuites=function(a){var b="target",c=_.pick(a,function(a){return _.contains(a.enabledSolutions,b)});return _.size(c)>0?c:[]},TSDK.UI.Goals.ReportSuitePicker=new PseudoClass({toString:"ReportSuitePicker",extend:F.ModelComponent,_company:null,View:F.View.extend({events:{"change .report-suite-picker":"triggerReportSuiteSelectedEvent"}}),construct:function(a){this._company=a.company,this.fetchReportSuitesCallback=a.fetchReportSuites,this.initializeModel(a.selected),this.initializeView(a.el),this.load(this.model),this.registerBinders(),this.addListeners(),a.reportSuites?this.setReportSuites(a.reportSuites):this.fetchReportSuites(this.fetchReportSuitesCallback)},initializeModel:function(a){this.model=new Backbone.Model({selectedReportSuite:a})},initializeView:function(a){this.view=new this.View({el:a,component:this,model:this.model,template:TSDK.UI.Templates.Goals.ReportSuitePicker})},registerBinders:function(){this.bind("initializeWidgets"),this.bind("fetchCallback"),this.bind("handleFetchError")},addListeners:function(){this.listenTo(this.view,"renderComplete",this.initializeWidgets)},initializeWidgets:function(){},updateCompany:function(a){a!=this._company&&(this._company=a,this.clearReportSuites(),this.fetchReportSuites(this.fetchReportSuitesCallback))},updateSelection:function(a,b){this.model.set("selectedReportSuite",a,b)},fetchReportSuites:function(a){this._company&&_.isFunction(a)&&a.call(void 0,this._company,this.fetchCallback,this.handleFetchError)},fetchCallback:function(a){var b=TSDK.UI.Goals.ReportSuiteFactory.parse(a);b||(this.showFetchErrorNotification(),b=[]),this.setReportSuites(b),this.triggerValidateReportSuite()},handleFetchError:function(a){var b=JSON.parse(a.responseText)["error.message"];this.showFetchErrorNotification(b),this.setReportSuites([]),this.triggerValidateReportSuite()},triggerReportSuiteSelectedEvent:function(a){a.target.value.length>0&&(this.updateSelection(a.target.value,{silent:!0}),this.trigger("reportSuite:selected",a.target.value),this.triggerValidateReportSuite())},showFetchErrorNotification:function(a){a=a||"",this.trigger("error",{message:TSDK.I18n.get("Unable to load report suites from Adobe Analytics. ")+a})},triggerValidateReportSuite:function(){var a=this.model.get("reportSuites");this.trigger("reportSuite:validate",a)},clearReportSuites:function(a){this.model.unset("reportSuites",a)},setReportSuites:function(a){this.model.set("reportSuites",a)}}),TSDK.UI.Goals.SCCompanyFactory=new TSDK.UI.ItemFactory({name:"sCCompanyFactory",url:"",parse:function(a){return _.isObject(a)&&this.getCompaniesList(a)}}),TSDK.UI.Goals.SCCompanyFactory.getCompaniesList=function(a){var b=[];return _.each(a.companies,function(a){b.push({name:a})}),{companiesList:b,
activeCompany:a.activeCompany}},TSDK.UI.Goals.SCCompanyPicker=new PseudoClass({toString:"SCCompanyPicker",extend:F.ModelComponent,View:F.View.extend({events:{"change .sc-company-picker":"triggerCompanySelectedEvent"}}),construct:function(a){this.initializeModel(a.selected),this.initializeView(a.el),this.load(this.model),this.registerBinders(),this.addListeners(),a.companies?this.setCompanies(a.companies):this.fetchCompanies(a.fetchCompanies)},initializeModel:function(a){this.model=new Backbone.Model({selectedCompany:a})},initializeView:function(a){this.view=new this.View({el:a,component:this,model:this.model,template:TSDK.UI.Templates.Goals.SCCompanyPicker})},registerBinders:function(){this.bind("initializeWidgets"),this.bind("fetchCallback"),this.bind("handleFetchError")},addListeners:function(){this.listenTo(this.view,"renderComplete",this.initializeWidgets)},initializeWidgets:function(){},updateSelection:function(a){this.model.set("selectedCompany",a)},getSelectedCompany:function(){return this.model.get("selectedCompany")},fetchCompanies:function(a){_.isFunction(a)&&a.call(void 0,this.fetchCallback,this.handleFetchError)},fetchCallback:function(a){var b=TSDK.UI.Goals.SCCompanyFactory.parse(a);b||(b=[]),this.setCompanies(b)},handleFetchError:function(){this.setCompanies([])},triggerCompanySelectedEvent:function(a){this.trigger("scCompany:selected",a.target.value)},getCompanies:function(){return this.model.get("scCompanies")},setCompanies:function(a){var b,c=this.getSelectedCompany();c?(b=c,a.activeCompany&&c!=a.activeCompany&&(b=_.find(a.companiesList,function(a){return a.name===c}),b=b?c:a.activeCompany)):b=a.activeCompany,b!=c&&this.model.set("selectedCompany",b,{silent:!0}),this.model.set("scCompanies",a.companiesList),this.trigger("scCompany:fetched",a.companiesList)},removeSelectedCompany:function(a){this.model.unset("selectedCompany",a)}}),TSDK.UI.Goals.prototype.config={SHOW_ONLY_ANALYTICS:!1},TSDK.UI.GoalsAndSettingsModel=Backbone.Model.extend({getGoals:function(){return this.get("goals")},setGoals:function(a){this.silentSet("goals",a)},silentSet:function(a,b,c){var d={silent:!0};c&&_.extend(d,c),this.set(a,b,d)}}),TSDK.UI.GoalsAndSettings=new PseudoClass({toString:"GoalsAndSettings",extend:TSDK.UI.Component,Model:TSDK.UI.GoalsAndSettingsModel,View:F.View.extend({events:{}}),initialize:function(a){this.initView(a),this.registerListeners(),this.registerVars(a),this.registerBinders()},initView:function(a){this.view=new this.View({el:a.el,component:this,template:TSDK.UI.Templates.GoalsAndSettings.GoalsAndSettings,model:this.model})},registerListeners:function(){this.listenTo(this.view,"renderComplete",function(){this.renderSubViews()})},registerVars:function(a){this.goalsOptions=a.goals},registerBinders:function(){},renderSubViews:function(){this.addGoals()},addGoals:function(){var a=this.model.getGoals();this.goals&&this.goals.destructButKeepEl(),this.goals=this.addComponent(new TSDK.UI.Goals(_.extend({},this.goalsOptions,{el:this.view.$(".tsdk-goals"),visible:!0,data:a})),"goals")},validate:function(a){return this.goals.validate(a)},saveGoalsAndSettings:function(){var a=this.goals.getData();this.model.setGoals(a)},getGoalsAndSettings:function(){return this.model.toJSON()},getContext:function(){return this.saveGoalsAndSettings(),this.getGoalsAndSettings()},setContext:function(a){this.loadModel(a)}}),TSDK.UI.GoalsAndSettings.prototype.config={},TSDK.UI.DiagramComponent=new PseudoClass({toString:"Diagram",extend:TSDK.UI.Component,View:F.View.extend({commonEvents:{"coral-selectlist:change .tsdk-audience-box .context-menu coral-selectlist":"_handleAudienceAction","coral-selectlist:change .tsdk-experience-box .context-menu coral-selectlist":"_handleExperienceAction","click .no-audience":"_handleAudienceAdd","click .no-experience":"_handleExperienceAdd","change .experience-title-input":"_handleExperienceTitleChange","blur .experience-title-input":"_handleExperienceTitleChange"},additionalEvents:{},events:function(){return _.extend({},this.commonEvents,this.additionalEvents)}}),initialize:function(a){this._handleBeforeInitialize(a),this._initView(a)},_handleBeforeInitialize:function(){},_initView:function(a){this.view=new this.View({el:a.el,component:this,template:this._getTemplate(),model:this.model})},_getTemplate:function(){throw new Error("No template defined for "+this.toString())},_getEmptyExperience:function(){return{}},_handleAudienceAction:function(a){var b=a.target.selectedItem,c=b.value,d=$(b).closest(".diagram-row").data("index"),e=this.getAudience(d);this._performActionOnAudience(c,d,e)},_handleAudienceAdd:function(a){var b=$(a.target).closest(".diagram-row").data("index");this._performActionOnAudience("add",b)},_performActionOnAudience:function(){},_handleExperienceAction:function(a){var b=a.target.selectedItem,c=b.value,d=$(b).closest(".diagram-row").data("index"),e=this.getExperience(d);"rename"===c?this._toggleExperienceNameEditMode(d,!0):this._performActionOnExperience(c,d,e)},_handleExperienceAdd:function(a){var b=$(a.target).closest(".diagram-row").data("index");this._performActionOnExperience("add",b)},_performActionOnExperience:function(){},_handleExperienceTitleChange:function(a){var b=$(a.target),c=$.trim(b.val()),d=b.closest(".diagram-row").data("index"),e=this.getExperience(d);""===c?this.notifyError({message:TSDK.I18n.get("Experience name cannot be empty.")}):e.name!==c&&this.renameExperience(d,c),this._toggleExperienceNameEditMode(d,!1)},_toggleExperienceNameEditMode:function(a,b){var c=this.view.$(".tsdk-experience-box").eq(a),d=c.find(".experience-title-input"),e=d.get(0);Coral.commons.nextFrame(function(){c.toggleClass("edit-mode",b),b&&(c.click(),d.focus(),e.selectionStart=e.selectionEnd=e.value.length)})},renameExperience:function(a,b){var c,d,e=TSDK.UI.Util.clone(this.model.get("experiences"));e&&e.length&&a<e.length&&(c=e[a],d=c.name,c.name=b,this.model.set("experiences",e),this.trigger("experience:renamed",{index:a,experience:c,oldName:d,newName:b}))},getAudience:function(a){},getExperience:function(a){},validateExperiences:function(){var a,b=_.map(this.model.get("experiences"),function(a){return a.name});return 0===b.length||_.compact(b).length!==b.length?a=TSDK.I18n.get("Some experiences are not defined."):_.uniq(b).length!==b.length&&(a=TSDK.I18n.get("Duplicate experience names")),!a||(this.notifyError({message:a}),!1)},validate:function(){return!0},notifyError:function(a){this.trigger("error",a)}}),TSDK.UI.DiagramAB=new PseudoClass({toString:"DiagramAB",extend:TSDK.UI.DiagramComponent,View:TSDK.UI.DiagramComponent.prototype.View.extend({additionalEvents:{"keydown .visitor-percentage":"_handleVisitorPercentageKeydown","change .visitor-percentage":"_handleVisitorPercentageChange"}}),_getTemplate:function(){return TSDK.UI.Templates.DiagramComponent.DiagramAB},_handleBeforeInitialize:function(){var a=this.model.get("experiences");this._lockVisitorPercentage(a),this._calculateVisitorPercentage(a)},_lockVisitorPercentage:function(a){_.each(a,function(a){_.isNumber(a.visitorPercentage)&&(a.isVisitorPercentageLocked=!0)})},_calculateVisitorPercentage:function(a){var b,c,d=100,e=[];if(_.each(a,function(a){var b=a.visitorPercentage;_.isNumber(b)&&a.isVisitorPercentageLocked?d-=b:e.push(a)}),(b=e.length)&&(d=d<0?0:d,c=Math.floor(d/b),_.each(e,function(a){a.visitorPercentage=c,d-=c}),d>0))for(var f=0;f<d;f++)e[f].visitorPercentage++},_handleVisitorPercentageKeydown:function(a){var b=a.keyCode||a.which;[46,8,9,27,13].indexOf(b)>-1||b>=35&&b<=39||!a.shiftKey&&(b>=48&&b<=57||b>=96&&b<=105)||a.preventDefault()},_handleVisitorPercentageChange:function(a){var b,c=$(a.target),d=parseInt($.trim(c.val())),e=c.closest(".diagram-row").data("index"),f=this.getExperience(e);_.isNaN(d)?b=TSDK.I18n.get("Invalid visitor percentage."):d<0||d>100?b=TSDK.I18n.get("Visitor percentage should be a valid number between 0 to 100."):f.visitorPercentage!==d&&this.setVisitorPercentage(e,d),b&&(c.val(f.visitorPercentage),this.notifyError({message:b}))},setVisitorPercentage:function(a,b){var c,d,e=TSDK.UI.Util.clone(this.model.get("experiences"));e&&e.length&&a<e.length&&(c=e[a],d=c.visitorPercentage,c.visitorPercentage=b,c.isVisitorPercentageLocked=!0,this._calculateVisitorPercentage(e),this.model.set("experiences",e),this.trigger("experience:visitorPercentage:changed",{index:a,experience:c,oldPercentage:d,newPercentage:b}))},_performActionOnAudience:function(a,b,c){var d;"remove"===a?this.removeAudience():"add"!==a&&"edit"!==a||(d=this._setAudience.bind(this)),this.trigger("audience:"+a,{index:b,audience:c,callback:d})},_performActionOnExperience:function(a,b,c){var d;"remove"===a?this.removeExperience(b):"add"!==a&&"edit"!==a||(d=this._setExperience.bind(this),this.activeIndex=b),this.trigger("experience:"+a,{index:b,experience:c,callback:d})},_setAudience:function(a){a&&this.model.set("audience",a)},removeAudience:function(){this.model.unset("audience")},_setExperience:function(a){if(a){var b=_.clone(this.model.get("experiences"))||[];_.isNumber(this.activeIndex)&&this.activeIndex<b.length?b[this.activeIndex]=a:b.push(a),this._calculateVisitorPercentage(b),this.model.set("experiences",b)}this._resetActiveIndex()},_resetActiveIndex:function(){delete this.activeIndex},addExperience:function(a){a?(this._resetActiveIndex(),this._setExperience(a)):this._performActionOnExperience("add")},removeExperience:function(a){var b=_.clone(this.model.get("experiences"));b.splice(a,1),this._calculateVisitorPercentage(b),this.model.set("experiences",b)},getAudience:function(){return this.model.get("audience")},getExperience:function(a){var b=this.model.get("experiences");return b&&b[a]},validateAudience:function(){var a=this.getAudience();return!(!a||!a.name)||(this.notifyError({message:TSDK.I18n.get("Audience is not defined.")}),!1)},validateVisitorPercentage:function(){return 100===_.reduce(this.model.get("experiences"),function(a,b){return a+b.visitorPercentage},0)||(this.notifyError({message:TSDK.I18n.get("Total visitor percentage is not equal to 100.")}),!1)},validate:function(){return this.validateAudience()&&this.validateExperiences()&&this.validateVisitorPercentage()},getContext:function(){var a=this.model.toJSON(),b=TSDK.UI.Util.clone(a.experiences);return b&&(_.each(b,function(a){delete a.isVisitorPercentageLocked}),a.experiences=b),a}}),TSDK.UI.DiagramXT=new PseudoClass({toString:"DiagramXT",extend:TSDK.UI.DiagramComponent,View:TSDK.UI.DiagramComponent.prototype.View.extend({additionalEvents:{}}),_getTemplate:function(){return TSDK.UI.Templates.DiagramComponent.DiagramXT},_performActionOnAudience:function(a,b,c){var d;"remove"===a?this.removeAudience(b):"add"!==a&&"edit"!==a||(d=this._setAudience.bind(this),this.activeIndex=b),this.trigger("audience:"+a,{index:b,audience:c,callback:d})},_performActionOnExperience:function(a,b,c){var d;"remove"===a?this.removeExperience(b):"add"!==a&&"edit"!==a||(d=this._setExperience.bind(this),this.activeIndex=b),this.trigger("experience:"+a,{index:b,experience:c,callback:d})},_setAudience:function(a){if(a){var b,c=TSDK.UI.Util.clone(this.model.get("experiences"))||[];_.isNumber(this.activeIndex)&&this.activeIndex<c.length?b=c[this.activeIndex]:(b=this._getEmptyExperience(),c.push(b)),b.audience=a,this.model.set("experiences",c)}this._resetActiveIndex()},removeAudience:function(a){this.removeExperience(a)},_setExperience:function(a){if(a){var b,c=_.clone(this.model.get("experiences"))||[];_.isNumber(this.activeIndex)&&this.activeIndex<c.length?(b=c[this.activeIndex].audience,c[this.activeIndex]=a,a.audience=a.audience||b):c.push(a),this.model.set("experiences",c)}this._resetActiveIndex()},_resetActiveIndex:function(){delete this.activeIndex},addExperienceTargeting:function(a){var b=this._getLastExperience();a?(this._resetActiveIndex(),this._setExperience(a)):b&&0===_.size(b)||this._performActionOnAudience("add")},_getLastExperience:function(){var a=this.model.get("experiences"),b=a.length;if(b>0)return a[b-1]},removeExperience:function(a){var b=_.clone(this.model.get("experiences"));b.splice(a,1),0===b.length&&b.push(this._getEmptyExperience()),this.model.set("experiences",b)},getAudience:function(a){var b=this.getExperience(a);return b&&b.audience},getExperience:function(a){var b=this.model.get("experiences");return b&&b[a]},validateAudiences:function(){var a,b=_.map(this.model.get("experiences"),function(a){return a.audience&&a.audience.name});return _.compact(b).length!==b.length?a=TSDK.I18n.get("Some audiences are not defined."):_.uniq(b).length!==b.length&&(a=TSDK.I18n.get("Duplicate audiences")),!a||(this.notifyError({message:a}),!1)},validate:function(){return this.validateAudiences()&&this.validateExperiences()}}),TSDK.UI.DiagramComponent.prototype.config={},TSDK.EnumUtil.addEnum("ExperienceRailActions",{EDIT_AUDIENCE:"edit",RENAME_EXPERIENCE:"rename",DUPLICATE:"duplicate",DELETE:"delete"}),TSDK.UI.ExperienceRailComponent=new PseudoClass({toString:"ExperienceRail",extend:TSDK.UI.ConfigurableComponent,View:F.View.extend({commonEvents:{"click .collapse-btn":"collapseRail","click .expand-btn":"expandRail","click .experience-row .menu-button":"_handleMenuButtonClick","click .experience-row":"_handleExperienceRowClick"},additionalEvents:{},events:function(){return _.extend({},this.commonEvents,this.additionalEvents)}}),MINIMUM_EXPERIENCES:0,MAXIMUM_EXPERIENCES:1e5,modes:{EXPANDING:"expanding",EXPANDED:"expanded",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},railWidth:{EXPANDED:"15.625rem",COLLAPSED:"3rem"},ANIMATION_DURATION:250,initialize:function(a){this._initConfigs(),this._registerBinders(),this._initView(a),this._addContextPopover()},_initConfigs:function(){this._initActions(),this._initMode(),this._initActiveIndex(),this._initAutoAdd(),this._initMinMaxExperiencesCount()},_initActions:function(){var a=this.getConfigInModel("actions")||this._defaultActions;this.setConfigInModel("actions",a)},_initMode:function(){var a=this.getConfigInModel("mode")||this.modes.EXPANDED;this.setConfigInModel("mode",a)},_initActiveIndex:function(){this.switchExperience(this.getConfigInModel("activeIndex"))},_initAutoAdd:function(){var a=this.getConfigInModel("autoAdd");_.isUndefined(a)&&(a=!0),this.setConfigInModel("autoAdd",a)},_initMinMaxExperiencesCount:function(){var a=this.getConfigInModel("minCount"),b=this.getConfigInModel("maxCount"),c=this.getExperiencesCount();for((!_.isNumber(a)||a<this.MINIMUM_EXPERIENCES)&&(a=this.MINIMUM_EXPERIENCES),(!_.isNumber(b)||b<a||b>this.MAXIMUM_EXPERIENCES)&&(b=this.MAXIMUM_EXPERIENCES),this.setConfigInModel("minCount",a),this.setConfigInModel("maxCount",b);c<a;)this.addExperience({}),c++},_initView:function(a){this.view=new this.View({el:a.el,component:this,template:this._getTemplate(),model:this.model})},_getTemplate:function(){throw new Error("No template defined for "+this.toString())},_registerBinders:function(){this.bind("_handleContextPopoverClose"),this.bind("_handleMenuAction"),this.bind("_handleExperienceNameKeydown"),this.bind("_handleExperienceNameSave"),this.bind("_handleExperienceNameCancel")},_addContextPopover:function(){var a=$(".tsdk-experiencerail-context-popover").get(0);a&&a.remove(),this.contextPopover=(new Coral.Popover).set({alignMy:Coral.Overlay.align.LEFT_TOP,alignAt:Coral.Overlay.align.CENTER_BOTTOM,offset:-8}),$(this.contextPopover).appendTo("body").addClass("tsdk-experiencerail-context-popover").get(0).on("coral-overlay:close",this._handleContextPopoverClose).on("coral-selectlist:change",".action-menu",this._handleMenuAction).on("keydown",".experience-title-input",this._handleExperienceNameKeydown).on("click",".rename-save-button",this._handleExperienceNameSave).on("click",".rename-cancel-button",this._handleExperienceNameCancel)},_changeMode:function(a,b){this.setConfigInModel("mode",a),this.view.$(".tsdk-experience-rail").attr("data-mode",a),b&&this.model.trigger("change")},collapseRail:function(){var a=this,b=this.view.$(".tsdk-experience-rail"),c=b.find(".collapse-btn > coral-icon"),d=this.getConfigInModel("noAnimation"),e="right"===this.getConfigInModel("placement");if(d)return this._changeMode(this.modes.COLLAPSED),void this.trigger("rail:collapsed",b.outerWidth());b.width(this.railWidth.EXPANDED),this._changeMode(this.modes.COLLAPSING),b.animate({width:this.railWidth.COLLAPSED},{duration:this.ANIMATION_DURATION,progress:function(d,f,g){var h=180*(1-g/a.ANIMATION_DURATION);e&&(h*=-1),c.css({transform:"rotate("+h+"deg)"}),a.trigger("rail:collapsing",b.outerWidth())},always:function(){c.css({transform:"rotate(0deg)"}),a._changeMode(a.modes.COLLAPSED),a.trigger("rail:collapsed",b.outerWidth())}})},expandRail:function(){var a=this,b=this.view.$(".tsdk-experience-rail"),c=b.find(".expand-btn > coral-icon"),d=this.getConfigInModel("noAnimation"),e="right"===this.getConfigInModel("placement");if(d)return this._changeMode(this.modes.EXPANDED),void this.trigger("rail:expanded",b.outerWidth());b.width(this.railWidth.COLLAPSED),this._changeMode(this.modes.EXPANDING),b.animate({width:this.railWidth.EXPANDED},{duration:this.ANIMATION_DURATION,progress:function(d,f,g){var h=180*(1-g/a.ANIMATION_DURATION);e||(h*=-1),c.css({transform:"rotate("+h+"deg)"}),a.trigger("rail:expanding",b.outerWidth())},always:function(){c.css({transform:"rotate(0deg)"}),a._changeMode(a.modes.EXPANDED),a.trigger("rail:expanded",b.outerWidth())}})},isRailCollapsed:function(){return this.getConfigInModel("mode")===this.modes.COLLAPSED},handleRenderComplete:function(){var a=this;this.view.$(".rail-body-rows").scrollTop(this._currentScrollTop||0).bind("scroll",function(){a.contextPopover.hide()})},_saveCurrentScrollPosition:function(){this._currentScrollTop=this.view.$(".rail-body-rows").scrollTop()},_handleMenuButtonClick:function(a){var b=$(a.currentTarget).closest(".experience-row"),c=b.data("index");if(!b.hasClass("no-context")){if(a.preventDefault(),a.stopPropagation(),b.hasClass("selected")&&this.contextPopover.open)return void this.contextPopover.hide();this.isRailCollapsed()&&c!==this.getConfigInModel("activeIndex")||(this._clearRowSelection(),b.addClass("selected"),a.noSwitching=!0),this._showContextPopover(c)}},_handleContextPopoverClose:function(a){var b=a&&$(a.currentTarget).closest(".experience-row").data("index");this._clearRowSelection(b)},_showContextPopover:function(a){var b,c=this.getConfigInModel("actions");this.getExperiencesCount()<=this.getConfigInModel("minCount")&&(c=_.without(c,TSDK.Enums.ExperienceRailActions.DELETE)),this.getExperiencesCount()===this.getConfigInModel("maxCount")&&(c=_.without(c,TSDK.Enums.ExperienceRailActions.DUPLICATE)),c.length&&(b=TSDK.UI.Templates.ExperienceRailComponent.ExperienceRailActionMenu({actions:c,experienceOnly:this.ACTION_MENU_EXPERIENCE_ONLY}),this._renderContextPopover(a,b))},_clearRowSelection:function(a){(_.isNumber(a)?this._getExperienceRow(a):this.view.$(".experience-row.selected")).removeClass("selected")},_handleExperienceRowClick:function(a){if(!a.noSwitching){var b=$(a.currentTarget).closest(".experience-row").data("index");b!==this.getConfigInModel("activeIndex")&&this.switchExperience(b)}},switchExperience:function(a,b){var c=_.size(this.getExperiences()),d=-1;-1!==(d=_.isNumber(a)&&a>=0&&a<c?a:c-1)&&(this.setConfigInModel("activeIndex",d),this.view&&(this.view.$(".experience-row.active").removeClass("active"),this._getExperienceRow(d).addClass("active"),b&&this.scrollRailToExperience(d)),this.trigger("tab:switched",d))},scrollRailToExperience:function(a){var b=this._getExperienceRow(a).get(0);this.view.$(".rail-body-rows").scrollTop(b.offsetTop)},_handleMenuAction:function(a){var b=a.target.selectedItem,c=b.value,d=this.view.$(".experience-row.selected").data("index"),e=this.getExperience(d);this._saveCurrentScrollPosition(),"rename"===c?this._openRenameExperiencePopover(d):"delete"===c?(this.deleteExperience(d,e),this.contextPopover.hide()):(this._performAction(c,d,e),this.contextPopover.hide())},_openRenameExperiencePopover:function(a){var b,c,d=this.getExperience(a),e=TSDK.UI.Templates.ExperienceRailComponent.ExperienceRailRenamePopover(d);this._renderContextPopover(a,e),b=$(this.contextPopover).find(".experience-title-input"),c=b.get(0),Coral.commons.nextFrame(function(){b.focus(),c.selectionStart=c.selectionEnd=c.value.length})},_renderContextPopover:function(a,b){this.contextPopover.set({content:{innerHTML:b},target:this._getContextPopoverTarget(a)}),this.contextPopover.show()},_getExperienceRow:function(a){return this.view.$(".experience-row").eq(a)},_getContextPopoverTarget:function(a){return this._getExperienceRow(a).find(".menu-button").get(0)},_handleExperienceNameSave:function(a){var b=$(a.target).closest(".rename-popover").find(".experience-title-input"),c=$.trim(b.val()),d=this.view.$(".experience-row.selected").data("index");if(this.getExperience(d).name===c)return void this._handleExperienceNameCancel(a);""===c?(b.focus().get(0).invalid=!0,this.notifyError(TSDK.I18n.get("Experience name cannot be empty."))):this._isExperienceNameUnique(c)?(this.renameExperience(d,c),this.contextPopover.hide()):(b.focus().get(0).invalid=!0,this.notifyError(TSDK.I18n.get("Experience name is not unique."))),a.noSwitching=!0},_isExperienceNameUnique:function(a){return _.every(this.getExperiences(),function(b){return b.name!==a})},_handleExperienceNameKeydown:function(a){a.target.invalid=!1,13===a.keyCode?(this._handleExperienceNameSave(a),a.preventDefault(),a.stopPropagation()):27===a.keyCode&&this._handleExperienceNameCancel(a)},_handleExperienceNameCancel:function(a){this.contextPopover.hide(),a.noSwitching=!0},renameExperience:function(a,b){var c,d,e=this.getExperiences(!0);e&&e.length&&a<e.length&&(c=e[a],d=c.name,c.name=b,this.setExperiences(e),this.trigger("experience:renamed",{index:a,experience:c,oldName:d,newName:b}))},deleteExperience:function(a,b){var c,d=this.getExperiences(!0),e=this.getConfigInModel("activeIndex");d.splice(a,1),this.setExperiences(d),this.trigger("experience:deleted",{index:a,oldExperience:b}),c=a===e?a===d.length?a-1:a:a<e?e-1:e,this.switchExperience(c),0===d.length&&this._handleAllExperiencesDeleted()},_handleAllExperiencesDeleted:function(){},getExperience:function(a){var b=this.getExperiences();return b&&b[a]},getExperiences:function(a){var b=this.model.get("experiences");return a&&(b=TSDK.UI.Util.clone(b)||[]),b},getExperiencesCount:function(){var a=this.getExperiences();return a?a.length:0},setExperiences:function(a){this.model.set("experiences",a)},_generateNewExperienceName:function(){var a,b=_.pluck(this.getExperiences(),"name"),c=0;do{a=TSDK.I18n.get("Experience")+" "+TSDK.UI.ExperienceRailComponent.Util.deriveExperienceShortNameFromIndex(c++)}while(-1!==b.indexOf(a));return a},_generateUniqueVersionedExperienceName:function(a){var b,c=_.pluck(this.getExperiences(),"name"),d=0;do{b=a+d++}while(-1!==c.indexOf(b));return b},validate:function(){return!0},notifyError:function(a){this.trigger("error",{message:a})}}),TSDK.UI.ExperienceRailComponent.Util={deriveExperienceShortNameFromIndex:function(a){return"number"!=typeof a?"A":a<26?String.fromCharCode(65+a):TSDK.UI.ExperienceRailComponent.Util.deriveExperienceShortNameFromIndex(Math.floor(a/26)-1)+String.fromCharCode(65+a%26)},deriveExperienceShortNameFromName:function(a){var b=TSDK.I18n.get("Experience")+" ";return 0===a.indexOf(b)&&(a=a.substring(b.length)),a.substr(0,2)}},TSDK.UI.ExperienceRailAB=new PseudoClass({toString:"ExperienceRailAB",extend:TSDK.UI.ExperienceRailComponent,View:TSDK.UI.ExperienceRailComponent.prototype.View.extend({additionalEvents:{"click .add-experience":"_handleAddExperience"}}),MINIMUM_EXPERIENCES:1,ACTION_MENU_EXPERIENCE_ONLY:!0,_defaultActions:[TSDK.Enums.ExperienceRailActions.RENAME_EXPERIENCE,TSDK.Enums.ExperienceRailActions.DUPLICATE,TSDK.Enums.ExperienceRailActions.DELETE],_getTemplate:function(){return TSDK.UI.Templates.ExperienceRailComponent.ExperienceRailAB},_handleAddExperience:function(){this.getConfigInModel("autoAdd")?this.addExperience():this.trigger("experience:add",{callback:this.addExperience.bind(this)})},addExperience:function(a){var b=this.getExperiences(!0),c=b.length;a=a||{},a.name=a.name||this._generateNewExperienceName(),b.push(a),this.setExperiences(b),this.trigger("experience:added",{index:c,experience:a}),this.switchExperience(c,!0)},_performAction:function(a,b,c){"duplicate"===a&&this._duplicateExperience(c)},_duplicateExperience:function(a){var b=TSDK.UI.Util.clone(a);b.name=this._generateUniqueVersionedExperienceName(b.name),this.addExperience(b)}}),TSDK.UI.ExperienceRailXT=new PseudoClass({toString:"ExperienceRailXT",extend:TSDK.UI.ExperienceRailComponent,View:TSDK.UI.ExperienceRailComponent.prototype.View.extend({additionalEvents:{"click .add-experience":"_handleAddExperienceTargeting","click .add-audience":"_handleAddAudience"}}),_defaultActions:[TSDK.Enums.ExperienceRailActions.EDIT_AUDIENCE,TSDK.Enums.ExperienceRailActions.RENAME_EXPERIENCE,TSDK.Enums.ExperienceRailActions.DUPLICATE,TSDK.Enums.ExperienceRailActions.DELETE],_getTemplate:function(){return TSDK.UI.Templates.ExperienceRailComponent.ExperienceRailXT},_handleAddExperienceTargeting:function(){var a=this.addExperience.bind(this);this.getConfigInModel("autoAdd")?this._selectAudience(function(b){a({audience:b})}):this.trigger("experience:add",{callback:a})},_handleAddAudience:function(a){var b=$(a.currentTarget).closest(".experience-row").data("index"),c=this.getExperience(b),d=this;this._selectAudience(function(a){a&&a.name?(c.audience=a,d.model.trigger("change"),d.trigger("audience:added",{index:b,experience:c,audience:a})):d.notifyError(TSDK.I18n.get("Invalid audience"))})},addExperience:function(a){var b=this.getExperiences(!0),c=b.length;a=a||{},a.name=a.name||this._generateNewExperienceName(),b.push(a),this.setExperiences(b),this.trigger("experience:added",{index:c,experience:a}),this.switchExperience(c,!0)},_performAction:function(a,b,c){"duplicate"===a?this._duplicateExperience(c):"edit"===a&&this._changeAudience(b,c)},_duplicateExperience:function(a){var b=this.addExperience.bind(this),c=TSDK.UI.Util.clone(a);c.name=this._generateUniqueVersionedExperienceName(c.name),this._selectAudience(function(a){c.audience=a,b(c)})},_changeAudience:function(a,b){var c=this,d=b.audience;this._selectAudience(function(e){e&&e.name&&(b.audience=e,c.model.trigger("change"),c.trigger("audience:edited",{index:a,oldAudience:d,newAudience:e}))},d)},_handleAllExperiencesDeleted:function(){this.addExperience({})},_selectAudience:function(a,b,c){this.trigger("audience:select",{callback:a,index:b,selected:c})}}),Handlebars.registerHelper("getExperienceShortName",function(a){return TSDK.UI.ExperienceRailComponent.Util.deriveExperienceShortNameFromName(a)}),Handlebars.registerHelper("ifAudienceValid",function(a,b){return a&&a.name?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("unlessSingleExperienceWithNoAudience",function(a,b){return!a||1!==a.length||a[0].audience&&a[0].audience.name?b.fn(this):b.inverse(this)}),TSDK.UI.ExperienceRailComponent.prototype.config={},Handlebars.registerHelper("matchesAudienceType",function(a,b,c){var d=TSDK.Enums.AudienceRules[b];return a===b||_.isString(d)&&a===d?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("getIconForAudienceType",function(a){var b=TSDK.Enums.AudienceRules[a];return _.isString(b)&&(b=TSDK.Enums.AudienceRules[b]),b&&b.icon||"users"}),Handlebars.registerHelper("getLabelForAudienceType",function(a){var b=TSDK.Enums.AudienceRules[a];return _.isString(b)&&(b=TSDK.Enums.AudienceRules[b]),b&&b.label||a}),TSDK.UI.AudienceWorkflow=new PseudoClass({toString:"AudienceWorkflow",extend:TSDK.UI.ConfigurableComponent,initialize:function(a){a=a||{},this.ruleOptions=a.rules,this._initConfigs(),this._registerBinders(),this._initDialog(),a.visible&&this.openWorkflow()},_initConfigs:function(){this.initialConfig=this.config},_registerBinders:function(){this.bind("_toggleFullscreen"),this.bind("_triggerSelectedEvent"),this.bind("_updateOnAudiencesSelection"),this.bind("_scrollListToTop"),this.bind("_changeStepFromContent"),this.bind("_changeStepFromHeader"),this.bind("_createAudience"),this.bind("closeWorkflow")},_initDialog:function(){this.audienceWorkflowDialog=(new Coral.Dialog).set({backdrop:"static"}),$(this.audienceWorkflowDialog).addClass("tsdk-audience-workflow").appendTo("body"),TSDK.UI.AudienceWorkflow.Util.isBrowserIE10()&&$(this.audienceWorkflowDialog).addClass("coral-Backdrop")},openWorkflow:function(a){var b=this;return a=_.extend({},this.initialConfig,a),a&&(this.configure(a),this._toggleFullscreen(!!a.fullscreen)),this._addSubComponents(),Coral.commons.nextFrame(function(){b.audienceWorkflowDialog.show()}),this},closeWorkflow:function(){return this.audienceWorkflowDialog.hide(),this._destroySubComponents(),this},_addSubComponents:function(){this._destroySubComponents(),this._addDialogHeader(),this._addDialogContent()},_addDialogHeader:function(){this.addComponent(new TSDK.UI.AudienceWorkflow.DialogHeader({el:$(this.audienceWorkflowDialog).find("coral-dialog-header"),model:{isEditMode:this.isEditMode()},visible:!0}),"audienceWorkflowDialogHeader").on("fullscreen:toggle",this._toggleFullscreen).on("step:change",this._changeStepFromHeader).on("create",this._createAudience).on("cancel",this.closeWorkflow)},_addDialogContent:function(){this.addComponent(new TSDK.UI.AudienceWorkflow.DialogContent({el:$(this.audienceWorkflowDialog).find("coral-dialog-content"),visible:!0,config:this.config,model:this.audienceData,ruleOptions:this.ruleOptions,noRerender:!0}),"audienceWorkflowDialogContent").on("step:change",this._changeStepFromContent)},_destroySubComponents:function(){_.each(this.components,function(a,b){a&&(a.destructButKeepEl(),delete this.components[b])},this)},reset:function(){_.each(this.components,function(a){"function"==typeof a.reset&&a.reset()})},_toggleFullscreen:function(a){this.audienceWorkflowDialog.fullscreen=a,$(this.audienceWorkflowDialog).find("coral-dialog-header").toggleClass("coral--dark",a)},_changeStepFromHeader:function(a){if(1===a)this.components.audienceWorkflowDialogContent.navigateToRulesCreateStep();else if(2===a&&!this.components.audienceWorkflowDialogContent.navigateToReviewStep())return void this.notifyError(TSDK.I18n.get("Definition for one or more audience rules is incomplete."));this.components.audienceWorkflowDialogHeader.setStep(a)},_changeStepFromContent:function(a){this.components.audienceWorkflowDialogHeader.setStep(a)},_createAudience:function(){this.components.audienceWorkflowDialogContent.validateAudienceName(!0)?this.trigger("audience:created",this.getData(),this.closeWorkflow):this.notifyError(TSDK.I18n.get("Please enter a valid audience name."))},setContext:function(a){this.audienceData=a;var b=this.components.audienceWorkflowDialogHeader,c=this.components.audienceWorkflowDialogContent;b&&b.setIsEditMode(this.isEditMode()),c&&c.updateModel(a)},getContext:function(){return this.components.audienceWorkflowDialogContent.getAudienceToBeSaved()},notifyError:function(a){this.propagateEvent("error",{message:a})},isEditMode:function(){return!(!this.audienceData||!this.audienceData.name)}}),TSDK.UI.AudienceWorkflow.Util={fetchRequest:function(a){return $.ajax({url:a,contentType:"application/json; charset=utf-8",dataType:"json"})},isInteger:function(a){var b=/^[0-9]+$/;return a+="",b.test(a)},isBrowserIE10:function(){return-1!==navigator.appVersion.indexOf("MSIE 10")}},TSDK.MapRequest=function(a,b){var c=a.fetch,d=a.url,e=a.ajax,f=a.value,g=a.content,h=a.postprocessor,i=this;_.isFunction(c)?this.fetch=function(a){var d=a.success;return c(_.extend({},a,{success:function(a){_.isFunction(h)&&(a=h(a)),b||(a=i._getMap(a,f,g)),d(a)}}))}:(d&&(_.isFunction(d)?this._getUrl=d:this._getUrl=function(){return d}),this.fetch=function(a){$.ajax(_.extend({},{url:this._getUrl&&this._getUrl(a.data)},e)).done(function(c,d,e){_.isFunction(a.success)&&(_.isFunction(h)&&(c=h(c)),b||(c=i._getMap(c,f,g)),a.success(c,d,e))}).fail(function(b,c,d){_.isFunction(a.error)&&a.error(b,c,d)})})},
TSDK.MapRequest.prototype._getMap=function(a,b,c){var d,e,f=[];return _.isFunction(b)?d=b:_.isString(b)&&(d=function(a){return a[b]}),e=_.isFunction(c)?c:_.isString(c)?function(a){return a[c]}:d,_.each(a,function(a){_.isString(a)||_.isNumber(a)?f.push({value:a,content:a}):d&&f.push({value:d(a),content:e(a)})}),f},TSDK.UI.AudienceWorkflow.DialogHeader=new PseudoClass({toString:"AudienceWorkflowDialogHeader",extend:F.ModelComponent,View:F.View.extend({events:{"click .close-button":"triggerCancelEvent","click .fullscreen-button":"toggleFullscreenMode","click .next-button":"handleNextButtonClick","click .create-button":"triggerCreateEvent"}}),construct:function(a){this.initView(a),this.load(_.extend({step:1,totalSteps:2},a.model))},initView:function(a){this.view=new this.View({el:a.el,component:this,template:TSDK.UI.Templates.AudienceWorkflow.DialogHeader}).render()},toggleFullscreenMode:function(a){var b=$(a.currentTarget).data("toggle");this.trigger("fullscreen:toggle",b)},handleNextButtonClick:function(){var a=this.getStep()+1;this.trigger("step:change",a)},navigateToStep:function(a){this.setStep(a)},triggerCancelEvent:function(){this.trigger("cancel")},triggerCreateEvent:function(){this.trigger("create")},getStep:function(){return this.model.get("step")},setStep:function(a){this.model.set("step",a)},isEditMode:function(){return this.model.get("isEditMode")},setIsEditMode:function(a){this.model.set("isEditMode",a)}}),TSDK.UI.AudienceWorkflow.DialogContent=new PseudoClass({toString:"AudienceWorkflowDialogContent",extend:F.ModelComponent,View:F.View.extend({events:{}}),construct:function(a){this.model=new Backbone.Model(a.model),this.ruleOptions=a.ruleOptions,this.initView(a),this.registerBinders(),this.addTargetingWidget(),this.addRulesReviewStep(),this.updateConfig(a.config)},updateConfig:function(a){this.config=a||{},_.each(this.components,function(a){"function"==typeof a.updateConfig&&a.updateConfig(this.config)},this)},updateModel:function(a){this.model.clear().set(a)},registerBinders:function(){this.bind("navigateToReviewStep"),this.bind("navigateToRulesCreateStep")},initView:function(a){this.view=new this.View({el:a.el,component:this,template:TSDK.UI.Templates.AudienceWorkflow.DialogContent}).render()},addTargetingWidget:function(){this.addComponent(new TSDK.UI.AudienceWorkflow.TargetingWidget({el:this.view.$(".rules-create-container"),model:this.model,ruleOptions:this.ruleOptions,visible:!0}),"targetingwidget")},addRulesReviewStep:function(){this.addComponent(new TSDK.UI.AudienceWorkflow.RulesReviewStep({el:this.view.$(".rules-review-container"),model:this.model,visible:!1}),"rulesReviewStep").on("navigate:rulesCreateStep",this.navigateToRulesCreateStep)},navigateToReviewStep:function(){var a=this.components.targetingwidget;return!!a.validate(!0)&&(a.saveRules(),a.hide({hideChildren:!1}),this.components.rulesReviewStep.show({model:this.model,silent:!0}),this.scrollToTop(),!0)},navigateToRulesCreateStep:function(){this.components.rulesReviewStep.hide({hideChildren:!1}),this.components.targetingwidget.show({model:this.model,silent:!0}),this.scrollToTop(),this.trigger("step:change",1)},scrollToTop:function(){this.view.$el.scrollTop(0)},getAudienceToBeSaved:function(){var a=this.model.toJSON();return a.targets=this.components.targetingwidget.getRulesToBeSaved(),a},validateAudienceName:function(a){return this.components.rulesReviewStep.validateAudienceName(a)}}),TSDK.UI.AudienceWorkflow.AudienceRuleModel=Backbone.Model.extend({silentSet:function(a,b,c){var d={silent:!0};c&&_.extend(d,c),this.set(a,b,d)},setType:function(a,b){this.set("type",a,b)},getType:function(){return this.get("type")},isOfType:function(a){return this.getType()===a},setParameter:function(a,b){this.set("parameter",a,b)},getParameter:function(){return this.get("parameter")},setOperator:function(a,b){this.set("operator",a,b)},getOperator:function(){return this.get("operator")},setOperands:function(a,b){this.set("operands",a,b)},getOperands:function(){return this.get("operands")},setSummary:function(a,b){this.set("summary",a,b)},getSummary:function(){return this.get("summary")},defaults:{type:"",parameter:"",operator:"",operands:[],summary:""}}),TSDK.UI.AudienceWorkflow.AudienceRuleContainer=new PseudoClass({toString:"AudienceRuleContainer",extend:F.ModelComponent,DEFAULT_ANIMATION_DURATION:200,View:F.View.extend({events:{"click .rule-option":"handleRuleOptionClick","click .rule-delete-button":"triggerRuleDeleteEvent","click .rule-copy-button":"triggerRuleCopyEvent","click .rule-done-button":"collapseRuleContainer","click .rule-summary":"expandRuleContainer"}}),construct:function(a){this.ruleOptions=a.ruleOptions||{},this.populateEnabledRules(),this.initView(a.el),this.load(_.extend(a.model,{enabledRules:this.enabledRules})),this.registerBinders(),this.registerListeners()},initView:function(a){this.view=new this.View({el:a,template:TSDK.UI.Templates.AudienceWorkflow.AudienceRuleContainer,component:this})},registerBinders:function(){this.bind("initRule"),this.bind("syncRule")},registerListeners:function(){this.listenTo(this.view,"renderComplete",this.initRule)},initRule:function(){this.addRule(this.getRuleType())},populateEnabledRules:function(){this.enabledRules=[],_.each(TSDK.Enums.AudienceRules,function(a,b){!_.isObject(a)||a.disabled||a.configRequired&&!this.ruleOptions[b]||this.enabledRules.push(b)},this)},syncRule:function(a){this.setRuleData(a,{silent:!0}),this.updateSummaryView()},updateSummaryView:function(){this.view.$(".summary-placeholder").html(TSDK.UI.Templates.AudienceWorkflow.RuleSummary(this.getRuleData())),this.clearIncompleteMark()},handleRuleOptionClick:function(a){var b,c=$(a.currentTarget);c.attr("disabled")||(b=c.data("value"))!==this.getRuleType()&&(this.setRuleData({type:b}),this.triggerRuleTypeChangedEvent())},triggerRuleTypeChangedEvent:function(){this.trigger("rule:type:changed")},getRuleData:function(){return this.model.get("rule")},setRuleData:function(a,b){this.model.set("rule",a,b)},getRuleType:function(){var a=this.getRuleData();return a&&a.type},addRule:function(a){var b,c=this.view.$(".rule-placeholder"),d=this.getRuleComponent(a);d&&(this.destructExistingRule(),b=this.addComponent(new d({el:c,model:this.getRuleData(),ruleOptions:this.ruleOptions[a]||this.ruleOptions[TSDK.Enums.AudienceRules[a]]}),"rule").on("rule:updated",this.syncRule),b.show())},destructExistingRule:function(){var a=this.components.rule;a&&a.destructButKeepEl()},getRuleComponent:function(a){var b=TSDK.Enums.AudienceRules[a];return _.isString(b)&&(b=TSDK.Enums.AudienceRules[b]),b&&b.component},setIndex:function(a){this.model.set("index",a)},getIndex:function(){return this.model.get("index")},triggerRuleDeleteEvent:function(){this.trigger("rule:delete")},triggerRuleCopyEvent:function(){this.trigger("rule:copy",this.getRuleData())},collapseRuleContainer:function(a){var b,c=this;this.isRuleContainerExpanded()&&(b=!0===a?0:this.DEFAULT_ANIMATION_DURATION,this.view.$(".rule-editor").hide(b,function(){c.view.$el.addClass("collapsed")}))},expandRuleContainer:function(a){var b=this,c=!0===a?0:this.DEFAULT_ANIMATION_DURATION;this.trigger("rule:expand"),this.view.$(".rule-editor").show(c,function(){b.view.$el.removeClass("collapsed")})},isRuleContainerExpanded:function(){return!this.view.$el.hasClass("collapsed")},markIncomplete:function(){this.view.$(".rule-definition-box").addClass("incomplete")},clearIncompleteMark:function(){this.view.$(".rule-definition-box").removeClass("incomplete"),this.components&&this.components.rule&&this.components.rule.clearIncompleteMark()}}),TSDK.UI.AudienceWorkflow.AudienceRule=new PseudoClass({toString:"AudienceRule",extend:F.ModelComponent,Model:TSDK.UI.AudienceWorkflow.AudienceRuleModel,View:F.View.extend({commonEvents:{"change .parameterSelector":"updateParameter","change .operatorSelector":"updateOperator","change textarea.operandsInput":"updateOperandsFromTextArea","change coral-autocomplete.operandsInput":"updateOperandsFromFilters","change coral-select.operandsInput":"updateOperandsFromSelect"},additionalEvents:{},events:function(){return _.extend({},this.commonEvents,this.additionalEvents)}}),construct:function(a){this.ruleOptions=a.ruleOptions,this.initVars(a),this.initSteps(),this.initView(a.el),this.processModel(a.model),this.load(a.model),this.registerBinders(),this.registerListeners()},initVars:function(a){},initSteps:function(){this.steps=[]},initView:function(a){this.view=new this.View({el:a,template:this.getTemplate(),component:this})},processModel:function(a){},registerBinders:function(){},registerListeners:function(){},handleRenderComplete:function(){this.initWidgets(),this.updateSummary()},initWidgets:function(){},updateParameter:function(a){var b=$(a.target).data("step"),c=a.target.value;this.steps[b].clearDependentFields&&this.clearDependentAttributes(b),this.model.setParameter(c)},updateOperator:function(a){var b=$(a.target).data("step"),c=a.target.value;this.steps[b].clearDependentFields&&this.clearDependentAttributes(b),this.model.setOperator(c)},setOperands:function(a){_.isEqual(a,this.model.getOperands())||(this.model.setOperands(a,{silent:!0}),this.updateSummary())},updateOperandsFromTextArea:function(a){var b=$(a.target).data("step"),c=a.target.value;this.steps[b].clearDependentFields&&this.clearDependentAttributes(b),this.setOperands(_.compact(c.split("\n")))},updateOperandsFromFilters:function(a){var b=a.target;a.target.multiple&&$(b).find("input[type=text]").val(""),this.setOperands(_.clone(b.values))},updateOperandsFromSelect:function(a){this.setOperands([a.target.value])},updateSummary:function(){var a=this;Coral.commons.nextFrame(function(){var b,c,d={};for(b=0;b<a.steps.length;b++)c=a.steps[b],d[c.name]=_.isFunction(c.value)?c.value():a.getStepDisplayValue(a.view.$el.find("[data-step="+b+"]"));a.model.setSummary(d,{silent:!0}),a.triggerRuleUpdatedEvent()})},triggerRuleUpdatedEvent:function(){this.trigger("rule:updated",this.model.toJSON())},clearDependentAttributes:function(a){var b,c,d=this.getDefaultRule();for(b=a+1;b<this.steps.length;b++)c=this.steps[b].name,this.model.set(c,d[c],{silent:!0})},getDefaultRule:function(){return(new this.Model).toJSON()},isRuleValid:function(){return!0},validate:function(a){var b,c,d;for(d=0;d<this.steps.length;d++)if(b=this.steps[d],c=this.view.$("[data-step="+d+"]"),!(_.isFunction(b.validate)?b.validate():!(c.length&&0===_.size(this.model.get(b.name)))))return a&&c.focus().attr("invalid",!0),!1;return this.isRuleValid()},getRule:function(){var a=_.pluck(this.steps,"name").concat("type");return _.pick(this.model.toJSON(),a)},getStepDisplayValue:function(a){var b=a&&a.get(0),c=b&&b.tagName;if(!b)return"";switch(b._componentReady||CustomElements.upgradeAll(b),c){case"CORAL-SELECT":return a.find("coral-select-item[selected]").text();case"TEXTAREA":return a.val().replace(/[\n\r]/g," "+TSDK.I18n.get("OR")+" ");case"CORAL-AUTOCOMPLETE":var d=!b.forceSelection,e=d?b.values:a.find("coral-autocomplete-item[selected]").map(function(){return $(this).text()}).get();return e&&e.join(", ")}return a.get(0).value||""},clearIncompleteMark:function(){var a=this.view.$("[data-step][invalid]").get(0);a&&(a.invalid=!1)},initAutocomplete:function(a){var b=this;a&&Coral.commons.ready(a,function(){a.on("coral-autocomplete:showsuggestions",b.showFilterSuggestions.bind(b))})},parseAutoCompleteResults:function(a,b,c){return a},showFilterSuggestions:function(a){var b=a.target,c=a.detail.value,d=this,e=a.target.getAttribute("data-parameter");a.preventDefault(),this.mapRequest.fetch({data:{search:c,parameter:e},success:function(a){a=d.parseAutoCompleteResults(a,e,c),b.addSuggestions(a,!0)}})},notifyError:function(a){this.propagateEvent("error",{message:a})}}),TSDK.UI.AudienceWorkflow.TargetingWidget=new PseudoClass({toString:"TargetingWidget",extend:F.ModelComponent,View:F.View.extend({events:{"click .add-rule-button":"handleAddRuleButtonClick"}}),construct:function(a){this.ruleOptions=a.ruleOptions,this.view=new this.View({el:a.el,template:TSDK.UI.Templates.AudienceWorkflow.TargetingWidget,component:this}),this.listenTo(this.view,"renderComplete",function(){this.initWidgets()}),this.registerBinders(),this.load(a.model),this.ruleCounter=0,this.ruleContainers=[]},registerBinders:function(){this.bind("deleteRule"),this.bind("addAudienceRuleContainer")},initWidgets:function(){var a=this.getRules();this.reset(),a&&a.length?_.each(a,function(a){this.addAudienceRuleContainer(a,!0)},this):this.addNewRule()},reset:function(){this.removeComponents(),this.ruleCounter=0,this.ruleContainers=[]},addAudienceRuleContainer:function(a,b){var c="ruleContainer"+this.ruleCounter,d=$('<div class="tsdk-audience-rule-container"></div>'),e=this;b&&d.addClass("collapsed"),this.addComponent(new TSDK.UI.AudienceWorkflow.AudienceRuleContainer({el:d.appendTo(this.view.$(".rules-placeholder")),model:{index:_.size(this.components),rule:this.transformRuleBeforeEdit(a)},visible:!0,ruleOptions:this.ruleOptions}),c).on("rule:delete",function(){e.deleteRule(c)}).on("rule:copy",function(a){e.collapseRuleContainersExcept(),e.addAudienceRuleContainer(a)}).on("rule:expand",function(){e.collapseRuleContainersExcept(c)}).on("rule:type:changed",function(){e.collapseRuleContainersExcept(c)}),this.ruleContainers.push(c),this.ruleCounter++},transformRuleBeforeEdit:function(a){var b=["ispName","domainName","connectionSpeed"];return a&&"GEO"===a.type&&b.indexOf(a.parameter)>-1&&(a.type="NETWORK"),a},collapseRuleContainersExcept:function(a){var b=_.omit(this.components,a);_.each(b,function(a){a.getRuleType()&&a.collapseRuleContainer()})},handleAddRuleButtonClick:function(){var a=this.ruleContainers.length>0&&this.components[this.ruleContainers[this.ruleContainers.length-1]];a&&!a.getRuleType()||(this.collapseRuleContainersExcept(this.components),this.addAudienceRuleContainer({}))},addNewRule:function(){this.addAudienceRuleContainer({})},deleteRule:function(a){this.removeComponent(a),this.ruleContainers=_.without(this.ruleContainers,a),_.each(this.ruleContainers,function(a,b){this.components[a].setIndex(b)},this),0===this.ruleContainers.length&&this.addAudienceRuleContainer({})},getRule:function(a){return this.getRules()[a]},getRules:function(){return this.model.get("targets")},setRules:function(a){this.model.set("targets",a,{silent:!0})},saveRules:function(){var a=[];_.each(this.components,function(b){b.getRuleType()&&a.push(b.getRuleData())},this),this.setRules(a)},getRulesToBeSaved:function(){var a=[];return _.each(this.components,function(b){var c=b.components.rule;c&&a.push(_.omit(c.getRule(),"summary"))},this),a},validate:function(a){var b=!0,c=_.size(this.components);return _.each(this.components,function(d){var e=d.components.rule;if(!d.getRuleType())return void(1===c&&(b=!1,d.markIncomplete()));e&&!e.validate(a)&&(b=!1,a&&d.markIncomplete())}),b}}),TSDK.UI.AudienceWorkflow.RulesReviewStep=new PseudoClass({toString:"RulesReviewStep",extend:F.ModelComponent,View:F.View.extend({events:{"click .edit-rules-button":"handleEditRulesButtonClick","change .audience-name":"handleAudienceNameInputChange","keyup .audience-name":"handleAudienceNameInputKeyup"}}),construct:function(a){this.view=new this.View({el:a.el,template:TSDK.UI.Templates.AudienceWorkflow.RulesReviewStep,component:this}),this.load(a.model),this.targets=[]},handleEditRulesButtonClick:function(){this.trigger("navigate:rulesCreateStep")},handleAudienceNameInputChange:function(a){this.view.$(".audience-name").get(0).invalid=!1,this.setAudienceName(a.currentTarget.value)},handleAudienceNameInputKeyup:function(a){a.target.invalid=!1},setAudienceName:function(a){this.model.set("name",a,{silent:!0})},getAudienceName:function(){return this.model.get("name")},validateAudienceName:function(a){var b=$.trim(this.getAudienceName()),c=this.view.$(".audience-name");return b?(c.get(0).invalid=!1,!0):(a&&(c.focus().get(0).invalid=!0),!1)}}),TSDK.UI.AudienceWorkflow.Browser=new PseudoClass({toString:"Browser",extend:TSDK.UI.AudienceWorkflow.AudienceRule,View:TSDK.UI.AudienceWorkflow.AudienceRule.prototype.View.extend({additionalEvents:{}}),getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.Browser},processModel:function(a){a&&"BROWSER"===a.type&&("MSIE"===a.parameter&&(a.parameter="MSIE Trident"),a.type="BROWSER_PARAM",a.operands=[a.parameter],a.parameter="browserType",a.operator="equals"),a.helpLink=this.ruleOptions&&this.ruleOptions.helpLink},initSteps:function(){this.steps=[{name:"parameter",clearDependentFields:!0},{name:"operator"},{name:"operands"}],this.SingleOperandOperators=["greater","greaterEquals","lesser","lesserEquals"]},registerBinders:function(){this.bind("handleKeyDownOnBrowserInput")},initWidgets:function(){var a=this.view.$(".browserVersionLookup"),b=this;a.length&&Coral.commons.ready(a.get(0),function(){a.find("input[type=text]").on("keydown",b.handleKeyDownOnBrowserInput)})},updateOperator:function(a){var b=$(a.target).data("step"),c=a.target.value;this.steps[b].clearDependentFields&&this.clearDependentAttributes(b),-1!==this.SingleOperandOperators.indexOf(c)&&this.model.setOperands([],{silent:!0}),this.model.setOperator(c)},handleKeyDownOnBrowserInput:function(a){var b=a.keyCode||a.which;[46,8,9,27,13].indexOf(b)>-1||b>=35&&b<=39||!a.shiftKey&&(b>=48&&b<=57||b>=96&&b<=105)||a.preventDefault()},validateBrowserVersion:function(a){var b=this.view.$(".browserVersionLookup").get(0);return TSDK.UI.Util.isInteger(a)?(b.invalid=!1,$(b).find("input").blur()):(b.invalid=!0,$(b).focus(),this.notifyError(TSDK.I18n.get("Browser version must be an integer."))),!b.invalid},isRuleValid:function(){return"browserVersion"!==this.model.get("parameter")||_.every(this.model.getOperands(),function(a){return this.validateBrowserVersion(a)},this)},getRule:function(){return _.omit(this._super(),"helpLink")}}),TSDK.UI.AudienceWorkflow.OperatingSystem=new PseudoClass({toString:"OperatingSystem",extend:TSDK.UI.AudienceWorkflow.AudienceRule,View:TSDK.UI.AudienceWorkflow.AudienceRule.prototype.View.extend({additionalEvents:{}}),getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.OperatingSystem},initSteps:function(){this.steps=[{name:"parameter"}]}}),TSDK.UI.AudienceWorkflow.SitePages=new PseudoClass({toString:"SitePages",extend:TSDK.UI.AudienceWorkflow.AudienceRule,View:TSDK.UI.AudienceWorkflow.AudienceRule.prototype.View.extend({additionalEvents:{"change .pageSelector":"updatePage"}}),getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.SitePages},processModel:function(a){var b=a.parameter||"",c=b.split(".");c.length>1&&_.extend(a,{page:c[0],parameter:c[1]})},initSteps:function(){var a=this;this.steps=[{name:"page",clearDependentFields:!0},{name:"parameter",clearDependentFields:!0,value:function(){return[a.getStepDisplayValue(a.view.$(".pageSelector")),a.getStepDisplayValue(a.view.$(".parameterSelector"))].join(" ")}},{name:"operator",clearDependentFields:!0},{name:"operands"}]},updatePage:function(a){var b=$(a.target).data("step"),c=a.target.value;this.steps[b].clearDependentFields&&this.clearDependentAttributes(b),this.setPage(c)},setPage:function(a,b){this.model.set("page",a,b)},getRule:function(){var a=this._super();return a.parameter=a.page+"."+a.parameter,_.omit(a,"page")}}),TSDK.UI.AudienceWorkflow.Geo=new PseudoClass({toString:"Geo",extend:TSDK.UI.AudienceWorkflow.AudienceRule,View:TSDK.UI.AudienceWorkflow.AudienceRule.prototype.View.extend({additionalEvents:{}}),getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.Geo},initVars:function(){this.mapRequest=new TSDK.MapRequest(this.ruleOptions)},initSteps:function(){this.steps=[{name:"parameter",clearDependentFields:!0},{name:"operator"},{name:"operands"}]},initWidgets:function(){this.$invalidOperandsError=this.view.$(".invalidOperandsError"),this.initAutocomplete(this.view.$(".countryLookup").get(0)),this.initAutocomplete(this.view.$(".stateLookup").get(0)),this.initAutocomplete(this.view.$(".cityLookup").get(0)),this.initAutocomplete(this.view.$(".metroLookup").get(0))},updateOperandsFromTextArea:function(a){var b=$(a.target),c=b.data("pattern"),d=parseFloat(b.data("min")),e=parseFloat(b.data("max")),f=_.compact(b.val().split("\n")),g=[],h=[];if(c?_.each(f,function(a){a&&new RegExp(c).test(a)?h.push(a):g.push(a)}):d&&e?_.each(f,function(a){var b=parseFloat(a);b&&b>=d&&b<=e?h.push(a):g.push(a)}):h=f,g.length){var i=TSDK.I18n.get("Ignored invalid value(s)")+": "+g.join(", ");this.$invalidOperandsError.text(i).removeClass("hidden")}else this.$invalidOperandsError.addClass("hidden");b.val(h.join("\n")),this.setOperands(h)}}),TSDK.UI.AudienceWorkflow.Mobile=new PseudoClass({toString:"Mobile",extend:TSDK.UI.AudienceWorkflow.AudienceRule,View:TSDK.UI.AudienceWorkflow.AudienceRule.prototype.View.extend({additionalEvents:{"change .device-type":"updateDeviceType","change coral-numberinput.operandsInput":"updateOperandsFromNumberInput"}}),getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.Mobile},initVars:function(){this.mapRequest=new TSDK.MapRequest(this.ruleOptions)},initSteps:function(){var a=this;this.steps=[{name:"parameter",clearDependentFields:!0},{name:"operator"},{name:"operands",value:function(){var b=a.view.$(".operandsInput");return b.hasClass("lower-value")||b.hasClass("upper-value")?[a.view.$(".operandsInput.lower-value").get(0).value,a.view.$(".operandsInput.upper-value").get(0).value].join(TSDK.I18n.get(" to ")):a.getStepDisplayValue(b)},validate:function(){var b=a.model.getOperator(),c=a.model.getOperands();return 0!==c.length&&("between"===b?c[0]&&c[1]&&TSDK.UI.AudienceWorkflow.Util.isInteger(c[0])&&TSDK.UI.AudienceWorkflow.Util.isInteger(c[1])&&Number(c[1])>Number(c[0]):"greater"!==b&&"lesser"!==b||c[0]&&TSDK.UI.AudienceWorkflow.Util.isInteger(c[0])&&Number(c[0])>=0)}}]},registerListeners:function(){this.listenTo(this.model,"change:parameter",this.handleParameterChanged)},initWidgets:function(){this.initAutocomplete(this.view.$(".modelLookup").get(0)),this.initAutocomplete(this.view.$(".vendorLookup").get(0))},parseAutoCompleteResults:function(a,b,c){var d,e;return"model"===b&&(a=_.filter(a,function(a){var b=a.value.toLowerCase();return d=0===b.indexOf("iphone"),e=-1!==b.indexOf("blackberry"),"iphone"===b||!d&&!e})),"vendor"===b&&(a=_.filter(a,function(a){return-1===a.value.toLowerCase().toLowerCase().indexOf("blackberry")})),a},updateDeviceType:function(a){var b=a.target.value;this.model.get("deviceType");this.model.set("deviceType",b,{silent:!0})},updateOperandsFromNumberInput:function(a){var b=this.view.$(".operandsInput"),c=[a.target.value];(b.hasClass("lower-value")||b.hasClass("upper-value"))&&(c=[this.view.$(".operandsInput.lower-value").get(0).value,this.view.$(".operandsInput.upper-value").get(0).value]),this.setOperands(c)},getRule:function(){var a=_.pluck(this.steps,"name").concat("type");return"mobileOs"===this.model.getParameter()&&a.push("deviceType"),_.pick(this.model.toJSON(),a)},setDefaultOperator:function(a){-1!==["mobileDevice","isMobilePhone","isTablet"].indexOf(a)&&this.model.setOperator("equals")},handleParameterChanged:function(){this.setDefaultOperator(this.model.getParameter())}}),TSDK.UI.AudienceWorkflow.Network=new PseudoClass({toString:"Network",extend:TSDK.UI.AudienceWorkflow.Geo,getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.Network},initWidgets:function(){this.$invalidOperandsError=this.view.$(".invalidOperandsError"),this.initAutocomplete(this.view.$(".connectionSpeedLookup").get(0))},getRule:function(){var a=this._super();return a.type="GEO",a}}),TSDK.UI.AudienceWorkflow.TrafficSource=new PseudoClass({toString:"TrafficSource",extend:TSDK.UI.AudienceWorkflow.AudienceRule,View:TSDK.UI.AudienceWorkflow.AudienceRule.prototype.View.extend({additionalEvents:{}}),getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.TrafficSource},initSteps:function(){this.steps=[{name:"parameter",clearDependentFields:!0},{name:"operator"},{name:"operands"}]}}),TSDK.UI.AudienceWorkflow.TargetLibrary=new PseudoClass({toString:"TargetLibrary",extend:TSDK.UI.AudienceWorkflow.AudienceRule,View:TSDK.UI.AudienceWorkflow.AudienceRule.prototype.View.extend({additionalEvents:{}}),getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.TargetLibrary},initVars:function(){this.mapRequest=new TSDK.MapRequest(this.ruleOptions)},construct:function(){this.mapRequest&&this.fetchAudiences()},initSteps:function(){this.steps=[{name:"parameter"}]},initWidgets:function(){this.parameterSelector=this.view.$(".parameterSelector").get(0),this.model.get("audiences")||(this.parameterSelector.loading=!0)},fetchAudiences:function(){var a=this;this.model.set("loading",!0),this.mapRequest.fetch({success:function(b){a.model.set("audiences",b),a.model.unset("loading")},error:function(){a.showErrorNotification(TSDK.I18n.get("Failed to fetch target library from server.")),a.model.unset("loading")}})}}),TSDK.UI.AudienceWorkflow.VisitorProfile=new PseudoClass({toString:"VisitorProfile",extend:TSDK.UI.AudienceWorkflow.AudienceRule,View:TSDK.UI.AudienceWorkflow.AudienceRule.prototype.View.extend({additionalEvents:{}}),constants:{PROFILE_ATTRIBUTE_TYPES:{SCRIPT:"SCRIPT",CATEGORY_AFFINITY:"CATEGORY_AFFINITY",MBOX:"MBOX",CRS:"CRS",UNKNOWN:"UNKNOWN"},TARGETING_TYPES:{USER:"USER",CRS:"CRS"},CRS_PREFIX:"crs."},getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.VisitorProfile},initVars:function(){this.ruleOptions&&(this.mapRequest=new TSDK.MapRequest(this.ruleOptions,!0))},construct:function(a){this.mapRequest&&this.fetchProfileParameters()},initSteps:function(){this.steps=[{name:"parameter",clearDependentFields:!0},{name:"operator"},{name:"operands"}]},initWidgets:function(){this.$invalidValueError=this.view.$(".invalid-value-error")},getRule:function(){return _.omit(this.model.toJSON(),"parameters","loading")},isComplete:function(){var a,b,c,d;if(!this.$invalidValueError.hasClass("hidden"))return this.markIncomplete(),!1;for(a=1;a<this.steps.length;a++)if(b=this.view.$('.step[data-order="'+a+'"]'),b.length&&(c=this.steps[a].name,!(d=this.model.get(c))||"object"==typeof d&&0===_.size(d)))return this.markIncomplete(),!1;return!0},validateStep:function(a,b){var c=a.data("pattern"),d=a.data("error-alert")||TSDK.I18n.get("Please enter valid value."),e=!0;return c&&(e=_.every([].concat(b),function(a){return new RegExp(c).test(a)}),e?this.$invalidValueError.addClass("hidden"):this.$invalidValueError.text(d).removeClass("hidden")),e},updateOperandsFromTextArea:function(a){var b=$(a.target),c=(b.data("step"),a.target.value);this.validateStep(b,c)&&(this.model.setOperands(_.compact(c.split("\n")),{silent:!0}),this.updateSummary())},updateParameter:function(a){var b=a.target,c=$(b).data("step"),d=b.value,e=$(b.selectedItem),f=e.data("type")||"VISITOR_PROFILE",g=e.data("parametertargetid")||"";this.steps[c].clearDependentFields&&this.clearDependentAttributes(c),this.model.setType(f,{silent:!0}),this.model.set("parametertargetid",g,{silent:!0}),this.model.setParameter(d)},fetchProfileParameters:function(){var a=this;this.model.set("loading",!0),this.mapRequest.fetch({success:function(b){var c=a.parseProfileParameters(b);a.model.set("parameters",c,{silent:!0}),a.model.unset("loading")},error:function(){a.showErrorNotification(TSDK.I18n.get("Failed to fetch custom parameters from server.")),a.model.unset("loading")}})},parseProfileParameters:function(a){return _.each(a,function(a){a.type=a.type?a.type.toUpperCase():this.constants.PROFILE_ATTRIBUTE_TYPES.UNKNOWN,a.type===this.constants.PROFILE_ATTRIBUTE_TYPES.SCRIPT?a.type=this.constants.TARGETING_TYPES.USER:a.type!==this.constants.PROFILE_ATTRIBUTE_TYPES.CRS&&a.type!==this.constants.PROFILE_ATTRIBUTE_TYPES.UNKNOWN||(a.type=this.constants.TARGETING_TYPES.CRS,_.isString(a.name)&&0===a.name.indexOf(this.constants.CRS_PREFIX)&&(a.name=a.name.substring(this.constants.CRS_PREFIX.length)))},this),_.groupBy(a,function(a){return a.type})},showErrorNotification:function(a){this.propagateEvent("error",{message:a})}}),TSDK.UI.AudienceWorkflow.CustomParameters=new PseudoClass({toString:"CustomParameters",extend:TSDK.UI.AudienceWorkflow.AudienceRule,View:TSDK.UI.AudienceWorkflow.AudienceRule.prototype.View.extend({additionalEvents:{"change .mboxSelector":"updateMboxAndFetchParameters","change .input-parameter":"updateParameter"}}),getTemplate:function(){return TSDK.UI.Templates.AudienceWorkflow.CustomParameters},initVars:function(){this.ruleOptions&&(this.ruleOptions.mboxes&&(this.mboxRequest=new TSDK.MapRequest(this.ruleOptions.mboxes)),this.ruleOptions.mboxParameters&&(this.mboxParameterRequest=new TSDK.MapRequest(this.ruleOptions.mboxParameters,!0)))},construct:function(a){this.mboxRequest&&this.fetchMboxes(),this.mboxParameterRequest&&this.fetchParameters(this.model.get("mbox"))},initSteps:function(){var a=this;this.steps=[{name:"mbox",clearDependentFields:!0,validate:function(){return!(a.view.$(".mboxSelector").length&&_.isUndefined(a.model.get("mbox")))}},{name:"parameter",clearDependentFields:!0},{name:"operator"},{name:"operands"}]},initWidgets:function(){CustomElements.upgradeAll(this.view.el),this.$invalidValueError=this.view.$(".invalid-value-error")},isComplete:function(){var a,b,c,d;if(!this.$invalidValueError.hasClass("hidden"))return this.markIncomplete(),!1;for(a=1;a<this.steps.le;a++)if(b=this.view.$('.step[data-order="'+a+'"]'),b.length&&(c=this.steps[a].name,!(d=this.model.get(c))||"object"==typeof d&&0===_.size(d)))return this.markIncomplete(),!1;return!0},validateStep:function(a,b){var c=a.data("pattern"),d=a.data("error-alert")||Granite.I18n.get("Please enter valid value."),e=!0;return c&&(b=[].concat(b),e=_.every(b,function(a){return new RegExp(c).test(a)}),e?this.$invalidValueError.addClass("hidden"):this.$invalidValueError.text(d).removeClass("hidden")),e},updateMboxAndFetchParameters:function(a){var b=$(a.target).data("step"),c=a.target.value;this.steps[b].clearDependentFields&&this.clearDependentAttributes(b),this.model.set("mbox",c),this.fetchParameters(c)},fetchParameters:function(a){var b=this;this.model.unset("parameters",{silent:!!a}),a&&(this.model.set("paramsLoading",!0),this.mboxParameterRequest.fetch({data:{mbox:a},success:function(a){a=_.filter(a,function(a){return"MBOX"===a.parameterType}),b.model.set("parameters",a,{silent:!0}),b.model.unset("paramsLoading")},error:function(){b.showErrorNotification(TSDK.I18n.get("Failed to fetch mbox parameters from server.")),b.model.unset("paramsLoading")}}))},fetchMboxes:function(){var a=this;this.model.set("mboxesLoading",!0),this.mboxRequest.fetch({success:function(b){a.model.set("mboxes",b,{silent:!0}),a.model.unset("mboxesLoading")},error:function(){a.showErrorNotification(TSDK.I18n.get("Failed to fetch mboxes from server.")),a.model.unset("mboxesLoading")}})},getRule:function(){return _.omit(this.model.toJSON(),"mboxes","parameters")},showErrorNotification:function(a){this.propagateEvent("error",{message:a})}}),TSDK.EnumUtil.addEnum("AudienceRules",{LIBRARY:{icon:"filingCabinet",label:TSDK.I18n.get("Target Library"),component:TSDK.UI.AudienceWorkflow.TargetLibrary,configRequired:!0},GEO:{icon:"location",label:TSDK.I18n.get("Geo"),component:TSDK.UI.AudienceWorkflow.Geo,configRequired:!0},NETWORK:{icon:"data",label:TSDK.I18n.get("Network"),component:TSDK.UI.AudienceWorkflow.Network,configRequired:!0},MOBILE:{icon:"deviceMobile",label:TSDK.I18n.get("Mobile"),component:TSDK.UI.AudienceWorkflow.Mobile,configRequired:!0},MBOX:{icon:"gearsEdit",label:TSDK.I18n.get("Custom"),component:TSDK.UI.AudienceWorkflow.CustomParameters},OPERATING_SYSTEM:{icon:"deviceLaptop",label:TSDK.I18n.get("OS"),component:TSDK.UI.AudienceWorkflow.OperatingSystem},SITE_PAGE:{icon:"pages",label:TSDK.I18n.get("Site Pages"),component:TSDK.UI.AudienceWorkflow.SitePages},BROWSER_PARAM:{icon:"globeSearch",label:TSDK.I18n.get("Browser"),component:TSDK.UI.AudienceWorkflow.Browser},BROWSER:"BROWSER_PARAM",VISITOR_PROFILE:{icon:"imageProfile",label:TSDK.I18n.get("Visitor Profile"),component:TSDK.UI.AudienceWorkflow.VisitorProfile},
USER:"VISITOR_PROFILE",PROFILE:"VISITOR_PROFILE",CRS:"VISITOR_PROFILE",TRAFFIC_SOURCES:{icon:"merge",label:TSDK.I18n.get("Traffic Sources"),component:TSDK.UI.AudienceWorkflow.TrafficSource}}),TSDK.UI.AudienceWorkflow.prototype.config={},TSDK.UI.AudiencePicker=new PseudoClass({toString:"AudiencePicker",extend:TSDK.UI.ConfigurableComponent,initialize:function(a){a=a||{},this.audienceWorkflowOptions=a.audienceWorkflow,this._initConfigs(),this._registerBinders(),this._initDialog(),this._addSubComponents(),a.visible&&this.showPicker()},_initConfigs:function(){this.initialConfig=this.config},_registerBinders:function(){this.bind("_toggleFullscreen"),this.bind("_triggerSelectedEvent"),this.bind("_updateOnAudiencesSelection"),this.bind("_scrollListToTop"),this.bind("_openAudienceWorkflow")},_initDialog:function(){this.audiencePicker=(new Coral.Dialog).set({backdrop:"static"}),$(this.audiencePicker).addClass("tsdk-audience-picker").appendTo("body")},handleConfigChanged:function(){this._addOrRemoveAudienceWorkflow()},showPicker:function(a){if(a=_.extend({},this.initialConfig,a)){this.configure(a);var b=this.components.audiencePickerDialogContent,c=this.components.audiencePickerDialogHeader,d=a.selected;this.components.audiencePickerDialogContent.updateConfig(a),d&&(_.isArray(d)||(d=[d]),b.setSelectedAudiences(d),c.updateCount(d.length)),a.fullscreen&&this._toggleFullscreen(!0)}return $(this.audiencePicker).toggleClass("multi-selection-mode",this._isMultiSelectionMode()),this.audiencePicker.show(),Coral.commons.nextFrame(this._scrollListToTop),this},reload:function(){this.components.audiencePickerDialogContent.updateList()},_scrollListToTop:function(){$(this.audiencePicker).find(".audience-picker-list").scrollTop(0)},_addSubComponents:function(){this._addDialogHeader(),this._addDialogContent(),this._addOrRemoveAudienceWorkflow(),this.config.multiTenant&&this._addOrRemoveTenantDropdown()},_addDialogHeader:function(){this.addComponent(new TSDK.UI.AudiencePicker.DialogHeader({el:$(this.audiencePicker).find("coral-dialog-header"),visible:!0}),"audiencePickerDialogHeader").on("fullscreen:toggle",this._toggleFullscreen).on("done",this._triggerSelectedEvent)},_addDialogContent:function(){this.addComponent(new TSDK.UI.AudiencePicker.DialogContent({el:$(this.audiencePicker).find("coral-dialog-content"),visible:!0,config:this.config,fetchOptions:this.fetchOptions}),"audiencePickerDialogContent").on("audiences:selected",this._updateOnAudiencesSelection).on("audience:create",this._openAudienceWorkflow)},_addOrRemoveAudienceWorkflow:function(){var a=this,b=this.components.audienceWorkflow,c=this.components.audiencePickerDialogContent,d=!1;c&&(this.config.create?(b||this.addComponent(new TSDK.UI.AudienceWorkflow(this.audienceWorkflowOptions),"audienceWorkflow").on("audience:created",function(b,c){a.trigger("audience:created",b,function(){c(),a.reload()})}),d=!0):b&&b.destructButKeepEl(),c.toggleCreateAudienceButton(d))},_addOrRemoveTenantDropdown:function(){var a="tnt"!==this.config.engine&&"cq"!==this.config.engine;this.components.audiencePickerDialogContent&&this.components.audiencePickerDialogContent.toggleTenantDropdown(a)},_openAudienceWorkflow:function(){this.components.audienceWorkflow.openWorkflow({fullscreen:this.audiencePicker.fullscreen})},reset:function(){_.each(this.components,function(a){"function"==typeof a.reset&&a.reset()})},_updateOnAudiencesSelection:function(a){this.selectedAudiences=a,this._isMultiSelectionMode()?this.components.audiencePickerDialogHeader.updateCount(a.length):this._triggerSelectedEvent()},notifyError:function(a){this.trigger("error",{message:a})},_isMultiSelectionMode:function(){var a=this.config.multiSelection;return"boolean"==typeof a&&a},_toggleFullscreen:function(a){this.audiencePicker.fullscreen=a,$(this.audiencePicker).find("coral-dialog-header").toggleClass("coral--dark",a)},_triggerSelectedEvent:function(){this.selectedAudiences&&this.trigger("selected",_.map(this.selectedAudiences,function(a){return a.attributes})),this.audiencePicker.hide()}}),TSDK.UI.AudiencePicker.DialogHeader=new PseudoClass({toString:"AudiencePickerDialogHeader",extend:F.ModelComponent,View:F.View.extend({events:{"click .fullscreen-button":"toggleFullscreenMode","click .done-button":"triggerDoneEvent"}}),construct:function(a){this.initView(a),this.load(a.model)},initView:function(a){this.view=new this.View({el:a.el,component:this,template:TSDK.UI.Templates.AudiencePicker.DialogHeader}).render()},toggleFullscreenMode:function(a){var b=$(a.currentTarget).data("toggle");this.trigger("fullscreen:toggle",b)},triggerDoneEvent:function(){this.trigger("done")},updateCount:function(a){this.view.model.set("count",a)},reset:function(){this.updateCount(0)}}),TSDK.UI.AudiencePicker.DialogContent=new PseudoClass({toString:"AudiencePickerDialogContent",extend:F.ModelComponent,View:F.View.extend({events:{"click .add-audience-button":"handleAddAudienceButtonClick"}}),construct:function(a){this.setFetchOptions(a.fetchOptions),this.updateConfig(a.config),this.initView(a),this.addSubComponents(a)},setFetchOptions:function(a){this.fetchOptions=a},updateConfig:function(a){this.config=a||{},_.each(this.components,function(a){_.isFunction(a.updateConfig)&&a.updateConfig(this.config)},this),this.handleConfigChanged()},handleConfigChanged:function(){this.view&&this.addOrRemoveSearcher()},initView:function(a){this.view=new this.View({el:a.el,component:this,model:{config:this.config},template:TSDK.UI.Templates.AudiencePicker.DialogContent}).render()},addSubComponents:function(a){this.addOrRemoveSearcher(),this.addAudienceList(a),this.addSelectedAudiences(a),this.config.multiTenant&&this.addTenantDropdown()},addOrRemoveSearcher:function(){var a=this.components.searcher;this.config.search?a||this.addComponent(new TSDK.UI.AudiencePicker.Searcher({el:this.view.$(".audience-searcher-placeholder"),visible:!0}),"searcher").on("search",this.searchAudience.bind(this)):a&&(a.destructButKeepEl(),delete this.components.searcher)},addTenantDropdown:function(){var a=new TSDK.UI.AudiencePicker.TenantDropdownModel,b=this,c=this._extractBrandFromParams();a.url=this.fetchOptions.listingsUrl+c,this.addComponent(new TSDK.UI.AudiencePicker.TenantDropdown({el:this.view.$(".audience-tenant-dropdown-placeholder"),visible:!0,config:this.config}),"tenant-dropdown").on("select",function(a){b.components.audiencelist.updateFetchOptions({suffix:null!=a?a.path:""}),b.updateList()}),a.fetch({success:function(){b.components["tenant-dropdown"].setItems(a.getItems())},error:function(){b.components["tenant-dropdown"].setItems([])}})},addAudienceList:function(){this.addComponent(new TSDK.UI.AudiencePicker.AudienceList({el:this.view.$(".audience-picker-list"),visible:!0,config:this.config,fetchOptions:this.fetchOptions}),"audiencelist").on("list:itemSelected",this.audienceItemSelected.bind(this)).on("collection:loaded",this.updateListWithSelectedAudiences.bind(this));var a=this;this.view.$(".audience-picker-list").bind("scroll",function(b){a.components.audiencelist.handleScroll(b)})},addSelectedAudiences:function(){this.addComponent(new TSDK.UI.AudiencePicker.SelectedAudiences,"selectedAudienceList")},_extractBrandFromParams:function(){var a=/[?&](brand=[^&]+)/.exec(this.fetchOptions.urlParams);return a&&a.length>=1?"?"+a[1]:""},reset:function(){_.each(this.components,function(a){_.isFunction("function")&&a.reset()})},setSelectedAudiences:function(a){var b=this.components.audiencelist;b.setSelectedAudiences(a),this.components.selectedAudienceList.setSelectedAudiences(b.getSelectedAudiences())},handleAddAudienceButtonClick:function(){this.trigger("audience:create")},audienceItemSelected:function(a){var b=a.model;this.parent._isMultiSelectionMode()||(this.components.selectedAudienceList.reset(),this.components.audiencelist.deselectAll()),b.toggleSelected(),b.isSelected()?this.selectAudience(b):this.deselectAudience(b)},selectAudience:function(a){this.selectAudiences([a])},deselectAudience:function(a){this.deselectAudiences([a])},selectAudiences:function(a){this.components.selectedAudienceList.add(a),this.components.audiencelist.allAudiencesAreSelected()&&this.checkSelectAllCheckbox()},getSelectedAudiencesCount:function(){return this.components.selectedAudienceList.getCount()},deselectAudiences:function(a){this.components.selectedAudienceList.remove(a)},enableAddToReportsButton:function(){this.view.$(".addAndClosePicker").prop("disabled",!1)},disableAddToReportsButton:function(){this.view.$(".addAndClosePicker").prop("disabled",!0)},updateListWithSelectedAudiences:function(){var a=this.components.selectedAudienceList.getSelectedAudiences();a.length&&this.components.audiencelist.setSelectedAudiences(a)},updateList:function(){this.components.audiencelist.updateList()},searchAudience:function(a){this.components.audiencelist.search(a)},toggleCreateAudienceButton:function(a){this.view.$(".add-audience-button").toggleClass("hidden",!a)},toggleTenantDropdown:function(a){this.components["tenant-dropdown"].toggleShow(a)}}),TSDK.UI.InfiniteScrollList=new PseudoClass({toString:"InfiniteScrollList",extend:F.ListComponent,options:{defaultParams:{pageSize:10,page:1}},currentPage:1,loading:!1,defaultNumConsecutiveErrorCallbacks:1,numConsecutiveErrorCallbacks:1,currentSearchString:"",totalNumberOfPagesToLoad:-1,fetch:function(a,b,c){this.pagination?this.fetchWithPagination.apply(this,arguments):this.fetchWithoutPagination.apply(this,arguments)},fetchWithoutPagination:function(a,b){return this.params=_.omit(_.extend({},this.options.defaultParams,a),"page","pageSize"),this.collection.fetch({data:this.params,success:function(){this.numConsecutiveErrorCallbacks=this.defaultNumConsecutiveErrorCallbacks,this.collection.trigger("loaded"),this.trigger("collection:loaded",this.collection,this.collection.models.length),this.collectionLoaded=!0,"function"==typeof b&&b.call(this,this.collection),this.loading=!1}.bind(this),error:function(a,c){"function"==typeof b&&this.numConsecutiveErrorCallbacks>0&&(b.call(this,c),this.numConsecutiveErrorCallbacks--)}.bind(this)}),this},fetchWithPagination:function(a,b,c){var d=!0,e=!1,f=!0,g=!1;return c||(this.currentPage=1,d=!1,e=!0,f=!1,g=!0),this.params=a?_.extend({},this.options.defaultParams,a):_.extend({},this.options.defaultParams),this.params.page=this.currentPage,this.currentSearchString&&""!=this.currentSearchString&&(this.params.search=this.currentSearchString),this.params.pageSize=this.getPageSize(),"scroll"!==this.fetchInitiator&&(this.noMorePagesAvailable=!1),this.collection.fetch({data:this.params,add:d,remove:e,update:f,reset:g,success:function(a,d){this.numConsecutiveErrorCallbacks=this.defaultNumConsecutiveErrorCallbacks,this.totalNumberOfPagesToLoad=this.getPagesInResponse(d),this.hasMorePages=this.getHasMoreInResponse(d),c||this.collection.trigger("loaded"),this.trigger("collection:loaded",this.collection),this.collectionLoaded=!0,"function"==typeof b&&b.call(this,this.collection),this.fetchNextPageCallback(this.collection),"scroll"===this.fetchInitiator&&this.collection.length===this.collectionLength&&(this.noMorePagesAvailable=!0),this.collectionLength=this.collection.length,this.fetchInitiator=void 0,this.loading=!1}.bind(this),error:function(a,c){"function"==typeof b&&this.numConsecutiveErrorCallbacks>0&&(b.call(this,c),this.numConsecutiveErrorCallbacks--),this.fetchNextPageCallback(this.collection)}.bind(this)}),this},fetchNextPageCallback:function(a){},handleScroll:function(a){if(!this.loading){var b=a.currentTarget;b.scrollTop+b.clientHeight>=.8*b.scrollHeight&&this.fetchAvailablePage()}},isNextPageAvailable:function(){return _.isNumber(this.totalNumberOfPagesToLoad)?this.totalNumberOfPagesToLoad>0&&this.currentPage<this.totalNumberOfPagesToLoad:_.isBoolean(this.hasMorePages)?this.hasMorePages:!this.noMorePagesAvailable},fetchAvailablePage:function(){this.isNextPageAvailable()&&(this.currentPage++,this.fetchInitiator="scroll",this.loading=!0,this.fetchNextPage())},fetchNextPage:function(){this.fetch(this.fetchParams,null,!0)},fillAvailableSpace:function(){if(this.view.$el.is(":visible")&&!this.collection.isEmpty()){var a=this.getAllContainers(),b=$(a[0]).outerHeight(!0),c=this.getSiblingsHeight();window.innerHeight-this.view.$el.closest(".scrollable").offset().top-c-b*a.length>0&&this.fetchAvailablePage()}},getSiblingsHeight:function(){return _.reduce(this.view.$el.siblings(),function(a,b){return a+$(b).outerHeight(!0)},0)},getAllContainers:function(){return this.view.$(".listItem")},getPageSize:function(){var a=this.fetchOptions&&this.fetchOptions.pageSize;return _.isNumber(a)?a:this.options.defaultParams.pageSize},getPagesInResponse:function(a){if(this.fetchOptions&&this.fetchOptions.pages)return a[this.fetchOptions.pages]},getHasMoreInResponse:function(a){if(this.fetchOptions&&this.fetchOptions.hasMore)return a[this.fetchOptions.hasMore]}}),TSDK.UI.AudiencePicker.AudienceModel=Backbone.Model.extend({silentSet:function(a,b,c){var d={silent:!0};c&&_.extend(d,c),this.set(a,b,d)},setName:function(a){this.silentSet("name",a)},getName:function(){return this.get("name")},getId:function(){return this.get("id")},isSelected:function(){return this.get("selected")},setSelected:function(a){this.set("selected",a)},toggleSelected:function(){this.setSelected(!this.isSelected())},defaults:{selected:!1,name:"",size:0}}),TSDK.UI.AudiencePicker.AudiencesCollection=Backbone.Collection.extend({model:TSDK.UI.AudiencePicker.AudienceModel,setFetchOptions:function(a){this.url=a.url,this.preprocess=a.preprocess},parse:function(a,b){var c=b.data,d=this.getAudiencesFromResponse(a),e=_.find(d,function(a){return"all_visitors"===a.id}),f=0;return e&&(f=d.indexOf(e)),f&&(e=d[f],d.splice(f,1),d=_.sortBy(d,function(a){return a.name.toLowerCase()}),d.unshift(e)),_.isString(c.search)&&this.search&&"server"!==this.search&&(d=_.filter(d,function(a){var b=a.name;return _.isString(b)&&b.toLowerCase().indexOf(c.search.toLowerCase())>-1},this)),d},getAudiencesFromResponse:function(a){return _.isFunction(this.preprocess)?this.preprocess(a):_.isArray(a)?a:[]}}),TSDK.UI.AudiencePicker.AudienceList=new PseudoClass({toString:"AudienceList",extend:TSDK.UI.InfiniteScrollList,Collection:TSDK.UI.AudiencePicker.AudiencesCollection,options:{defaultParams:{pageSize:100}},numConsecutiveErrorCallbacks:0,ItemTemplate:function(){return this.model.isSelected()?this.$el.addClass("selected"):this.$el.removeClass("selected"),"all_visitors"===this.model.getId()&&this.$el.addClass("all_visitors_container"),TSDK.UI.Templates.AudiencePicker.AudienceListItem.apply(this,arguments)},construct:function(a){this.updateConfig(a.config),this.updateFetchOptions(a.fetchOptions),this.fetchParams={},this.registerBinders(),this.registerGlobalTriggers()},destruct:function(){this.unRegisterGlobalTriggers()},registerBinders:function(){this.bind("sortAudiences")},registerGlobalTriggers:function(){F.on("audienceSorter:change",this.sortAudiences)},unRegisterGlobalTriggers:function(){F.off("audienceSorter:change",this.sortAudiences)},updateConfig:function(a){this.config=_.extend({},this.config,a),this.pagination=this.config.pagination,this.collection.search=this.config.search},updateFetchOptions:function(a){this.fetchOptions=_.extend({},this.fetchOptions,a),this.collection.setFetchOptions(this.fetchOptions)},getAllAudiences:function(){return this.getAudiencesFromContainers(this.getAllAudienceContainers())},getSelectedAudiences:function(){var a=this.getSelectedAudienceContainers();return this.getAudiencesFromContainers(a)},getAudiencesFromContainers:function(a){var b=[];return _.each(a,function(a){var c=this.getModelFromLi(a);b.push(c)},this),b},setAllSelected:function(a){_.each(this.getAllAudiences(),function(b){b.setSelected(a)})},selectAll:function(){this.setAllSelected(!0)},deselectAll:function(){this.setAllSelected(!1)},setSelectedAudiences:function(a){var b=_.pluck(a,"id");_.each(this.getAllAudiences(),function(a){a.setSelected(b.indexOf(a.getId())>-1)})},getSelectedAudienceContainers:function(){return this.getAllAudienceContainers().filter(".selected")},getAllAudienceContainers:function(){return this.view.$("li")},getAllVisibleAudienceCount:function(){return this.getAllAudienceContainers().size()},allAudiencesAreSelected:function(){var a=this.getAllAudiences();return!!a.length&&void 0===_.find(a,function(a){return!a.isSelected()})},merge:function(a,b){this.collection.add(a,b)},search:function(a,b){b=b||"search",this.fetchParams[b]=a,this.updateList()},updateList:function(){var a=this.fetchOptions.suffix||"",b=this.fetchOptions.baseUrl+a+this.fetchOptions.urlParams;this.collection.setFetchOptions({url:b,preprocess:this.collection.preprocess}),this.fetch(this.fetchParams)},sortAudiences:function(a,b){this.setParameter("sortBy",a),this.setParameter("sortOrder",b),this.updateList()},setParameter:function(a,b){"string"!=typeof b||""===b?delete this.fetchParams[a]:this.fetchParams[a]=b},reset:function(){this.deselectAll(),this.view.$el.scrollTop(0),this.fetchParams={}}}),TSDK.UI.AudiencePicker.SelectedAudiences=new PseudoClass({toString:"selectedItems",extend:F.Component,options:{visible:!0},construct:function(){this.cacheCollection=new Backbone.Collection([],{model:TSDK.UI.AudiencePicker.AudienceModel}).bind("add",this.triggerSelectionEvent.bind(this)).bind("remove",this.triggerSelectionEvent.bind(this))},getSelectedAudiences:function(){return this.cacheCollection.models},getCount:function(){return this.cacheCollection.size()},triggerSelectionEvent:function(){this.parent.trigger("audiences:selected",this.getSelectedAudiences())},add:function(a){var b=this;_.each(a,function(a){if(!a.isSelected())throw b.toString()+" trying to add non selected audience: "+a}),this.cacheCollection.add(a)},remove:function(a){this.cacheCollection.remove(a)},reset:function(){this.cacheCollection.reset()},addSelectedAudiences:function(a){this.cacheCollection.add(a)},setSelectedAudiences:function(a){this.reset(),this.addSelectedAudiences(a)}}),TSDK.UI.AudiencePicker.Searcher=new PseudoClass({toString:"Searcher",extend:F.ModelComponent,View:F.View.extend({events:{"keyup .search-input input":"triggerSearchEvent","click .search-input button":"reset"}}),SEARCH_TIMEOUT:300,construct:function(a){this.initView(a.el)},initView:function(a){this.view=new this.View({el:a,component:this,template:TSDK.UI.Templates.AudiencePicker.Searcher}).render(),this.initVars()},initVars:function(){this.searchInputElement=this.view.$(".search-input").get(0),this.searchProcessId=null},triggerSearchEvent:function(a){var b=27,c=this;this.searchProcessId&&clearTimeout(this.searchProcessId),a.keyCode!==b&&a.which!==b||($(a.currentTarget).blur(),a.currentTarget.value=""),this.searchProcessId=setTimeout(function(){c.triggerChangeSearchEvent(a.currentTarget.value)},this.SEARCH_TIMEOUT)},triggerChangeSearchEvent:function(a){var b=a.replace(/^\s+|\s+$/g,"");this.trigger("search",b)},reset:function(){this.searchInputElement.value="",this.triggerChangeSearchEvent("")}}),TSDK.UI.AudiencePicker.TenantDropdown=new PseudoClass({toString:"TenantDropdown",extend:F.ModelComponent,View:F.View.extend({events:{"change .tenant-dropdown":"onSelect"}}),construct:function(a){this.initView(a.el),this.initVars(a)},initView:function(a){this.view=new this.View({el:a,component:this,template:TSDK.UI.Templates.AudiencePicker.TenantDropdown}).render()},onSelect:function(a){var b=a.target.value,c=parseInt(b),d=this.items[c];!d&&b&&-1!==c&&(d={path:"/"+encodeURIComponent(b)}),this.trigger("select",d)},toggleShow:function(a){this.view.$el.toggle(a)},setItems:function(a){var b=this.view.$el.find(".tenant-dropdown").get(0),c=this.config;this.items=a,b.items.clear(),b.items.add({selected:!1,value:-1,content:{textContent:this.view.$el.data("root-name")}}),a.forEach(function(a,d){b.items.add({value:d,content:{textContent:c.multiTenantHiddenPathSegment?a.path.replace(c.multiTenantHiddenPathSegment,""):a.path}})})},initVars:function(a){this.config=_.extend({},a.config),this.items=[]}}),TSDK.UI.AudiencePicker.TenantDropdownModel=Backbone.Model.extend({getItems:function(){return this.get("items")||[]}}),Handlebars.registerHelper("getAudienceSource",function(a){var b=a.origin||"--";switch(b.toUpperCase()){case"TNT":return TSDK.I18n.get("Target");case"CLOUD":return TSDK.I18n.get("Marketing Cloud");default:return b}}),Handlebars.registerHelper("getAudienceIcon",function(a){var b=TSDK.Enums.AudienceRules[a.type];return b&&b.icon||"users"}),TSDK.UI.AudiencePicker.prototype.config={},this.TSDK=this.TSDK||{},this.TSDK.UI=this.TSDK.UI||{},this.TSDK.UI.Templates=this.TSDK.UI.Templates||{},this.TSDK.UI.Templates.MboxPickerComponent=this.TSDK.UI.Templates.MboxPickerComponent||{},this.TSDK.UI.Templates.MetricsComponent=this.TSDK.UI.Templates.MetricsComponent||{},this.TSDK.UI.Templates.Goals=this.TSDK.UI.Templates.Goals||{},this.TSDK.UI.Templates.GoalsAndSettings=this.TSDK.UI.Templates.GoalsAndSettings||{},this.TSDK.UI.Templates.DiagramComponent=this.TSDK.UI.Templates.DiagramComponent||{},this.TSDK.UI.Templates.ExperienceRailComponent=this.TSDK.UI.Templates.ExperienceRailComponent||{},this.TSDK.UI.Templates.AudienceWorkflow=this.TSDK.UI.Templates.AudienceWorkflow||{},this.TSDK.UI.Templates.AudiencePicker=this.TSDK.UI.Templates.AudiencePicker||{},Handlebars.registerPartial("AdvancedMetricActionType",this.TSDK.UI.Templates.MetricsComponent.AdvancedMetricActionType=Handlebars.template({1:function(a,b,c,d,e){return"hidden"},3:function(a,b,c,d,e){return'selected="selected"'},5:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <div class="row fixed">\n      <div class="grey sub-heading padding-t-0-6">'+i((c.i18n||b&&b.i18n||h).call(g,"How will the count be incremented?",{name:"i18n",hash:{},data:e}))+'</div>\n      <coral-select class="select-advanced-metric-action-type width-18">\n        <coral-select-item value="COUNT_ONCE" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.advancedMetricActionType:b,"COUNT_ONCE",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Once per Entrant",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="COUNT_LANDINGS" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.advancedMetricActionType:b,"COUNT_LANDINGS",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"On Every Impression (Excl. Page Refreshes)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="ALWAYS_CONVERT" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.advancedMetricActionType:b,"ALWAYS_CONVERT",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"On Every Impression",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n      </coral-select>\n    </div>\n"},7:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <div class="row fixed">\n      <div class="grey sub-heading padding-t-0-6">'+i((c.i18n||b&&b.i18n||h).call(g,"What experience will users see if they reenter the activity?",{name:"i18n",hash:{},data:e}))+'</div>\n      <coral-select class="select-advanced-metric-action-type width-18">\n        <coral-select-item value="RESTART_SAME_EXPERIENCE" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.advancedMetricActionType:b,"RESTART_SAME_EXPERIENCE",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Same Experience",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="RESTART_RANDOM_EXPERIENCE" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.advancedMetricActionType:b,"RESTART_RANDOM_EXPERIENCE",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Random Experience",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="RESTART_NEW_EXPERIENCE" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.advancedMetricActionType:b,"RESTART_NEW_EXPERIENCE",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Unseen Experience",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n      </coral-select>\n    </div>\n"},9:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <div class="row fixed">\n      <div class="grey sub-heading padding-t-0-6">'+i((c.i18n||b&&b.i18n||h).call(g,"What will the users see instead of the activity content?",{name:"i18n",hash:{},data:e}))+'</div>\n      <coral-select class="select-advanced-metric-action-type width-18">\n        <coral-select-item value="EXCLUDE_TO_SAME_EXPERIENCE" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.advancedMetricActionType:b,"EXCLUDE_TO_SAME_EXPERIENCE",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Same Experience (without Tracking)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="BAN_FROM_CAMPAIGN" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.advancedMetricActionType:b,"BAN_FROM_CAMPAIGN",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Default/Other Activity Content",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n      </coral-select>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="advanced-metric-action '+(null!=(f=c.unless.call(g,null!=b?b.isAdvancedSettingsVisible:b,{name:"unless",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'">\n  <div class="coral-Accordion-label uppercase">'+i((c.i18n||b&&b.i18n||h).call(g,"Advanced Settings",{name:"i18n",hash:{},data:e}))+'</div>\n  <div class="row fixed">\n    <div class="grey sub-heading">'+i((c.i18n||b&&b.i18n||h).call(g,"What will happen after a user encounters this goal metric?",{name:"i18n",hash:{},data:e}))+'</div>\n\n    <coral-select class="select-post-goal-success-action width-21">\n      <coral-select-item value="incrementCountKeepUser" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.postGoalSuccessAction:b,"incrementCountKeepUser",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Increment Count & Keep User in Activity",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="incrementCountReleaseUserAllowEntry" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.postGoalSuccessAction:b,"incrementCountReleaseUserAllowEntry",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Increment Count, Release User & Allow Reentry",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="incrementCountBarEntry" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.postGoalSuccessAction:b,"incrementCountBarEntry",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Increment Count, Release User & Bar from Reentry",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n  </div>\n\n"+(null!=(f=(c.in||b&&b.in||h).call(g,null!=b?b.postGoalSuccessAction:b,"incrementCountKeepUser","",{name:"in",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.postGoalSuccessAction:b,"incrementCountReleaseUserAllowEntry",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.postGoalSuccessAction:b,"incrementCountBarEntry",{name:"equals",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+"</div>\n"},useData:!0})),Handlebars.registerPartial("MetricsItemElementClick",this.TSDK.UI.Templates.MetricsComponent.MetricsItemElementClick=Handlebars.template({1:function(a,b,c,d,e){var f,g=a.escapeExpression;return"    <span>&nbsp;"+g(a.lambda(null!=(f=null!=b?b.constraints:b)?f.length:f,b))+"&nbsp;"+g((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"selected",{name:"i18n",hash:{},data:e}))+'&nbsp;</span>\n    <coral-icon icon="edit" size="XS" class="select-elements e2e-select-elements"></coral-icon>\n    <coral-icon icon="delete" size="XS" class="delete-elements e2e-delete-elements"></coral-icon>\n'},3:function(a,b,c,d,e){return'    <button is="coral-button" type="button" class="select-elements e2e-select-elements">\n      '+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Select elements",{name:"i18n",hash:{},data:e}))+"\n    </button>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<div class="row fixed constraintsCell">\n'+(null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=(f=null!=b?b.constraints:b)?f.length:f,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")+"</div>\n"},useData:!0})),Handlebars.registerPartial("MetricsItemMboxFields",this.TSDK.UI.Templates.MetricsComponent.MetricsItemMboxFields=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l=a.escapeExpression,m="function";return'    <div class="constraint mboxSearch row fixed" data-display-type="'+l((c.i18n||b&&b.i18n||k).call(j,"mbox",{name:"i18n",hash:{},data:e}))+'">\n'+(null!=(h=c.if.call(j,e&&e.index,{name:"if",hash:{},fn:a.program(2,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'      <div class="cell step mboxLookup'+l((i=null!=(i=c.index||e&&e.index)?i:k,typeof i===m?i.call(j,{name:"index",hash:{},data:e}):i))+' display-inline" data-order="2" constraint-order="'+l((i=null!=(i=c.index||e&&e.index)?i:k,typeof i===m?i.call(j,{name:"index",hash:{},data:e}):i))+'"></div>\n'+(null!=(h=(c.notEquals||b&&b.notEquals||k).call(j,null!=(h=null!=g[1]?g[1].constraints:g[1])?h.length:h,1,{name:"notEquals",hash:{},fn:a.program(4,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"    </div>\n"},2:function(a,b,c,d,e){return'        <span class="cell width-2 grey">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"OR",{name:"i18n",hash:{},data:e}))+"</span>\n"},4:function(a,b,c,d,e){var f;return'        <div class="cell width-2">\n          <button type="button" is="coral-button" variant="minimal" icon="minusCircle" iconSize="S" class="remove-constraint" id='+a.escapeExpression((f=null!=(f=c.index||e&&e.index)?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"index",hash:{},data:e}):f))+"></button>\n        </div>\n"},6:function(a,b,c,d,e){return'    <button type="button" is="coral-button" variant="minimal" icon="addCircle" iconSize="S" class="add-constraint padding-l-0">\n      '+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Add an Mbox",{name:"i18n",hash:{},data:e}))+"\n    </button>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return'<div class="constraintsCell">\n'+(null!=(h=c.each.call(i,null!=b?b.constraints:b,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+(null!=(h=c.unless.call(i,null!=b?b.specialmbox:b,{name:"unless",hash:{},fn:a.program(6,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"</div>"},useData:!0,useDepths:!0})),Handlebars.registerPartial("MetricsItemPageView",this.TSDK.UI.Templates.MetricsComponent.MetricsItemPageView=Handlebars.template({1:function(a,b,c,d,e){return"selected"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression
;return'<div class="row fixed">\n  <coral-select class="select-matcher">\n    <coral-select-item value="exact" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.matcher:b,"exact",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"URL is",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="contains" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.matcher:b,"contains",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"URL contains",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n  </coral-select>\n</div>\n"+(null!=(f=a.invokePartial(d.MetricsItemUrlFields,b,{name:"MetricsItemUrlFields",data:e,helpers:c,partials:d,decorators:a.decorators}))?f:"")},usePartial:!0,useData:!0})),Handlebars.registerPartial("MetricsItemUrlFields",this.TSDK.UI.Templates.MetricsComponent.MetricsItemUrlFields=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l=a.escapeExpression,m="function";return'  <div class="row fixed constraint" data-display-type="'+l((c.i18n||b&&b.i18n||k).call(j,"URL",{name:"i18n",hash:{},data:e}))+'">\n'+(null!=(h=c.if.call(j,e&&e.index,{name:"if",hash:{},fn:a.program(2,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'\n    <input is="coral-textfield" placeholder="http://www." name="'+l((i=null!=(i=c.index||e&&e.index)?i:k,typeof i===m?i.call(j,{name:"index",hash:{},data:e}):i))+'" value="'+l((i=null!=(i=c.term||(null!=b?b.term:b))?i:k,typeof i===m?i.call(j,{name:"term",hash:{},data:e}):i))+'" class="terminput cell">\n\n'+(null!=(h=(c.notEquals||b&&b.notEquals||k).call(j,null!=(h=null!=g[1]?g[1].constraints:g[1])?h.length:h,1,{name:"notEquals",hash:{},fn:a.program(4,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"  </div>\n"},2:function(a,b,c,d,e){return'      <div class="cell width-2 grey">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"OR",{name:"i18n",hash:{},data:e}))+"</div>\n"},4:function(a,b,c,d,e){var f;return'      <div class="cell width-2">\n        <button type="button" is="coral-button" variant="minimal" icon="minusCircle" iconSize="S" class="remove-constraint" id='+a.escapeExpression((f=null!=(f=c.index||e&&e.index)?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"index",hash:{},data:e}):f))+"></button>\n      </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return(null!=(h=c.each.call(i,null!=b?b.constraints:b,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'\n<div class="row fixed">\n  <button type="button" is="coral-button" variant="minimal" icon="addCircle" iconSize="S" class="add-constraint padding-l-0">\n    '+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(i,"Add another URL",{name:"i18n",hash:{},data:e}))+"\n  </button>\n</div>"},useData:!0,useDepths:!0})),Handlebars.registerPartial("AudienceAB",this.TSDK.UI.Templates.DiagramComponent.AudienceAB=Handlebars.template({1:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.AudienceBox,b,{name:"AudienceBox",data:e,indent:"  ",helpers:c,partials:d,decorators:a.decorators}))?f:""},3:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.NoAudienceBox,b,{name:"NoAudienceBox",data:e,indent:"  ",helpers:c,partials:d,decorators:a.decorators}))?f:""},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.name:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:""},usePartial:!0,useData:!0})),Handlebars.registerPartial("AudienceBox",this.TSDK.UI.Templates.DiagramComponent.AudienceBox=Handlebars.template({1:function(a,b,c,d,e){var f;return a.escapeExpression((f=null!=(f=c.icon||(null!=b?b.icon:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"icon",hash:{},data:e}):f))},3:function(a,b,c,d,e){return"users"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j=a.escapeExpression;return'<div class="tsdk-audience-box">\n  <coral-icon icon="'+(null!=(f=c.if.call(h,null!=b?b.icon:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")+'" size="XS" class="audience-icon"></coral-icon>\n  <strong class="audience-title">'+j((g=null!=(g=c.name||(null!=b?b.name:b))?g:i,"function"==typeof g?g.call(h,{name:"name",hash:{},data:e}):g))+'</strong>\n  <button type="button" is="coral-button" variant="minimal" icon="breadcrumb" iconsize="XS" class="audience-options-button"></button>\n  <coral-popover class="context-menu" placement="bottom" target="_prev">\n    <coral-popover-content>\n      <coral-selectlist>\n        <coral-selectlist-item value="edit">\n          <coral-icon icon="edit"></coral-icon>\n          <span>'+j((c.i18n||b&&b.i18n||i).call(h,"Edit",{name:"i18n",hash:{},data:e}))+'</span>\n        </coral-selectlist-item>\n        <coral-selectlist-item value="remove">\n          <coral-icon icon="delete"></coral-icon>\n          <span>'+j((c.i18n||b&&b.i18n||i).call(h,"Remove",{name:"i18n",hash:{},data:e}))+"</span>\n        </coral-selectlist-item>\n      </coral-selectlist>\n    </coral-popover-content>\n  </coral-popover>\n</div>"},useData:!0})),Handlebars.registerPartial("ExperienceAB",this.TSDK.UI.Templates.DiagramComponent.ExperienceAB=Handlebars.template({1:function(a,b,c,d,e){var f;return a.escapeExpression((f=null!=(f=c.visitorPercentage||(null!=b?b.visitorPercentage:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"visitorPercentage",hash:{},data:e}):f))},3:function(a,b,c,d,e){return"0"},5:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.ExperienceBox,b,{name:"ExperienceBox",data:e,indent:"  ",helpers:c,partials:d,decorators:a.decorators}))?f:""},7:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.NoExperienceBox,b,{name:"NoExperienceBox",data:e,indent:"  ",helpers:c,partials:d,decorators:a.decorators}))?f:""},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'<div class="visitor-box">\n  <input is="coral-textfield" class="visitor-percentage" value="'+(null!=(f=c.if.call(g,null!=b?b.visitorPercentage:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")+'">\n  <span class="visitor-percentage-symbol">%</span>\n</div>\n\n'+(null!=(f=c.if.call(g,null!=b?b.name:b,{name:"if",hash:{},fn:a.program(5,e,0),inverse:a.program(7,e,0),data:e}))?f:"")},usePartial:!0,useData:!0})),Handlebars.registerPartial("ExperienceBox",this.TSDK.UI.Templates.DiagramComponent.ExperienceBox=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i="function",j=a.escapeExpression;return'<div class="tsdk-experience-box">\n  <strong class="experience-title">'+j((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,typeof f===i?f.call(g,{name:"name",hash:{},data:e}):f))+'</strong>\n  <input is="coral-textfield" class="experience-title-input" value="'+j((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,typeof f===i?f.call(g,{name:"name",hash:{},data:e}):f))+'">\n  <button type="button" is="coral-button" variant="minimal" icon="breadcrumb" iconsize="XS" class="experience-options-button"></button>\n  <coral-popover class="context-menu" placement="bottom" target="_prev">\n    <coral-popover-content>\n      <coral-selectlist>\n        <coral-selectlist-item value="edit">\n          <coral-icon icon="edit"></coral-icon>\n          <span>'+j((c.i18n||b&&b.i18n||h).call(g,"Edit",{name:"i18n",hash:{},data:e}))+'</span>\n        </coral-selectlist-item>\n        <coral-selectlist-item value="remove">\n          <coral-icon icon="delete"></coral-icon>\n          <span>'+j((c.i18n||b&&b.i18n||h).call(g,"Remove",{name:"i18n",hash:{},data:e}))+'</span>\n        </coral-selectlist-item>\n        <coral-selectlist-item value="rename">\n          <coral-icon icon="text"></coral-icon>\n          <span>'+j((c.i18n||b&&b.i18n||h).call(g,"Rename",{name:"i18n",hash:{},data:e}))+"</span>\n        </coral-selectlist-item>\n      </coral-selectlist>\n    </coral-popover-content>\n  </coral-popover>\n</div>"},useData:!0})),Handlebars.registerPartial("ExperienceXT",this.TSDK.UI.Templates.DiagramComponent.ExperienceXT=Handlebars.template({1:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.ExperienceBox,b,{name:"ExperienceBox",data:e,indent:"  ",helpers:c,partials:d,decorators:a.decorators}))?f:""},3:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.NoExperienceBox,b,{name:"NoExperienceBox",data:e,indent:"  ",helpers:c,partials:d,decorators:a.decorators}))?f:""},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.name:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:""},usePartial:!0,useData:!0})),Handlebars.registerPartial("NoAudienceBox",this.TSDK.UI.Templates.DiagramComponent.NoAudienceBox=Handlebars.template({1:function(a,b,c,d,e){return"view-mode"},3:function(a,b,c,d,e){return'    <strong class="audience-title">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"No Audience",{name:"i18n",hash:{},data:e}))+"</strong>\n"},5:function(a,b,c,d,e){return'    <coral-icon icon="add" size="S" class="audience-icon"></coral-icon>\n    <strong class="audience-title">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Add Audience",{name:"i18n",hash:{},data:e}))+"</strong>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'<div class="tsdk-audience-box no-audience '+(null!=(f=c.if.call(g,null!=b?b.viewMode:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'">\n'+(null!=(f=c.if.call(g,null!=b?b.viewMode:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.program(5,e,0),data:e}))?f:"")+"</div>"},useData:!0})),Handlebars.registerPartial("NoExperienceBox",this.TSDK.UI.Templates.DiagramComponent.NoExperienceBox=Handlebars.template({1:function(a,b,c,d,e){return"view-mode"},3:function(a,b,c,d,e){return'    <strong class="experience-title">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"No Experience",{name:"i18n",hash:{},data:e}))+"</strong>\n"},5:function(a,b,c,d,e){return'    <coral-icon icon="add" size="S" class="experience-icon"></coral-icon>\n    <strong class="experience-title">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Add Experience",{name:"i18n",hash:{},data:e}))+"</strong>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'<div class="tsdk-experience-box no-experience '+(null!=(f=c.if.call(g,null!=b?b.viewMode:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'">\n'+(null!=(f=c.if.call(g,null!=b?b.viewMode:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.program(5,e,0),data:e}))?f:"")+"</div>"},useData:!0})),Handlebars.registerPartial("AudienceRule",this.TSDK.UI.Templates.AudienceWorkflow.AudienceRule=Handlebars.template({1:function(a,b,c,d,e){return'    <span class="message">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Add rules to define an audience.",{name:"i18n",hash:{},data:e}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="targetingwidget">\n'+(null!=(f=c.unless.call(g,null!=b?b["jcr:title"]:b,{name:"unless",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'  <div class="rules"></div>\n  <div class="tooltip error arrow-bottom hoverError deleteRuleConfirmationDialog">\n    <span>'+i((c.i18n||b&&b.i18n||h).call(g,"Are you sure you want to delete?",{name:"i18n",hash:{},data:e}))+'</span>\n    <button class="icon-close white"></button>\n    <button class="icon-delete white warning"></button>\n  </div>\n  <div class="dropdown rulesdropdown" data-init="dropdown" title=\''+i((c.i18n||b&&b.i18n||h).call(g,"Add a targeting rule",{name:"i18n",hash:{},data:e}))+'\'>\n    <select class="ruleselector">\n      <option value="">'+i((c.i18n||b&&b.i18n||h).call(g,"Add Rule",{name:"i18n",hash:{},data:e}))+'</option>\n      <option value="SITE_PAGE"><i class="icon-pages"></i><span>'+i((c.i18n||b&&b.i18n||h).call(g,"Site Pages",{name:"i18n",hash:{},data:e}))+'</span></option>\n      <option value="MBOX"><i class="icon-pages"></i><span>'+i((c.i18n||b&&b.i18n||h).call(g,"Custom Parameters",{name:"i18n",hash:{},data:e}))+'</span></option>\n      <option value="BROWSER_PARAM"><i class="icon-unmerge"></i><span>'+i((c.i18n||b&&b.i18n||h).call(g,"Browser",{name:"i18n",hash:{},data:e}))+'</span></option>\n      <option value="OPERATING_SYSTEM"><i class="icon-unmerge"></i><span>'+i((c.i18n||b&&b.i18n||h).call(g,"Operating System",{name:"i18n",hash:{},data:e}))+'</span></option>\n      <option value="VISITOR_PROFILE"><i class="icon-demographic"></i><span>'+i((c.i18n||b&&b.i18n||h).call(g,"Visitor Profile",{name:"i18n",hash:{},data:e}))+'</span></option>\n      <option value="LIBRARY"><i class="icon-archive"></i><span>'+i((c.i18n||b&&b.i18n||h).call(g,"Target Library",{name:"i18n",hash:{},data:e}))+'</span></option>\n      <option value="TRAFFIC_SOURCES"><i class="icon-merge"></i><span>'+i((c.i18n||b&&b.i18n||h).call(g,"Traffic Sources",{name:"i18n",hash:{},data:e}))+"</span></option>\n    </select>\n  </div>\n</div>"},useData:!0})),Handlebars.registerPartial("RuleSelector",this.TSDK.UI.Templates.AudienceWorkflow.RuleSelector=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{},j=c.helperMissing,k=a.escapeExpression;return'    <div class="rule-option '+(null!=(h=(c.matchesAudienceType||b&&b.matchesAudienceType||j).call(i,b,null!=(h=null!=g[1]?g[1].rule:g[1])?h.type:h,{name:"matchesAudienceType",hash:{},fn:a.program(2,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'" data-value="'+k(a.lambda(b,b))+'">\n      <coral-icon class="rule-icon" icon="'+k((c.getIconForAudienceType||b&&b.getIconForAudienceType||j).call(i,b,{name:"getIconForAudienceType",hash:{},data:e}))+'" size="M"></coral-icon>\n      <div class="rule-label">'+k((c.getLabelForAudienceType||b&&b.getLabelForAudienceType||j).call(i,b,{name:"getLabelForAudienceType",hash:{},data:e}))+"</div>\n    </div>\n"},2:function(a,b,c,d,e){return"selected"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h;return'<div class="tsdk-audience-rule-selector">\n'+(null!=(h=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.enabledRules:b,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"</div>\n\n"},useData:!0,useDepths:!0})),Handlebars.registerPartial("RuleSummary",this.TSDK.UI.Templates.AudienceWorkflow.RuleSummary=Handlebars.template({1:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'    <span class="summary-section-label">'+h((c.i18n||b&&b.i18n||g).call(f,"Attribute Type",{name:"i18n",hash:{},data:e}))+':&nbsp;</span>\n    <span class="summary-rule-type">\n      <coral-icon icon="'+h((c.getIconForAudienceType||b&&b.getIconForAudienceType||g).call(f,null!=b?b.type:b,{name:"getIconForAudienceType",hash:{},data:e}))+'"></coral-icon>\n      '+h((c.getLabelForAudienceType||b&&b.getLabelForAudienceType||g).call(f,null!=b?b.type:b,{name:"getLabelForAudienceType",hash:{},data:e}))+"\n    </span>\n"},3:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=(f=null!=b?b.summary:b)?f.parameter:f,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:""},4:function(a,b,c,d,e){var f,g=a.escapeExpression,h=a.lambda;return'      <span class="summary-section-label">'+g((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"When",{name:"i18n",hash:{},data:e}))+':</span>\n      <span class="summary-rule-parameter">'+g(h(null!=(f=null!=b?b.summary:b)?f.parameter:f,b))+'</span>\n      <span class="summary-rule-operator">'+g(h(null!=(f=null!=b?b.summary:b)?f.operator:f,b))+'</span>\n      <span class="summary-rule-operands">'+g(h(null!=(f=null!=b?b.summary:b)?f.operands:f,b))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'<div class="tsdk-rule-summary-text">\n'+(null!=(f=c.if.call(g,null!=b?b.type:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=b?b.summary:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"</div>"},useData:!0})),Handlebars.registerPartial("MatchOperator",this.TSDK.UI.Templates.AudienceWorkflow.MatchOperator=Handlebars.template({1:function(a,b,c,d,e){return"selected"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n  <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"matches",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n  <coral-select-item value="doesNotEqualIgnoreCase" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqualIgnoreCase",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not match",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n</coral-select>\n"},useData:!0})),Handlebars.registerPartial("MobileDeviceType",this.TSDK.UI.Templates.AudienceWorkflow.MobileDeviceType=Handlebars.template({1:function(a,b,c,d,e){return'checked="checked"'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j="function",k=a.escapeExpression;return'<label class="device-type-option">\n  <input type="checkbox" name="device-type-option" data-value="'+k((g=null!=(g=c.value||(null!=b?b.value:b))?g:i,typeof g===j?g.call(h,{name:"value",hash:{},data:e}):g))+'"\n    '+(null!=(f=(c.equals||b&&b.equals||i).call(h,null!=b?b.value:b,null!=b?b.deviceType:b,{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'>\n  <span class="cursor-pointer"><i class="'+k((g=null!=(g=c.deviceIconClass||(null!=b?b.deviceIconClass:b))?g:i,typeof g===j?g.call(h,{name:"deviceIconClass",hash:{},data:e}):g))+'"></i>&nbsp;'+k((g=null!=(g=c.title||(null!=b?b.title:b))?g:i,typeof g===j?g.call(h,{name:"title",hash:{},data:e}):g))+"</span>\n</label>\n"},useData:!0})),Handlebars.registerPartial("MobileDimension",this.TSDK.UI.Templates.AudienceWorkflow.MobileDimension=Handlebars.template({1:function(a,b,c,d,e){return"selected"},3:function(a,b,c,d,e){var f;return'  <coral-numberinput min="0" class="operandsInput" data-step="2" placeholder="Enter a number" value="'+a.escapeExpression(a.lambda(null!=(f=null!=b?b.operands:b)?f[0]:f,b))+'"></coral-numberinput>\n'},5:function(a,b,c,d,e){var f,g=a.lambda,h=a.escapeExpression;return'  <coral-numberinput step="1" min="0" class="operandsInput lower-value" data-step="2" placeholder="Enter a number" value="'+h(g(null!=(f=null!=b?b.operands:b)?f[0]:f,b))+'"></coral-numberinput>\n  <span class="operandsSeparator">'+h((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"to",{name:"i18n",hash:{},data:e}))+'</span>\n  <coral-numberinput step="1" min="1" class="operandsInput upper-value" data-step="2" placeholder="Enter a number" value="'+h(g(null!=(f=null!=b?b.operands:b)?f[1]:f,b))+'"></coral-numberinput>\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n  <coral-select-item value="greater" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"greater",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Greater Than",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n  <coral-select-item value="lesser" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"lesser",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Less Than",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n  <coral-select-item value="between" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"between",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Between",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n</coral-select>\n\n"+(null!=(f=(c.in||b&&b.in||h).call(g,null!=b?b.operator:b,"greater","lesser",{name:"in",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"between",{name:"equals",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")},useData:!0})),Handlebars.registerPartial("MobileOsOptions",this.TSDK.UI.Templates.AudienceWorkflow.MobileOsOptions=Handlebars.template({1:function(a,b,c,d,e){return"selected"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<coral-autocomplete-item value="osAndroid" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"osAndroid",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Android",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n<coral-autocomplete-item value="osOsx" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"osOsx",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"iOS",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n<coral-autocomplete-item value="osWindows" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"osWindows",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Windows",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n<coral-autocomplete-item value="osLinux" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"osLinux",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Linux",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n<coral-autocomplete-item value="osProprietary" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"osProprietary",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Proprietary",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n<coral-autocomplete-item value="osRim" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"osRim",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Blackberry",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n<coral-autocomplete-item value="osSymbian" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"osSymbian",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Symbian",{name:"i18n",hash:{},data:e}))+"</coral-autocomplete-item>\n"},useData:!0})),this.TSDK.UI.Templates.MboxPickerComponent.MboxPicker=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i=a.lambda,j=a.escapeExpression;return'    <coral-autocomplete-item value="'+j(i(b,b))+'" data-special="true" '+(null!=(h=(c.equals||b&&b.equals||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=g[1]?g[1].selected:g[1],b,{name:"equals",hash:{},fn:a.program(2,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+j(i(b,b))+"</coral-autocomplete-item>\n"},2:function(a,b,c,d,e){return"selected"},4:function(a,b,c,d,e,f,g){var h;return"    "+(null!=(h=(c.hasValue||b&&b.hasValue||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=g[1]?g[1].exclude:g[1],b,{name:"hasValue",hash:{},fn:a.program(5,e,0,f,g),inverse:a.program(7,e,0,f,g),data:e}))?h:"")},5:function(a,b,c,d,e){return""},7:function(a,b,c,d,e,f,g){var h,i=a.lambda,j=a.escapeExpression;return'\n      <coral-autocomplete-item value="'+j(i(b,b))+'" '+(null!=(h=(c.equals||b&&b.equals||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=g[2]?g[2].selected:g[2],b,{name:"equals",hash:{},fn:a.program(2,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+j(i(b,b))+"</coral-autocomplete-item>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return'<coral-autocomplete placeholder="Search mbox" class="tsdk-mboxpicker">\n'+(null!=(h=c.each.call(i,null!=b?b.specialMboxes:b,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+(null!=(h=c.each.call(i,null!=b?b.items:b,{name:"each",hash:{},fn:a.program(4,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"</coral-autocomplete>"},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.MetricsComponent.Metrics=Handlebars.template({1:function(a,b,c,d,e){return'    <div class="coral-Heading coral-Heading--3 section-heading">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Optimization Goal (Specifies goal for algorithm to optimize)*",{name:"i18n",hash:{},data:e}))+"</div>\n"},3:function(a,b,c,d,e){return'    <div class="coral-Heading coral-Heading--3 section-heading">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Goal Metric*",{name:"i18n",hash:{},data:e}))+"</div>\n"},5:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <div class="conversion-block">\n      <div class="coral-Heading coral-Heading--3 section-heading">'+i((c.i18n||b&&b.i18n||h).call(g,"Conversion Metric (Specifies when to restart activity)",{name:"i18n",hash:{},data:e}))+'</div>\n        <div class="conversion-checkbox-container">\n        <coral-checkbox class="conversion-metric-checkbox" checked '+(null!=(f=c.unless.call(g,null!=(f=null!=b?b.config:b)?f.CONVERSION_METRIC_CHECKBOX_ENABLED:f,{name:"unless",hash:{},fn:a.program(6,e,0),inverse:a.noop,data:e}))?f:"")+">\n            <span>"+i((c.i18n||b&&b.i18n||h).call(g,"Same as Optimization Goal",{name:"i18n",hash:{},data:e}))+'</span>\n          </coral-checkbox>\n        </div>\n        <div class="conversion"></div>\n      </div>\n'},6:function(a,b,c,d,e){return"disabled"},8:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'    <div class="additional-metrics">\n      <div class="coral-Heading coral-Heading--3 section-heading">'+h((c.i18n||b&&b.i18n||g).call(f,"Additional Metrics",{name:"i18n",hash:{},data:e}))+'</div>\n      <div class="additional"></div>\n      <div class="grey sub-heading margin-t-1-25">'+h((c.i18n||b&&b.i18n||g).call(f,"Configure other success metrics for reporting.",{name:"i18n",hash:{},data:e}))+'</div>\n      <div>\n        <button type="button" is="coral-button" iconsize="S" id="addmetrics" class="addmetrics">'+h((c.i18n||b&&b.i18n||g).call(f,"Add a New Metric",{name:"i18n",hash:{},data:e}))+"</button>\n      </div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'<div class="tsdk-ui-metrics">\n'+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.POST_GOAL_METRIC_TRACKING_ENABLED:f,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")+'  <div class="goal"></div>\n\n'+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.POST_GOAL_METRIC_TRACKING_ENABLED:f,{name:"if",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.notEquals||b&&b.notEquals||c.helperMissing).call(g,null!=b?b.reportingSolution:b,"analytics",{name:"notEquals",hash:{},fn:a.program(8,e,0),inverse:a.noop,data:e}))?f:"")+"</div>"},useData:!0}),this.TSDK.UI.Templates.MetricsComponent.MetricsItem=Handlebars.template({1:function(a,b,c,d,e){return'            <coral-selectlist-item value="delete" class="delete-metric">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Delete",{name:"i18n",hash:{},data:e}))+"</coral-selectlist-item>\n"},3:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'            <coral-selectlist-item value="advancedSettings" '+(null!=(f=c.if.call(g,null!=b?b.isAdvancedSettingsVisible:b,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(g,"Advanced Settings",{name:"i18n",hash:{},data:e}))+"</coral-selectlist-item>\n"},4:function(a,b,c,d,e){return"disabled"},6:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'            <coral-select-item value="conversion" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.type:b,"conversion",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Conversion",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},7:function(a,b,c,d,e){return"selected"},9:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=(f=null!=b?b.config:b)?f.ACTION_VIEWED_MBOX_ENABLED:f,{name:"if",hash:{},fn:a.program(10,e,0),inverse:a.noop,data:e}))?f:""},10:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="revenue" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.type:b,"revenue",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Revenue",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},12:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'            <coral-select-item value="engagement" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.type:b,"engagement",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Engagement",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},14:function(a,b,c,d,e){return'          <coral-tooltip variant="inspect" placement="right" class="goalnote" target="#metric-selector" interaction="off" open>\n            '+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"This metric will determine the success of your activity.",{name:"i18n",hash:{},data:e}))+"\n          </coral-tooltip>\n"},16:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'        <div class="row fixed">\n          <div class="grey sub-heading padding-t-0-6">'+i((c.i18n||b&&b.i18n||h).call(g,"Default View for Reporting",{name:"i18n",hash:{},data:e}))+'</div>\n          <coral-select class="select-revenue-type">\n            <coral-select-item value="rpv" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.revenueType:b,"rpv",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Revenue Per Visitor (RPV)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n            <coral-select-item value="aov" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.revenueType:b,"aov",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Average Order Value (AOV)",{name:"i18n",hash:{},data:e
}))+"</coral-select-item>\n"+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.REVENUE_SALES_ENABLED:f,{name:"if",hash:{},fn:a.program(17,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.REVENUE_ORDERS_ENABLED:f,{name:"if",hash:{},fn:a.program(19,e,0),inverse:a.noop,data:e}))?f:"")+"          </coral-select>\n        </div>\n"},17:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="sales" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.revenueType:b,"sales",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Total Sales",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},19:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="conversionRate" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.revenueType:b,"conversionRate",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Orders",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},21:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'        <div class="row fixed">\n          <div class="grey sub-heading padding-t-0-6">'+i((c.i18n||b&&b.i18n||h).call(g,"There are three ways you can measure engagement, which would you like to measure?",{name:"i18n",hash:{},data:e}))+'</div>\n          <coral-select class="select-engagement-type" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select action",{name:"i18n",hash:{},data:e}))+'">\n            <coral-select-item value="pageViews" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.engagementType:b,"pageViews",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Page Views",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n            <coral-select-item value="customScoring" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.engagementType:b,"customScoring",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Custom Scoring",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n            <coral-select-item value="timeOnSite" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.engagementType:b,"timeOnSite",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Time on Site",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n          </coral-select>\n\n"+(null!=(f=(c.ifEither||b&&b.ifEither||h).call(g,null!=b?b.isGoalMetric:b,!0,null!=b?b.conversion:b,!0,{name:"ifEither",hash:{},fn:a.program(22,e,0),inverse:a.noop,data:e}))?f:"")+"        </div>\n"},22:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=(f=null!=b?b.config:b)?f.PROJECTED_EARNINGS_ENABLED:f,{name:"if",hash:{},fn:a.program(23,e,0),inverse:a.noop,data:e}))?f:""},23:function(a,b,c,d,e){var f;return null!=(f=(c.in||b&&b.in||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.engagementType:b,"pageViews","timeOnSite",{name:"in",hash:{},fn:a.program(24,e,0),inverse:a.noop,data:e}))?f:""},24:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'                <div class="row fixed metric-worth">\n                  <div class="grey sub-heading padding-t-0-6">\n'+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.engagementType:b,"timeOnSite",{name:"equals",hash:{},fn:a.program(25,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.engagementType:b,"pageViews",{name:"equals",hash:{},fn:a.program(27,e,0),inverse:a.noop,data:e}))?f:"")+'                    <span>&nbsp;<a class="coral-Link">'+i((c.i18n||b&&b.i18n||h).call(g,"What is this",{name:"i18n",hash:{},data:e}))+'?</a></span>\n                    <coral-tooltip placement="right" target="_prev">\n                      '+i((c.i18n||b&&b.i18n||h).call(g,"Providing a value for your goal allows Target to calculate an estimated lift in revenue.",{name:"i18n",hash:{},data:e}))+'&nbsp;\n                      <a href="http://microsite.omniture.com/t2/help/en_US/target/#target-Creating_an_Activity" target="_blank">'+i((c.i18n||b&&b.i18n||h).call(g,"Learn more",{name:"i18n",hash:{},data:e}))+'</a>\n                    </coral-tooltip>\n                  </div>\n                  <input is="coral-textfield" placeholder="'+i(a.lambda(null!=(f=null!=b?b.config:b)?f.CURRENCY_SYMBOL:f,b))+'" value="'+(null!=(f=c.if.call(g,null!=b?b.worth:b,{name:"if",hash:{},fn:a.program(29,e,0),inverse:a.noop,data:e}))?f:"")+'" class="metric-worth-input">\n                </div>\n'},25:function(a,b,c,d,e){return"                      "+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Estimated value of a minute on site",{name:"i18n",hash:{},data:e}))+"&nbsp;\n"},27:function(a,b,c,d,e){return"                      "+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Estimated value of a page view",{name:"i18n",hash:{},data:e}))+"\n"},29:function(a,b,c,d,e){return a.escapeExpression((c.number||b&&b.number||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.worth:b,{name:"number",hash:{},data:e}))},31:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'        <div class="row fixed">\n          <div class="grey sub-heading padding-t-0-6">'+i((c.i18n||b&&b.i18n||h).call(g,"What action was taken by your audience to indicate your goal has been reached?",{name:"i18n",hash:{},data:e}))+'</div>\n          <coral-select class="select-action width-100p-imp" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select action",{name:"i18n",hash:{},data:e}))+'">\n            <coral-select-item value="pageView" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"pageView",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Viewed a page",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.ACTION_VIEWED_MBOX_ENABLED:f,{name:"if",hash:{},fn:a.program(32,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.ACTION_CLICK_MBOX_ENABLED:f,{name:"if",hash:{},fn:a.program(34,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.CLICK_TRACKING_ENABLED:f,{name:"if",hash:{},fn:a.program(36,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.CLICK_RECOMMENDATION_ENABLED:f,{name:"if",hash:{},fn:a.program(38,e,0),inverse:a.noop,data:e}))?f:"")+"         </coral-select>\n        </div>\n\n        "+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"pageView",{name:"equals",hash:{},fn:a.program(40,e,0),inverse:a.noop,data:e}))?f:"")+"\n        "+(null!=(f=(c.in||b&&b.in||h).call(g,null!=b?b.action:b,"mboxView","mboxClick",{name:"in",hash:{},fn:a.program(42,e,0),inverse:a.noop,data:e}))?f:"")+"\n        "+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"elementClick",{name:"equals",hash:{},fn:a.program(44,e,0),inverse:a.noop,data:e}))?f:"")+"\n\n"+(null!=(f=(c.ifEither||b&&b.ifEither||h).call(g,null!=b?b.isGoalMetric:b,!0,null!=b?b.conversion:b,!0,{name:"ifEither",hash:{},fn:a.program(46,e,0),inverse:a.noop,data:e}))?f:"")},32:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="mboxView" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"mboxView",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Viewed an mbox",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},34:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="mboxClick" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"mboxClick",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">\n                "+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Clicked on mbox",{name:"i18n",hash:{},data:e}))+"\n              </coral-select-item>\n"},36:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="elementClick" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"elementClick",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">\n                "+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Clicked an element",{name:"i18n",hash:{},data:e}))+"\n              </coral-select-item>\n"},38:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="clickRecommendation" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"clickRecommendation",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">\n                "+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Clicked on recommendation",{name:"i18n",hash:{},data:e}))+"\n              </coral-select-item>\n"},40:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.MetricsItemPageView,b,{name:"MetricsItemPageView",data:e,helpers:c,partials:d,decorators:a.decorators}))?f:""},42:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.MetricsItemMboxFields,b,{name:"MetricsItemMboxFields",data:e,helpers:c,partials:d,decorators:a.decorators}))?f:""},44:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.MetricsItemElementClick,b,{name:"MetricsItemElementClick",data:e,helpers:c,partials:d,decorators:a.decorators}))?f:""},46:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=(f=null!=b?b.config:b)?f.PROJECTED_EARNINGS_ENABLED:f,{name:"if",hash:{},fn:a.program(47,e,0),inverse:a.noop,data:e}))?f:""},47:function(a,b,c,d,e){var f;return null!=(f=(c.in||b&&b.in||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.action:b,"pageView","mboxView","elementClick","clickRecommendation",{name:"in",hash:{},fn:a.program(48,e,0),inverse:a.noop,data:e}))?f:""},48:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'              <div class="row fixed metric-worth">\n                <div class="grey sub-heading padding-t-0-6">\n                  '+i((c.i18n||b&&b.i18n||h).call(g,"Estimated Value of one conversion",{name:"i18n",hash:{},data:e}))+'&nbsp;\n                  <span>&nbsp;<a class="coral-Link">'+i((c.i18n||b&&b.i18n||h).call(g,"What is this",{name:"i18n",hash:{},data:e}))+'?</a></span>\n                  <coral-tooltip placement="right" target="_prev">\n                    '+i((c.i18n||b&&b.i18n||h).call(g,"Providing a value for your goal allows Target to calculate an estimated lift in revenue.",{name:"i18n",hash:{},data:e}))+'&nbsp;\n                    <a href="http://microsite.omniture.com/t2/help/en_US/target/#target-Creating_an_Activity" target="_blank">'+i((c.i18n||b&&b.i18n||h).call(g,"Learn more",{name:"i18n",hash:{},data:e}))+'</a>\n                  </coral-tooltip>\n                </div>\n                <input is="coral-textfield" placeholder="'+i(a.lambda(null!=(f=null!=b?b.config:b)?f.CURRENCY_SYMBOL:f,b))+'" value="'+(null!=(f=c.if.call(g,null!=b?b.worth:b,{name:"if",hash:{},fn:a.program(29,e,0),inverse:a.noop,data:e}))?f:"")+'" class="metric-worth-input">\n              </div>\n'},50:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'        <div class="row fixed">\n          <div class="grey sub-heading padding-t-0-6">'+i((c.i18n||b&&b.i18n||h).call(g,"What action was taken by your audience to indicate your goal has been reached?",{name:"i18n",hash:{},data:e}))+'</div>\n          <coral-select class="select-action width-100p-imp">\n            <coral-select-item value="mboxView" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"mboxView",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Viewed an mbox",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.ACTION_CLICK_MBOX_ENABLED:f,{name:"if",hash:{},fn:a.program(34,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.CLICK_RECOMMENDATION_ENABLED:f,{name:"if",hash:{},fn:a.program(38,e,0),inverse:a.noop,data:e}))?f:"")+"          </coral-select>\n        </div>\n\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"pageView",{name:"equals",hash:{},fn:a.program(51,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"mboxView",{name:"equals",hash:{},fn:a.program(53,e,0),inverse:a.noop,data:e}))?f:"")},51:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'          <div class="row fixed">\n            <coral-select class="select-matcher">\n              <coral-select-item value="exact" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.matcher:b,"exact",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"URL is",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n              <coral-select-item value="contains" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.matcher:b,"contains",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"URL contains",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n            </coral-select>\n          </div>\n\n"+(null!=(f=a.invokePartial(d.MetricsItemUrlFields,b,{name:"MetricsItemUrlFields",data:e,indent:"          ",helpers:c,partials:d,decorators:a.decorators}))?f:"")},53:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.MetricsItemMboxFields,b,{name:"MetricsItemMboxFields",data:e,indent:"          ",helpers:c,partials:d,decorators:a.decorators}))?f:""},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j="function",k=a.escapeExpression;return'<coral-accordion class="metric">\n  <coral-accordion-item selected class="metric-item">\n    <input is="coral-textfield" name="metricname" maxlength="25" class="metric-name-input" value="'+k((g=null!=(g=c.title||(null!=b?b.title:b))?g:i,typeof g===j?g.call(h,{name:"title",hash:{},data:e}):g))+'">\n    <button type="button" is="coral-button" variant="minimal" icon="moreVertical" iconSize="S" class="context-options-button">\n    </button>\n    <coral-popover target="_prev" class="context-menu" alignmy="left top" alignat="left bottom">\n      <coral-popover-content>\n        <coral-selectlist class="container-relative context-menu-option">\n          <coral-selectlist-item value="rename" class="rename-metric">'+k((c.i18n||b&&b.i18n||i).call(h,"Rename",{name:"i18n",hash:{},data:e}))+'</coral-selectlist-item>\n          <coral-selectlist-item value="clear" class="clear-metric-fields">'+k((c.i18n||b&&b.i18n||i).call(h,"Clear all fields",{name:"i18n",hash:{},data:e}))+"</coral-selectlist-item>\n"+(null!=(f=c.unless.call(h,null!=b?b.isGoalMetric:b,{name:"unless",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(h,null!=(f=null!=b?b.config:b)?f.ADVANCED_SETTINGS_ENABLED:f,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+'        </coral-selectlist>\n      </coral-popover-content>\n    </coral-popover>\n\n\n    <coral-accordion-item-label class="metric-header display-inline-block width-90p">\n      <span class="metric-name-label uppercase">'+k((g=null!=(g=c.title||(null!=b?b.title:b))?g:i,typeof g===j?g.call(h,{name:"title",hash:{},data:e}):g))+'</span>\n      <div class="metric-summary font-normal"></div>\n    </coral-accordion-item-label>\n\n    <coral-accordion-item-content>\n      <div class="row fixed">\n        <div class="grey sub-heading">'+k((c.i18n||b&&b.i18n||i).call(h,"What do you want to measure with this activity?",{name:"i18n",hash:{},data:e}))+'</div>\n\n        <coral-select class="select-metric-type width-100p-imp" id="metric-selector" placeholder="'+k((c.i18n||b&&b.i18n||i).call(h,"Select success metric",{name:"i18n",hash:{},data:e}))+'">\n'+(null!=(f=c.if.call(h,null!=(f=null!=b?b.config:b)?f.CONVERSION_ENABLED:f,{name:"if",hash:{},fn:a.program(6,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(h,null!=(f=null!=b?b.config:b)?f.REVENUE_ENABLED:f,{name:"if",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(h,null!=(f=null!=b?b.config:b)?f.ENGAGEMENT_ENABLED:f,{name:"if",hash:{},fn:a.program(12,e,0),inverse:a.noop,data:e}))?f:"")+"        </coral-select>\n\n"+(null!=(f=c.unless.call(h,null!=b?b.type:b,{name:"unless",hash:{},fn:a.program(14,e,0),inverse:a.noop,data:e}))?f:"")+"      </div>\n\n"+(null!=(f=(c.equals||b&&b.equals||i).call(h,null!=b?b.type:b,"revenue",{name:"equals",hash:{},fn:a.program(16,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||i).call(h,null!=b?b.type:b,"engagement",{name:"equals",hash:{},fn:a.program(21,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||i).call(h,null!=b?b.type:b,"conversion",{name:"equals",hash:{},fn:a.program(31,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=c.if.call(h,null!=b?b.revenueType:b,{name:"if",hash:{},fn:a.program(50,e,0),inverse:a.noop,data:e}))?f:"")+'\n      <div class="advanced-metric-action-placeholder">\n'+(null!=(f=a.invokePartial(d.AdvancedMetricActionType,b,{name:"AdvancedMetricActionType",data:e,indent:"        ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"      </div>\n\n    </coral-accordion-item-content>\n  </coral-accordion-item>\n</coral-accordion>"},usePartial:!0,useData:!0}),this.TSDK.UI.Templates.MetricsComponent.MetricsItemA4T=Handlebars.template({1:function(a,b,c,d,e){return'            <coral-selectlist-item value="rename" class="rename-metric">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Rename",{name:"i18n",hash:{},data:e}))+"</coral-selectlist-item>\n"},3:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'            <coral-select-item value="conversion" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.type:b,"conversion",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Conversion",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},4:function(a,b,c,d,e){return"selected"},6:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'            <coral-select-item value="analytics" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.type:b,"analytics",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Use an Analytics metric",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},8:function(a,b,c,d,e){return'          <coral-tooltip variant="inspect" placement="right" class="goalnote" target="#metric-selector" interaction="off" open>\n            '+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"This metric will determine the success of your activity.",{name:"i18n",hash:{},data:e}))+"\n          </coral-tooltip>\n"},10:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return'        <div class="grey sub-heading">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(i,"The following are metrics available from Analytics:",{name:"i18n",hash:{},data:e}))+'</div>\n        <div class="row fixed">\n'+(null!=(h=c.if.call(i,null!=b?b.reportSuite:b,{name:"if",hash:{},fn:a.program(11,e,0,f,g),inverse:a.program(16,e,0,f,g),data:e}))?h:"")+"        </div>\n"},11:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return'          <coral-select class="select-analytics-metric width-100p-imp" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(i,"Select Metric",{name:"i18n",hash:{},data:e}))+'">\n'+(null!=(h=c.each.call(i,null!=b?b.analyticsMetrics:b,{name:"each",hash:{},fn:a.program(12,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'          </coral-select>\n          <coral-wait class="left middle loading '+(null!=(h=c.if.call(i,null!=b?b.analyticsMetrics:b,{name:"if",hash:{},fn:a.program(14,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'"></coral-wait>\n'},12:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'              <coral-select-item value="'+m((i=null!=(i=c.id||(null!=b?b.id:b))?i:k,typeof i===l?i.call(j,{name:"id",hash:{},data:e}):i))+'" data-source="'+m((i=null!=(i=c.source||(null!=b?b.source:b))?i:k,typeof i===l?i.call(j,{name:"source",hash:{},data:e}):i))+'" data-support="'+m((i=null!=(i=c.support||(null!=b?b.support:b))?i:k,typeof i===l?i.call(j,{name:"support",hash:{},data:e}):i))+'" '+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=b?b.id:b,null!=g[1]?g[1].analyticsMetricId:g[1],{name:"equals",hash:{},fn:a.program(4,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+"</coral-select-item>\n"},14:function(a,b,c,d,e){return"hidden"},16:function(a,b,c,d,e){return'          <div class="rs-alert">\n            <coral-icon icon="alert"></coral-icon>\n            <span>'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Please select a report suite to see the metrics available from Analytics.",{name:"i18n",hash:{},data:e}))+'</span>\n          </div>\n          <coral-wait class="left middle loading hidden"></coral-wait>\n'},18:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'        <div class="row fixed">\n          <div class="grey sub-heading padding-t-0-6">'+i((c.i18n||b&&b.i18n||h).call(g,"What action was taken by your audience to indicate your goal has been reached?",{name:"i18n",hash:{},data:e}))+'</div>\n          <coral-select class="select-action width-100p-imp" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select action",{name:"i18n",hash:{},data:e}))+'">\n            <coral-select-item value="pageView" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"pageView",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Viewed a page",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.ACTION_VIEWED_MBOX_ENABLED:f,{name:"if",hash:{},fn:a.program(19,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.ACTION_CLICK_MBOX_ENABLED:f,{name:"if",hash:{},fn:a.program(21,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.CLICK_TRACKING_ENABLED:f,{name:"if",hash:{},fn:a.program(23,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.CLICK_RECOMMENDATION_ENABLED:f,{name:"if",hash:{},fn:a.program(25,e,0),inverse:a.noop,data:e}))?f:"")+"          </coral-select>\n        </div>\n\n        "+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"pageView",{name:"equals",hash:{},fn:a.program(27,e,0),inverse:a.noop,data:e}))?f:"")+"\n        "+(null!=(f=(c.in||b&&b.in||h).call(g,null!=b?b.action:b,"mboxView","mboxClick",{name:"in",hash:{},fn:a.program(29,e,0),inverse:a.noop,data:e}))?f:"")+"\n        "+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"elementClick",{name:"equals",hash:{},fn:a.program(31,e,0),inverse:a.noop,data:e}))?f:"")+"\n"},19:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="mboxView" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"mboxView",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Viewed an mbox",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},21:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="mboxClick" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"mboxClick",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">\n                "+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Clicked on mbox",{name:"i18n",hash:{},data:e}))+"\n              </coral-select-item>\n"},23:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="elementClick" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"elementClick",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">\n                "+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Clicked an element",{name:"i18n",hash:{},data:e}))+"\n              </coral-select-item>\n"},25:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'              <coral-select-item value="clickRecommendation" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.action:b,"clickRecommendation",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">\n                "+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Clicked on recommendation",{name:"i18n",hash:{},data:e}))+"\n              </coral-select-item>\n"},27:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.MetricsItemPageView,b,{name:"MetricsItemPageView",data:e,helpers:c,partials:d,decorators:a.decorators}))?f:""},29:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.MetricsItemMboxFields,b,{name:"MetricsItemMboxFields",data:e,helpers:c,partials:d,decorators:a.decorators}))?f:""},31:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.MetricsItemElementClick,b,{name:"MetricsItemElementClick",data:e,helpers:c,partials:d,decorators:a.decorators}))?f:""},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'<coral-accordion class="metric">\n  <coral-accordion-item selected class="metric-item">\n    <input is="coral-textfield" name="metricname" maxlength="25" class="metric-name-input" value="'+m((i=null!=(i=c.title||(null!=b?b.title:b))?i:k,typeof i===l?i.call(j,{name:"title",hash:{},data:e}):i))+'">\n    <button type="button" is="coral-button" variant="minimal" icon="moreVertical" iconSize="S" class="context-options-button">\n    </button>\n    <coral-popover target="_prev" class="context-menu" alignmy="left top" alignat="left bottom">\n      <coral-popover-content>\n        <coral-selectlist class="container-relative context-menu-option">\n'+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=b?b.type:b,"conversion",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'          <coral-selectlist-item value="clear" class="clear-metric-fields">'+m((c.i18n||b&&b.i18n||k).call(j,"Clear all fields",{name:"i18n",hash:{},data:e}))+'</coral-selectlist-item>\n        </coral-selectlist>\n      </coral-popover-content>\n    </coral-popover>\n\n    <coral-accordion-item-label class="metric-header display-inline-block width-90p">\n      <span class="metric-name-label uppercase">'+m((i=null!=(i=c.title||(null!=b?b.title:b))?i:k,typeof i===l?i.call(j,{name:"title",hash:{},data:e}):i))+'</span>\n      <div class="metric-summary font-normal"></div>\n    </coral-accordion-item-label>\n\n    <coral-accordion-item-content>\n      <div class="row fixed">\n        <div class="grey sub-heading">'+m((c.i18n||b&&b.i18n||k).call(j,"What do you want to measure with this activity?",{name:"i18n",hash:{},data:e}))+'</div>\n\n        <coral-select class="select-metric-type width-100p-imp" id="metric-selector" placeholder="'+m((c.i18n||b&&b.i18n||k).call(j,"Select success metric",{name:"i18n",hash:{},data:e}))+'">\n'+(null!=(h=c.if.call(j,null!=(h=null!=b?b.config:b)?h.CONVERSION_ENABLED:h,{name:"if",hash:{},fn:a.program(3,e,0,f,g),inverse:a.noop,data:e}))?h:"")+(null!=(h=c.if.call(j,null!=(h=null!=b?b.config:b)?h.ANALYTICS_METRIC_ENABLED:h,{name:"if",hash:{},fn:a.program(6,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"        </coral-select>\n\n"+(null!=(h=c.unless.call(j,null!=b?b.type:b,{name:"unless",hash:{},fn:a.program(8,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"      </div>\n\n"+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=b?b.type:b,"analytics",{name:"equals",hash:{},fn:a.program(10,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=b?b.type:b,"conversion",{name:"equals",hash:{},fn:a.program(18,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"    </coral-accordion-item-content>\n  </coral-accordion-item>\n</coral-accordion>\n"},usePartial:!0,useData:!0,useDepths:!0}),this.TSDK.UI.Templates.MetricsComponent.MetricsItemSummary=Handlebars.template({1:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j=a.escapeExpression;return'  <span class="font-italic">'+j((c.i18n||b&&b.i18n||i).call(h,"Metric:",{name:"i18n",hash:{},data:e}))+'&nbsp;</span>\n  <span class="color-3287d2-imp">'+j((g=null!=(g=c.type||(null!=b?b.type:b))?g:i,"function"==typeof g?g.call(h,{name:"type",hash:{},data:e}):g))+"</span>\n\n"+(null!=(f=c.if.call(h,null!=b?b.action:b,{name:"if",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")},2:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j=a.escapeExpression;return'    <span class="font-italic">&nbsp;'+j((c.i18n||b&&b.i18n||i).call(h,"Action:",{name:"i18n",hash:{},data:e}))+'&nbsp;</span>\n    <span class="color-3287d2-imp">'+j((g=null!=(g=c.action||(null!=b?b.action:b))?g:i,"function"==typeof g?g.call(h,{name:"action",hash:{},data:e}):g))+"</span>\n\n"+(null!=(f=c.if.call(h,null!=b?b.terms:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")},3:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'      <span class="font-italic">\n        &nbsp;'+(null!=(f=c.if.call(g,null!=b?b.constraint:b,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.program(7,e,0),data:e}))?f:"")+'&nbsp;\n      </span><span class="color-3287d2-imp first-term">'+a.escapeExpression(a.lambda(null!=(f=null!=b?b.terms:b)?f[0]:f,b))+"</span>\n\n"+(null!=(f=(c.gt||b&&b.gt||c.helperMissing).call(g,null!=(f=null!=b?b.terms:b)?f.length:f,1,{name:"gt",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")},4:function(a,b,c,d,e){var f;return"\n          "+(null!=(f=(c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"{0}:",{name:"i18n",hash:{comment:"{0} is either mbox or URL. May need to add space before colon for some languages."},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+"\n"},5:function(a,b,c,d,e){var f;return a.escapeExpression((f=null!=(f=c.constraint||(null!=b?b.constraint:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"constraint",hash:{},data:e}):f))},7:function(a,b,c,d,e){return"          "+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"term:",{name:"i18n",hash:{},data:e}))+"\n        "},9:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'        <span class="color-3287d2-imp">&nbsp;&&nbsp;'+i((c.subtract||b&&b.subtract||h).call(g,null!=(f=null!=b?b.terms:b)?f.length:f,1,{name:"subtract",hash:{},data:e}))+"&nbsp;"+i((c.i18n||b&&b.i18n||h).call(g,"other",{name:"i18n",hash:{},data:e
}))+"</span>\n"},11:function(a,b,c,d,e){var f;return'  <span class="font-bold uppercase">'+a.escapeExpression((f=null!=(f=c.title||(null!=b?b.title:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"title",hash:{},data:e}):f))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.type:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(11,e,0),data:e}))?f:""},useData:!0}),this.TSDK.UI.Templates.Goals.Goals=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{},j=c.helperMissing,k=a.escapeExpression;return'  <div class="reporting-data">\n'+(null!=(h=c.unless.call(i,null!=(h=null!=g[1]?g[1].config:g[1])?h.SHOW_ONLY_ANALYTICS:h,{name:"unless",hash:{},fn:a.program(2,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'\n    <div class="row fixed reporting-company-suite-container '+(null!=(h=(c.notEquals||b&&b.notEquals||j).call(i,null!=b?b.reportingSolution:b,"analytics",{name:"notEquals",hash:{},fn:a.program(5,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'">\n      <div class="padding-r-1 cell sc-company-container">\n        <div class="grey sub-heading">'+k((c.i18n||b&&b.i18n||j).call(i,"Company",{name:"i18n",hash:{},data:e}))+'</div>\n        <div class="sc-company-picker-placeholder"></div>\n      </div>\n      <div class="cell report-suite-container">\n        <div class="grey sub-heading">'+k((c.i18n||b&&b.i18n||j).call(i,"Report Suite",{name:"i18n",hash:{},data:e}))+'</div>\n        <div class="report-suite-picker-placeholder"></div>\n      </div>\n    </div>\n\n    <div class="divider-container">\n      <div class="divider-line"></div>\n    </div>\n  </div>\n'},2:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'      <div class="row fixed reporting-source">\n        <div class="grey sub-heading">'+i((c.i18n||b&&b.i18n||h).call(g,"Reporting Source",{name:"i18n",hash:{},data:e}))+'</div>\n        <coral-select class="reporting-solution">\n          <coral-select-item value="target" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.reportingSolution:b,"target",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">\n            "+i((c.i18n||b&&b.i18n||h).call(g,"Adobe Target",{name:"i18n",hash:{},data:e}))+'\n          </coral-select-item>\n          <coral-select-item value="analytics" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.reportingSolution:b,"analytics",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+">\n            "+i((c.i18n||b&&b.i18n||h).call(g,"Adobe Analytics",{name:"i18n",hash:{},data:e}))+"\n          </coral-select-item>\n        </coral-select>\n      </div>\n"},3:function(a,b,c,d,e){return"selected"},5:function(a,b,c,d,e){return"hidden"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h;return(null!=(h=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.isAnalyticsSupported:b,{name:"if",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'\n<div class="tsdk-metrics"></div>'},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.Goals.ReportSuitePicker=Handlebars.template({1:function(a,b,c,d,e){return"  <coral-wait></coral-wait>\n"},3:function(a,b,c,d,e,f,g){var h;return null!=(h=(c.equals||b&&b.equals||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=(h=null!=b?b.reportSuites:b)?h.length:h,0,{name:"equals",hash:{},fn:a.program(4,e,0,f,g),inverse:a.program(6,e,0,f,g),data:e}))?h:""},4:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'    <div class="rs-alert">\n      <coral-icon icon="alert"></coral-icon>\n      <span class="alert-text">'+h((c.i18n||b&&b.i18n||g).call(f,"There are no Target-enabled report suites available.",{name:"i18n",hash:{},data:e}))+'&nbsp;<a href="https://marketing.adobe.com/resources/help/en_US/target/a4t/">'+h((c.i18n||b&&b.i18n||g).call(f,"Learn more.",{name:"i18n",hash:{},data:e}))+"</a></span>\n    </div>\n"},6:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return'    <coral-select class="report-suite-picker" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(i,"Select Report Suite",{name:"i18n",hash:{},data:e}))+'">\n'+(null!=(h=c.each.call(i,null!=b?b.reportSuites:b,{name:"each",hash:{},fn:a.program(7,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"    </coral-select>\n"},7:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'        <coral-select-item value="'+m((i=null!=(i=c.key||e&&e.key)?i:k,typeof i===l?i.call(j,{name:"key",hash:{},data:e}):i))+'" '+(null!=(h=(c.equals||b&&b.equals||k).call(j,e&&e.key,null!=g[1]?g[1].selectedReportSuite:g[1],{name:"equals",hash:{},fn:a.program(8,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+"</coral-select-item>\n"},8:function(a,b,c,d,e){return"selected"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h;return null!=(h=(c.equals||b&&b.equals||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.reportSuites:b,void 0,{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.program(3,e,0,f,g),data:e}))?h:""},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.Goals.SCCompanyPicker=Handlebars.template({1:function(a,b,c,d,e){return"  <coral-wait></coral-wait>\n"},3:function(a,b,c,d,e,f,g){var h;return null!=(h=(c.equals||b&&b.equals||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=(h=null!=b?b.scCompanies:b)?h.length:h,0,{name:"equals",hash:{},fn:a.program(4,e,0,f,g),inverse:a.program(6,e,0,f,g),data:e}))?h:""},4:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'    <div class="sc-alert">\n      <coral-icon icon="alert"></coral-icon>\n      <span class="alert-text">'+h((c.i18n||b&&b.i18n||g).call(f,"There are no Target-enabled companies available.",{name:"i18n",hash:{},data:e}))+'&nbsp;<a href="https://marketing.adobe.com/resources/help/en_US/target/a4t/">'+h((c.i18n||b&&b.i18n||g).call(f,"Learn more.",{name:"i18n",hash:{},data:e}))+"</a></span>\n    </div>\n"},6:function(a,b,c,d,e,f,g){var h;return'    <coral-select class="sc-company-picker">\n'+(null!=(h=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.scCompanies:b,{name:"each",hash:{},fn:a.program(7,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"    </coral-select>\n"},7:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'        <coral-select-item value="'+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+'" '+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=b?b.name:b,null!=g[1]?g[1].selectedCompany:g[1],{name:"equals",hash:{},fn:a.program(8,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+"</coral-select-item>\n"},8:function(a,b,c,d,e){return"selected"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h;return(null!=(h=(c.equals||b&&b.equals||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.scCompanies:b,void 0,{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.program(3,e,0,f,g),data:e}))?h:"")+"\n"},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.GoalsAndSettings.GoalsAndSettings=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div class="tsdk-goals"></div>'},useData:!0}),this.TSDK.UI.Templates.DiagramComponent.DiagramAB=Handlebars.template({1:function(a,b,c,d,e){var f;return null!=(f=c.unless.call(null!=b?b:a.nullContext||{},e&&e.index,{name:"unless",hash:{},fn:a.program(2,e,0),inverse:a.program(4,e,0),data:e}))?f:""},2:function(a,b,c,d,e){var f;return'          <div class="diagram-cell width-50p">\n            <div class="container-relative width-100p display-table">\n              <div class="diagram-cell">\n                <div class="lineBottom line-cell-top">&nbsp;</div>\n                <div class="lineTop line-cell-bottom lineLeft"><div class="cell middle"></div></div>\n              </div>\n              <div class="diagram-cell experience-column">\n'+(null!=(f=a.invokePartial(d.ExperienceAB,b,{name:"ExperienceAB",data:e,indent:"                ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"              </div>\n            </div>\n          </div> \x3c!-- experiencesCol --\x3e\n        </div>\n"},4:function(a,b,c,d,e){var f,g;return'          <div class="diagram-row" data-index="'+a.escapeExpression((g=null!=(g=c.index||e&&e.index)?g:c.helperMissing,"function"==typeof g?g.call(null!=b?b:a.nullContext||{},{name:"index",hash:{},data:e}):g))+'">\n            <div class="diagram-cell width-50p">\n              <div class="display-table width-100p">\n                <div class="diagram-cell audience-column">&nbsp;</div>\n                <div class="diagram-cell">&nbsp;</div>\n              </div>\n            </div>\n            <div class="diagram-cell width-50p">\n              <div class="container-relative width-100p display-table">\n                <div class="diagram-cell">\n                  <div class="lineBottom line-cell-top lineLeft">&nbsp;</div>\n                  <div class="lineTop line-cell-bottom lineLeft">&nbsp;</div>\n                </div>\n                <div class="diagram-cell experience-column">\n'+(null!=(f=a.invokePartial(d.ExperienceAB,b,{name:"ExperienceAB",data:e,indent:"                  ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"                </div>\n              </div>\n            </div> \x3c!-- experiencesCol --\x3e\n          </div>\n"},6:function(a,b,c,d,e){var f;return'        <div class="diagram-cell width-50p">\n            <div class="container-relative width-100p display-table">\n              <div class="diagram-cell">\n                <div class="lineBottom line-cell-top">&nbsp;</div>\n                <div class="lineTop line-cell-bottom">&nbsp;</div>\n              </div>\n              <div class="diagram-cell experience-column">\n'+(null!=(f=a.invokePartial(d.ExperienceAB,b,{name:"ExperienceAB",data:e,indent:"                ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"              </div>\n            </div>\n          </div> \x3c!-- experiencesCol --\x3e\n        </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<section class="tsdk-diagram diagram-ab display-table">\n  <div class="height-1-5 display-table-row">\n    <div class="diagram-cell width-50p">\n      <span class="section-title">'+i((c.i18n||b&&b.i18n||h).call(g,"AUDIENCE",{name:"i18n",hash:{},data:e}))+'</span>\n    </div>\n    <div class="diagram-cell width-50p">\n      <div class="container-relative width-100p display-table">\n        <div class="diagram-cell">&nbsp;</div>\n        <div class="diagram-cell padding-0 experience-column">\n          <div class="visitor-box placeholder">&nbsp;</div>\n          <span class="section-title">'+i((c.i18n||b&&b.i18n||h).call(g,"EXPERIENCES",{name:"i18n",hash:{},data:e}))+'</span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="display-table-row-group">\n    <div class="diagram-row" data-index="0">\n      <div class="diagram-cell width-50p">\n        <div class="display-table width-100p">\n          <div class="diagram-cell audience-column">\n'+(null!=(f=a.invokePartial(d.AudienceAB,null!=b?b.audience:b,{name:"AudienceAB",data:e,indent:"            ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+'          </div>\n          <div class="diagram-cell">\n            <div class="lineBottom line-cell-top">&nbsp;</div>\n            <div class="lineTop">&nbsp;</div>\n          </div>\n        </div>\n      </div> \x3c!-- audiencesCol --\x3e\n\n'+(null!=(f=c.each.call(g,null!=b?b.experiences:b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.program(6,e,0),data:e}))?f:"")+"  </div>\n</section>\n"},usePartial:!0,useData:!0}),this.TSDK.UI.Templates.DiagramComponent.DiagramXT=Handlebars.template({1:function(a,b,c,d,e){var f,g;return'      <div class="diagram-row" data-index="'+a.escapeExpression((g=null!=(g=c.index||e&&e.index)?g:c.helperMissing,"function"==typeof g?g.call(null!=b?b:a.nullContext||{},{name:"index",hash:{},data:e}):g))+'">\n        <div class="diagram-cell width-50p">\n          <div class="display-table width-100p">\n            <div class="diagram-cell audience-column">\n'+(null!=(f=a.invokePartial(d.AudienceAB,null!=b?b.audience:b,{name:"AudienceAB",data:e,indent:"              ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+'            </div>\n            <div class="diagram-cell">\n              <div class="lineBottom line-cell-top">&nbsp;</div>\n              <div class="lineTop">&nbsp;</div>\n            </div>\n          </div>\n        </div> \x3c!-- audiencesCol --\x3e\n\n        <div class="diagram-cell width-50p">\n          <div class="container-relative width-100p display-table">\n            <div class="diagram-cell">\n              <div class="lineBottom line-cell-top">&nbsp;</div>\n              <div class="lineTop"><div class="cell middle"></div></div>\n            </div>\n            <div class="diagram-cell experience-column">\n'+(null!=(f=a.invokePartial(d.ExperienceXT,b,{name:"ExperienceXT",data:e,indent:"              ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"            </div>\n          </div>\n        </div> \x3c!-- experiencesCol --\x3e\n      </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<section class="tsdk-diagram diagram-xt display-table">\n  <div class="height-1-5 display-table-row">\n    <div class="diagram-cell width-50p">\n      <span class="section-title">'+i((c.i18n||b&&b.i18n||h).call(g,"AUDIENCES",{name:"i18n",hash:{},data:e}))+'</span>\n    </div>\n    <div class="diagram-cell width-50p">\n      <div class="container-relative width-100p display-table">\n        <div class="diagram-cell">&nbsp;</div>\n        <div class="diagram-cell padding-0 experience-column">\n          <span class="section-title">'+i((c.i18n||b&&b.i18n||h).call(g,"EXPERIENCES",{name:"i18n",hash:{},data:e}))+'</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="display-table-row-group">\n'+(null!=(f=c.each.call(g,null!=b?b.experiences:b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"  </div>\n</section>\n\n"},usePartial:!0,useData:!0}),this.TSDK.UI.Templates.ExperienceRailComponent.ExperienceRailAB=Handlebars.template({1:function(a,b,c,d,e){return"right"},3:function(a,b,c,d,e){return"left"},5:function(a,b,c,d,e){return"chevronRight"},7:function(a,b,c,d,e){return"chevronLeft"},9:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'      <div class="rail-row experience-row '+(null!=(h=(c.equals||b&&b.equals||k).call(j,e&&e.index,null!=(h=null!=g[1]?g[1].config:g[1])?h.activeIndex:h,{name:"equals",hash:{},fn:a.program(10,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'"\n           data-index="'+m((i=null!=(i=c.index||e&&e.index)?i:k,typeof i===l?i.call(j,{name:"index",hash:{},data:e}):i))+'" title="'+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+'">\n        <div class="rail-cell label-area">\n          <button type="button" is="coral-button" variant="minimal" icon="triangleDown" iconsize="XS" class="menu-button"></button>\n          <span class="rail-label">'+m((c.getExperienceShortName||b&&b.getExperienceShortName||k).call(j,null!=b?b.name:b,{name:"getExperienceShortName",hash:{},data:e}))+'</span>\n        </div>\n        <div class="rail-cell collapsible-area">\n          <div class="experience-name">'+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+"</div>\n        </div>\n      </div>\n"},10:function(a,b,c,d,e){return"active"},12:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'      <div class="rail-row add-experience">\n        <div class="rail-cell label-area">\n          <button type="button" is="coral-button" variant="minimal" icon="add" iconsize="XS" title="'+h((c.i18n||b&&b.i18n||g).call(f,"Add Experience",{name:"i18n",hash:{},data:e}))+'"></button>\n        </div>\n        <div class="rail-cell collapsible-area">\n          <span>'+h((c.i18n||b&&b.i18n||g).call(f,"Add Experience",{name:"i18n",hash:{},data:e}))+"</span>\n        </div>\n      </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=a.escapeExpression,j=null!=b?b:a.nullContext||{},k=c.helperMissing;return'<div class="tsdk-experience-rail tsdk-experience-rail-ab"\n     data-mode="'+i(a.lambda(null!=(h=null!=b?b.config:b)?h.mode:h,b))+'" data-placement="'+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=(h=null!=b?b.config:b)?h.placement:h,"right",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.program(3,e,0,f,g),data:e}))?h:"")+'">\n  <div class="rail-label-background"></div>\n  <div class="rail-rows-container rail-header-row">\n    <div class="rail-row">\n      <div class="rail-cell label-area">\n        <button type="button" is="coral-button" variant="minimal" iconsize="XS"\n                icon="'+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=(h=null!=b?b.config:b)?h.placement:h,"right",{name:"equals",hash:{},fn:a.program(5,e,0,f,g),inverse:a.program(7,e,0,f,g),data:e}))?h:"")+'"\n                class="collapse-btn hidden-in-collapsed-mode hidden-in-expanding-mode" title="'+i((c.i18n||b&&b.i18n||k).call(j,"Collapse",{name:"i18n",hash:{},data:e}))+'"></button>\n        <button type="button" is="coral-button" variant="minimal" iconsize="XS"\n                icon="'+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=(h=null!=b?b.config:b)?h.placement:h,"right",{name:"equals",hash:{},fn:a.program(7,e,0,f,g),inverse:a.program(5,e,0,f,g),data:e}))?h:"")+'"\n                class="expand-btn hidden-in-expanded-mode hidden-in-collapsing-mode" title="'+i((c.i18n||b&&b.i18n||k).call(j,"Expand",{name:"i18n",hash:{},data:e}))+'"></button>\n      </div>\n      <div class="rail-cell collapsible-area">\n        <span><strong>'+i((c.i18n||b&&b.i18n||k).call(j,"Experiences",{name:"i18n",hash:{},data:e}))+'</strong></span>\n      </div>\n    </div>\n  </div>\n\n  <div class="rail-rows-container rail-body-rows">\n'+(null!=(h=c.each.call(j,null!=b?b.experiences:b,{name:"each",hash:{},fn:a.program(9,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=(c.lt||b&&b.lt||k).call(j,null!=(h=null!=b?b.experiences:b)?h.length:h,null!=(h=null!=b?b.config:b)?h.maxCount:h,{name:"lt",hash:{},fn:a.program(12,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"  </div>\n</div>"},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.ExperienceRailComponent.ExperienceRailActionMenu=Handlebars.template({1:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'  <coral-selectlist class="action-menu">\n'+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.actions:b,"edit",{name:"hasValue",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.actions:b,"rename",{name:"hasValue",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.actions:b,"duplicate",{name:"hasValue",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.actions:b,"delete",{name:"hasValue",hash:{},fn:a.program(11,e,0),inverse:a.noop,data:e}))?f:"")+"  </coral-selectlist>\n"},2:function(a,b,c,d,e){return'      <coral-selectlist-item value="edit">\n        <coral-icon icon="edit"></coral-icon>\n        <span>'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Edit Audience",{name:"i18n",hash:{},data:e}))+"</span>\n      </coral-selectlist-item>\n"},4:function(a,b,c,d,e){var f;return'      <coral-selectlist-item value="rename">\n        <coral-icon icon="text"></coral-icon>\n        <span>'+(null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.experienceOnly:b,{name:"if",hash:{},fn:a.program(5,e,0),inverse:a.program(7,e,0),data:e}))?f:"")+"</span>\n      </coral-selectlist-item>\n"},5:function(a,b,c,d,e){return a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Rename",{name:"i18n",hash:{},data:e}))},7:function(a,b,c,d,e){return a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Rename Experience",{name:"i18n",hash:{},data:e}))},9:function(a,b,c,d,e){return'      <coral-selectlist-item value="duplicate">\n        <coral-icon icon="copy"></coral-icon>\n        <span>'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Duplicate",{name:"i18n",hash:{},data:e}))+"</span>\n      </coral-selectlist-item>\n"},11:function(a,b,c,d,e){return'      <coral-selectlist-item value="delete">\n        <coral-icon icon="delete"></coral-icon>\n        <span>'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Delete",{name:"i18n",hash:{},data:e}))+"</span>\n      </coral-selectlist-item>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=(f=null!=b?b.actions:b)?f.length:f,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:""},useData:!0}),this.TSDK.UI.Templates.ExperienceRailComponent.ExperienceRailRenamePopover=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="rename-popover">\n  <div><strong>'+i((c.i18n||b&&b.i18n||h).call(g,"Rename Experience",{name:"i18n",hash:{},data:e}))+'</strong></div>\n  <input is="coral-textfield" class="experience-title-input" value="'+i((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,"function"==typeof f?f.call(g,{name:"name",hash:{},data:e}):f))+'"/>\n  <div class="align-r">\n    <button type="button" is="coral-button" variant="minimal" iconsize="S" icon="close" class="rename-cancel-button" title="'+i((c.i18n||b&&b.i18n||h).call(g,"Cancel",{name:"i18n",hash:{},data:e}))+'"></button>\n    <button type="button" is="coral-button" variant="minimal" iconsize="S" icon="check" class="rename-save-button" title="'+i((c.i18n||b&&b.i18n||h).call(g,"Save",{name:"i18n",hash:{},data:e}))+'"></button>\n  </div>\n</div>'},useData:!0}),this.TSDK.UI.Templates.ExperienceRailComponent.ExperienceRailXT=Handlebars.template({1:function(a,b,c,d,e){return"right"},3:function(a,b,c,d,e){return"left"},5:function(a,b,c,d,e){return"chevronRight"},7:function(a,b,c,d,e){return"chevronLeft"},9:function(a,b,c,d,e,f,g){var h;return null!=(h=(c.ifAudienceValid||b&&b.ifAudienceValid||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.audience:b,{name:"ifAudienceValid",hash:{},fn:a.program(10,e,0,f,g),inverse:a.program(13,e,0,f,g),data:e}))?h:""},10:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression,n=a.lambda;return'        <div class="rail-row experience-row '+(null!=(h=(c.equals||b&&b.equals||k).call(j,e&&e.index,null!=(h=null!=g[2]?g[2].config:g[2])?h.activeIndex:h,{name:"equals",hash:{},fn:a.program(11,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'"\n             data-index="'+m((i=null!=(i=c.index||e&&e.index)?i:k,typeof i===l?i.call(j,{name:"index",hash:{},data:e}):i))+'" title="'+m(n(null!=(h=null!=b?b.audience:b)?h.name:h,b))+" - "+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+'">\n          <div class="rail-cell label-area">\n            <button type="button" is="coral-button" variant="minimal" icon="triangleDown" iconsize="XS" class="menu-button"></button>\n            <span class="rail-label">'+m((c.getExperienceShortName||b&&b.getExperienceShortName||k).call(j,null!=b?b.name:b,{name:"getExperienceShortName",hash:{},data:e}))+'</span>\n          </div>\n          <div class="rail-cell collapsible-area">\n            <div class="audience-name">'+m(n(null!=(h=null!=b?b.audience:b)?h.name:h,b))+'</div>\n            <div class="experience-name">'+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+"</div>\n          </div>\n        </div>\n"},11:function(a,b,c,d,e){return"active"},13:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l=a.escapeExpression;return'        <div class="rail-row experience-row no-context '+(null!=(h=(c.equals||b&&b.equals||k).call(j,e&&e.index,null!=(h=null!=g[2]?g[2].config:g[2])?h.activeIndex:h,{name:"equals",hash:{},fn:a.program(11,e,0,f,g),inverse:a.noop,data:e}))?h:"")+' add-audience"\n             data-index="'+l((i=null!=(i=c.index||e&&e.index)?i:k,"function"==typeof i?i.call(j,{name:"index",hash:{},data:e}):i))+'">\n          <div class="rail-cell label-area">\n            <button type="button" is="coral-button" variant="minimal" icon="add" iconsize="XS" title="'+l((c.i18n||b&&b.i18n||k).call(j,"Add Audience",{name:"i18n",hash:{},data:e}))+'"></button>\n          </div>\n          <div class="rail-cell collapsible-area">\n            <span>'+l((c.i18n||b&&b.i18n||k).call(j,"Add Audience",{name:"i18n",hash:{},data:e}))+"</span>\n          </div>\n        </div>\n"},15:function(a,b,c,d,e){var f;return null!=(f=(c.unlessSingleExperienceWithNoAudience||b&&b.unlessSingleExperienceWithNoAudience||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.experiences:b,{name:"unlessSingleExperienceWithNoAudience",hash:{},fn:a.program(16,e,0),inverse:a.noop,data:e}))?f:""},16:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'        <div class="rail-row add-experience">\n          <div class="rail-cell label-area">\n            <button type="button" is="coral-button" variant="minimal" icon="add" iconsize="XS"\n                    title="'+h((c.i18n||b&&b.i18n||g).call(f,"Add Experience Targeting",{name:"i18n",hash:{},data:e}))+'"></button>\n          </div>\n          <div class="rail-cell collapsible-area">\n            <span>'+h((c.i18n||b&&b.i18n||g).call(f,"Add Experience Targeting",{name:"i18n",hash:{},data:e}))+"</span>\n          </div>\n        </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=a.escapeExpression,j=null!=b?b:a.nullContext||{},k=c.helperMissing;return'<div class="tsdk-experience-rail tsdk-experience-rail-xt"\n     data-mode="'+i(a.lambda(null!=(h=null!=b?b.config:b)?h.mode:h,b))+'" data-placement="'+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=(h=null!=b?b.config:b)?h.placement:h,"right",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.program(3,e,0,f,g),data:e}))?h:"")+'">\n  <div class="rail-label-background"></div>\n  <div class="rail-rows-container">\n    <div class="rail-row">\n      <div class="rail-cell label-area">\n        <button type="button" is="coral-button" variant="minimal" iconsize="XS"\n                icon="'+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=(h=null!=b?b.config:b)?h.placement:h,"right",{name:"equals",hash:{},fn:a.program(5,e,0,f,g),inverse:a.program(7,e,0,f,g),data:e}))?h:"")+'"\n                class="collapse-btn hidden-in-collapsed-mode hidden-in-expanding-mode" title="'+i((c.i18n||b&&b.i18n||k).call(j,"Collapse",{name:"i18n",hash:{},data:e}))+'"></button>\n        <button type="button" is="coral-button" variant="minimal" iconsize="XS"\n                icon="'+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=(h=null!=b?b.config:b)?h.placement:h,"right",{name:"equals",hash:{},fn:a.program(7,e,0,f,g),inverse:a.program(5,e,0,f,g),data:e}))?h:"")+'"\n                class="expand-btn hidden-in-expanded-mode hidden-in-collapsing-mode" title="'+i((c.i18n||b&&b.i18n||k).call(j,"Expand",{name:"i18n",hash:{},data:e}))+'"></button>\n      </div>\n      <div class="rail-cell collapsible-area">\n        <span><strong>'+i((c.i18n||b&&b.i18n||k).call(j,"Audiences",{name:"i18n",hash:{},data:e}))+"</strong></span>\n      </div>\n    </div>\n\n"+(null!=(h=c.each.call(j,null!=b?b.experiences:b,{name:"each",hash:{},fn:a.program(9,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=(c.lt||b&&b.lt||k).call(j,null!=(h=null!=b?b.experiences:b)?h.length:h,null!=(h=null!=b?b.config:b)?h.maxCount:h,{name:"lt",hash:{},fn:a.program(15,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"  </div>\n</div>"},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.AudienceWorkflow.AudienceRuleContainer=Handlebars.template({1:function(a,b,c,d,e){return'  <div class="display-table-row">\n    <div class="rule-label-column display-table-cell"></div>\n    <div class="rule-section-column rules-operator-cell display-table-cell">\n      <span class="rules-operator">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"And",{name:"i18n",hash:{},data:e}))+"</span>\n    </div>\n  </div>\n"},3:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'        <div class="rule-section-label margin-t-1-5">'+h((c.i18n||b&&b.i18n||g).call(f,"When",{name:"i18n",hash:{},data:e}))+'</div>\n        <div class="rule-section">\n          <div class="rule-placeholder"></div>\n          <div class="rule-actions">\n            <button type="button" class="rule-delete-button" is="coral-button" variant="minimal" icon="delete" iconsize="S"\n              title="'+h((c.i18n||b&&b.i18n||g).call(f,"Delete",{name:"i18n",hash:{},data:e}))+'"></button>\n            <button type="button" class="rule-copy-button" is="coral-button" variant="minimal" icon="copy" iconsize="S"\n              title="'+h((c.i18n||b&&b.i18n||g).call(f,"Copy",{name:"i18n",hash:{},data:e}))+'"></button>\n            <button type="button" class="rule-done-button" is="coral-button" variant="minimal" icon="checkCircle" iconsize="S"\n              title="'+h((c.i18n||b&&b.i18n||g).call(f,"Done",{name:"i18n",hash:{},data:e}))+'"></button>\n          </div>\n        </div>\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return(null!=(f=(c.notEquals||b&&b.notEquals||h).call(g,null!=b?b.index:b,0,{name:"notEquals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'<div class="display-table-row">\n  <div class="rule-heading display-table-cell rule-label-column">\n    <strong>'+i((c.i18n||b&&b.i18n||h).call(g,"Rule",{name:"i18n",hash:{},data:e}))+"&nbsp;#"+i((c.add||b&&b.add||h).call(g,null!=b?b.index:b,1,{name:"add",hash:{},data:e}))+'</strong>\n  </div>\n  <div class="display-table-cell rule-section-column coral-Well rule-definition-box">\n    <div class="rule-editor">\n      <div class="rule-section-label">'+i((c.i18n||b&&b.i18n||h).call(g,"Select Attribute Type",{name:"i18n",hash:{},data:e}))+"</div>\n"+(null!=(f=a.invokePartial(d.RuleSelector,b,{name:"RuleSelector",data:e,indent:"      ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+(null!=(f=c.if.call(g,null!=(f=null!=b?b.rule:b)?f.type:f,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+'    </div>\n    <div class="rule-summary" title="'+i((c.i18n||b&&b.i18n||h).call(g,"Expand",{name:"i18n",hash:{},data:e}))+'">\n      <span class="summary-placeholder">'+(null!=(f=a.invokePartial(d.RuleSummary,null!=b?b.rule:b,{name:"RuleSummary",data:e,helpers:c,partials:d,decorators:a.decorators}))?f:"")+'</span>\n      <coral-icon class="rule-expand-icon" icon="chevronDown" size="XS"></coral-icon>\n    </div>\n  </div>\n</div>'},usePartial:!0,useData:!0}),
this.TSDK.UI.Templates.AudienceWorkflow.DialogContent=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div class="tsdk-audience-workflow-content">\n  <div class="rules-create-container"></div>\n  <div class="rules-review-container"></div>\n</div>\n'},useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.DialogHeader=Handlebars.template({1:function(a,b,c,d,e){return"    <span>"+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Edit Audience",{name:"i18n",hash:{},data:e}))+"</span>\n"},3:function(a,b,c,d,e){return"    <span>"+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Create New Audience",{name:"i18n",hash:{},data:e}))+"</span>\n"},5:function(a,b,c,d,e){var f;return"    <span>("+a.escapeExpression((f=null!=(f=c.count||(null!=b?b.count:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"count",hash:{},data:e}):f))+")</span>\n"},7:function(a,b,c,d,e){return'      <button type="button" class="next-button" is="coral-button" variant="primary">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Next",{name:"i18n",hash:{},data:e}))+"</button>\n"},9:function(a,b,c,d,e){return'      <button type="button" class="create-button" is="coral-button" variant="primary">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Save",{name:"i18n",hash:{},data:e}))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="tsdk-header-content">\n'+(null!=(f=c.if.call(g,null!=b?b.isEditMode:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")+(null!=(f=c.if.call(g,null!=b?b.count:b,{name:"if",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+'\n  <span class="action-toolbar">\n    <button type="button" class="fullscreen-button fullScreen-button" is="coral-button" variant="minimal" icon="fullScreen" iconsize="S"\n            data-toggle="true" title="'+i((c.i18n||b&&b.i18n||h).call(g,"Fullscreen",{name:"i18n",hash:{},data:e}))+'"></button>\n    <button type="button" class="fullscreen-button fullScreenExit-button" is="coral-button" variant="minimal" icon="fullScreenExit" iconsize="S"\n            data-toggle="false" title="'+i((c.i18n||b&&b.i18n||h).call(g,"Exit Fullscreen",{name:"i18n",hash:{},data:e}))+'"></button>\n    <button type="button" class="close-button" is="coral-button" variant="minimal">'+i((c.i18n||b&&b.i18n||h).call(g,"Cancel",{name:"i18n",hash:{},data:e}))+"</button>\n"+(null!=(f=(c.lt||b&&b.lt||h).call(g,null!=b?b.step:b,null!=b?b.totalSteps:b,{name:"lt",hash:{},fn:a.program(7,e,0),inverse:a.program(9,e,0),data:e}))?f:"")+"  </span>\n</div>\n"},useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.RulesReviewStep=Handlebars.template({1:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return(null!=(f=(c.notEquals||b&&b.notEquals||h).call(g,e&&e.index,0,{name:"notEquals",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+'    <div>\n      <span class="rule-label">'+i((c.i18n||b&&b.i18n||h).call(g,"Rule",{name:"i18n",hash:{},data:e}))+"&nbsp;#"+i((c.add||b&&b.add||h).call(g,e&&e.index,1,{name:"add",hash:{},data:e}))+"</span>\n"+(null!=(f=a.invokePartial(d.RuleSummary,b,{name:"RuleSummary",data:e,indent:"      ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"    </div>\n"},2:function(a,b,c,d,e){return'      <div class="rules-operator">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"AND",{name:"i18n",hash:{},data:e}))+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j=a.escapeExpression;return'<div class="audience-name-label">\n  <strong>'+j((c.i18n||b&&b.i18n||i).call(h,"Audience Name",{name:"i18n",hash:{},data:e}))+'</strong>\n</div>\n<input type="text" class="audience-name width-100p" is="coral-textfield" value="'+j((g=null!=(g=c.name||(null!=b?b.name:b))?g:i,"function"==typeof g?g.call(h,{name:"name",hash:{},data:e}):g))+'" maxlength="200">\n\n<div class="audience-rules-summary-label">\n  <strong>'+j((c.i18n||b&&b.i18n||i).call(h,"Rules",{name:"i18n",hash:{},data:e}))+'</strong>\n</div>\n<div class="audience-rules-summary coral-Well">\n'+(null!=(f=c.each.call(h,null!=b?b.targets:b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'</div>\n\n<button type="button" class="edit-rules-button" is="coral-button">'+j((c.i18n||b&&b.i18n||i).call(h,"Edit",{name:"i18n",hash:{},data:e}))+"</button>"},usePartial:!0,useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.TargetingWidget=Handlebars.template({1:function(a,b,c,d,e){return"          "+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Add Another Rule",{name:"i18n",hash:{},data:e}))+"\n"},3:function(a,b,c,d,e){return"          "+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Add Rule",{name:"i18n",hash:{},data:e}))+"\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<div class="rules-placeholder"></div>\n<div class="display-table width-100p">\n  <div class="display-table-row">\n    <div class="rule-label-column display-table-cell"></div>\n    <div class="rule-section-column display-table-cell">\n      <button type="button" class="add-rule-button" is="coral-button" variant="minimal" icon="addCircle" iconsize="S">\n'+(null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=(f=null!=b?b.targets:b)?f.length:f,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")+"      </button>\n    </div>\n  </div>\n</div>"},useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.Browser=Handlebars.template({1:function(a,b,c,d,e){return"selected"},3:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotEqual" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqual",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not equal",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")},4:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'      <coral-autocomplete data-step="2" class="operandsInput" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'" forceselection="true" multiple>\n        <coral-autocomplete-item value="Chrome" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"Chrome",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Chrome",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="Firefox" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"Firefox",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Firefox",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="Safari" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"Safari",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Safari",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="MSIE Trident" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"MSIE Trident",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Internet Explorer",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="Edge" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"Edge",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Microsoft Edge",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="Opera" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"Opera",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Opera",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="iPad" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"iPad",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"iPad",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="iPhone" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"iPhone",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"iPhone",{name:"i18n",hash:{},data:e}))+"</coral-autocomplete-item>\n      </coral-autocomplete>\n"},6:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotEqual" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqual",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not equal",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")},7:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'      <coral-autocomplete data-step="2" class="operandsInput" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'" forceselection="true" multiple>\n        <coral-autocomplete-item value="en" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"en",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"English",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="fr" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"fr",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"French",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="de" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"de",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"German",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="ja" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"ja",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Japanese",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="ko" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"ko",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Korean",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="pt" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"pt",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Portuguese",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="ru" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"ru",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Russian",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="es" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"es",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Spanish",{name:"i18n",hash:{},data:e}))+'</coral-autocomplete-item>\n        <coral-autocomplete-item value="zh-tw" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"zh-tw",{name:"hasValue",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Traditional Chinese",{name:"i18n",hash:{},data:e}))+"</coral-autocomplete-item>\n      </coral-autocomplete>\n"},9:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotEqual" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqual",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not equal",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="greater" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"greater",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is greater than",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="greaterEquals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"greaterEquals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is greater than or equal to",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="lesser" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"lesser",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is less than",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="lesserEquals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"lesserEquals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is less than or equal to",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(10,e,0),inverse:a.noop,data:e}))?f:"")},10:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'      <coral-autocomplete data-step="2" class="operandsInput browserVersionLookup no-suggestion"\n'+(null!=(f=(c.in||b&&b.in||c.helperMissing).call(g,null!=b?b.operator:b,"equals","doesNotEqual",{name:"in",hash:{},fn:a.program(11,e,0),inverse:a.program(13,e,0),data:e}))?f:"")+">\n"+(null!=(f=c.each.call(g,null!=b?b.operands:b,{name:"each",hash:{},fn:a.program(15,e,0),inverse:a.noop,data:e}))?f:"")+"      </coral-autocomplete>\n"},11:function(a,b,c,d,e){return'          placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Enter major version numbers",{name:"i18n",hash:{},data:e}))+'" multiple\n'},13:function(a,b,c,d,e){return'          placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Enter major version number",{name:"i18n",hash:{},data:e}))+'"\n        '},15:function(a,b,c,d,e){var f=a.lambda,g=a.escapeExpression;return'          <coral-autocomplete-item value="'+g(f(b,b))+'" selected>'+g(f(b,b))+"</coral-autocomplete-item>\n"},17:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.helpLink:b,{name:"if",hash:{},fn:a.program(18,e,0),inverse:a.noop,data:e}))?f:""},18:function(a,b,c,d,e){var f;return'      <a is="coral-anchorbutton" variant="minimal" icon="helpCircle" iconsize="XS"\n         class="help-link" href="'+a.escapeExpression((f=null!=(f=c.helpLink||(null!=b?b.helpLink:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"helpLink",hash:{},data:e}):f))+'" target="_blank"></a>\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="rule-content">\n  <coral-select data-step="0" class="parameterSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'">\n    <coral-select-item value="browserType" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"browserType",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Type",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="locale" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"locale",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Language",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="browserVersion" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"browserVersion",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Version",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n  </coral-select>\n\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"browserType",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"locale",{name:"equals",hash:{},fn:a.program(6,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"browserVersion",{name:"equals",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(17,e,0),inverse:a.noop,data:e}))?f:"")+"</div>\n"},useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.CustomParameters=Handlebars.template({1:function(a,b,c,d,e){return"selected"},3:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'      <coral-select-item value="'+m((i=null!=(i=c.value||(null!=b?b.value:b))?i:k,typeof i===l?i.call(j,{name:"value",hash:{},data:e}):i))+'" '+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=b?b.value:b,null!=g[1]?g[1].mbox:g[1],{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+m((i=null!=(i=c.content||(null!=b?b.content:b))?i:k,typeof i===l?i.call(j,{name:"content",hash:{},data:e}):i))+"</coral-select-item>\n"},5:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <input data-step="1" is="coral-textfield" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Enter parameter name",{name:"i18n",hash:{},data:e}))+'" class="input-parameter" value="'+i((f=null!=(f=c.parameter||(null!=b?b.parameter:b))?f:h,"function"==typeof f?f.call(g,{name:"parameter",hash:{},data:e}):f))+'">\n'},7:function(a,b,c,d,e,f,g){var h;return null!=(h=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.mbox:b,{name:"if",hash:{},fn:a.program(8,e,0,f,g),inverse:a.noop,data:e}))?h:""},8:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return'      <coral-select data-step="1" class="parameterSelector" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(i,"Select parameter",{name:"i18n",hash:{},data:e}))+'">\n'+(null!=(h=c.each.call(i,null!=b?b.parameters:b,{name:"each",hash:{},fn:a.program(9,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"      </coral-select>\n"},9:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'          <coral-select-item value="'+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+'" '+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=b?b.name:b,null!=g[1]?g[1].parameter:g[1],{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+"</coral-select-item>\n"},11:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="2" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Choose evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="containsIgnoreCase" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"containsIgnoreCase",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"contains (case insensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotContainIgnoreCase" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotContainIgnoreCase",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not contain (case insensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="equalsIgnoreCase" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equalsIgnoreCase",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals (case insensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotEqualIgnoreCase" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqualIgnoreCase",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not equal (case insensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="greater" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"greater",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is greater than",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="greaterEquals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"greaterEquals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is greater than or equal to",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="lesser" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"lesser",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is less than",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="lesserEquals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"lesserEquals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is less than or equal to",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="paramPresent" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"paramPresent",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"parameter is present",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="paramNotPresent" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"paramNotPresent",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"parameter is not present",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="paramNotPresentValueNotPresent" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"paramNotPresentValueNotPresent",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"parameter or value is not present",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="paramValuePresent" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"paramValuePresent",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"parameter value is present",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n"},13:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'    <textarea data-step="3" is="coral-textarea" cols="30" rows="5" class="operandsInput" placeholder="'+h((c.i18n||b&&b.i18n||g).call(f,"Enter each value in new line.",{name:"i18n",hash:{},data:e}))+'">'+h((c.join||b&&b.join||g).call(f,null!=b?b.operands:b,"\\n",{name:"join",hash:{},data:e}))+"</textarea>\n"},15:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'    <textarea data-step="3" is="coral-textarea" cols="30" rows="5" class="operandsInput"\n      data-pattern="^-?\\d+\\.?\\d*$" data-error-alert="'+h((c.i18n||b&&b.i18n||g).call(f,"Please enter a single decimal value.",{name:"i18n",hash:{},data:e}))+'" placeholder="'+h((c.i18n||b&&b.i18n||g).call(f,"Enter each value in new line.",{name:"i18n",hash:{},data:e}))+'">'+h((c.join||b&&b.join||g).call(f,null!=b?b.operands:b,"\\n",{name:"join",hash:{},data:e}))+"</textarea>\n"},17:function(a,b,c,d,e){return'    <div class="wait-container">\n      <coral-wait></coral-wait>\n      <span>'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Please wait",{name:"i18n",hash:{},data:e}))+"</span>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{},j=c.helperMissing,k=a.escapeExpression;return'<div class="rule-content">\n  <coral-select data-step="0" class="mboxSelector" placeholder="'+k((c.i18n||b&&b.i18n||j).call(i,"Select",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.mbox:b,"",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"Create parameter",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"+(null!=(h=c.each.call(i,null!=b?b.mboxes:b,{name:"each",hash:{},fn:a.program(3,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"  </coral-select>\n\n"+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.mbox:b,"",{name:"equals",hash:{},fn:a.program(5,e,0,f,g),inverse:a.program(7,e,0,f,g),data:e}))?h:"")+"\n"+(null!=(h=c.if.call(i,null!=b?b.parameter:b,{name:"if",hash:{},fn:a.program(11,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=(c.in||b&&b.in||j).call(i,null!=b?b.operator:b,"containsIgnoreCase","doesNotContainIgnoreCase","equals","equalsIgnoreCase","doesNotEqualIgnoreCase",{name:"in",hash:{},fn:a.program(13,e,0,f,g),inverse:a.noop,data:e}))?h:"")+(null!=(h=(c.in||b&&b.in||j).call(i,null!=b?b.operator:b,"greater","greaterEquals","lesser","lesserEquals",{name:"in",hash:{},fn:a.program(15,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=(c.ifEither||b&&b.ifEither||j).call(i,null!=b?b.paramsLoading:b,!0,null!=b?b.mboxesLoading:b,!0,{name:"ifEither",hash:{},fn:a.program(17,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'\n  <coral-tooltip class="invalid-value-error hidden" variant="error" placement="right" target="_prev"></coral-tooltip>\n</div>'},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.AudienceWorkflow.Geo=Handlebars.template({1:function(a,b,c,d,e){return"selected"},3:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="matches" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"matches",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"matches",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotMatch" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotMatch",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not match",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")},4:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'      <coral-autocomplete data-step="2" class="operandsInput countryLookup" data-parameter="countries" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(g,"Search",{name:"i18n",hash:{},data:e}))+'" forceselection="true" multiple>\n'+(null!=(f=c.each.call(g,null!=b?b.operands:b,{name:"each",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+"      </coral-autocomplete>\n"},5:function(a,b,c,d,e){var f=a.lambda,g=a.escapeExpression;return'          <coral-autocomplete-item value="'+g(f(b,b))+'" selected>'+g(f(b,b))+"</coral-autocomplete-item>\n"},7:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="matches" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"matches",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"matches",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotMatch" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotMatch",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not match",{name:"i18n",hash:{},data:e
}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(8,e,0),inverse:a.noop,data:e}))?f:"")},8:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'      <coral-autocomplete data-step="2" class="operandsInput stateLookup" data-parameter="regions" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(g,"Search",{name:"i18n",hash:{},data:e}))+'" forceselection="true" multiple>\n'+(null!=(f=c.each.call(g,null!=b?b.operands:b,{name:"each",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+"      </coral-autocomplete>\n"},10:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="matches" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"matches",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"matches",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotMatch" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotMatch",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not match",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(11,e,0),inverse:a.noop,data:e}))?f:"")},11:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'      <coral-autocomplete data-step="2" class="operandsInput cityLookup" data-parameter="cities" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(g,"Search",{name:"i18n",hash:{},data:e}))+'" forceselection="true" multiple>\n'+(null!=(f=c.each.call(g,null!=b?b.operands:b,{name:"each",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+"      </coral-autocomplete>\n"},13:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="contains" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"contains",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"contains",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotContain" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotContain",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not contain",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotEqual" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqual",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not equal",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="noZipCodeRecorded" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"noZipCodeRecorded",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"no zip code recorded",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="anyZipCode" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"anyZipCode",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"any zip code",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=(c.in||b&&b.in||h).call(g,null!=b?b.operator:b,"contains","doesNotContain","equals","doesNotEqual",{name:"in",hash:{},fn:a.program(14,e,0),inverse:a.noop,data:e}))?f:"")},14:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'      <textarea data-step="2" is="coral-textarea" cols="10" rows="5" class="operandsInput zipcode" placeholder="'+h((c.i18n||b&&b.i18n||g).call(f,"Enter each value in new line.",{name:"i18n",hash:{},data:e}))+'">'+h((c.join||b&&b.join||g).call(f,null!=b?b.operands:b,"\\n",{name:"join",hash:{},data:e}))+"</textarea>\n"},16:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="matches" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"matches",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"matches",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotMatch" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotMatch",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not match",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(17,e,0),inverse:a.noop,data:e}))?f:"")},17:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'      <coral-autocomplete data-step="2" class="operandsInput metroLookup" data-parameter="metros" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(g,"Search",{name:"i18n",hash:{},data:e}))+'" forceselection="true" multiple>\n'+(null!=(f=c.each.call(g,null!=b?b.operands:b,{name:"each",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+"      </coral-autocomplete>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="rule-content">\n  <coral-select data-step="0" class="parameterSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'">\n    <coral-select-item value="country" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"country",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Country",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="region" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"region",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"State",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="city" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"city",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"City",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="zip" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"zip",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Zip code",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="dma" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"dma",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"DMA",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n  </coral-select>\n\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"country",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"region",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"city",{name:"equals",hash:{},fn:a.program(10,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"zip",{name:"equals",hash:{},fn:a.program(13,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"dma",{name:"equals",hash:{},fn:a.program(16,e,0),inverse:a.noop,data:e}))?f:"")+'  <coral-tooltip class="invalidOperandsError hidden" variant="error" placement="right" target="_prev"></coral-tooltip>\n</div>'},useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.Mobile=Handlebars.template({1:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select class="device-type" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Device Type",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="" '+(null!=(f=c.unless.call(g,null!=b?b.deviceType:b,{name:"unless",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Any Device",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="isMobilePhone" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.deviceType:b,"isMobilePhone",{name:"equals",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Phone",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="isTablet" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.deviceType:b,"isTablet",{name:"equals",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Tablet",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="mobileDevice" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.deviceType:b,"mobileDevice",{name:"equals",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Mobile",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n"},2:function(a,b,c,d,e){return"selected"},4:function(a,b,c,d,e){return'selected="selected"'},6:function(a,b,c,d,e){var f;return(null!=(f=a.invokePartial(d.MatchOperator,b,{name:"MatchOperator",data:e,indent:"    ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"\n"+(null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")},7:function(a,b,c,d,e){var f;return'      <coral-autocomplete data-step="2" class="operandsInput osLookup" data-parameter="os" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Search",{name:"i18n",hash:{},data:e}))+'" forceselection="true" multiple>\n'+(null!=(f=a.invokePartial(d.MobileOsOptions,b,{name:"MobileOsOptions",data:e,indent:"        ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"      </coral-autocomplete>\n"},9:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(10,e,0),inverse:a.noop,data:e}))?f:""},10:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'      <coral-select data-step="2" class="operandsInput" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'">\n        <coral-select-item value="1" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"1",{name:"hasValue",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"true",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="0" '+(null!=(f=(c.hasValue||b&&b.hasValue||h).call(g,null!=b?b.operands:b,"0",{name:"hasValue",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"false",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n      </coral-select>\n"},12:function(a,b,c,d,e){var f;return null!=(f=a.invokePartial(d.MobileDimension,b,{name:"MobileDimension",data:e,indent:"    ",helpers:c,partials:d,decorators:a.decorators}))?f:""},14:function(a,b,c,d,e){var f;return(null!=(f=a.invokePartial(d.MatchOperator,b,{name:"MatchOperator",data:e,indent:"    ",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"\n"+(null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(15,e,0),inverse:a.noop,data:e}))?f:"")},15:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j="function",k=a.escapeExpression;return'      <coral-autocomplete data-step="2" data-parameter="'+k((g=null!=(g=c.parameter||(null!=b?b.parameter:b))?g:i,typeof g===j?g.call(h,{name:"parameter",hash:{},data:e}):g))+'" class="operandsInput '+k((g=null!=(g=c.parameter||(null!=b?b.parameter:b))?g:i,typeof g===j?g.call(h,{name:"parameter",hash:{},data:e}):g))+'Lookup" placeholder="'+k((c.i18n||b&&b.i18n||i).call(h,"Search",{name:"i18n",hash:{},data:e}))+'" forceselection="true" multiple>\n'+(null!=(f=c.each.call(h,null!=b?b.operands:b,{name:"each",hash:{},fn:a.program(16,e,0),inverse:a.noop,data:e}))?f:"")+"      </coral-autocomplete>\n"},16:function(a,b,c,d,e){var f=a.lambda,g=a.escapeExpression;return'          <coral-autocomplete-item value="'+g(f(b,b))+'" selected>'+g(f(b,b))+"</coral-autocomplete-item>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="rule-content">\n'+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"mobileOs",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'\n  <coral-select data-step="0" class="parameterSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'">\n    <coral-select-item value="model" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"model",{name:"equals",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Device Model",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="vendor" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"vendor",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Device Vendor",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="mobileDevice" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"mobileDevice",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Is Mobile Device",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="isMobilePhone" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"isMobilePhone",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Is Mobile Phone",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="isTablet" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"isTablet",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Is Tablet",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="mobileOs" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"mobileOs",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"OS",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="displayHeight" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"displayHeight",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Screen Height (px)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="displayWidth" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"displayWidth",{name:"equals",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Screen Width (px)",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n  </coral-select>\n\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"mobileOs",{name:"equals",hash:{},fn:a.program(6,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.in||b&&b.in||h).call(g,null!=b?b.parameter:b,"mobileDevice","isTablet","isMobilePhone",{name:"in",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"displayHeight",{name:"equals",hash:{},fn:a.program(12,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"displayWidth",{name:"equals",hash:{},fn:a.program(12,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.in||b&&b.in||h).call(g,null!=b?b.parameter:b,"vendor","model",{name:"in",hash:{},fn:a.program(14,e,0),inverse:a.noop,data:e}))?f:"")+"</div>"},usePartial:!0,useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.Network=Handlebars.template({1:function(a,b,c,d,e){return"selected"},3:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="contains" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"contains",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"contains",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotContain" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotContain",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not contain",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotEqual" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqual",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not equal",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")},4:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'      <textarea data-step="2" is="coral-textarea" cols="10" rows="5" class="operandsInput ispName textInput" title="'+h((c.i18n||b&&b.i18n||g).call(f,"ISP Name",{name:"i18n",hash:{},data:e}))+'">'+h((c.join||b&&b.join||g).call(f,null!=b?b.operands:b,"\\n",{name:"join",hash:{},data:e}))+"</textarea>\n"},6:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="contains" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"contains",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"contains",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotContain" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotContain",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not contain",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotEqual" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqual",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not equal",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")},7:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'      <textarea data-step="2" is="coral-textarea" cols="10" rows="5" class="operandsInput domainName textInput" title="'+h((c.i18n||b&&b.i18n||g).call(f,"Domain Name",{name:"i18n",hash:{},data:e}))+'">'+h((c.join||b&&b.join||g).call(f,null!=b?b.operands:b,"\\n",{name:"join",hash:{},data:e}))+"</textarea>\n"},9:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="matches" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"matches",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"matches",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotMatch" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotMatch",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not match",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n    </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.operator:b,{name:"if",hash:{},fn:a.program(10,e,0),inverse:a.noop,data:e}))?f:"")},10:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'      <coral-autocomplete data-step="2" class="operandsInput connectionSpeedLookup" data-parameter="connection_speed" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(g,"Search",{name:"i18n",hash:{},data:e}))+'" forceselection="true" multiple>\n'+(null!=(f=c.each.call(g,null!=b?b.operands:b,{name:"each",hash:{},fn:a.program(11,e,0),inverse:a.noop,data:e}))?f:"")+"      </coral-autocomplete>\n"},11:function(a,b,c,d,e){var f=a.lambda,g=a.escapeExpression;return'          <coral-autocomplete-item value="'+g(f(b,b))+'" selected>'+g(f(b,b))+"</coral-autocomplete-item>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="rule-content">\n  <coral-select data-step="0" class="parameterSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'">\n    <coral-select-item value="ispName" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"ispName",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"ISP",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="domainName" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"domainName",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Domain Name",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="connectionSpeed" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"connectionSpeed",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Connection Speed",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n  </coral-select>\n\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"ispName",{name:"equals",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"domainName",{name:"equals",hash:{},fn:a.program(6,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"connectionSpeed",{name:"equals",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+'  <coral-tooltip class="invalidOperandsError hidden" variant="error" placement="right" target="_prev"></coral-tooltip>\n</div>\n\n'},useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.OperatingSystem=Handlebars.template({1:function(a,b,c,d,e){return"selected"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="rule-content">\n  <coral-select data-step="0" class="parameterSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'">\n    <coral-select-item value="Linux" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"Linux",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Linux",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="Macintosh" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"Macintosh",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Macintosh",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="Windows" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"Windows",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Windows",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n  </coral-select>\n</div>"},useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.SitePages=Handlebars.template({1:function(a,b,c,d,e){return"selected"},3:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="1" class="parameterSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="url" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"url",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"URL",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="domain" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"domain",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Domain",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="query" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"query",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Query",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"+(null!=(f=(c.in||b&&b.in||h).call(g,null!=b?b.page:b,"currentPage","landingPage",{name:"in",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+"    </coral-select>\n"},4:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing;return'        <coral-select-item value="fragment" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"fragment",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((c.i18n||b&&b.i18n||h).call(g,"Hash (#) fragment",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},6:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'    <coral-select data-step="2" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="contains" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"contains",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"contains",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotContain" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotContain",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not contain",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals (case sensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="doesNotEqual" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqual",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not equal",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"fragment",{name:"equals",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+"    </coral-select>\n"},7:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'        <coral-select-item value="present" data-unary="true" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"present",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is present",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="notPresent" data-unary="true" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"notPresent",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is not present",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="empty" data-unary="true" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"empty",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is empty",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="notEmpty" data-unary="true" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"notEmpty",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is not empty",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n"},9:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'    <textarea data-step="3" is="coral-textarea" class="operandsInput" cols="30" rows="5" placeholder="'+h((c.i18n||b&&b.i18n||g).call(f,"Enter each value in new line.",{name:"i18n",hash:{},data:e}))+'">'+h((c.join||b&&b.join||g).call(f,null!=b?b.operands:b,"\\n",{name:"join",hash:{},data:e}))+"</textarea>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression
;return'<div class="rule-content">\n  <coral-select data-step="0" class="pageSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'">\n    <coral-select-item value="currentPage" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.page:b,"currentPage",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Current Page",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="previousPage" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.page:b,"previousPage",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Previous Page",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="landingPage" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.page:b,"landingPage",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"Landing Page",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n  </coral-select>\n\n"+(null!=(f=c.if.call(g,null!=b?b.page:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=c.if.call(g,null!=b?b.parameter:b,{name:"if",hash:{},fn:a.program(6,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=(c.in||b&&b.in||h).call(g,null!=b?b.operator:b,"contains","doesNotContain","equals","equals","doesNotEqual",{name:"in",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+"</div>"},useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.Social=Handlebars.template({1:function(a,b,c,d,e){return"selected"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="rule-content">\n <coral-select name="0" class="step0 parameterSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Select",{name:"i18n",hash:{},data:e}))+'">\n   <coral-select-item value="Digg" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"Digg",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"From Digg",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n   <coral-select-item value="Facebook" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"Facebook",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"From Facebook",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n   <coral-select-item value="Myspace" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"Myspace",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"From Myspace",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n   <coral-select-item value="Twitter" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"Twitter",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"From Twitter",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n   <coral-select-item value="Pinterest" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"Pinterest",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"From Pinterest",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n   <coral-select-item value="UrlShortener" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.parameter:b,"UrlShortener",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"From Url Shorteners",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n </coral-select>\n</div>"},useData:!0}),this.TSDK.UI.Templates.AudienceWorkflow.TargetLibrary=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'      <coral-select-item value="'+m((i=null!=(i=c.value||(null!=b?b.value:b))?i:k,typeof i===l?i.call(j,{name:"value",hash:{},data:e}):i))+'" '+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=b?b.value:b,null!=g[1]?g[1].parameter:g[1],{name:"equals",hash:{},fn:a.program(2,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+m((i=null!=(i=c.content||(null!=b?b.content:b))?i:k,typeof i===l?i.call(j,{name:"content",hash:{},data:e}):i))+"</coral-select-item>\n"},2:function(a,b,c,d,e){return"selected"},4:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.parameter:b,{name:"if",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:""},5:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i="function",j=a.escapeExpression;return'        <coral-select-item value="'+j((f=null!=(f=c.parameter||(null!=b?b.parameter:b))?f:h,typeof f===i?f.call(g,{name:"parameter",hash:{},data:e}):f))+'" selected>'+j((f=null!=(f=c.parameter||(null!=b?b.parameter:b))?f:h,typeof f===i?f.call(g,{name:"parameter",hash:{},data:e}):f))+"</coral-select-item>\n"},7:function(a,b,c,d,e){return'    <div class="wait-container">\n      <coral-wait></coral-wait>\n      <span>'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Please wait",{name:"i18n",hash:{},data:e}))+"</span>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return'<div class="rule-content">\n  <coral-select data-step="0" class="parameterSelector" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(i,"Select",{name:"i18n",hash:{},data:e}))+'">\n'+(null!=(h=c.each.call(i,null!=b?b.audiences:b,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.program(4,e,0,f,g),data:e}))?h:"")+"  </coral-select>\n\n"+(null!=(h=c.if.call(i,null!=b?b.loading:b,{name:"if",hash:{},fn:a.program(7,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"</div>"},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.AudienceWorkflow.TrafficSource=Handlebars.template({1:function(a,b,c,d,e){return"selected"},3:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return(null!=(h=c.if.call(i,null!=g[1]?g[1].parameter:g[1],{name:"if",hash:{},fn:a.program(4,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=c.if.call(i,null!=g[1]?g[1].operator:g[1],{name:"if",hash:{},fn:a.program(6,e,0,f,g),inverse:a.noop,data:e}))?h:"")},4:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{},j=c.helperMissing,k=a.escapeExpression;return'      <coral-select data-step="1" class="operatorSelector" placeholder="'+k((c.i18n||b&&b.i18n||j).call(i,"Select evaluator",{name:"i18n",hash:{},data:e}))+'">\n        <coral-select-item value="contains" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=g[1]?g[1].operator:g[1],"contains",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"contains",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="doesNotContain" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=g[1]?g[1].operator:g[1],"doesNotContain",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"does not contain",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="equals" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=g[1]?g[1].operator:g[1],"equals",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"equals (case sensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="doesNotEqual" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=g[1]?g[1].operator:g[1],"doesNotEqual",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"does not equal",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n      </coral-select>\n"},6:function(a,b,c,d,e,f,g){var h=null!=b?b:a.nullContext||{},i=c.helperMissing,j=a.escapeExpression;return'      <textarea data-step="2" is="coral-textarea" class="operandsInput" cols="30" rows="3" placeholder="'+j((c.i18n||b&&b.i18n||i).call(h,"Enter each value in new line.",{name:"i18n",hash:{},data:e}))+'">'+j((c.join||b&&b.join||i).call(h,null!=g[1]?g[1].operands:g[1],"\\n",{name:"join",hash:{},data:e}))+"</textarea>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{},j=c.helperMissing,k=a.escapeExpression;return'<div class="rule-content">\n  <coral-select data-step="0" class="parameterSelector" placeholder="'+k((c.i18n||b&&b.i18n||j).call(i,"Select",{name:"i18n",hash:{},data:e}))+'">\n    <coral-select-item value="baidu.com" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"baidu.com",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"From Baidu",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="bing.com" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"bing.com",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"From Bing",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="google.com" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"google.com",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"From Google",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="yahoo.com" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"yahoo.com",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"From Yahoo",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="landingPageReferrer.url" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"landingPageReferrer.url",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"Referring Landing Page: URL",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="landingPageReferrer.domain" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"landingPageReferrer.domain",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"Referring Landing Page: Domain",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n    <coral-select-item value="landingPageReferrer.query" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"landingPageReferrer.query",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"Referring Landing Page: Query",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n  </coral-select>\n\n"+(null!=(h=(c.in||b&&b.in||j).call(i,null!=b?b.parameter:b,"landingPageReferrer.url","landingPageReferrer.domain","landingPageReferrer.query",{name:"in",hash:{},fn:a.program(3,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"</div>\n"},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.AudienceWorkflow.VisitorProfile=Handlebars.template({1:function(a,b,c,d,e){return"selected"},3:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return(null!=(h=c.each.call(i,null!=(h=null!=b?b.parameters:b)?h.USER:h,{name:"each",hash:{},fn:a.program(4,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=c.each.call(i,null!=(h=null!=b?b.parameters:b)?h.PROFILE:h,{name:"each",hash:{},fn:a.program(9,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=c.each.call(i,null!=(h=null!=b?b.parameters:b)?h.CRS:h,{name:"each",hash:{},fn:a.program(11,e,0,f,g),inverse:a.noop,data:e}))?h:"")},4:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'          <coral-select-item value="'+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+'" data-parametertargetid="'+m((i=null!=(i=c.id||(null!=b?b.id:b))?i:k,typeof i===l?i.call(j,{name:"id",hash:{},data:e}):i))+'" data-type="USER"\n'+(null!=(h=c.if.call(j,null!=g[2]?g[2].parametertargetid:g[2],{name:"if",hash:{},fn:a.program(5,e,0,f,g),inverse:a.program(7,e,0,f,g),data:e}))?h:"")+">"+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+"\n          </coral-select-item>\n"},5:function(a,b,c,d,e,f,g){var h;return"              "+(null!=(h=(c.equals||b&&b.equals||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.id:b,null!=g[2]?g[2].parametertargetid:g[2],{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"},7:function(a,b,c,d,e,f,g){var h;return"              "+(null!=(h=(c.equals||b&&b.equals||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.name:b,null!=g[2]?g[2].parameter:g[2],{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n            "},9:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'          <coral-select-item value="'+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+'" data-type="PROFILE" '+(null!=(h=(c.equals||b&&b.equals||k).call(j,null!=b?b.name:b,null!=g[2]?g[2].parameter:g[2],{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+"</coral-select-item>\n"},11:function(a,b,c,d,e,f,g){var h,i,j=null!=b?b:a.nullContext||{},k=c.helperMissing,l="function",m=a.escapeExpression;return'          <coral-select-item value="'+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+'" data-parametertargetid="'+m((i=null!=(i=c.id||(null!=b?b.id:b))?i:k,typeof i===l?i.call(j,{name:"id",hash:{},data:e}):i))+'" data-type="CRS"\n'+(null!=(h=c.if.call(j,null!=g[2]?g[2].parametertargetid:g[2],{name:"if",hash:{},fn:a.program(5,e,0,f,g),inverse:a.program(7,e,0,f,g),data:e}))?h:"")+">"+m((i=null!=(i=c.name||(null!=b?b.name:b))?i:k,typeof i===l?i.call(j,{name:"name",hash:{},data:e}):i))+"\n          </coral-select-item>\n"},13:function(a,b,c,d,e){var f;return null!=(f=(c.notEquals||b&&b.notEquals||c.helperMissing).call(null!=b?b:a.nullContext||{},null!=b?b.type:b,"VISITOR_PROFILE",{name:"notEquals",hash:{},fn:a.program(14,e,0),inverse:a.noop,data:e}))?f:""},14:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'      <coral-select data-step="1" class="operatorSelector" placeholder="'+i((c.i18n||b&&b.i18n||h).call(g,"Choose evaluator",{name:"i18n",hash:{},data:e}))+'">\n        <coral-select-item value="containsIgnoreCase" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"containsIgnoreCase",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"contains (case insensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="doesNotContainIgnoreCase" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotContainIgnoreCase",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not contain (case insensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="equals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="equalsIgnoreCase" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"equalsIgnoreCase",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"equals (case insensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="doesNotEqualIgnoreCase" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"doesNotEqualIgnoreCase",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"does not equal (case insensitive)",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="greater" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"greater",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is greater than",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="greaterEquals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"greaterEquals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is greater than or equal to",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="lesser" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"lesser",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is less than",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="lesserEquals" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"lesserEquals",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"is less than or equal to",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="paramPresent" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"paramPresent",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"parameter is present",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="paramNotPresent" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"paramNotPresent",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"parameter is not present",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="paramNotPresentValueNotPresent" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"paramNotPresentValueNotPresent",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"parameter or value is not present",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n        <coral-select-item value="paramValuePresent" '+(null!=(f=(c.equals||b&&b.equals||h).call(g,null!=b?b.operator:b,"paramValuePresent",{name:"equals",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+">"+i((c.i18n||b&&b.i18n||h).call(g,"parameter value is present",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n      </coral-select>\n"},16:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'    <textarea data-step="2" is="coral-textarea" cols="30" rows="5" class="operandsInput" placeholder="'+h((c.i18n||b&&b.i18n||g).call(f,"Enter each value in new line.",{name:"i18n",hash:{},data:e}))+'">'+h((c.join||b&&b.join||g).call(f,null!=b?b.operands:b,"\\n",{name:"join",hash:{},data:e}))+"</textarea>\n"},18:function(a,b,c,d,e){var f=null!=b?b:a.nullContext||{},g=c.helperMissing,h=a.escapeExpression;return'    <textarea data-step="2" is="coral-textarea" cols="30" rows="5" class="operandsInput" placeholder="'+h((c.i18n||b&&b.i18n||g).call(f,"Enter each value in new line.",{name:"i18n",hash:{},data:e}))+'"\n      data-pattern="^-?\\d+\\.?\\d*$" data-error-alert="'+h((c.i18n||b&&b.i18n||g).call(f,"Please enter a single decimal value.",{name:"i18n",hash:{},data:e}))+'">'+h((c.join||b&&b.join||g).call(f,null!=b?b.operands:b,"\\n",{name:"join",hash:{},data:e}))+"</textarea>\n"},20:function(a,b,c,d,e){return'    <span class="wait-container">\n      <coral-wait></coral-wait>\n      <span>'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Please wait",{name:"i18n",hash:{},data:e}))+"</span>\n    </span>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{},j=c.helperMissing,k=a.escapeExpression;return'<div class="rule-content">\n  <coral-select data-step="0" class="parameterSelector" placeholder="'+k((c.i18n||b&&b.i18n||j).call(i,"Select",{name:"i18n",hash:{},data:e}))+'">\n      <coral-select-item value="New Visitor" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"New Visitor",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"New Visitor",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="Returning Visitor" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"Returning Visitor",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"Returning Visitor",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="In other tests" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"In other tests",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"In other tests",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="First page of session" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"First page of session",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"First page of session",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="Not in other tests" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"Not in other tests",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"Not in other tests",{name:"i18n",hash:{},data:e}))+'</coral-select-item>\n      <coral-select-item value="Not first page of session" '+(null!=(h=(c.equals||b&&b.equals||j).call(i,null!=b?b.parameter:b,"Not first page of session",{name:"equals",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+">"+k((c.i18n||b&&b.i18n||j).call(i,"Not first page of session",{name:"i18n",hash:{},data:e}))+"</coral-select-item>\n\n"+(null!=(h=c.if.call(i,null!=b?b.parameters:b,{name:"if",hash:{},fn:a.program(3,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"  </coral-select>\n\n"+(null!=(h=c.if.call(i,null!=b?b.parameter:b,{name:"if",hash:{},fn:a.program(13,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=(c.in||b&&b.in||j).call(i,null!=b?b.operator:b,"containsIgnoreCase","doesNotContainIgnoreCase","equals","equalsIgnoreCase","doesNotEqualIgnoreCase",{name:"in",hash:{},fn:a.program(16,e,0,f,g),inverse:a.noop,data:e}))?h:"")+(null!=(h=(c.in||b&&b.in||j).call(i,null!=b?b.operator:b,"greater","greaterEquals","lesser","lesserEquals",{name:"in",hash:{},fn:a.program(18,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\n"+(null!=(h=c.if.call(i,null!=b?b.loading:b,{name:"if",hash:{},fn:a.program(20,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'\n  <coral-tooltip class="invalid-value-error hidden" variant="error" placement="right" target="_prev"></coral-tooltip>\n</div>'},useData:!0,useDepths:!0}),this.TSDK.UI.Templates.AudiencePicker.AudienceListItem=Handlebars.template({1:function(a,b,c,d,e){return'checked="checked"'},3:function(a,b,c,d,e){return"          "+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"by {0}",null!=b?b.modifiedBy:b,{name:"i18n",hash:{},data:e}))+"\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j="function",k=a.escapeExpression;return'<div class="row fixed audienceListRow">\n  <div class="cell middle select-item">\n    <coral-checkbox value="'+k((g=null!=(g=c.id||(null!=b?b.id:b))?g:i,typeof g===j?g.call(h,{name:"id",hash:{},data:e}):g))+'" '+(null!=(f=c.if.call(h,null!=b?b.selected:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'></coral-checkbox>\n  </div>\n  <div class="cell middle type"><coral-icon icon="'+k((c.getAudienceIcon||b&&b.getAudienceIcon||i).call(h,b,{name:"getAudienceIcon",hash:{},data:e}))+'" size="S"></coral-icon></div>\n\n  <div class="cell middle name ellipsis-text" title="'+k((g=null!=(g=c.name||(null!=b?b.name:b))?g:i,typeof g===j?g.call(h,{name:"name",hash:{},data:e}):g))+'">'+k((g=null!=(g=c.name||(null!=b?b.name:b))?g:i,typeof g===j?g.call(h,{name:"name",hash:{},data:e}):g))+'</div>\n\n  <div class="cell middle path ellipsis-text" title="'+k((g=null!=(g=c.path||(null!=b?b.path:b))?g:i,typeof g===j?g.call(h,{name:"path",hash:{},data:e}):g))+'">'+k((g=null!=(g=c.path||(null!=b?b.path:b))?g:i,typeof g===j?g.call(h,{name:"path",hash:{},data:e}):g))+'</div>\n\n  <div class="cell middle source">'+k((c.getAudienceSource||b&&b.getAudienceSource||i).call(h,b,{name:"getAudienceSource",hash:{},data:e}))+'</div>\n\n  <div class="cell middle change-log">\n    <div class="updateInfoContainer">\n      <div>'+k((c.i18n||b&&b.i18n||i).call(h,"Updated",{name:"i18n",hash:{},data:e}))+"&nbsp;"+k((c.getDate||b&&b.getDate||i).call(h,null!=b?b.modifiedAt:b,{name:"getDate",hash:{comment:"Date format pattern for moment.js. e.g. Nov 13 2013 (http://momentjs.com/docs)",format:"DD MMM YYYY"},data:e}))+"</div>\n      <div>\n"+(null!=(f=c.if.call(h,null!=b?b.modifiedBy:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0}),this.TSDK.UI.Templates.AudiencePicker.DialogContent=Handlebars.template({1:function(a,b,c,d,e){return'    <span class="audience-tenant-dropdown-placeholder" data-root-name="/"></span>\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="audience-picker-toolbar">\n  <span class="audience-searcher-placeholder"></span>\n'+(null!=(f=c.if.call(g,null!=(f=null!=b?b.config:b)?f.multiTenant:f,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'  <button type="button" class="add-audience-button" is="coral-button" variant="minimal" icon="addCircle" iconsize="S">\n    '+i((c.i18n||b&&b.i18n||h).call(g,"Create audience",{name:"i18n",hash:{},data:e}))+'\n  </button>\n</div>\n<ul class="list audience-picker-list-header">\n  <li class="header">\n    <div class="row fixed audienceListRow">\n      <div class="cell middle select-item">&nbsp;</div>\n      <div class="cell middle type">'+i((c.i18n||b&&b.i18n||h).call(g,"Type",{name:"i18n",hash:{},data:e}))+'</div>\n      <div class="cell middle name">'+i((c.i18n||b&&b.i18n||h).call(g,"Name",{name:"i18n",hash:{},data:e}))+'</div>\n      <div class="cell middle path">'+i((c.i18n||b&&b.i18n||h).call(g,"Path",{name:"i18n",hash:{},data:e}))+'</div>\n      <div class="cell middle source">'+i((c.i18n||b&&b.i18n||h).call(g,"Source",{name:"i18n",hash:{},data:e}))+'</div>\n      <div class="cell change-log middle">'+i((c.i18n||b&&b.i18n||h).call(g,"Change Log",{name:"i18n",hash:{},data:e}))+'</div>\n    </div>\n  </li>\n</ul>\n<ul class="list audience-picker-list"></ul>\n'},useData:!0}),this.TSDK.UI.Templates.AudiencePicker.DialogHeader=Handlebars.template({1:function(a,b,c,d,e){var f;return"    <span>("+a.escapeExpression((f=null!=(f=c.count||(null!=b?b.count:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"count",hash:{},data:e}):f))+")</span>\n"},3:function(a,b,c,d,e){return'      <button type="button" class="done-button" is="coral-button" variant="primary">'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Done",{name:"i18n",hash:{},data:e}))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'<div class="tsdk-header-content">\n  <span class="fullscreen-title-header">'+i((c.i18n||b&&b.i18n||h).call(g,"Choose Audience",{name:"i18n",hash:{},data:e}))+"</span>\n"+(null!=(f=c.if.call(g,null!=b?b.count:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'\n  <span class="action-toolbar">\n    <button type="button" class="fullscreen-button fullScreen-button" is="coral-button" variant="minimal" icon="fullScreen" iconsize="S"\n            data-toggle="true" title="'+i((c.i18n||b&&b.i18n||h).call(g,"Fullscreen",{name:"i18n",hash:{},data:e}))+'"></button>\n    <button type="button" class="fullscreen-button fullScreenExit-button" is="coral-button" variant="minimal" icon="fullScreenExit" iconsize="S"\n            data-toggle="false" title="'+i((c.i18n||b&&b.i18n||h).call(g,"Exit Fullscreen",{name:"i18n",hash:{},data:e}))+'"></button>\n    <button type="button" class="close-button" is="coral-button" variant="minimal" coral-close>'+i((c.i18n||b&&b.i18n||h).call(g,"Cancel",{name:"i18n",hash:{},data:e}))+"</button>\n"+(null!=(f=c.if.call(g,null!=b?b.count:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"  </span>\n</div>\n"},useData:!0}),this.TSDK.UI.Templates.AudiencePicker.Searcher=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<coral-search class="search-input" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Search",{name:"i18n",hash:{},data:e}))+'" name="field"></coral-search>\n'},useData:!0}),this.TSDK.UI.Templates.AudiencePicker.TenantDropdown=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<coral-autocomplete name="Select" class="tenant-dropdown" placeholder="'+a.escapeExpression((c.i18n||b&&b.i18n||c.helperMissing).call(null!=b?b:a.nullContext||{},"Audience Folder",{name:"i18n",hash:{},data:e}))+'" match="contains"></coral-autocomplete>\r\n'},useData:!0});