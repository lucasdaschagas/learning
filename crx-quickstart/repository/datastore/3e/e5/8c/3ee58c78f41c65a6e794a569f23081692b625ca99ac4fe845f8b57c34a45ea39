/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.pkg("s7sdk.set");b.Util.require("s7sdk.common.Button");b.Util.require("s7sdk.common.ScrollBar");b.Util.require("s7sdk.common.Geometry");if(!b.set.TableOfContentsControl){b.set.TableOfContentsControl=function(c){arguments.callee.superclass.apply(this,[c,b.set.TableOfContentsControl.NS,c.constructor,b.set.TableOfContents.RESTRICTED_STYLES])};b.set.TableOfContentsControl.NS="s7sdk.set.TableOfContentsControl";b.set.TableOfContentsControl.prototype.rebuild=function(d){var c=this.component.getCurrentFrameIndex();this.superproto.rebuild.apply(this,[d]);this.component.setCurrentFrameIndex(c)}}b.Class.inherits(b.set.TableOfContentsControl.NS,"s7sdk.ControlComponent");if(!b.set.TableOfContents){b.set.TableOfContents=function TableOfContents(c,e,d){d=(typeof d=="string"&&d.length)?d:"TableOfContents_"+b.Util.createUniqueId();var h=!!arguments[3];arguments.callee.superclass.apply(this,[d,c,null,0,0,"s7tableofcontents",e,!h]);this.splitFrames={orientation:false};this.maxitem=parseInt(this.maxitems);this.tooltipOverlay=document.createElement("div");this.tooltipOverlay.style.position="absolute";this.tooltipOverlay.style.width=this.obj.offsetWidth+"px";this.tooltipOverlay.style.height=this.obj.offsetHeight+"px";this.tooltipOverlay.style.top="0px";this.tooltipOverlay.style.left="0px";this.tooltipOverlay.setAttribute("role","button");this.obj.appendChild(this.tooltipOverlay);this.lastMouse={x:-1000000,y:-1000000};this.state=0;this.stepSize=50;this.duration=300;this.delaytohide=Number(this.bearing.autoHideDelay)*1000;this.waitToHide=-1;this.frame=-1;this.nativePos=0;this.idxKeySelected=0;var g=parseInt(b.Util.css.getCss("s7tableofcontents","width",d,null,this.getParent()));var i=parseInt(b.Util.css.getCss("s7tableofcontents","height",d,null,this.getParent()));this.resize(g,i);this.isTouch=b.browser.device.name!="desktop";var f=this;this.addEventListener("click",function(){f.onClickEv()});this.createDDdiv();this.panelDD.style.display="none";if(!this.isTouch){this.makeToolTip()}if(!h){return new b.set.TableOfContentsControl(this)}else{return this}};b.Class.inherits("s7sdk.set.TableOfContents","s7sdk.common.Button");b.set.TableOfContents.prototype.symbols={TOOLTIP:"Table of Contents",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down","DELIMITER":" - "};b.set.TableOfContents.prototype.modifiers={bearing:{params:["bearing","autoHideDelay"],defaults:["fit-vertical",2],ranges:[["fit-vertical","fit-lateral"],"0:"]},showdefault:{params:["enable"],defaults:[true]},maxitems:{params:["itemcount"],defaults:["0"],ranges:["0:"]}};b.set.TableOfContents.RESTRICTED_STYLES={"s7tableofcontents":["width","height"]};b.set.TableOfContents.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(b.set.TableOfContents.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superproto.setCSS.apply(this,[e,d,c])}};b.set.TableOfContents.prototype.makeToolTip=function(){if(this.hint&&this.hint.length&&this.tooltipOverlay){this.toolTip_=new b.SimpleToolTip(this.tooltipOverlay,this.hint);this.obj.setAttribute("aria-label",this.hint)}};b.set.TableOfContents.prototype.init=function(){this.hint=this.getLocalizedText("TOOLTIP");this.createElement();if(typeof this.obj!="undefined"){this.obj.className="s7button "+this.css;this.obj.button=this;this.resize(this.w,this.h);this.obj.setAttribute("tabindex",0);this.attachToContainer();var c=this;function d(e){c.currentState=e;if(c.activated){c.changeState(e)}}this.addEventListener("mouseover",function(f){if(typeof(c.displayItems)=="undefined"||c.displayItems.length==0||b.browser.supportsTouch()){return}d(2);c.isOver=true;c.onTocOver()},false);this.addEventListener("mouseout",function(f){if(typeof(c.displayItems)=="undefined"||c.displayItems.length==0||b.browser.supportsTouch()){return}d(0);c.isOver=false;c.onTocOut()},false);this.addEventListener("focus",function(e){d(2);c.tocBtnInFocus=true},false);this.addEventListener("blur",function(e){d(0);c.tocBtnInFocus=false},false);this.addEventListener("keydown",function(j){var k=c.itemdiv.childNodes;for(var g=0;g<k.length;g++){var h=k[g];if(h.sel){b.Util.css.setCSSAttributeSelector(h,"state","selected")}else{b.Util.css.setCSSAttributeSelector(h,"state","")}}if(c.tocBtnInFocus&&(j.keyCode==b.Enum.KEY_CODE.ENTER||j.keyCode==b.Enum.KEY_CODE.SPACE||j.keyCode==b.Enum.KEY_CODE.LEFT||j.keyCode==b.Enum.KEY_CODE.RIGHT||j.keyCode==b.Enum.KEY_CODE.DOWN||j.keyCode==b.Enum.KEY_CODE.UP)){b.Event.preventDefault(j);if(typeof(c.displayItems)=="undefined"||c.displayItems.length==0){return}if(!c.isOver){c.isOver=true;c.blur();c.onTocOver();var h=k[c.idxKeySelected];k[c.idxKeySelected].focus();b.Util.css.setCSSAttributeSelector(h,"state","over")}else{c.isOver=false;c.hidePanel();c.obj.focus()}}else{if(typeof(c.displayItems)!="undefined"&&c.displayItems.length>0){if(j.keyCode==b.Enum.KEY_CODE.ESCAPE){b.Event.preventDefault(j);c.isOver=false;c.hidePanel();c.obj.focus()}if(j.keyCode==b.Enum.KEY_CODE.TAB&&c.isOver){c.isOver=false;c.hidePanel();return}if(j.keyCode==b.Enum.KEY_CODE.UP){b.Event.preventDefault(j);c.idxKeySelected=c.idxKeySelected>0?c.idxKeySelected-1:0;var h=k[c.idxKeySelected];b.Util.css.setCSSAttributeSelector(h,"state","over");k[c.idxKeySelected].focus();c.isOver=true}if(j.keyCode==b.Enum.KEY_CODE.DOWN){b.Event.preventDefault(j);var f=c.items.length-1;c.idxKeySelected=c.idxKeySelected<f?c.idxKeySelected+1:f;var h=k[c.idxKeySelected];b.Util.css.setCSSAttributeSelector(h,"state","over");k[c.idxKeySelected].focus();c.isOver=true}if(j.keyCode==b.Enum.KEY_CODE.HOME){b.Event.preventDefault(j);c.idxKeySelected=0;var h=k[c.idxKeySelected];b.Util.css.setCSSAttributeSelector(h,"state","over");k[c.idxKeySelected].focus();c.isOver=true}if(j.keyCode==b.Enum.KEY_CODE.END){b.Event.preventDefault(j);c.idxKeySelected=c.items.length-1;var h=k[c.idxKeySelected];k[c.idxKeySelected].focus();b.Util.css.setCSSAttributeSelector(h,"state","over");c.isOver=true}if(c.displObj.hasSb()){c.scrollbarInst.curPos_=c.idxKeySelected;c.scrollbarInst.setThumbPosition(false)}if(j.keyCode==b.Enum.KEY_CODE.ENTER||j.keyCode==b.Enum.KEY_CODE.SPACE){b.Event.preventDefault(j);if(typeof(c.displayItems)=="undefined"||c.displayItems.length==0){return}var e=c.getCurrentFrameIndex();if(c.isOver){if(c.idxKeySelected==e){c.isOver=false;c.hidePanel()}else{c.setCurrentFrameIndex(c.idxKeySelected)}c.obj.focus()}}}}},{passive:false})}else{b.Logger.log(b.Logger.WARNING,'s7sdk.common.Button - Cannot initialize "%0" due to lack of button skins',this.id)}};b.set.TableOfContents.prototype.findMarginContainer=function(){var e=document.body;var c=this.obj;while(c!=null){c=c.parentNode;if(c!=null){if(typeof(c.s7base)=="object"&&b.common&&b.common.Container&&(c.s7base instanceof b.common.Container)){e=c;break}if(c==document.body){break}var d=b.Util.getStyle(c,"overflow");if(d=="hidden"){e=c;break}}}return e};b.set.TableOfContents.prototype.createDDdiv=function(){this.anchorObj=this.findMarginContainer();this.panelDD=document.createElement("div");this.panelDD.className="s7panel";this.panelDD.id=this.id+"_s7panel";this.obj.appendChild(this.panelDD);this.tooltipOverlay.setAttribute("aria-haspopup","true");this.itemdiv=document.createElement("div");this.itemdiv.style.position="relative";this.itemdiv.style.display="inline-block";this.itemdiv.style.cssFloat="left";this.itemdiv.id=this.id+"_items";this.itemdiv.setAttribute("role","menu");this.tooltipOverlay.setAttribute("aria-controls",this.itemdiv.id);this.panelDD.appendChild(this.itemdiv);this.scrollbarInst=new b.ScrollBar(this.panelDD.id,this.settings,this.panelDD.id+"_scrollBar");this.scrollbarInst.upButton_.toolTip_.setContent(this.getLocalizedText("TOOLTIP_SCROLL_UP"));this.scrollbarInst.downButton_.toolTip_.setContent(this.getLocalizedText("TOOLTIP_SCROLL_DOWN"));this.scrollbarInst.obj.setAttribute("tabindex",-1);this.scrollbarInst.upButton_.getObj().setAttribute("tabindex",-1);this.scrollbarInst.downButton_.getObj().setAttribute("tabindex",-1);var c=this;this.scrollbarInst.addEventListener(b.ScrollEvent.SCROLL_POSITION_EVENT,function(e){c.scrollbarInst.upButton_.getObj().setAttribute("tabindex",-1);c.scrollbarInst.downButton_.getObj().setAttribute("tabindex",-1);c.moveContent(e.s7event.position)},false);if(this.isTouch){this.scrollbarInst.obj.style.display="none"}var c=this;this.animate=setInterval(function(){c.enterFrame()},this.stepSize);if(this.isTouch){this.scrollFn=function(f){if(f.target.parentNode&&f.target.parentNode.parentNode&&f.target.parentNode.parentNode.id==c.panelDD.id){c.obj.focus()}};b.Event.addDOMListener(window,"touchstart",this.scrollFn,false);return}this.addEventListener("mouseover",function(f){if(typeof(c.displayItems)=="undefined"||c.displayItems.length==0){return}c.isOver=true;c.onTocOver()},false);this.addEventListener("mouseout",function(f){if(typeof(c.displayItems)=="undefined"||c.displayItems.length==0){return}c.isOver=false;c.onTocOut()},false);this.winMouseMoveHandler=function(f){c.lastMouse={x:b.Util.getEventPos(f).x,y:b.Util.getEventPos(f).y}};this.winMouseOutHandler=function(f){c.lastMouse={x:-1000000,y:-1000000}};var d=window;b.Event.addDOMListener(d,"mouseout",this.winMouseOutHandler,true);b.Event.addDOMListener(d,"mousemove",this.winMouseMoveHandler,true)};b.set.TableOfContents.prototype.onTocOver=function(){this.show()};b.set.TableOfContents.prototype.onTocOut=function(){if(this.state!=0){return}this.hide()};b.set.TableOfContents.prototype.show=function(){if(this.state!=0){return}this.updateDD();this.step=0;this.panelDD.style.height=0+"px";this.stepDuration=Math.ceil(this.displObj.shiftSize/(this.duration/this.stepSize));this.state=1;this.panelDD.style.display="";this.isShowig=true;this.tooltipOverlay.setAttribute("aria-expanded","true");this.itemdiv.setAttribute("aria-hidden","false")};b.set.TableOfContents.prototype.hide=function(){this.step=0;this.stepDuration=Math.ceil(this.displObj.shiftSize/(this.duration/this.stepSize));this.isShowig=false;this.tooltipOverlay.setAttribute("aria-expanded","false");this.itemdiv.setAttribute("aria-hidden","true")};b.set.TableOfContents.prototype.hidePanel=function(){if(this.state==0){return}this.isOver=false;this.state=2;this.hide()};b.set.TableOfContents.prototype.enterFrame=function(){switch(this.state){case 0:break;case 1:this.slideStep();break;case 2:this.slideStep();break;case 3:if(!this.isOver){if(!this.isTouch){if(this.checkMouse()){return}}this.waitToHide-=this.stepSize;if(this.waitToHide<0){this.hide();this.state=2}}break}};b.set.TableOfContents.prototype.slideStep=function(){var c=(this.isShowig?this.stepDuration*this.step:this.displObj.shiftSize-this.stepDuration*this.step);c=c<0?0:c;c=c>this.displObj.shiftSize?this.displObj.shiftSize:c;this.panelDD.style.height=c+"px";if(this.displObj.up){this.panelDD.style.top=this.displObj.top-c+"px"}if(this.panelDD.scrollTop!=this.nativePos){this.panelDD.scrollTop=this.nativePos}if((this.stepDuration*this.step>this.displObj.shiftSize)&&(c==0||c==this.displObj.shiftSize)){this.step=0;if(this.state==2){this.state=0;this.panelDD.style.display="none"}else{this.waitToHide=this.delaytohide;this.state=3}}this.step++};b.set.TableOfContents.prototype.checkMouse=function(){var e=b.Util.getObjPos(this.panelDD);var d=this.lastMouse.x-e.x;var c=this.lastMouse.y-e.y;return(d>0&&d<this.panelDD.offsetWidth&&c>0&&c<this.panelDD.offsetHeight)};b.set.TableOfContents.prototype.getAnchorDimension=function(){var d={"x":0,"y":0};if(this.anchorObj==document.body){if(typeof window.innerWidth!="undefined"){d.w=window.innerWidth;d.h=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){d.w=document.documentElement.clientWidth;d.h=document.documentElement.clientHeight}else{d.w=document.getElementsByTagName("body")[0].clientWidth;d.h=document.getElementsByTagName("body")[0].clientHeight}}}else{d=b.Util.getObjPos(this.anchorObj);d.w=this.anchorObj.clientWidth;d.h=this.anchorObj.clientHeight}var e=b.browser.detectScreen();var c=b.Util.getScrollXY();if((c.x+e.w)<(d.x+d.w)){d.w-=d.x+d.w-(c.x+e.w)}if((c.y+e.h)<(d.y+d.h)){d.h-=d.y+d.h-(c.y+e.h)}d.x=Math.max(c.x,d.x);d.y=Math.max(c.y,d.y);return d};b.set.TableOfContents.prototype.moveContent=function(d){var c=Math.round(d);if(this.isTouch){this.itemdiv.style.top="0px";this.nativePos=c*this.itemHeight}else{this.itemdiv.style.top=-c*this.itemHeight+"px"}};b.set.TableOfContents.prototype.createItem=function(f,e,g){var h=document.createElement("div");h.className="s7item";h.setAttribute("role","menuitem");h.setAttribute("tabindex",-1);var d=document.createElement("div");d.id=this.id+"_idx_"+e;d.className="s7index";d.innerHTML=g;h.appendChild(d);d.parnt=h;var c=document.createElement("div");c.id=this.id+"_lbl_"+e;c.className="s7label";c.innerHTML=f?f:"";c.parnt=h;h.appendChild(c);h.txtDiv=c;h.idx=e;h.idxDiv=d;h.id=this.id+"_item_"+h.idx;h.setAttribute("aria-label",g);var i=this;if(!this.isTouch){b.Event.addDOMListener(h,"mouseover",function(j){b.Util.css.setCSSAttributeSelector(h,"state","over");b.Util.css.setCSSAttributeSelector(d,"state","over");b.Util.css.setCSSAttributeSelector(c,"state","over");return},true);b.Event.addDOMListener(h,"mouseout",function(j){if(h.sel){b.Util.css.setCSSAttributeSelector(h,"state","selected");b.Util.css.setCSSAttributeSelector(d,"state","selected");b.Util.css.setCSSAttributeSelector(c,"state","selected")}else{b.Util.css.setCSSAttributeSelector(h,"state","");b.Util.css.setCSSAttributeSelector(d,"state","");b.Util.css.setCSSAttributeSelector(c,"state","")}return},true)}return h};b.set.TableOfContents.prototype.updateDD=function(){this.panelDD.style.visibility="hidden";if(this.panelDD.style.width=="0px"){this.refreshPanel();this.panelDD.style.visibility="hidden"}this.panelDD.style.display="";this.panelDD.style.left="0px";this.panelDD.style.top="0px";this.panelDD.style.height="100px";this.scrollbarInst.obj.style.visibility="hidden";this.scrollbarInst.obj.style.display="";var e=this.panelDD.getBoundingClientRect();this.panelDD.style.margin="0px";var h=this.panelDD.getBoundingClientRect();this.panelDD.style.margin="";var l=e.left-h.left+e.right-h.right;var k=e.top-h.top+e.bottom-h.bottom;if(!this.isTouch){this.scrollbarInst.obj.style.width=""}else{this.scrollbarInst.obj.style.visibility="hidden";this.scrollbarInst.obj.style.width="15px"}var j=this.panelDD.widMax;var c=this.panelDD.widMin;var d=this.getAnchorDimension();var i=b.Util.getObjPos(this.obj);var f={};var g=this.bearing.bearing=="fit-lateral";f.LRD=this.updateDirObj(Math.floor((d.y+d.h-i.y-(g?0:this.obj.offsetHeight)-10)/this.itemHeight),(i.x+(g?this.obj.offsetWidth:0)+j)<d.x+d.w,(i.x+(g?this.obj.offsetWidth:0)+c)<d.x+d.w);this.displObj=f.LRD;f.LRD.left=(g?this.obj.offsetWidth:0);f.LRD.top=(g?0:this.obj.offsetHeight);if(!f.LRD.fitMaxitem()){f.LRU=this.updateDirObj(Math.floor((i.y-d.y+(g?this.obj.offsetHeight:0)-10)/this.itemHeight),f.LRD.fitMax,f.LRD.fitMin);this.displObj=f.LRU;f.LRU.left=f.LRD.left;f.LRU.top=(g?this.obj.offsetHeight:0)-k;f.LRU.up=true;if(!f.LRU.fitMaxitem()){f.LLD=this.updateDirObj(f.LRD.auto,(i.x+(g?this.obj.offsetWidth:0)-j)>=0,(i.x+(g?this.obj.offsetWidth:0)-c)>=0);this.displObj=f.LLD;f.LLD.left=(g?0:this.obj.offsetWidth)-(this.displObj.hasSb()?j:c)-l;f.LLD.top=f.LRD.top;if(!f.LLD.fitMaxitem()){f.LLU=this.updateDirObj(f.LRU.auto,f.LLD.fitMax,f.LLD.fitMin);this.displObj=f.LLU;f.LLU.left=(g?0:this.obj.offsetWidth)-(this.displObj.hasSb()?j:c)-l;f.LLU.top=f.LRU.top;f.LLU.up=true;if(!f.LLU.fitMaxitem()){if(f.LRD.fithorizontal()){this.displObj=f.LRD.cou>=f.LRU.cou?f.LRD:f.LRU}else{if(f.LLD.fithorizontal()){this.displObj=f.LLD.cou>=f.LLU.cou?f.LLD:f.LLU}else{this.displObj=f.LRD.cou>=f.LRU.cou?f.LRD:f.LRU}}}}}}if(this.displObj.hasSb()){this.scrollbarInst.obj.style.display="";this.scrollbarInst.obj.style.visibility="";this.scrollbarInst.obj.style.width="";this.panelDD.style.width=this.panelDD.widMax+"px"}else{this.scrollbarInst.obj.style.display="none";this.panelDD.style.width=this.panelDD.widMin+"px"}this.panelDD.style.height=this.displObj.cou*this.itemHeight+"px";this.displObj.shiftSize=this.panelDD.offsetHeight;if(this.isTouch){this.scrollbarInst.obj.style.visibility="hidden";this.scrollbarInst.obj.style.width="15px"}this.scrollbarInst.setMaxScroll(this.displayItems.length-Math.floor(this.displObj.shiftSize/this.itemHeight));if(this.displObj.hasSb()){this.scrollbarInst.curPos_=this.frame>2?this.frame-2:this.frame;this.scrollbarInst.setThumbPosition(false)}this.panelDD.style.left=this.displObj.left+"px";this.panelDD.style.top=this.displObj.top+"px";this.panelDD.style.visibility="";this.panelDD.style.display="none"};b.set.TableOfContents.prototype.updateDirObj=function(f,c,e){var d={};d.auto=f;d.len=this.displayItems.length;d.maxitem=this.maxitem;if(this.maxitem==0){d.cou=Math.min(f,d.len);d.isAuto=true}else{d.cou=Math.min(f,this.maxitem,d.len)}d.hasSb=function(){return d.cou!=d.len};d.fitMax=c;d.fitMin=e;d.fithorizontal=function(){return(d.hasSb()?c:e)};d.fitMaxitem=function(){return(d.fithorizontal()&&(d.cou!=0))&&((d.maxitem==d.cou)||(d.cou==d.len))};return d};b.set.TableOfContents.prototype.onSelect=function(d){var c=(d.target||d.srcElement);this.setItemSelected(c.parnt?c.parnt:c)};b.set.TableOfContents.prototype.setItemSelected=function(c){var f=this.itemdiv.childNodes;for(var d=0;d<f.length;d++){if(f[d].sel){f[d].sel=false;b.Util.css.setCSSAttributeSelector(f[d],"state","")}}if(c==null){return}this.frame=c.idxItm;b.Util.css.setCSSAttributeSelector(c,"state","selected");c.sel=true;this.isOver=false;this.state=2;this.hide();this.idxKeySelected=this.frame;var e=this;this.timerItemSelected=setTimeout(function(){var g=new b.AssetEvent(b.event.AssetEvent.ITEM_SELECTED_EVENT,e.items[c.idx],c.idx,true);g.orientation=e.splitFrames.orientation;e.dispatchEvent(g);e.orientationChanged=false},0)};b.set.TableOfContents.prototype.onClickEv=function(){if(!this.items||this.items.length==0){this.changeState(0);return}if(!(this.state==0||this.state==3)){return}if(!this.isOver){this.show()}else{this.hide()}this.isOver=!this.isOver;this.waitToHide=-1};b.set.TableOfContents.prototype.cleanUp=function(){if(this.timerItemSelected){clearTimeout(this.timerItemSelected);this.timerItemSelected=null}if(this.animate){clearInterval(this.animate);this.animate=null}if(this.scrollFn){b.Event.removeDOMListener(window,"touchstart",this.scrollFn,false);delete this.scrollFn}var c=window;b.Event.removeDOMListener(c,"mouseout",this.winMouseOutHandler,true);b.Event.removeDOMListener(c,"mousemove",this.winMouseMoveHandler,true);this.winMouseMoveHandler=null;this.winMouseOutHandler=null;b.Util.removeTags(this.obj);this.obj.style.cssText=""};b.set.TableOfContents.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};b.set.TableOfContents.prototype.getCurrentFrameIndex=function(){return this.frame};b.set.TableOfContents.prototype.setCurrentFrameIndex=function(c){var f=this.itemdiv.childNodes;if(c<0){return}else{if(c>=this.items.length){c=this.items.length-1}}var e=null;for(var d=0;d<f.length;d++){if(f[d].idx==c||f[d].idx2==c){e=f[d];break}}if((e!=null)&&(this.frame==e.idxItm)){return}this.frame=this.scrollbarInst.curPos_=(e!=null?e.idxItm:-1);this.scrollbarInst.setThumbPosition(false);this.setItemSelected(e)};b.set.TableOfContents.prototype.setPortrait=function(){this.setSplitFrames(true)};b.set.TableOfContents.prototype.setLandscape=function(){this.setSplitFrames(false)};b.set.TableOfContents.prototype.setSplitFrames=function(e){this.panelDD.style.display="none";this.state=0;this.changeState(0);if(this.splitFrames.orientation==e){return e}if(this.mediaSet_.portrait==null){this.splitFrames.orientation=false;return false}this.orientationChanged=true;this.splitFrames.orientation=e;if(this.mediaSet_){this.items=e?this.mediaSet_.portrait.items:this.mediaSet_.landscape.items;var c=this.getCurrentFrameIndex();var d=e?this.mediaSet_.getPortraitIndex(c):this.mediaSet_.getLandscapeIndex(c);d=typeof(d)=="undefined"?-1:d;this.itemIndex_=d;this.refresh();this.setCurrentFrameIndex(d)}return e};b.set.TableOfContents.prototype.setMediaSet=function(e){var d=e;if(!(e instanceof b.OrientationSetDesc)){d=new b.OrientationSetDesc(d,null)}this.mediaSet_=d;this.currentAsset=d;var c=d&&d.landscape.items?d.landscape.items:[];if(c.length==0){this.obj.style.display="none";return}this.createIndexTexts(" - ");this.refresh()};b.set.TableOfContents.prototype.createIndexTexts=function(e){var d=this.mediaSet_.landscape.items;var c=this.mediaSet_.landscape.type!==b.ItemDescType.ECAT_SET;this.indexTextLandscape=[];var g=1;e=e?e:" - ";for(var f=0;f<d.length;f++){var h=d[f];this.indexTextLandscape[f]=g.toString();if(!(h.np||c)){g++;this.indexTextLandscape[f]+=e+g}g++}this.indexTextPortrait=[];if(this.mediaSet_.portrait){d=this.mediaSet_.portrait.items;for(var f=0;f<d.length;f++){this.indexTextPortrait[f]=(f+1).toString()}}};b.set.TableOfContents.prototype.refresh=function(){this.refreshPanel();this.updateDD()};b.set.TableOfContents.prototype.refreshPanel=function(){this.items=this.splitFrames.orientation?this.mediaSet_.portrait.items:this.mediaSet_.landscape.items;while(this.itemdiv.firstChild){this.itemdiv.removeChild(this.itemdiv.firstChild)}this.panelDD.style.visibility="hidden";this.panelDD.style.display="";this.displayItems=[];var h=0;var l=[];for(var f=0;f<this.items.length;f++){var m=this.items[f];var j={};j.itemIdx=f;j.indexText=this.splitFrames.orientation?this.indexTextPortrait[f]:this.indexTextLandscape[f];j.label=m.label;j.visible=(j.label!=""&&typeof(j.label)!="undefined")||this.showdefault;l.push(j)}if(!this.showdefault){var e=[];for(var f=0;f<l.length;f++){if(l[f].visible){e.push(l[f])}}l=e}if(l.length==0){while(this.itemdiv.firstChild){this.itemdiv.removeChild(node.firstChild)}this.obj.style.display="none";return}this.panelDD.style.top="-1000px";this.panelDD.style.left="-1000px";this.panelDD.style.width="1000px";this.panelDD.style.height="10px";this.scrollbarInst.obj.style.visibility="hidden";this.scrollbarInst.obj.style.display="";var m;this.itemdiv.style.display="none";for(var f=0;f<l.length;f++){this.displayItems.push(l[f]);m=this.createItem(l[f].label,l[f].itemIdx,l[f].indexText);m.idxItm=this.displayItems.length-1;var g=this;b.Event.addDOMListener(m,"click",function(i){g.onSelect(i)},true);this.itemdiv.appendChild(m)}this.itemdiv.style.display="";for(var f=0;f<l.length;f++){if(h<m.idxDiv.clientWidth){h=m.idxDiv.clientWidth}}var c=this.itemdiv.childNodes;this.itemdiv.style.display="none";for(var f=0;f<this.displayItems.length;f++){m=c[f];m.idxDiv.style.width=h+"px"}this.itemdiv.style.display="";this.itemHeight=m.offsetHeight;var d=this.itemdiv.getBoundingClientRect();var k=this.scrollbarInst.obj.getBoundingClientRect();this.panelDD.style.top="";this.panelDD.style.left="";this.panelDD.widMin=(d.right-d.left);this.panelDD.widMax=this.panelDD.widMin+(k.right-k.left)*(this.isTouch?0:1);this.panelDD.style.width=this.panelDD.widMax+"px"};b.set.TableOfContents.prototype.resize=function(c,d){if(c>0&&d>0){this.w=c;this.h=d;this.obj.style.height=this.h+"px";this.obj.style.width=this.w+"px";this.tooltipOverlay.style.width=this.h+"px";this.tooltipOverlay.style.height=this.w+"px"}b.UIComponent.prototype.resize.apply(this,[c,d])};b.set.TableOfContents.prototype.getCurrentAsset=function(){return typeof this.currentAsset=="undefined"?null:this.currentAsset};b.set.TableOfContents.prototype.setCurrentAsset=function(c){this.setMediaSet(c)};b.set.TableOfContents.prototype.setModifier=function(c){throw new Error("Trying to use setModifier on the Core class (TableOfContents) is unsupported! Please refer to SDK documentation on using setModifier.")};b.set.TableOfContents.prototype.addEventListener=function(e,d,c){this.superproto.addEventListener.apply(this,[e,d,c])};(function a(){var i=b.Util.css.createCssRuleText;var g=b.Util.css.createCssImgUrlText;var f=b.browser&&b.browser.name=="ie"&&b.browser.version.major>=10;var d=i(".s7tableofcontents",{"width":"28px","height":"28px","position":"relative","background-size":"contain","background-repeat":"no-repeat","background-position":"center","-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","touch-action":f?"none":""})+i(".s7tableofcontents[state='up']",{"background-image":g("tableofcontents_up.png")})+i(".s7tableofcontents[state='over']",{"background-image":g("tableofcontents_over.png")})+i(".s7tableofcontents[state='down']",{"background-image":g("tableofcontents_down.png")})+i(".s7tableofcontents[state='disabled']",{"background-image":g("tableofcontents_disabled.png")});var c=i(".s7tableofcontents .s7panel",{"margin":"5px","position":"absolute","background-color":"#dddddd","box-shadow":"2px 2px 3px #C0C0C0","display":"inline-block","z-index":"10000","overflow":"hidden"})+i(".s7tableofcontents .s7panel *, *:before, *:after",{"box-sizing":"content-box"})+(b.browser.device.name!="desktop"?i(".s7tableofcontents .s7panel",{"overflow":"scroll","-webkit-overflow-scrolling":"touch"}):"")+i(".s7tableofcontents .s7panel .s7item",{"cursor":"default","font-family":"Helvetica,sans-serif","font-size":"14px","height":"19px","-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","white-space":"nowrap","padding":"5px 10px","position":"relative !important"})+i(".s7tableofcontents .s7panel .s7index",{"float":"left","min-width":"40px","max-width":"70px","padding-right":"5px","position":"relative !important","pointer-events":"none","display":"inline-block"})+i(".s7tableofcontents .s7panel .s7label",{"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","overflow":"hidden","text-overflow":"ellipsis","min-width":"40px","max-width":"240px","text-align":"right","pointer-events":"none","position":"relative !important"})+i(".s7tableofcontents .s7panel .s7label",{"float":"right","display":"inline-block"})+i(".s7tableofcontents .s7panel .s7item[state='selected']",{"color":"rgb(255, 255, 255)","background-color":"rgb(178, 178, 178)"})+i(".s7tableofcontents .s7panel .s7item[state='over']",{"background-color":"rgb(102, 102, 102)","color":"rgb(224, 224, 224)"});var h={"display":"block","width":"20px","height":"20px"};var e=i(".s7tableofcontents .s7panel .s7scrollbar",{"background-color":"transparent","position":"absolute","width":"25px","right":"0px"})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollthumb",{"width":"20px","position":"absolute","backgroundRepeat":"no-repeat","backgroundPosition":"center","height":"30px"})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollthumb[state='up']",{"background-image":g("scrollbar_thumb_up.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollthumb[state='over']",{"background-image":g("scrollbar_thumb_over.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollthumb[state='down']",{"background-image":g("scrollbar_thumb_down.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollthumb[state='disabled']",{"background-image":g("scrollbar_thumb_disabled.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrolltrack",{"width":"20px","background-color":"rgb(178, 178, 178)"})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollupbutton",h)+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollupbutton[state='up']",{"background-image":g("scroll_up_up.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollupbutton[state='over']",{"background-image":g("scroll_up_over.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollupbutton[state='down']",{"background-image":g("scroll_up_down.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrollupbutton[state='disabled']",{"background-image":g("scroll_up_disabled.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrolldownbutton",h)+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrolldownbutton[state='up']",{"background-image":g("scroll_down_up.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrolldownbutton[state='over']",{"background-image":g("scroll_down_over.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrolldownbutton[state='down']",{"background-image":g("scroll_down_down.png")})+i(".s7tableofcontents .s7panel .s7scrollbar .s7scrolldownbutton[state='disabled']",{"background-image":g("scroll_down_disabled.png")});d=d+c+e;b.Util.css.addDefaultCSS(d,"TableOfContents")})()}})(s7getCurrentNameSpace());